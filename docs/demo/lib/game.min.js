/*! Built with IMPACT - impactjs.com */

(function(window){"use strict";Number.prototype.map=function(istart,istop,ostart,ostop){return ostart+(ostop-ostart)*((this-istart)/(istop-istart));};Number.prototype.limit=function(min,max){return Math.min(max,Math.max(min,this));};Number.prototype.round=function(precision){precision=Math.pow(10,precision||0);return Math.round(this*precision)/precision;};Number.prototype.floor=function(){return Math.floor(this);};Number.prototype.ceil=function(){return Math.ceil(this);};Number.prototype.toInt=function(){return(this|0);};Number.prototype.toRad=function(){return(this/180)*Math.PI;};Number.prototype.toDeg=function(){return(this*180)/Math.PI;};Array.prototype.erase=function(item){for(var i=this.length;i--;){if(this[i]===item){this.splice(i,1);}}
return this;};Array.prototype.random=function(){return this[Math.floor(Math.random()*this.length)];};Function.prototype.bind=Function.prototype.bind||function(oThis){if(typeof this!=="function"){throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");}
var aArgs=Array.prototype.slice.call(arguments,1),fToBind=this,fNOP=function(){},fBound=function(){return fToBind.apply((this instanceof fNOP&&oThis?this:oThis),aArgs.concat(Array.prototype.slice.call(arguments)));};fNOP.prototype=this.prototype;fBound.prototype=new fNOP();return fBound;};window.ig={game:null,debug:null,version:'1.23',global:window,modules:{},resources:[],ready:false,baked:false,nocache:'',ua:{},prefix:(window.ImpactPrefix||''),lib:'lib/',_current:null,_loadQueue:[],_waitForOnload:0,$:function(selector){return selector.charAt(0)=='#'?document.getElementById(selector.substr(1)):document.getElementsByTagName(selector);},$new:function(name){return document.createElement(name);},copy:function(object){if(!object||typeof(object)!='object'||object instanceof HTMLElement||object instanceof ig.Class){return object;}
else if(object instanceof Array){var c=[];for(var i=0,l=object.length;i<l;i++){c[i]=ig.copy(object[i]);}
return c;}
else{var c={};for(var i in object){c[i]=ig.copy(object[i]);}
return c;}},merge:function(original,extended){for(var key in extended){var ext=extended[key];if(typeof(ext)!='object'||ext instanceof HTMLElement||ext instanceof ig.Class||ext===null){original[key]=ext;}
else{if(!original[key]||typeof(original[key])!='object'){original[key]=(ext instanceof Array)?[]:{};}
ig.merge(original[key],ext);}}
return original;},ksort:function(obj){if(!obj||typeof(obj)!='object'){return[];}
var keys=[],values=[];for(var i in obj){keys.push(i);}
keys.sort();for(var i=0;i<keys.length;i++){values.push(obj[keys[i]]);}
return values;},setVendorAttribute:function(el,attr,val){var uc=attr.charAt(0).toUpperCase()+attr.substr(1);el[attr]=el['ms'+uc]=el['moz'+uc]=el['webkit'+uc]=el['o'+uc]=val;},getVendorAttribute:function(el,attr){var uc=attr.charAt(0).toUpperCase()+attr.substr(1);return el[attr]||el['ms'+uc]||el['moz'+uc]||el['webkit'+uc]||el['o'+uc];},normalizeVendorAttribute:function(el,attr){var prefixedVal=ig.getVendorAttribute(el,attr);if(!el[attr]&&prefixedVal){el[attr]=prefixedVal;}},getImagePixels:function(image,x,y,width,height){var canvas=ig.$new('canvas');canvas.width=image.width;canvas.height=image.height;var ctx=canvas.getContext('2d');ig.System.SCALE.CRISP(canvas,ctx);var ratio=ig.getVendorAttribute(ctx,'backingStorePixelRatio')||1;ig.normalizeVendorAttribute(ctx,'getImageDataHD');var realWidth=image.width/ratio,realHeight=image.height/ratio;canvas.width=Math.ceil(realWidth);canvas.height=Math.ceil(realHeight);ctx.drawImage(image,0,0,realWidth,realHeight);return(ratio===1)?ctx.getImageData(x,y,width,height):ctx.getImageDataHD(x,y,width,height);},module:function(name){if(ig._current){throw("Module '"+ig._current.name+"' defines nothing");}
if(ig.modules[name]&&ig.modules[name].body){throw("Module '"+name+"' is already defined");}
ig._current={name:name,requires:[],loaded:false,body:null};ig.modules[name]=ig._current;ig._loadQueue.push(ig._current);return ig;},requires:function(){ig._current.requires=Array.prototype.slice.call(arguments);return ig;},defines:function(body){ig._current.body=body;ig._current=null;ig._initDOMReady();},addResource:function(resource){ig.resources.push(resource);},setNocache:function(set){ig.nocache=set?'?'+Date.now():'';},log:function(){},assert:function(condition,msg){},show:function(name,number){},mark:function(msg,color){},_loadScript:function(name,requiredFrom){ig.modules[name]={name:name,requires:[],loaded:false,body:null};ig._waitForOnload++;var path=ig.prefix+ig.lib+name.replace(/\./g,'/')+'.js'+ig.nocache;var script=ig.$new('script');script.type='text/javascript';script.src=path;script.onload=function(){ig._waitForOnload--;ig._execModules();};script.onerror=function(){throw('Failed to load module '+name+' at '+path+' '+'required from '+requiredFrom);};ig.$('head')[0].appendChild(script);},_execModules:function(){var modulesLoaded=false;for(var i=0;i<ig._loadQueue.length;i++){var m=ig._loadQueue[i];var dependenciesLoaded=true;for(var j=0;j<m.requires.length;j++){var name=m.requires[j];if(!ig.modules[name]){dependenciesLoaded=false;ig._loadScript(name,m.name);}
else if(!ig.modules[name].loaded){dependenciesLoaded=false;}}
if(dependenciesLoaded&&m.body){ig._loadQueue.splice(i,1);m.loaded=true;m.body();modulesLoaded=true;i--;}}
if(modulesLoaded){ig._execModules();}
else if(!ig.baked&&ig._waitForOnload==0&&ig._loadQueue.length!=0){var unresolved=[];for(var i=0;i<ig._loadQueue.length;i++){var unloaded=[];var requires=ig._loadQueue[i].requires;for(var j=0;j<requires.length;j++){var m=ig.modules[requires[j]];if(!m||!m.loaded){unloaded.push(requires[j]);}}
unresolved.push(ig._loadQueue[i].name+' (requires: '+unloaded.join(', ')+')');}
throw("Unresolved (or circular?) dependencies. "+"Most likely there's a name/path mismatch for one of the listed modules "+"or a previous syntax error prevents a module from loading:\n"+
unresolved.join('\n'));}},_DOMReady:function(){if(!ig.modules['dom.ready'].loaded){if(!document.body){return setTimeout(ig._DOMReady,13);}
ig.modules['dom.ready'].loaded=true;ig._waitForOnload--;ig._execModules();}
return 0;},_boot:function(){if(document.location.href.match(/\?nocache/)){ig.setNocache(true);}
ig.ua.pixelRatio=window.devicePixelRatio||1;ig.ua.viewport={width:window.innerWidth,height:window.innerHeight};ig.ua.screen={width:window.screen.availWidth*ig.ua.pixelRatio,height:window.screen.availHeight*ig.ua.pixelRatio};ig.ua.iPhone=/iPhone/i.test(navigator.userAgent);ig.ua.iPhone4=(ig.ua.iPhone&&ig.ua.pixelRatio==2);ig.ua.iPad=/iPad/i.test(navigator.userAgent);ig.ua.android=/android/i.test(navigator.userAgent);ig.ua.winPhone=/Windows Phone/i.test(navigator.userAgent);ig.ua.iOS=ig.ua.iPhone||ig.ua.iPad;ig.ua.mobile=ig.ua.iOS||ig.ua.android||ig.ua.winPhone||/mobile/i.test(navigator.userAgent);ig.ua.touchDevice=(('ontouchstart'in window)||(window.navigator.msMaxTouchPoints));},_initDOMReady:function(){if(ig.modules['dom.ready']){ig._execModules();return;}
ig._boot();ig.modules['dom.ready']={requires:[],loaded:false,body:null};ig._waitForOnload++;if(document.readyState==='complete'){ig._DOMReady();}
else{document.addEventListener('DOMContentLoaded',ig._DOMReady,false);window.addEventListener('load',ig._DOMReady,false);}}};ig.normalizeVendorAttribute(window,'requestAnimationFrame');if(window.requestAnimationFrame){var next=1,anims={};window.ig.setAnimation=function(callback,element){var current=next++;anims[current]=true;var animate=function(){if(!anims[current]){return;}
window.requestAnimationFrame(animate,element);callback();};window.requestAnimationFrame(animate,element);return current;};window.ig.clearAnimation=function(id){delete anims[id];};}
else{window.ig.setAnimation=function(callback,element){return window.setInterval(callback,1000/60);};window.ig.clearAnimation=function(id){window.clearInterval(id);};}
var ProtoClass=function(){};var fnTest=/xyz/.test(function(){xyz;})?/\bparent\b/:/.*/;window.ig.Class=function(){};var inject=function(prop){var proto=this.prototype;var parent={};for(var name in prop){if(typeof(prop[name])=="function"&&typeof(proto[name])=="function"&&fnTest.test(prop[name])){parent[name]=proto[name];proto[name]=(function(name,fn){return function(){var tmp=this.parent;this.parent=parent[name];var ret=fn.apply(this,arguments);this.parent=tmp;return ret;};})(name,prop[name]);}
else{proto[name]=prop[name];}}};window.ig.Class.extend=function(prop){var parent=this.prototype;ProtoClass.prototype=this.prototype;var prototype=new ProtoClass();for(var name in prop){if(typeof(prop[name])=="function"&&typeof(parent[name])=="function"&&fnTest.test(prop[name])){prototype[name]=(function(name,fn){return function(){var tmp=this.parent;this.parent=parent[name];var ret=fn.apply(this,arguments);this.parent=tmp;return ret;};})(name,prop[name]);}
else{prototype[name]=prop[name];}}
function Class(){if(this.staticInstantiate){var obj=this.staticInstantiate.apply(this,arguments);if(obj){return obj;}}
for(var ip=0,plen=this.__copiedProp__.length;ip<plen;ip++){var p=this.__copiedProp__[ip];if(this[p]instanceof Array){var arr=this[p],c=[];for(var iip=0,len=arr.length;iip<len;iip++){var val=arr[iip];if(typeof(val)=='object'){c[iip]=ig.copy(val)}else{c[iip]=val}}
this[p]=c;}else{var obj=this[p],o={};for(var sp in obj){var val=obj[sp];if(typeof(val)=='object'){o[sp]=ig.copy(val)}
else{o[sp]=val}}
this[p]=o;}}
if(this.init){this.init.apply(this,arguments);}
return this;}
Class.prototype=prototype;Class.prototype.constructor=Class;Class.extend=window.ig.Class.extend;Class.inject=inject;var copiedProp=[];for(var p in prototype){var value=prototype[p];if((value)&&(typeof(value)=='object')&&(!(value instanceof HTMLElement))&&(!(value instanceof ig.Class))){copiedProp.push(p);}}
Object.defineProperty(Class.prototype,'__copiedProp__',{value:copiedProp,configurable:true,writable:true});return Class;};if(window.ImpactMixin){ig.merge(ig,window.ImpactMixin);}})(window);

// lib/impact/image.js
ig.baked=true;ig.module('impact.image').defines(function(){"use strict";ig.Image=ig.Class.extend({data:null,width:0,height:0,loaded:false,failed:false,loadCallback:null,path:'',staticInstantiate:function(path){return ig.Image.cache[path]||null;},init:function(path){this.path=path;this.load();},load:function(loadCallback){if(this.loaded){if(loadCallback){loadCallback(this.path,true);}
return;}
else if(!this.loaded&&ig.ready){this.loadCallback=loadCallback||null;this.data=new Image();this.data.onload=this.onload.bind(this);this.data.onerror=this.onerror.bind(this);this.data.src=ig.prefix+this.path+ig.nocache;}
else{ig.addResource(this);}
ig.Image.cache[this.path]=this;},reload:function(){this.loaded=false;this.data=new Image();this.data.onload=this.onload.bind(this);this.data.src=this.path+'?'+Date.now();},onload:function(event){this.width=this.data.width;this.height=this.data.height;this.loaded=true;if(ig.system.scale!=1){this.resize(ig.system.scale);}
if(this.loadCallback){this.loadCallback(this.path,true);}},onerror:function(event){this.failed=true;if(this.loadCallback){this.loadCallback(this.path,false);}},resize:function(scale){var origPixels=ig.getImagePixels(this.data,0,0,this.width,this.height);var widthScaled=this.width*scale;var heightScaled=this.height*scale;var scaled=ig.$new('canvas');scaled.width=widthScaled;scaled.height=heightScaled;var scaledCtx=scaled.getContext('2d');var scaledPixels=scaledCtx.getImageData(0,0,widthScaled,heightScaled);for(var y=0;y<heightScaled;y++){for(var x=0;x<widthScaled;x++){var index=(Math.floor(y/scale)*this.width+Math.floor(x/scale))*4;var indexScaled=(y*widthScaled+x)*4;scaledPixels.data[indexScaled]=origPixels.data[index];scaledPixels.data[indexScaled+1]=origPixels.data[index+1];scaledPixels.data[indexScaled+2]=origPixels.data[index+2];scaledPixels.data[indexScaled+3]=origPixels.data[index+3];}}
scaledCtx.putImageData(scaledPixels,0,0);this.data=scaled;},draw:function(targetX,targetY,sourceX,sourceY,width,height){if(!this.loaded){return;}
var scale=ig.system.scale;sourceX=sourceX?sourceX*scale:0;sourceY=sourceY?sourceY*scale:0;width=(width?width:this.width)*scale;height=(height?height:this.height)*scale;ig.system.context.drawImage(this.data,sourceX,sourceY,width,height,ig.system.getDrawPos(targetX),ig.system.getDrawPos(targetY),width,height);ig.Image.drawCount++;},drawTile:function(targetX,targetY,tile,tileWidth,tileHeight,flipX,flipY){tileHeight=tileHeight?tileHeight:tileWidth;if(!this.loaded||tileWidth>this.width||tileHeight>this.height){return;}
var scale=ig.system.scale;var tileWidthScaled=Math.floor(tileWidth*scale);var tileHeightScaled=Math.floor(tileHeight*scale);var scaleX=flipX?-1:1;var scaleY=flipY?-1:1;if(flipX||flipY){ig.system.context.save();ig.system.context.scale(scaleX,scaleY);}
ig.system.context.drawImage(this.data,(Math.floor(tile*tileWidth)%this.width)*scale,(Math.floor(tile*tileWidth/this.width)*tileHeight)*scale,tileWidthScaled,tileHeightScaled,ig.system.getDrawPos(targetX)*scaleX-(flipX?tileWidthScaled:0),ig.system.getDrawPos(targetY)*scaleY-(flipY?tileHeightScaled:0),tileWidthScaled,tileHeightScaled);if(flipX||flipY){ig.system.context.restore();}
ig.Image.drawCount++;}});ig.Image.drawCount=0;ig.Image.cache={};ig.Image.reloadCache=function(){for(var path in ig.Image.cache){ig.Image.cache[path].reload();}};});

// lib/impact/font.js
ig.baked=true;ig.module('impact.font').requires('impact.image').defines(function(){"use strict";ig.Font=ig.Image.extend({widthMap:[],indices:[],firstChar:32,alpha:1,letterSpacing:1,lineSpacing:0,onload:function(ev){this._loadMetrics(this.data);this.parent(ev);},widthForString:function(text){if(text.indexOf('\n')!==-1){var lines=text.split('\n');var width=0;for(var i=0;i<lines.length;i++){width=Math.max(width,this._widthForLine(lines[i]));}
return width;}
else{return this._widthForLine(text);}},_widthForLine:function(text){var width=0;for(var i=0;i<text.length;i++){width+=this.widthMap[text.charCodeAt(i)-this.firstChar]+this.letterSpacing;}
return width;},heightForString:function(text){return text.split('\n').length*(this.height+this.lineSpacing);},draw:function(text,x,y,align){if(typeof(text)!='string'){text=text.toString();}
if(text.indexOf('\n')!==-1){var lines=text.split('\n');var lineHeight=this.height+this.lineSpacing;for(var i=0;i<lines.length;i++){this.draw(lines[i],x,y+i*lineHeight,align);}
return;}
if(align==ig.Font.ALIGN.RIGHT||align==ig.Font.ALIGN.CENTER){var width=this._widthForLine(text);x-=align==ig.Font.ALIGN.CENTER?width/2:width;}
if(this.alpha!==1){ig.system.context.globalAlpha=this.alpha;}
for(var i=0;i<text.length;i++){var c=text.charCodeAt(i);x+=this._drawChar(c-this.firstChar,x,y);}
if(this.alpha!==1){ig.system.context.globalAlpha=1;}
ig.Image.drawCount+=text.length;},_drawChar:function(c,targetX,targetY){if(!this.loaded||c<0||c>=this.indices.length){return 0;}
var scale=ig.system.scale;var charX=this.indices[c]*scale;var charY=0;var charWidth=this.widthMap[c]*scale;var charHeight=(this.height-2)*scale;ig.system.context.drawImage(this.data,charX,charY,charWidth,charHeight,ig.system.getDrawPos(targetX),ig.system.getDrawPos(targetY),charWidth,charHeight);return this.widthMap[c]+this.letterSpacing;},_loadMetrics:function(image){this.height=image.height-1;this.widthMap=[];this.indices=[];var px=ig.getImagePixels(image,0,image.height-1,image.width,1);var currentChar=0;var currentWidth=0;for(var x=0;x<image.width;x++){var index=x*4+3;if(px.data[index]>127){currentWidth++;}
else if(px.data[index]<128&&currentWidth){this.widthMap.push(currentWidth);this.indices.push(x-currentWidth);currentChar++;currentWidth=0;}}
this.widthMap.push(currentWidth);this.indices.push(x-currentWidth);}});ig.Font.ALIGN={LEFT:0,RIGHT:1,CENTER:2};});

// lib/impact/sound.js
ig.baked=true;ig.module('impact.sound').defines(function(){"use strict";ig.SoundManager=ig.Class.extend({clips:{},volume:1,format:null,init:function(){if(!ig.Sound.enabled||!window.Audio){ig.Sound.enabled=false;return;}
var probe=new Audio();for(var i=0;i<ig.Sound.use.length;i++){var format=ig.Sound.use[i];if(probe.canPlayType(format.mime)){this.format=format;break;}}
if(!this.format){ig.Sound.enabled=false;}},load:function(path,multiChannel,loadCallback){var realPath=ig.prefix+path.replace(/[^\.]+$/,this.format.ext)+ig.nocache;if(this.clips[path]){if(multiChannel&&this.clips[path].length<ig.Sound.channels){for(var i=this.clips[path].length;i<ig.Sound.channels;i++){var a=new Audio(realPath);a.load();this.clips[path].push(a);}}
return this.clips[path][0];}
var clip=new Audio(realPath);if(loadCallback){clip.addEventListener('canplaythrough',function cb(ev){clip.removeEventListener('canplaythrough',cb,false);loadCallback(path,true,ev);},false);clip.addEventListener('error',function(ev){loadCallback(path,false,ev);},false);}
clip.preload='auto';clip.load();this.clips[path]=[clip];if(multiChannel){for(var i=1;i<ig.Sound.channels;i++){var a=new Audio(realPath);a.load();this.clips[path].push(a);}}
return clip;},get:function(path){var channels=this.clips[path];for(var i=0,clip;clip=channels[i++];){if(clip.paused||clip.ended){if(clip.ended){clip.currentTime=0;}
return clip;}}
channels[0].pause();channels[0].currentTime=0;return channels[0];}});ig.Music=ig.Class.extend({tracks:[],namedTracks:{},currentTrack:null,currentIndex:0,random:false,_volume:1,_loop:false,_fadeInterval:0,_fadeTimer:null,_endedCallbackBound:null,init:function(){this._endedCallbackBound=this._endedCallback.bind(this);if(Object.defineProperty){Object.defineProperty(this,"volume",{get:this.getVolume.bind(this),set:this.setVolume.bind(this)});Object.defineProperty(this,"loop",{get:this.getLooping.bind(this),set:this.setLooping.bind(this)});}
else if(this.__defineGetter__){this.__defineGetter__('volume',this.getVolume.bind(this));this.__defineSetter__('volume',this.setVolume.bind(this));this.__defineGetter__('loop',this.getLooping.bind(this));this.__defineSetter__('loop',this.setLooping.bind(this));}},add:function(music,name){if(!ig.Sound.enabled){return;}
var path=music instanceof ig.Sound?music.path:music;var track=ig.soundManager.load(path,false);track.loop=this._loop;track.volume=this._volume;track.addEventListener('ended',this._endedCallbackBound,false);this.tracks.push(track);if(name){this.namedTracks[name]=track;}
if(!this.currentTrack){this.currentTrack=track;}},next:function(){if(!this.tracks.length){return;}
this.stop();this.currentIndex=this.random?Math.floor(Math.random()*this.tracks.length):(this.currentIndex+1)%this.tracks.length;this.currentTrack=this.tracks[this.currentIndex];this.play();},pause:function(){if(!this.currentTrack){return;}
this.currentTrack.pause();},stop:function(){if(!this.currentTrack){return;}
this.currentTrack.pause();this.currentTrack.currentTime=0;},play:function(name){if(name&&this.namedTracks[name]){var newTrack=this.namedTracks[name];if(newTrack!=this.currentTrack){this.stop();this.currentTrack=newTrack;}}
else if(!this.currentTrack){return;}
this.currentTrack.play();},getLooping:function(){return this._loop;},setLooping:function(l){this._loop=l;for(var i in this.tracks){this.tracks[i].loop=l;}},getVolume:function(){return this._volume;},setVolume:function(v){this._volume=v.limit(0,1);for(var i in this.tracks){this.tracks[i].volume=this._volume;}},fadeOut:function(time){if(!this.currentTrack){return;}
clearInterval(this._fadeInterval);this.fadeTimer=new ig.Timer(time);this._fadeInterval=setInterval(this._fadeStep.bind(this),50);},_fadeStep:function(){var v=this.fadeTimer.delta().map(-this.fadeTimer.target,0,1,0).limit(0,1)*this._volume;if(v<=0.01){this.stop();this.currentTrack.volume=this._volume;clearInterval(this._fadeInterval);}
else{this.currentTrack.volume=v;}},_endedCallback:function(){if(this._loop){this.play();}
else{this.next();}}});ig.Sound=ig.Class.extend({path:'',volume:1,currentClip:null,multiChannel:true,init:function(path,multiChannel){this.path=path;this.multiChannel=(multiChannel!==false);this.load();},load:function(loadCallback){if(!ig.Sound.enabled){if(loadCallback){loadCallback(this.path,true);}
return;}
if(ig.ready){ig.soundManager.load(this.path,this.multiChannel,loadCallback);}
else{ig.addResource(this);}},play:function(){if(!ig.Sound.enabled){return;}
this.currentClip=ig.soundManager.get(this.path);this.currentClip.volume=ig.soundManager.volume*this.volume;this.currentClip.play();},stop:function(){if(this.currentClip){this.currentClip.pause();this.currentClip.currentTime=0;}}});ig.Sound.FORMAT={MP3:{ext:'mp3',mime:'audio/mpeg'},M4A:{ext:'m4a',mime:'audio/mp4; codecs=mp4a'},OGG:{ext:'ogg',mime:'audio/ogg; codecs=vorbis'},WEBM:{ext:'webm',mime:'audio/webm; codecs=vorbis'},CAF:{ext:'caf',mime:'audio/x-caf'}};ig.Sound.use=[ig.Sound.FORMAT.OGG,ig.Sound.FORMAT.MP3];ig.Sound.channels=4;ig.Sound.enabled=true;});

// lib/impact/loader.js
ig.baked=true;ig.module('impact.loader').requires('impact.image','impact.font','impact.sound').defines(function(){"use strict";ig.Loader=ig.Class.extend({resources:[],gameClass:null,status:0,done:false,_unloaded:[],_drawStatus:0,_intervalId:0,_loadCallbackBound:null,init:function(gameClass,resources){this.gameClass=gameClass;this.resources=resources;this._loadCallbackBound=this._loadCallback.bind(this);for(var i=0;i<this.resources.length;i++){this._unloaded.push(this.resources[i].path);}},load:function(){ig.system.clear('#000');if(!this.resources.length){this.end();return;}
for(var i=0;i<this.resources.length;i++){this.loadResource(this.resources[i]);}
this._intervalId=setInterval(this.draw.bind(this),16);},loadResource:function(res){res.load(this._loadCallbackBound);},end:function(){if(this.done){return;}
this.done=true;clearInterval(this._intervalId);ig.system.setGame(this.gameClass);},draw:function(){this._drawStatus+=(this.status-this._drawStatus)/5;var s=ig.system.scale;var w=ig.system.width*0.6;var h=ig.system.height*0.1;var x=ig.system.width*0.5-w/2;var y=ig.system.height*0.5-h/2;ig.system.context.fillStyle='#000';ig.system.context.fillRect(0,0,480,320);ig.system.context.fillStyle='#fff';ig.system.context.fillRect(x*s,y*s,w*s,h*s);ig.system.context.fillStyle='#000';ig.system.context.fillRect(x*s+s,y*s+s,w*s-s-s,h*s-s-s);ig.system.context.fillStyle='#fff';ig.system.context.fillRect(x*s,y*s,w*s*this._drawStatus,h*s);},_loadCallback:function(path,status){if(status){this._unloaded.erase(path);}
else{throw('Failed to load resource: '+path);}
this.status=1-(this._unloaded.length/this.resources.length);if(this._unloaded.length==0){setTimeout(this.end.bind(this),250);}}});});

// lib/impact/timer.js
ig.baked=true;ig.module('impact.timer').defines(function(){"use strict";ig.Timer=ig.Class.extend({target:0,base:0,last:0,pausedAt:0,init:function(seconds){this.base=ig.Timer.time;this.last=ig.Timer.time;this.target=seconds||0;},set:function(seconds){this.target=seconds||0;this.base=ig.Timer.time;this.pausedAt=0;},reset:function(){this.base=ig.Timer.time;this.pausedAt=0;},tick:function(){var delta=ig.Timer.time-this.last;this.last=ig.Timer.time;return(this.pausedAt?0:delta);},delta:function(){return(this.pausedAt||ig.Timer.time)-this.base-this.target;},pause:function(){if(!this.pausedAt){this.pausedAt=ig.Timer.time;}},unpause:function(){if(this.pausedAt){this.base+=ig.Timer.time-this.pausedAt;this.pausedAt=0;}}});ig.Timer._last=0;ig.Timer.time=Number.MIN_VALUE;ig.Timer.timeScale=1;ig.Timer.maxStep=0.05;ig.Timer.step=function(){var current=Date.now();var delta=(current-ig.Timer._last)/1000;ig.Timer.time+=Math.min(delta,ig.Timer.maxStep)*ig.Timer.timeScale;ig.Timer._last=current;};});

// lib/impact/system.js
ig.baked=true;ig.module('impact.system').requires('impact.timer','impact.image').defines(function(){"use strict";ig.System=ig.Class.extend({fps:30,width:320,height:240,realWidth:320,realHeight:240,scale:1,tick:0,animationId:0,newGameClass:null,running:false,delegate:null,clock:null,canvas:null,context:null,init:function(canvasId,fps,width,height,scale){this.fps=fps;this.clock=new ig.Timer();this.canvas=ig.$(canvasId);this.resize(width,height,scale);this.context=this.canvas.getContext('2d');this.getDrawPos=ig.System.drawMode;if(this.scale!=1){ig.System.scaleMode=ig.System.SCALE.CRISP;}
ig.System.scaleMode(this.canvas,this.context);},resize:function(width,height,scale){this.width=width;this.height=height;this.scale=scale||this.scale;this.realWidth=this.width*this.scale;this.realHeight=this.height*this.scale;this.canvas.width=this.realWidth;this.canvas.height=this.realHeight;},setGame:function(gameClass){if(this.running){this.newGameClass=gameClass;}
else{this.setGameNow(gameClass);}},setGameNow:function(gameClass){ig.game=new(gameClass)();ig.system.setDelegate(ig.game);},setDelegate:function(object){if(typeof(object.run)=='function'){this.delegate=object;this.startRunLoop();}else{throw('System.setDelegate: No run() function in object');}},stopRunLoop:function(){ig.clearAnimation(this.animationId);this.running=false;},startRunLoop:function(){this.stopRunLoop();this.animationId=ig.setAnimation(this.run.bind(this),this.canvas);this.running=true;},clear:function(color){this.context.fillStyle=color;this.context.fillRect(0,0,this.realWidth,this.realHeight);},run:function(){ig.Timer.step();this.tick=this.clock.tick();this.delegate.run();ig.input.clearPressed();if(this.newGameClass){this.setGameNow(this.newGameClass);this.newGameClass=null;}},getDrawPos:null});ig.System.DRAW={AUTHENTIC:function(p){return Math.round(p)*this.scale;},SMOOTH:function(p){return Math.round(p*this.scale);},SUBPIXEL:function(p){return p*this.scale;}};ig.System.drawMode=ig.System.DRAW.SMOOTH;ig.System.SCALE={CRISP:function(canvas,context){ig.setVendorAttribute(context,'imageSmoothingEnabled',false);canvas.style.imageRendering='-moz-crisp-edges';canvas.style.imageRendering='-o-crisp-edges';canvas.style.imageRendering='-webkit-optimize-contrast';canvas.style.imageRendering='crisp-edges';canvas.style.msInterpolationMode='nearest-neighbor';},SMOOTH:function(canvas,context){ig.setVendorAttribute(context,'imageSmoothingEnabled',true);canvas.style.imageRendering='';canvas.style.msInterpolationMode='';}};ig.System.scaleMode=ig.System.SCALE.SMOOTH;});

// lib/impact/input.js
ig.baked=true;ig.module('impact.input').defines(function(){"use strict";ig.KEY={'MOUSE1':-1,'MOUSE2':-3,'MWHEEL_UP':-4,'MWHEEL_DOWN':-5,'BACKSPACE':8,'TAB':9,'ENTER':13,'PAUSE':19,'CAPS':20,'ESC':27,'SPACE':32,'PAGE_UP':33,'PAGE_DOWN':34,'END':35,'HOME':36,'LEFT_ARROW':37,'UP_ARROW':38,'RIGHT_ARROW':39,'DOWN_ARROW':40,'INSERT':45,'DELETE':46,'_0':48,'_1':49,'_2':50,'_3':51,'_4':52,'_5':53,'_6':54,'_7':55,'_8':56,'_9':57,'A':65,'B':66,'C':67,'D':68,'E':69,'F':70,'G':71,'H':72,'I':73,'J':74,'K':75,'L':76,'M':77,'N':78,'O':79,'P':80,'Q':81,'R':82,'S':83,'T':84,'U':85,'V':86,'W':87,'X':88,'Y':89,'Z':90,'NUMPAD_0':96,'NUMPAD_1':97,'NUMPAD_2':98,'NUMPAD_3':99,'NUMPAD_4':100,'NUMPAD_5':101,'NUMPAD_6':102,'NUMPAD_7':103,'NUMPAD_8':104,'NUMPAD_9':105,'MULTIPLY':106,'ADD':107,'SUBSTRACT':109,'DECIMAL':110,'DIVIDE':111,'F1':112,'F2':113,'F3':114,'F4':115,'F5':116,'F6':117,'F7':118,'F8':119,'F9':120,'F10':121,'F11':122,'F12':123,'SHIFT':16,'CTRL':17,'ALT':18,'PLUS':187,'COMMA':188,'MINUS':189,'PERIOD':190};ig.Input=ig.Class.extend({bindings:{},actions:{},presses:{},locks:{},delayedKeyup:{},isUsingMouse:false,isUsingKeyboard:false,isUsingAccelerometer:false,mouse:{x:0,y:0},accel:{x:0,y:0,z:0},initMouse:function(){if(this.isUsingMouse){return;}
this.isUsingMouse=true;var mouseWheelBound=this.mousewheel.bind(this);ig.system.canvas.addEventListener('mousewheel',mouseWheelBound,false);ig.system.canvas.addEventListener('DOMMouseScroll',mouseWheelBound,false);ig.system.canvas.addEventListener('contextmenu',this.contextmenu.bind(this),false);ig.system.canvas.addEventListener('mousedown',this.keydown.bind(this),false);ig.system.canvas.addEventListener('mouseup',this.keyup.bind(this),false);ig.system.canvas.addEventListener('mousemove',this.mousemove.bind(this),false);if(ig.ua.touchDevice){ig.system.canvas.addEventListener('touchstart',this.keydown.bind(this),false);ig.system.canvas.addEventListener('touchend',this.keyup.bind(this),false);ig.system.canvas.addEventListener('touchmove',this.mousemove.bind(this),false);ig.system.canvas.addEventListener('MSPointerDown',this.keydown.bind(this),false);ig.system.canvas.addEventListener('MSPointerUp',this.keyup.bind(this),false);ig.system.canvas.addEventListener('MSPointerMove',this.mousemove.bind(this),false);ig.system.canvas.style.msTouchAction='none';}},initKeyboard:function(){if(this.isUsingKeyboard){return;}
this.isUsingKeyboard=true;window.addEventListener('keydown',this.keydown.bind(this),false);window.addEventListener('keyup',this.keyup.bind(this),false);},initAccelerometer:function(){if(this.isUsingAccelerometer){return;}
window.addEventListener('devicemotion',this.devicemotion.bind(this),false);},mousewheel:function(event){var delta=event.wheelDelta?event.wheelDelta:(event.detail*-1);var code=delta>0?ig.KEY.MWHEEL_UP:ig.KEY.MWHEEL_DOWN;var action=this.bindings[code];if(action){this.actions[action]=true;this.presses[action]=true;this.delayedKeyup[action]=true;event.stopPropagation();event.preventDefault();}},mousemove:function(event){var internalWidth=parseInt(ig.system.canvas.offsetWidth)||ig.system.realWidth;var scale=ig.system.scale*(internalWidth/ig.system.realWidth);var pos={left:0,top:0};if(ig.system.canvas.getBoundingClientRect){pos=ig.system.canvas.getBoundingClientRect();}
var ev=event.touches?event.touches[0]:event;this.mouse.x=(ev.clientX-pos.left)/scale;this.mouse.y=(ev.clientY-pos.top)/scale;},contextmenu:function(event){if(this.bindings[ig.KEY.MOUSE2]){event.stopPropagation();event.preventDefault();}},keydown:function(event){var tag=event.target.tagName;if(tag=='INPUT'||tag=='TEXTAREA'){return;}
var code=event.type=='keydown'?event.keyCode:(event.button==2?ig.KEY.MOUSE2:ig.KEY.MOUSE1);if(event.type=='touchstart'||event.type=='mousedown'){this.mousemove(event);}
var action=this.bindings[code];if(action){this.actions[action]=true;if(!this.locks[action]){this.presses[action]=true;this.locks[action]=true;}
event.stopPropagation();event.preventDefault();}},keyup:function(event){var tag=event.target.tagName;if(tag=='INPUT'||tag=='TEXTAREA'){return;}
var code=event.type=='keyup'?event.keyCode:(event.button==2?ig.KEY.MOUSE2:ig.KEY.MOUSE1);var action=this.bindings[code];if(action){this.delayedKeyup[action]=true;event.stopPropagation();event.preventDefault();}},devicemotion:function(event){this.accel=event.accelerationIncludingGravity;},bind:function(key,action){if(key<0){this.initMouse();}
else if(key>0){this.initKeyboard();}
this.bindings[key]=action;},bindTouch:function(selector,action){var element=ig.$(selector);var that=this;element.addEventListener('touchstart',function(ev){that.touchStart(ev,action);},false);element.addEventListener('touchend',function(ev){that.touchEnd(ev,action);},false);element.addEventListener('MSPointerDown',function(ev){that.touchStart(ev,action);},false);element.addEventListener('MSPointerUp',function(ev){that.touchEnd(ev,action);},false);},unbind:function(key){var action=this.bindings[key];this.delayedKeyup[action]=true;this.bindings[key]=null;},unbindAll:function(){this.bindings={};this.actions={};this.presses={};this.locks={};this.delayedKeyup={};},state:function(action){return this.actions[action];},pressed:function(action){return this.presses[action];},released:function(action){return!!this.delayedKeyup[action];},clearPressed:function(){for(var action in this.delayedKeyup){this.actions[action]=false;this.locks[action]=false;}
this.delayedKeyup={};this.presses={};},touchStart:function(event,action){this.actions[action]=true;this.presses[action]=true;event.stopPropagation();event.preventDefault();return false;},touchEnd:function(event,action){this.delayedKeyup[action]=true;event.stopPropagation();event.preventDefault();return false;}});});

// lib/impact/impact.js
ig.baked=true;ig.module('impact.impact').requires('dom.ready','impact.loader','impact.system','impact.input','impact.sound').defines(function(){"use strict";ig.main=function(canvasId,gameClass,fps,width,height,scale,loaderClass){ig.system=new ig.System(canvasId,fps,width,height,scale||1);ig.input=new ig.Input();ig.soundManager=new ig.SoundManager();ig.music=new ig.Music();ig.ready=true;var loader=new(loaderClass||ig.Loader)(gameClass,ig.resources);loader.load();};});ig.merge=function(original,extended){original=original||{};if(extended){for(var key in extended){var ext=extended[key];var extType=typeof ext;if(extType!=='undefined'){if(extType!=='object'||ext instanceof HTMLElement||ext instanceof ig.Class){if(extType==='string'){if(ext==='true'){ext=true;}
else if(ext==='false'){ext=false;}}
original[key]=ext;}
else{if(!original[key]||typeof(original[key])!=='object'){original[key]=(ext instanceof Array)?[]:{};}
ig.merge(original[key],ext);}}}}
return original;};

// lib/plusplus/config-user.js
ig.baked=true;ig.module('plusplus.config-user').defines(function(){ig.CONFIG_USER={FORCE_ENTITY_EXTENDED:false,AUTO_SORT_LAYERS:true,GAME_WIDTH_PCT:1,GAME_HEIGHT_PCT:1,GAME_WIDTH_VIEW:352,GAME_HEIGHT_VIEW:208,CAMERA:{KEEP_CENTERED:false,LERP:0.025,BOUNDS_TRAP_AS_PCT:true,BOUNDS_TRAP_PCT_MINX:-0.2,BOUNDS_TRAP_PCT_MINY:-0.3,BOUNDS_TRAP_PCT_MAXX:0.2,BOUNDS_TRAP_PCT_MAXY:0.3},FONT:{MAIN_NAME:"font_hellovetica_white_8.png",ALT_NAME:"font_hellovetica_white_16.png",CHAT_NAME:"font_hellovetica_black_8.png",SCALE:2,IGNORE_SYSTEM_SCALE:true},TEXT_BUBBLE:{PIXEL_PERFECT:true},UI:{SCALE:3,IGNORE_SYSTEM_SCALE:true},UI_LAYER_CLEAR_ON_LOAD:false,CHARACTER:{SIZE_OFFSET_X:8,SIZE_OFFSET_Y:4}};});

// lib/plusplus/core/config.js
ig.baked=true;ig.module('plusplus.core.config').requires('plusplus.config-user').defines(function(){"use strict";ig.CONFIG={};ig.CONFIG.FORCE_ENTITY_EXTENDED=true;ig.CONFIG.AUTO_CRISP_SCALING=true;ig.CONFIG.MIN_TIME_STEP=(ig.ua.mobile?(1000/30):(1000/60))/1000;ig.CONFIG.PATH_TO_MEDIA='media/';ig.CONFIG.DURATION_THROTTLE=500;ig.CONFIG.DURATION_THROTTLE_MEDIUM=250;ig.CONFIG.DURATION_THROTTLE_SHORT=60;ig.CONFIG.DURATION_TWEEN=500;ig.CONFIG.DURATION_FADE=300;ig.CONFIG.GAME_WIDTH=320;ig.CONFIG.GAME_HEIGHT=240;ig.CONFIG.GAME_WIDTH_PCT=0;ig.CONFIG.GAME_HEIGHT_PCT=0;ig.CONFIG.GAME_WIDTH_VIEW=0;ig.CONFIG.GAME_HEIGHT_VIEW=0;ig.CONFIG.TOP_DOWN=false;ig.CONFIG.FLIP_Y=false;ig.CONFIG.SCALE=1;ig.CONFIG.RESIZE_DELAY=500;ig.CONFIG.AUTO_SORT_LAYERS=false;ig.CONFIG.AUTO_SORT_OVERLAY_LAYER=true;ig.CONFIG.AUTO_SORT_UI_LAYER=true;ig.CONFIG.PRERENDER_MAPS=true;ig.CONFIG.PRERENDER_BACKGROUND_LAYER=true;ig.CONFIG.PRERENDER_FOREGROUND_LAYER=true;ig.CONFIG.CLEAR_ON_LOAD_UI_LAYER=false;ig.CONFIG.IGNORE_PAUSE_UI_LAYER=true;ig.CONFIG.IGNORE_PAUSE_OVERLAY_LAYER=false;ig.CONFIG.NO_UPDATE_BACKGROUND_LAYER=true;ig.CONFIG.NO_UPDATE_FOREGROUND_LAYER=true;ig.CONFIG.LOADER_MAX_WIDTH_PCT=0.5;ig.CONFIG.LOADER_MAX_HEIGHT_PCT=0.5;ig.CONFIG.LOADER_BG_COLOR='#333333';ig.CONFIG.LOADER_FADE_COLOR='#DDDDDD';ig.CONFIG.LOADER_BAR=true;ig.CONFIG.LOADER_BAR_COLOR='#DDDDDD';ig.CONFIG.LOADER_BAR_WIDTH_PCT=0.25;ig.CONFIG.LOADER_BAR_HEIGHT_PCT=0.025;ig.CONFIG.LOADER_BAR_LINE_WIDTH=3;ig.CONFIG.LOADER_BAR_SPACE_PCT=0.005;ig.CONFIG.LOADER_SPACE_PCT=0.02;ig.CONFIG.LOADER_LOGO_SRC_MAIN="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAP8AAAAtCAYAAABh/r3uAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH3QUTEQcqYSZEBgAAAVtJREFUeNrt3MGNwjAQBVC8oqPctpxtYevYFiiHm2tiryARKdaMjcHv3UCBOA5f/oGIctqxbdvtBLy9Wmt59vyXqYE1CT8sqqj6sOYlgJUf1H5gqdqv6oOVHxB+QPgB4QeEHxB+QPgB4Qfmds56o+vfz9Pnv38v6YPe29eR/baO8377I8eyt31kzK1zEhln1lxlnZfZ5qd1nJHtsz6TVn5A+IFg7R9ZUSLvkzXOSBXsfSmUNc6suerx2pFzlVXRW7e38gPCD0xY+2cw8leGIxWutVr3GHPWOFc4p+/42bbyA8IPvLD2v6pGZlXuyH5HvnbkvmY4pyuL3BBl5QeEH+hU+3tXlKxvqnuPM1KnZ6u7kbmKHGOP+Wn9BaT12Ge7gcfKDwg/8Mj/9oOVHxB+QPgB4QeEHxB+QPgB4QcmV+4fuOEHPluttVj5Qe0Hlq/9LgHgs6u+lR8QfljVP9Eqv3CR+x/VAAAAAElFTkSuQmCC";ig.CONFIG.LOADER_LOGO_SRC_ALT="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAYAAADDPmHLAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH3QUGFCwN01BpQgAAACZpVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVAgb24gYSBNYWOV5F9bAAADT0lEQVR42u3du27UQBiG4VlkUSCuIRU9QhuKpMpFUFOkTcl1bElLTcFFUCUFsai4EwqEEFAkGwkL4zE+zeF5qxw2m43z/+98Y896dmGA/X7/KyBb2rbd/ev7jxyiulEACgA1szPm150JGMAQAAWAejOAMZ8BoACgACZwe9aG27PW0WQAVB0CuxY4vdk7wgyA6qaBTMAAyIRmjV/CCAyAmjJAX+d3YQIGQMkGiDUBIzAASjYAEzAAFMA4U7i6yAAoLQOMzQKyAQOgRAMwwbjjseTfywCV05TQKbIBAyDHDDA1C+SeDVLIQAxgCCgrRad8BvH6cBmuD5cKAGYBRc8Sjl1+/ubdH1/vfs4AqGMWkMq4nPos4Xicvr96G0II4fGHq8VfNwMwQHorglI3Qt8Yv9TxYQCUYYDSTFACDMAA+a0HKNUES2ULBkCaBkjVBDVlAwaoHAUwYKbS35+gAGSAdG4Vm0u3zZUNtkj9DIB0DVCrCWQAMAATMAA2oHEI5jdVnxFSSP0MgHwyQG5ZIMdswAAMkM+mUUuZ4OuPuz64+PRi1M99fPk5hBDC0+ZntiZgAAbIb9u4uU0wtUP7Xs+a6/sZAPUYYC4TzN2R759/CSGE8OzJt2yyAANUThZnAuc+g7ZUJ568Ptx9cD/m9xkrJRMwgAyQ/+bRY7PA0h2Y004pDFA5RRTA6c1+k65K8Z4/DIB8ZwFT0/7RAmtdPUzxnj8MgHwNkGpHpbiShwHgPEBq8/Ecd0VjAAbYzgBrja2xJvjf15PzfogMwADlZoDYDl16TSADgAFiOnKtq3TdtXpL4X0BSJ6q3hv4cK0gXPnPMwBWywBb7Y4VO69P7X0GDAAZYA5iz+hNXUfgDiFggC2Z65pCjfsGMIBZQHpnAvs6uuSVOQwABqh57x4GQD0GAANAAUABQAFAAUABQAFAAaCiAsj19iol3BaGAfBAMqeCh7qq79Lw0OPGPr77uOP3x/780OtI5ZI2A1ROs3XHdzuh23F9n8d24NDiktjOnPp8Y38fA6BsA5RGrKlkADDAkrOHoc6L7eDY5xvKJLGzFAZA3ecB5ppFgAGgAKAAEJcBul+wTLxs2rbdMQAUABQA/pYBZIKyx3wGgAKAAsA9vwE+PY+Xd5MPtQAAAABJRU5ErkJggg==";ig.CONFIG.STATIC="static";ig.CONFIG.MOVABLE="movable";ig.CONFIG.DYNAMIC="dynamic";ig.CONFIG.AUTO_SPAWN_PLAYER=true;ig.CONFIG.Z_INDEX_OVERLAY=-1;ig.CONFIG.Z_INDEX_BELOW_PLAYER=0;ig.CONFIG.Z_INDEX_PLAYER=100;ig.CONFIG.Z_INDEX_ABOVE_PLAYER=200;ig.CONFIG.Z_INDEX_ABOVE_ALL=9999;ig.CONFIG.TRANSITION_LEVELS=true;ig.CONFIG.TRANSITIONER_COLOR="#333333";ig.CONFIG.TRANSITIONER_R=51;ig.CONFIG.TRANSITIONER_G=51;ig.CONFIG.TRANSITIONER_B=51;ig.CONFIG.TRANSITIONER_LAYER='ui';ig.CONFIG.Z_INDEX_TRANSITIONER=ig.CONFIG.Z_INDEX_ABOVE_PLAYER;ig.CONFIG.DIMMED_PAUSE=true;ig.CONFIG.DIMMER_COLOR="#333333";ig.CONFIG.DIMMER_R=51;ig.CONFIG.DIMMER_G=51;ig.CONFIG.DIMMER_B=51;ig.CONFIG.DIMMER_ALPHA=0.75;ig.CONFIG.LAYERS_CUSTOM={};ig.CONFIG.LEVEL_MAX=4;ig.CONFIG.RANKS_MAP={NONE:0,EASY:Math.round(ig.CONFIG.LEVEL_MAX*0.25),MEDIUM:Math.round(ig.CONFIG.LEVEL_MAX*0.5),HARD:Math.round(ig.CONFIG.LEVEL_MAX*0.75),IMPOSSIBLE:ig.CONFIG.LEVEL_MAX};ig.CONFIG.PRECISION_ZERO=0.01;ig.CONFIG.PRECISION_ZERO_TWEEN=0.1;ig.CONFIG.PRECISION_PCT_ONE_SIDED=0.01;ig.CONFIG.FONT={};ig.CONFIG.FONT.MAIN_NAME="font_04b03_white_8.png";ig.CONFIG.FONT.ALT_NAME="";ig.CONFIG.FONT.CHAT_NAME="";ig.CONFIG.FONT.SCALE=1;ig.CONFIG.FONT.IGNORE_SYSTEM_SCALE=false;ig.CONFIG.UI={};ig.CONFIG.UI.POS_AS_PCT=true;ig.CONFIG.UI.SCALE=1;ig.CONFIG.UI.IGNORE_SYSTEM_SCALE=false;ig.CONFIG.UI.CAN_FLIP_X=true;ig.CONFIG.UI.CAN_FLIP_Y=false;ig.CONFIG.GESTURE={RELEASE_DELAY:0.3,DIRECTION_SWITCH_PCT:0.03,HOLD_DELAY:0.15,HOLD_DELAY_BLOCK_TAP:0.3,HOLD_DELAY_ACTIVATE:0.5,HOLD_ACTIVATE_DISTANCE_PCT:0.01,SWIPE_DISTANCE_PCT:0.05,SWIPE_DURATION_TRY:0.3,SWIPE_DURATION_RESET:0.1,TAP_MULTI_DISTANCE_PCT:0.05,TARGET_UP:false,TARGET_DOWN:false,TARGET_DOWN_START:true,TARGET_TAP:true,TARGET_SEARCH_RADIUS:10};ig.CONFIG.CAMERA={AUTO_FOLLOW_PLAYER:true,KEEP_CENTERED:true,KEEP_INSIDE_LEVEL:false,LERP:1,BOUNDS_TRAP_AS_PCT:false,BOUNDS_TRAP_MINX:0,BOUNDS_TRAP_MINY:0,BOUNDS_TRAP_MAXX:0,BOUNDS_TRAP_MAXY:0,BOUNDS_TRAP_PCT_MINX:0,BOUNDS_TRAP_PCT_MINY:0,BOUNDS_TRAP_PCT_MAXX:0,BOUNDS_TRAP_PCT_MAXY:0,TRANSITION_DURATION:1,TRANSITION_DURATION_MIN:0.2,TRANSITION_DURATION_MAX:2,TRANSITION_DISTANCE:100};ig.CONFIG.ENTITY={};ig.CONFIG.ENTITY.SIZE_X=16;ig.CONFIG.ENTITY.SIZE_Y=16;ig.CONFIG.ENTITY.SIZE_OFFSET_X=0;ig.CONFIG.ENTITY.SIZE_OFFSET_Y=0;ig.CONFIG.ENTITY.SCALE=1;ig.CONFIG.ENTITY.IGNORE_SYSTEM_SCALE=false;ig.CONFIG.ENTITY.CAN_FLIP_X=true;ig.CONFIG.ENTITY.CAN_FLIP_Y=false;ig.CONFIG.ENTITY.FRICTION_X=0;ig.CONFIG.ENTITY.FRICTION_Y=0;ig.CONFIG.ENTITY.MAX_VEL_X=100;ig.CONFIG.ENTITY.MAX_VEL_Y=100;ig.CONFIG.ENTITY.BOUNCINESS=0;ig.CONFIG.ENTITY.MIN_BOUNCE_VEL=40;ig.CONFIG.ENTITY.NEEDS_BOUNDS=false;ig.CONFIG.ENTITY.NEEDS_VERTICES=false;ig.CONFIG.ENTITY.HEALTH=1;ig.CONFIG.ENTITY.SLOPE_SPEED_MOD=0.75;ig.CONFIG.ENTITY.SLOPE_STANDING_MIN=-136;ig.CONFIG.ENTITY.SLOPE_STANDING_MAX=-44;ig.CONFIG.ENTITY.OPAQUE=false;ig.CONFIG.ENTITY.OPAQUE_OFFSET={left:0,right:0,top:0,bottom:0};ig.CONFIG.ENTITY.OPAQUE_OFFSET_RIGHT=0;ig.CONFIG.ENTITY.OPAQUE_OFFSET_TOP=0;ig.CONFIG.ENTITY.OPAQUE_OFFSET_BOTTOM=0;ig.CONFIG.ENTITY.OPAQUE_FROM_VERTICES=false;ig.CONFIG.ENTITY.DIFFUSE=0.8;ig.CONFIG.LIGHT={};ig.CONFIG.LIGHT.PIXEL_PERFECT=false;ig.CONFIG.LIGHT.GRADIENT=true;ig.CONFIG.LIGHT.CASTS_SHADOWS=false;ig.CONFIG.LIGHT.CASTS_SHADOWS_MOVABLE=false;ig.CONFIG.LIGHT.R=1;ig.CONFIG.LIGHT.G=1;ig.CONFIG.LIGHT.B=1;ig.CONFIG.LIGHT.ALPHA=0.25;ig.CONFIG.LIGHT.DIFFUSE=0.8;ig.CONFIG.LIGHT.SAMPLES=1;ig.CONFIG.CHARACTER={};ig.CONFIG.CHARACTER.ANIM_AUTOMATIC=true;ig.CONFIG.CHARACTER.SIZE_X=32;ig.CONFIG.CHARACTER.SIZE_Y=32;ig.CONFIG.CHARACTER.SIZE_OFFSET_X=0;ig.CONFIG.CHARACTER.SIZE_OFFSET_Y=0;ig.CONFIG.CHARACTER.MAX_VEL_UNGROUNDED_X=100;ig.CONFIG.CHARACTER.MAX_VEL_UNGROUNDED_Y=200;ig.CONFIG.CHARACTER.MAX_VEL_GROUNDED_X=100;ig.CONFIG.CHARACTER.MAX_VEL_GROUNDED_Y=100;ig.CONFIG.CHARACTER.MAX_VEL_CLIMBING_X=75;ig.CONFIG.CHARACTER.MAX_VEL_CLIMBING_Y=75;ig.CONFIG.CHARACTER.FRICTION_UNGROUNDED_X=0;ig.CONFIG.CHARACTER.FRICTION_UNGROUNDED_Y=0;ig.CONFIG.CHARACTER.FRICTION_GROUNDED_X=1600;ig.CONFIG.CHARACTER.FRICTION_GROUNDED_Y=1600;ig.CONFIG.CHARACTER.SPEED_X=750;ig.CONFIG.CHARACTER.SPEED_Y=750;ig.CONFIG.CHARACTER.CAN_JUMP=true;ig.CONFIG.CHARACTER.JUMP_STEPS=4;ig.CONFIG.CHARACTER.JUMP_FORCE=10;ig.CONFIG.CHARACTER.JUMP_CONTROL=0.75;ig.CONFIG.CHARACTER.UNGROUNDED_FOR_THRESHOLD=0.1;ig.CONFIG.CHARACTER.UNGROUNDED_FOR_AND_FALLING_THRESHOLD=0.25;ig.CONFIG.CHARACTER.CAN_CLIMB=true;ig.CONFIG.CHARACTER.CLIMBING_CONTROL=1;ig.CONFIG.CHARACTER.CAN_PATHFIND=true;ig.CONFIG.CHARACTER.PATHFINDING_DELAY=1;ig.CONFIG.CHARACTER.PATHFINDING_UPDATE_DELAY=0.2;ig.CONFIG.CHARACTER.PATHFINDING_SIMPLE_DELAY=0.075;ig.CONFIG.CHARACTER.STUCK_DELAY=0.1;ig.CONFIG.CHARACTER.HEALTH=1;ig.CONFIG.CHARACTER.ENERGY=1;ig.CONFIG.CHARACTER.REGEN_RATE_HEALTH=0;ig.CONFIG.CHARACTER.REGEN_RATE_ENERGY=0;ig.CONFIG.CHARACTER.EXPLODING_DAMAGE=true;ig.CONFIG.CHARACTER.EXPLODING_DAMAGE_PARTICLE_COUNT=3;ig.CONFIG.CHARACTER.EXPLODING_DEATH=true;ig.CONFIG.CHARACTER.EXPLODING_DEATH_PARTICLE_COUNT=10;ig.CONFIG.CREATURE={};ig.CONFIG.CREATURE.REACTION_DISTANCE=100;ig.CONFIG.CREATURE.REACTION_DELAY=0.2;ig.CONFIG.CREATURE.CAN_LEARN_PREDATORS=false;ig.CONFIG.CREATURE.NEEDS_LINE_OF_SIGHT_PREY=true;ig.CONFIG.CREATURE.NEEDS_LINE_OF_SIGHT_PREDATOR=true;ig.CONFIG.CREATURE.CAN_FLEE=true;ig.CONFIG.CREATURE.FLEE_HEALTH_PCT=0.15;ig.CONFIG.CREATURE.CAN_BREAK_TETHER=false;ig.CONFIG.CREATURE.TETHER_TO_SPAWNER=false;ig.CONFIG.CREATURE.TETHER_DISTANCE=100;ig.CONFIG.CREATURE.CAN_WANDER_X=true;ig.CONFIG.CREATURE.CAN_WANDER_Y=false;ig.CONFIG.CREATURE.WANDER_SWITCH_CHANCE=0;ig.CONFIG.CREATURE.WANDER_SWITCH_CHANCE_STOPPED=0;ig.CONFIG.PARTICLE={};ig.CONFIG.PARTICLE.ANIM_AUTOMATIC=true;ig.CONFIG.COLLISION={};ig.CONFIG.COLLISION.TILE_ONE_WAY_UP=12;ig.CONFIG.COLLISION.TILE_ONE_WAY_DOWN=23;ig.CONFIG.COLLISION.TILE_ONE_WAY_RIGHT=34;ig.CONFIG.COLLISION.TILE_ONE_WAY_LEFT=45;ig.CONFIG.COLLISION.TILE_CLIMBABLE_WITH_TOP=46;ig.CONFIG.COLLISION.TILE_CLIMBABLE=47;ig.CONFIG.COLLISION.TILE_CLIMBABLE_STAIRS_WITH_TOP=48;ig.CONFIG.COLLISION.TILE_CLIMBABLE_STAIRS=49;ig.CONFIG.COLLISION.TILES_HASH_ONE_WAY={};ig.CONFIG.COLLISION.TILES_HASH_ONE_WAY[ig.CONFIG.COLLISION.TILE_ONE_WAY_UP]=true;ig.CONFIG.COLLISION.TILES_HASH_ONE_WAY[ig.CONFIG.COLLISION.TILE_ONE_WAY_DOWN]=true;ig.CONFIG.COLLISION.TILES_HASH_ONE_WAY[ig.CONFIG.COLLISION.TILE_ONE_WAY_RIGHT]=true;ig.CONFIG.COLLISION.TILES_HASH_ONE_WAY[ig.CONFIG.COLLISION.TILE_ONE_WAY_LEFT]=true;ig.CONFIG.COLLISION.TILES_HASH_ONE_WAY[ig.CONFIG.COLLISION.TILE_CLIMBABLE_WITH_TOP]=true;ig.CONFIG.COLLISION.TILES_HASH_ONE_WAY[ig.CONFIG.COLLISION.TILE_CLIMBABLE_STAIRS_WITH_TOP]=true;ig.CONFIG.COLLISION.TILES_HASH_CLIMBABLE={};ig.CONFIG.COLLISION.TILES_HASH_CLIMBABLE[ig.CONFIG.COLLISION.TILE_CLIMBABLE_WITH_TOP]=true;ig.CONFIG.COLLISION.TILES_HASH_CLIMBABLE[ig.CONFIG.COLLISION.TILE_CLIMBABLE]=true;ig.CONFIG.COLLISION.TILES_HASH_CLIMBABLE[ig.CONFIG.COLLISION.TILE_CLIMBABLE_STAIRS_WITH_TOP]=true;ig.CONFIG.COLLISION.TILES_HASH_CLIMBABLE[ig.CONFIG.COLLISION.TILE_CLIMBABLE_STAIRS]=true;ig.CONFIG.COLLISION.TILES_HASH_CLIMBABLE_ONE_WAY={};ig.CONFIG.COLLISION.TILES_HASH_CLIMBABLE_ONE_WAY[ig.CONFIG.COLLISION.TILE_CLIMBABLE_WITH_TOP]=true;ig.CONFIG.COLLISION.TILES_HASH_CLIMBABLE_ONE_WAY[ig.CONFIG.COLLISION.TILE_CLIMBABLE_STAIRS_WITH_TOP]=true;ig.CONFIG.COLLISION.TILES_HASH_CLIMBABLE_STAIRS={};ig.CONFIG.COLLISION.TILES_HASH_CLIMBABLE_STAIRS[ig.CONFIG.COLLISION.TILE_CLIMBABLE_STAIRS_WITH_TOP]=true;ig.CONFIG.COLLISION.TILES_HASH_CLIMBABLE_STAIRS[ig.CONFIG.COLLISION.TILE_CLIMBABLE_STAIRS]=true;ig.CONFIG.COLLISION.TILES_HASH_WALKABLE={0:true,50:true,51:true};ig.CONFIG.COLLISION.TILES_HASH_WALKABLE[ig.CONFIG.COLLISION.TILE_ONE_WAY_UP]=true;ig.CONFIG.COLLISION.TILES_HASH_WALKABLE[ig.CONFIG.COLLISION.TILE_ONE_WAY_DOWN]=true;ig.CONFIG.COLLISION.TILES_HASH_WALKABLE[ig.CONFIG.COLLISION.TILE_ONE_WAY_RIGHT]=true;ig.CONFIG.COLLISION.TILES_HASH_WALKABLE[ig.CONFIG.COLLISION.TILE_ONE_WAY_LEFT]=true;ig.CONFIG.COLLISION.TILES_HASH_WALKABLE[ig.CONFIG.COLLISION.TILE_CLIMBABLE_WITH_TOP]=true;ig.CONFIG.COLLISION.TILES_HASH_WALKABLE[ig.CONFIG.COLLISION.TILE_CLIMBABLE]=true;ig.CONFIG.COLLISION.TILES_HASH_WALKABLE[ig.CONFIG.COLLISION.TILE_CLIMBABLE_STAIRS_WITH_TOP]=true;ig.CONFIG.COLLISION.TILES_HASH_WALKABLE[ig.CONFIG.COLLISION.TILE_CLIMBABLE_STAIRS]=true;ig.CONFIG.COLLISION.TILES_HASH_WALKABLE_STRICT={0:true,50:true,51:true};ig.CONFIG.COLLISION.TILES_HASH_SLOPED={2:true,3:true,4:true,5:true,6:true,7:true,8:true,9:true,10:true,11:true,13:true,14:true,15:true,16:true,17:true,18:true,19:true,20:true,21:true,22:true,24:true,25:true,26:true,27:true,28:true,29:true,30:true,31:true,32:true,33:true,35:true,36:true,37:true,38:true,39:true,40:true,41:true,42:true,43:true,44:true,52:true,53:true,54:true,55:true};ig.CONFIG.PATHFINDING={};ig.CONFIG.PATHFINDING.BUILD_WITH_LEVEL=true;ig.CONFIG.PATHFINDING.WEIGHTED=true;ig.CONFIG.PATHFINDING.ALLOW_DIAGONAL=true;ig.CONFIG.PATHFINDING.DIAGONAL_REQUIRES_BOTH_DIRECT=true;ig.CONFIG.PATHFINDING.AVOID_ENTITIES=true;ig.CONFIG.PATHFINDING.WEIGHT=10;ig.CONFIG.PATHFINDING.WEIGHT_AWAY_FROM=2;ig.CONFIG.PATHFINDING.AWAY_FROM_DISTANCE=100;ig.CONFIG.PATHFINDING.AWAY_FROM_MIN_DISTANCE_PCT=0.4;ig.CONFIG.PATHFINDING.AWAY_FROM_MAX_NODES=40;ig.CONFIG.PATHFINDING.TILE_DEF={0:{weightPct:1},1:{weightPct:0},2:{weightPct:0.25},3:{weightPct:0.75},4:{walkable:false}};ig.CONFIG.OVERLAY={};ig.CONFIG.OVERLAY.R=0;ig.CONFIG.OVERLAY.G=0;ig.CONFIG.OVERLAY.B=0;ig.CONFIG.OVERLAY.ALPHA=0.8;ig.CONFIG.OVERLAY.PIXEL_PERFECT=false;ig.CONFIG.TEXT_BUBBLE={};ig.CONFIG.TEXT_BUBBLE.SIZE_X=120;ig.CONFIG.TEXT_BUBBLE.SIZE_Y=70;ig.CONFIG.TEXT_BUBBLE.SIZE_AS_PCT=true;ig.CONFIG.TEXT_BUBBLE.SIZE_PCT_X=0.5;ig.CONFIG.TEXT_BUBBLE.SIZE_PCT_Y=0.5;ig.CONFIG.TEXT_BUBBLE.CORNER_RADIUS=5;ig.CONFIG.TEXT_BUBBLE.CORNER_RADIUS_AS_PCT=false;ig.CONFIG.TEXT_BUBBLE.PIXEL_PERFECT=false;ig.CONFIG.TEXT_BUBBLE.R=0.9;ig.CONFIG.TEXT_BUBBLE.G=0.9;ig.CONFIG.TEXT_BUBBLE.B=0.9;ig.CONFIG.TEXT_BUBBLE.ALPHA=1;ig.CONFIG.TEXT_BUBBLE.TRIANGLE_LENGTH=10;ig.CONFIG.TEXT_BUBBLE.TRIANGLE_WIDTH=12;ig.CONFIG.TEXT_BUBBLE.PADDING_X=6;ig.CONFIG.TEXT_BUBBLE.PADDING_Y=6;ig.CONFIG.TEXT_BUBBLE.SHRINK_TO_TEXT=true;ig.merge(ig.CONFIG,ig.CONFIG_USER);ig.CONFIG.ENTITY.CAN_FLIP_Y=ig.CONFIG.ENTITY.CAN_FLIP_Y||ig.CONFIG.FLIP_Y;ig.CONFIG.FONT.MAIN_PATH=ig.CONFIG.FONT.MAIN_NAME?ig.CONFIG.PATH_TO_MEDIA+ig.CONFIG.FONT.MAIN_NAME:'';ig.CONFIG.FONT.ALT_PATH=ig.CONFIG.FONT.ALT_NAME?ig.CONFIG.PATH_TO_MEDIA+ig.CONFIG.FONT.ALT_NAME:'';ig.CONFIG.FONT.CHAT_PATH=ig.CONFIG.FONT.CHAT_NAME?ig.CONFIG.PATH_TO_MEDIA+ig.CONFIG.FONT.CHAT_NAME:'';ig.CONFIG.RANKS=(function(){var ranks=[];for(var rank in ig.CONFIG.RANKS_MAP){ranks.push({name:rank,level:ig.CONFIG.RANKS_MAP[rank]});}
ranks.sort(function(a,b){return a.level-b.level;});return ranks;})();ig.CONFIG.ENTITY.SIZE_EFFECTIVE_X=ig.CONFIG.ENTITY.SIZE_X-ig.CONFIG.ENTITY.SIZE_OFFSET_X*2;ig.CONFIG.ENTITY.SIZE_EFFECTIVE_Y=ig.CONFIG.ENTITY.SIZE_Y-ig.CONFIG.ENTITY.SIZE_OFFSET_Y*2;ig.CONFIG.ENTITY.SIZE_EFFECTIVE_MIN=Math.min(ig.CONFIG.ENTITY.SIZE_EFFECTIVE_X,ig.CONFIG.ENTITY.SIZE_EFFECTIVE_Y);ig.CONFIG.ENTITY.SIZE_EFFECTIVE_MAX=Math.max(ig.CONFIG.ENTITY.SIZE_EFFECTIVE_X,ig.CONFIG.ENTITY.SIZE_EFFECTIVE_Y);ig.CONFIG.CHARACTER.SIZE_EFFECTIVE_X=ig.CONFIG.CHARACTER.SIZE_X-ig.CONFIG.CHARACTER.SIZE_OFFSET_X*2;ig.CONFIG.CHARACTER.SIZE_EFFECTIVE_Y=ig.CONFIG.CHARACTER.SIZE_Y-ig.CONFIG.CHARACTER.SIZE_OFFSET_Y*2;ig.CONFIG.CHARACTER.SIZE_EFFECTIVE_MIN=Math.min(ig.CONFIG.CHARACTER.SIZE_EFFECTIVE_X,ig.CONFIG.CHARACTER.SIZE_EFFECTIVE_Y);ig.CONFIG.CHARACTER.SIZE_EFFECTIVE_MAX=Math.max(ig.CONFIG.CHARACTER.SIZE_EFFECTIVE_X,ig.CONFIG.CHARACTER.SIZE_EFFECTIVE_Y);});

// lib/plusplus/core/loader.js
ig.baked=true;ig.module('plusplus.core.loader').requires('impact.loader','plusplus.core.config').defines(function(){"use strict";var _c=ig.CONFIG;ig.LoaderExtended=ig.Loader.extend({_endTime:0,init:function(gameClass,resources){this.logoMain=ig.$new('img');this.logoMain.src=_c.LOADER_LOGO_SRC_MAIN;this.logoAlt=ig.$new('img');this.logoAlt.src=_c.LOADER_LOGO_SRC_ALT;this.parent(gameClass,resources);gameClass.prototype.resize.call(this);},end:function(){this.parent();this._endTime=Date.now();ig.system.setDelegate(this);},run:function(){var t=Date.now()-this._endTime;var alpha=1;if(t<_c.DURATION_FADE){this.draw();alpha=t.map(0,_c.DURATION_FADE,0,1);}
else if(t<_c.DURATION_FADE*2){ig.game.run();alpha=t.map(_c.DURATION_FADE,_c.DURATION_FADE*2,1,0);}
else{ig.system.setDelegate(ig.game);return;}
var context=ig.system.context;context.globalAlpha=alpha;context.fillStyle=_c.LOADER_FADE_COLOR;context.fillRect(0,0,ig.system.realWidth,ig.system.realHeight);context.globalAlpha=1;},draw:function(){this._drawStatus+=(this.status-this._drawStatus)/5;var context=ig.system.context;var w=ig.system.realWidth;var h=ig.system.realHeight;var spacing=Math.min(w,h)*_c.LOADER_SPACE_PCT;var barWidth;var barHeight;var barSpacing;if(_c.LOADER_BAR){barWidth=w*_c.LOADER_BAR_WIDTH_PCT;barHeight=h*_c.LOADER_BAR_HEIGHT_PCT;barSpacing=Math.min(w,h)*_c.LOADER_BAR_SPACE_PCT;}
else{barWidth=barHeight=barSpacing=0;}
var logoMainWidth=this.logoMain.width;var logoMainHeight=this.logoMain.height;var logoAltWidth=this.logoAlt.width;var logoAltHeight=this.logoAlt.height;var totalWidth=Math.max(barWidth,logoMainWidth,logoAltWidth);var totalHeight=logoMainHeight+spacing+barHeight+spacing+logoAltHeight;var pctX=totalWidth/w;var pctY=totalHeight/h;var scaleX=1;var scaleY=1;if(pctX>_c.LOADER_MAX_WIDTH_PCT){scaleX=1-(pctX-_c.LOADER_MAX_WIDTH_PCT);}
if(pctY>_c.LOADER_MAX_HEIGHT_PCT){scaleY=1-(pctY-_c.LOADER_MAX_HEIGHT_PCT);}
var scale=Math.min(1,scaleX,scaleY);var centerX=(w-totalWidth*scale)/2;var centerY=(h-totalHeight*scale)/2;context.fillStyle=_c.LOADER_BG_COLOR;context.clearRect(0,0,w,h);context.save();context.translate(centerX,centerY);context.scale(scale,scale);context.drawImage(this.logoMain,(totalWidth-logoMainWidth)*0.5,0);if(_c.LOADER_BAR){context.lineWidth=_c.LOADER_BAR_LINE_WIDTH;context.strokeStyle=_c.LOADER_BAR_COLOR;context.strokeRect((totalWidth-barWidth)*0.5,logoMainHeight+spacing,barWidth,barHeight);context.fillStyle=_c.LOADER_BAR_COLOR;context.fillRect((totalWidth-barWidth)*0.5+barSpacing,logoMainHeight+spacing+barSpacing,Math.max(0,barWidth*this._drawStatus-barSpacing*2),barHeight-barSpacing*2);}
context.drawImage(this.logoAlt,(totalWidth-logoAltWidth)*0.5,totalHeight-logoAltHeight);context.restore();}});});

// lib/impact/animation.js
ig.baked=true;ig.module('impact.animation').requires('impact.timer','impact.image').defines(function(){"use strict";ig.AnimationSheet=ig.Class.extend({width:8,height:8,image:null,init:function(path,width,height){this.width=width;this.height=height;this.image=new ig.Image(path);}});ig.Animation=ig.Class.extend({sheet:null,timer:null,sequence:[],flip:{x:false,y:false},pivot:{x:0,y:0},frame:0,tile:0,loopCount:0,alpha:1,angle:0,init:function(sheet,frameTime,sequence,stop){this.sheet=sheet;this.pivot={x:sheet.width/2,y:sheet.height/2};this.timer=new ig.Timer();this.frameTime=frameTime;this.sequence=sequence;this.stop=!!stop;this.tile=this.sequence[0];},rewind:function(){this.timer.set();this.loopCount=0;this.frame=0;this.tile=this.sequence[0];return this;},gotoFrame:function(f){this.timer.set(this.frameTime*-f-0.0001);this.update();},gotoRandomFrame:function(){this.gotoFrame(Math.floor(Math.random()*this.sequence.length))},update:function(){var frameTotal=Math.floor(this.timer.delta()/this.frameTime);this.loopCount=Math.floor(frameTotal/this.sequence.length);if(this.stop&&this.loopCount>0){this.frame=this.sequence.length-1;}
else{this.frame=frameTotal%this.sequence.length;}
this.tile=this.sequence[this.frame];},draw:function(targetX,targetY){var bbsize=Math.max(this.sheet.width,this.sheet.height);if(targetX>ig.system.width||targetY>ig.system.height||targetX+bbsize<0||targetY+bbsize<0){return;}
if(this.alpha!=1){ig.system.context.globalAlpha=this.alpha;}
if(this.angle==0){this.sheet.image.drawTile(targetX,targetY,this.tile,this.sheet.width,this.sheet.height,this.flip.x,this.flip.y);}
else{ig.system.context.save();ig.system.context.translate(ig.system.getDrawPos(targetX+this.pivot.x),ig.system.getDrawPos(targetY+this.pivot.y));ig.system.context.rotate(this.angle);this.sheet.image.drawTile(-this.pivot.x,-this.pivot.y,this.tile,this.sheet.width,this.sheet.height,this.flip.x,this.flip.y);ig.system.context.restore();}
if(this.alpha!=1){ig.system.context.globalAlpha=1;}}});});

// lib/impact/entity.js
ig.baked=true;ig.module('impact.entity').requires('impact.animation','impact.impact').defines(function(){"use strict";ig.Entity=ig.Class.extend({id:0,settings:{},size:{x:16,y:16},offset:{x:0,y:0},pos:{x:0,y:0},last:{x:0,y:0},vel:{x:0,y:0},accel:{x:0,y:0},friction:{x:0,y:0},maxVel:{x:100,y:100},zIndex:0,gravityFactor:1,standing:false,bounciness:0,minBounceVelocity:40,anims:{},animSheet:null,currentAnim:null,health:10,type:0,checkAgainst:0,collides:0,_killed:false,slopeStanding:{min:(44).toRad(),max:(136).toRad()},init:function(x,y,settings){this.id=++ig.Entity._lastId;this.pos.x=this.last.x=x;this.pos.y=this.last.y=y;ig.merge(this,settings);},reset:function(x,y,settings){var proto=this.constructor.prototype;this.pos.x=x;this.pos.y=y;this.last.x=x;this.last.y=y;this.vel.x=proto.vel.x;this.vel.y=proto.vel.y;this.accel.x=proto.accel.x;this.accel.y=proto.accel.y;this.health=proto.health;this._killed=proto._killed;this.standing=proto.standing;this.type=proto.type;this.checkAgainst=proto.checkAgainst;this.collides=proto.collides;ig.merge(this,settings);},addAnim:function(name,frameTime,sequence,stop){if(!this.animSheet){throw('No animSheet to add the animation '+name+' to.');}
var a=new ig.Animation(this.animSheet,frameTime,sequence,stop);this.anims[name]=a;if(!this.currentAnim){this.currentAnim=a;}
return a;},update:function(){this.last.x=this.pos.x;this.last.y=this.pos.y;this.vel.y+=ig.game.gravity*ig.system.tick*this.gravityFactor;this.vel.x=this.getNewVelocity(this.vel.x,this.accel.x,this.friction.x,this.maxVel.x);this.vel.y=this.getNewVelocity(this.vel.y,this.accel.y,this.friction.y,this.maxVel.y);var mx=this.vel.x*ig.system.tick;var my=this.vel.y*ig.system.tick;var res=ig.game.collisionMap.trace(this.pos.x,this.pos.y,mx,my,this.size.x,this.size.y);this.handleMovementTrace(res);if(this.currentAnim){this.currentAnim.update();}},getNewVelocity:function(vel,accel,friction,max){if(accel){return(vel+accel*ig.system.tick).limit(-max,max);}
else if(friction){var delta=friction*ig.system.tick;if(vel-delta>0){return vel-delta;}
else if(vel+delta<0){return vel+delta;}
else{return 0;}}
return vel.limit(-max,max);},handleMovementTrace:function(res){this.standing=false;if(res.collision.y){if(this.bounciness>0&&Math.abs(this.vel.y)>this.minBounceVelocity){this.vel.y*=-this.bounciness;}
else{if(this.vel.y>0){this.standing=true;}
this.vel.y=0;}}
if(res.collision.x){if(this.bounciness>0&&Math.abs(this.vel.x)>this.minBounceVelocity){this.vel.x*=-this.bounciness;}
else{this.vel.x=0;}}
if(res.collision.slope){var s=res.collision.slope;if(this.bounciness>0){var proj=this.vel.x*s.nx+this.vel.y*s.ny;this.vel.x=(this.vel.x-s.nx*proj*2)*this.bounciness;this.vel.y=(this.vel.y-s.ny*proj*2)*this.bounciness;}
else{var lengthSquared=s.x*s.x+s.y*s.y;var dot=(this.vel.x*s.x+this.vel.y*s.y)/lengthSquared;this.vel.x=s.x*dot;this.vel.y=s.y*dot;var angle=Math.atan2(s.x,s.y);if(angle>this.slopeStanding.min&&angle<this.slopeStanding.max){this.standing=true;}}}
this.pos=res.pos;},draw:function(){if(this.currentAnim){this.currentAnim.draw(this.pos.x-this.offset.x-ig.game._rscreen.x,this.pos.y-this.offset.y-ig.game._rscreen.y);}},kill:function(){ig.game.removeEntity(this);},receiveDamage:function(amount,from){this.health-=amount;if(this.health<=0){this.kill();}},touches:function(other){return!(this.pos.x>=other.pos.x+other.size.x||this.pos.x+this.size.x<=other.pos.x||this.pos.y>=other.pos.y+other.size.y||this.pos.y+this.size.y<=other.pos.y);},distanceTo:function(other){var xd=(this.pos.x+this.size.x/2)-(other.pos.x+other.size.x/2);var yd=(this.pos.y+this.size.y/2)-(other.pos.y+other.size.y/2);return Math.sqrt(xd*xd+yd*yd);},angleTo:function(other){return Math.atan2((other.pos.y+other.size.y/2)-(this.pos.y+this.size.y/2),(other.pos.x+other.size.x/2)-(this.pos.x+this.size.x/2));},check:function(other){},collideWith:function(other,axis){},ready:function(){},erase:function(){}});ig.Entity._lastId=0;ig.Entity.COLLIDES={NEVER:0,LITE:1,PASSIVE:2,ACTIVE:4,FIXED:8};ig.Entity.TYPE={NONE:0,A:1,B:2,BOTH:3};ig.Entity.checkPair=function(a,b){if(a.checkAgainst&b.type){a.check(b);}
if(b.checkAgainst&a.type){b.check(a);}
if(a.collides&&b.collides&&a.collides+b.collides>ig.Entity.COLLIDES.ACTIVE){ig.Entity.solveCollision(a,b);}};ig.Entity.solveCollision=function(a,b){var weak=null;if(a.collides==ig.Entity.COLLIDES.LITE||b.collides==ig.Entity.COLLIDES.FIXED){weak=a;}
else if(b.collides==ig.Entity.COLLIDES.LITE||a.collides==ig.Entity.COLLIDES.FIXED){weak=b;}
if(a.last.x+a.size.x>b.last.x&&a.last.x<b.last.x+b.size.x){if(a.last.y<b.last.y){ig.Entity.seperateOnYAxis(a,b,weak);}
else{ig.Entity.seperateOnYAxis(b,a,weak);}
a.collideWith(b,'y');b.collideWith(a,'y');}
else if(a.last.y+a.size.y>b.last.y&&a.last.y<b.last.y+b.size.y){if(a.last.x<b.last.x){ig.Entity.seperateOnXAxis(a,b,weak);}
else{ig.Entity.seperateOnXAxis(b,a,weak);}
a.collideWith(b,'x');b.collideWith(a,'x');}};ig.Entity.seperateOnXAxis=function(left,right,weak){var nudge=(left.pos.x+left.size.x-right.pos.x);if(weak){var strong=left===weak?right:left;weak.vel.x=-weak.vel.x*weak.bounciness+strong.vel.x;var resWeak=ig.game.collisionMap.trace(weak.pos.x,weak.pos.y,weak==left?-nudge:nudge,0,weak.size.x,weak.size.y);weak.pos.x=resWeak.pos.x;}
else{var v2=(left.vel.x-right.vel.x)/2;left.vel.x=-v2;right.vel.x=v2;var resLeft=ig.game.collisionMap.trace(left.pos.x,left.pos.y,-nudge/2,0,left.size.x,left.size.y);left.pos.x=Math.floor(resLeft.pos.x);var resRight=ig.game.collisionMap.trace(right.pos.x,right.pos.y,nudge/2,0,right.size.x,right.size.y);right.pos.x=Math.ceil(resRight.pos.x);}};ig.Entity.seperateOnYAxis=function(top,bottom,weak){var nudge=(top.pos.y+top.size.y-bottom.pos.y);if(weak){var strong=top===weak?bottom:top;weak.vel.y=-weak.vel.y*weak.bounciness+strong.vel.y;var nudgeX=0;if(weak==top&&Math.abs(weak.vel.y-strong.vel.y)<weak.minBounceVelocity){weak.standing=true;nudgeX=strong.vel.x*ig.system.tick;}
var resWeak=ig.game.collisionMap.trace(weak.pos.x,weak.pos.y,nudgeX,weak==top?-nudge:nudge,weak.size.x,weak.size.y);weak.pos.y=resWeak.pos.y;weak.pos.x=resWeak.pos.x;}
else if(ig.game.gravity&&(bottom.standing||top.vel.y>0)){var resTop=ig.game.collisionMap.trace(top.pos.x,top.pos.y,0,-(top.pos.y+top.size.y-bottom.pos.y),top.size.x,top.size.y);top.pos.y=resTop.pos.y;if(top.bounciness>0&&top.vel.y>top.minBounceVelocity){top.vel.y*=-top.bounciness;}
else{top.standing=true;top.vel.y=0;}}
else{var v2=(top.vel.y-bottom.vel.y)/2;top.vel.y=-v2;bottom.vel.y=v2;var nudgeX=bottom.vel.x*ig.system.tick;var resTop=ig.game.collisionMap.trace(top.pos.x,top.pos.y,nudgeX,-nudge/2,top.size.x,top.size.y);top.pos.y=resTop.pos.y;var resBottom=ig.game.collisionMap.trace(bottom.pos.x,bottom.pos.y,0,nudge/2,bottom.size.x,bottom.size.y);bottom.pos.y=resBottom.pos.y;}};});

// lib/impact/map.js
ig.baked=true;ig.module('impact.map').defines(function(){"use strict";ig.Map=ig.Class.extend({tilesize:8,width:1,height:1,data:[[]],name:null,init:function(tilesize,data){this.tilesize=tilesize;this.data=data;this.height=data.length;this.width=data[0].length;this.pxWidth=this.width*this.tilesize;this.pxHeight=this.height*this.tilesize;},getTile:function(x,y){var tx=Math.floor(x/this.tilesize);var ty=Math.floor(y/this.tilesize);if((tx>=0&&tx<this.width)&&(ty>=0&&ty<this.height)){return this.data[ty][tx];}
else{return 0;}},setTile:function(x,y,tile){var tx=Math.floor(x/this.tilesize);var ty=Math.floor(y/this.tilesize);if((tx>=0&&tx<this.width)&&(ty>=0&&ty<this.height)){this.data[ty][tx]=tile;}}});});

// lib/impact/collision-map.js
ig.baked=true;ig.module('impact.collision-map').requires('impact.map').defines(function(){"use strict";ig.CollisionMap=ig.Map.extend({lastSlope:1,tiledef:null,init:function(tilesize,data,tiledef){this.parent(tilesize,data);this.tiledef=tiledef||ig.CollisionMap.defaultTileDef;for(var t in this.tiledef){if(t|0>this.lastSlope){this.lastSlope=t|0;}}},trace:function(x,y,vx,vy,objectWidth,objectHeight){var res={collision:{x:false,y:false,slope:false},pos:{x:x,y:y},tile:{x:0,y:0}};var steps=Math.ceil(Math.max(Math.abs(vx),Math.abs(vy))/this.tilesize);if(steps>1){var sx=vx/steps;var sy=vy/steps;for(var i=0;i<steps&&(sx||sy);i++){this._traceStep(res,x,y,sx,sy,objectWidth,objectHeight,vx,vy,i);x=res.pos.x;y=res.pos.y;if(res.collision.x){sx=0;vx=0;}
if(res.collision.y){sy=0;vy=0;}
if(res.collision.slope){break;}}}
else{this._traceStep(res,x,y,vx,vy,objectWidth,objectHeight,vx,vy,0);}
return res;},_traceStep:function(res,x,y,vx,vy,width,height,rvx,rvy,step){res.pos.x+=vx;res.pos.y+=vy;var t=0;if(vx){var pxOffsetX=(vx>0?width:0);var tileOffsetX=(vx<0?this.tilesize:0);var firstTileY=Math.max(Math.floor(y/this.tilesize),0);var lastTileY=Math.min(Math.ceil((y+height)/this.tilesize),this.height);var tileX=Math.floor((res.pos.x+pxOffsetX)/this.tilesize);var prevTileX=Math.floor((x+pxOffsetX)/this.tilesize);if(step>0||tileX==prevTileX||prevTileX<0||prevTileX>=this.width){prevTileX=-1;}
if(tileX>=0&&tileX<this.width){for(var tileY=firstTileY;tileY<lastTileY;tileY++){if(prevTileX!=-1){t=this.data[tileY][prevTileX];if(t>1&&t<=this.lastSlope&&this._checkTileDef(res,t,x,y,rvx,rvy,width,height,prevTileX,tileY)){break;}}
t=this.data[tileY][tileX];if(t==1||t>this.lastSlope||(t>1&&this._checkTileDef(res,t,x,y,rvx,rvy,width,height,tileX,tileY))){if(t>1&&t<=this.lastSlope&&res.collision.slope){break;}
res.collision.x=true;res.tile.x=t;x=res.pos.x=tileX*this.tilesize-pxOffsetX+tileOffsetX;rvx=0;break;}}}}
if(vy){var pxOffsetY=(vy>0?height:0);var tileOffsetY=(vy<0?this.tilesize:0);var firstTileX=Math.max(Math.floor(res.pos.x/this.tilesize),0);var lastTileX=Math.min(Math.ceil((res.pos.x+width)/this.tilesize),this.width);var tileY=Math.floor((res.pos.y+pxOffsetY)/this.tilesize);var prevTileY=Math.floor((y+pxOffsetY)/this.tilesize);if(step>0||tileY==prevTileY||prevTileY<0||prevTileY>=this.height){prevTileY=-1;}
if(tileY>=0&&tileY<this.height){for(var tileX=firstTileX;tileX<lastTileX;tileX++){if(prevTileY!=-1){t=this.data[prevTileY][tileX];if(t>1&&t<=this.lastSlope&&this._checkTileDef(res,t,x,y,rvx,rvy,width,height,tileX,prevTileY)){break;}}
t=this.data[tileY][tileX];if(t==1||t>this.lastSlope||(t>1&&this._checkTileDef(res,t,x,y,rvx,rvy,width,height,tileX,tileY))){if(t>1&&t<=this.lastSlope&&res.collision.slope){break;}
res.collision.y=true;res.tile.y=t;res.pos.y=tileY*this.tilesize-pxOffsetY+tileOffsetY;break;}}}}},_checkTileDef:function(res,t,x,y,vx,vy,width,height,tileX,tileY){var def=this.tiledef[t];if(!def){return false;}
var lx=(tileX+def[0])*this.tilesize,ly=(tileY+def[1])*this.tilesize,lvx=(def[2]-def[0])*this.tilesize,lvy=(def[3]-def[1])*this.tilesize,solid=def[4];var tx=x+vx+(lvy<0?width:0)-lx,ty=y+vy+(lvx>0?height:0)-ly;if(lvx*ty-lvy*tx>0){if(vx*-lvy+vy*lvx<0){return solid;}
var length=Math.sqrt(lvx*lvx+lvy*lvy);var nx=lvy/length,ny=-lvx/length;var proj=tx*nx+ty*ny;var px=nx*proj,py=ny*proj;if(px*px+py*py>=vx*vx+vy*vy){return solid||(lvx*(ty-vy)-lvy*(tx-vx)<0.5);}
res.pos.x=x+vx-px;res.pos.y=y+vy-py;res.collision.slope={x:lvx,y:lvy,nx:nx,ny:ny};return true;}
return false;}});var H=1/2,N=1/3,M=2/3,SOLID=true,NON_SOLID=false;ig.CollisionMap.defaultTileDef={5:[0,1,1,M,SOLID],6:[0,M,1,N,SOLID],7:[0,N,1,0,SOLID],3:[0,1,1,H,SOLID],4:[0,H,1,0,SOLID],2:[0,1,1,0,SOLID],10:[H,1,1,0,SOLID],21:[0,1,H,0,SOLID],32:[M,1,1,0,SOLID],43:[N,1,M,0,SOLID],54:[0,1,N,0,SOLID],27:[0,0,1,N,SOLID],28:[0,N,1,M,SOLID],29:[0,M,1,1,SOLID],25:[0,0,1,H,SOLID],26:[0,H,1,1,SOLID],24:[0,0,1,1,SOLID],11:[0,0,H,1,SOLID],22:[H,0,1,1,SOLID],33:[0,0,N,1,SOLID],44:[N,0,M,1,SOLID],55:[M,0,1,1,SOLID],16:[1,N,0,0,SOLID],17:[1,M,0,N,SOLID],18:[1,1,0,M,SOLID],14:[1,H,0,0,SOLID],15:[1,1,0,H,SOLID],13:[1,1,0,0,SOLID],8:[H,1,0,0,SOLID],19:[1,1,H,0,SOLID],30:[N,1,0,0,SOLID],41:[M,1,N,0,SOLID],52:[1,1,M,0,SOLID],38:[1,M,0,1,SOLID],39:[1,N,0,M,SOLID],40:[1,0,0,N,SOLID],36:[1,H,0,1,SOLID],37:[1,0,0,H,SOLID],35:[1,0,0,1,SOLID],9:[1,0,H,1,SOLID],20:[H,0,0,1,SOLID],31:[1,0,M,1,SOLID],42:[M,0,N,1,SOLID],53:[N,0,0,1,SOLID],12:[0,0,1,0,NON_SOLID],23:[1,1,0,1,NON_SOLID],34:[1,0,1,1,NON_SOLID],45:[0,1,0,0,NON_SOLID]};ig.CollisionMap.staticNoCollision={trace:function(x,y,vx,vy){return{collision:{x:false,y:false,slope:false},pos:{x:x+vx,y:y+vy},tile:{x:0,y:0}};}};});

// lib/impact/background-map.js
ig.baked=true;ig.module('impact.background-map').requires('impact.map','impact.image').defines(function(){"use strict";ig.BackgroundMap=ig.Map.extend({tiles:null,scroll:{x:0,y:0},distance:1,repeat:false,tilesetName:'',foreground:false,enabled:true,preRender:false,preRenderedChunks:null,chunkSize:512,debugChunks:false,anims:{},init:function(tilesize,data,tileset){this.parent(tilesize,data);this.setTileset(tileset);},setTileset:function(tileset){this.tilesetName=tileset instanceof ig.Image?tileset.path:tileset;this.tiles=new ig.Image(this.tilesetName);this.preRenderedChunks=null;},setScreenPos:function(x,y){this.scroll.x=x/this.distance;this.scroll.y=y/this.distance;},preRenderMapToChunks:function(){var totalWidth=this.width*this.tilesize*ig.system.scale,totalHeight=this.height*this.tilesize*ig.system.scale;this.chunkSize=Math.min(Math.max(totalWidth,totalHeight),this.chunkSize);var chunkCols=Math.ceil(totalWidth/this.chunkSize),chunkRows=Math.ceil(totalHeight/this.chunkSize);this.preRenderedChunks=[];for(var y=0;y<chunkRows;y++){this.preRenderedChunks[y]=[];for(var x=0;x<chunkCols;x++){var chunkWidth=(x==chunkCols-1)?totalWidth-x*this.chunkSize:this.chunkSize;var chunkHeight=(y==chunkRows-1)?totalHeight-y*this.chunkSize:this.chunkSize;this.preRenderedChunks[y][x]=this.preRenderChunk(x,y,chunkWidth,chunkHeight);}}},preRenderChunk:function(cx,cy,w,h){var tw=w/this.tilesize/ig.system.scale+1,th=h/this.tilesize/ig.system.scale+1;var nx=(cx*this.chunkSize/ig.system.scale)%this.tilesize,ny=(cy*this.chunkSize/ig.system.scale)%this.tilesize;var tx=Math.floor(cx*this.chunkSize/this.tilesize/ig.system.scale),ty=Math.floor(cy*this.chunkSize/this.tilesize/ig.system.scale);var chunk=ig.$new('canvas');chunk.width=w;chunk.height=h;chunk.retinaResolutionEnabled=false;var chunkContext=chunk.getContext('2d');ig.System.scaleMode(chunk,chunkContext);var screenContext=ig.system.context;ig.system.context=chunkContext;for(var x=0;x<tw;x++){for(var y=0;y<th;y++){if(x+tx<this.width&&y+ty<this.height){var tile=this.data[y+ty][x+tx];if(tile){this.tiles.drawTile(x*this.tilesize-nx,y*this.tilesize-ny,tile-1,this.tilesize);}}}}
ig.system.context=screenContext;return chunk;},draw:function(){if(!this.tiles.loaded||!this.enabled){return;}
if(this.preRender){this.drawPreRendered();}
else{this.drawTiled();}},drawPreRendered:function(){if(!this.preRenderedChunks){this.preRenderMapToChunks();}
var dx=ig.system.getDrawPos(this.scroll.x),dy=ig.system.getDrawPos(this.scroll.y);if(this.repeat){var w=this.width*this.tilesize*ig.system.scale;dx=(dx%w+w)%w;var h=this.height*this.tilesize*ig.system.scale;dy=(dy%h+h)%h;}
var minChunkX=Math.max(Math.floor(dx/this.chunkSize),0),minChunkY=Math.max(Math.floor(dy/this.chunkSize),0),maxChunkX=Math.ceil((dx+ig.system.realWidth)/this.chunkSize),maxChunkY=Math.ceil((dy+ig.system.realHeight)/this.chunkSize),maxRealChunkX=this.preRenderedChunks[0].length,maxRealChunkY=this.preRenderedChunks.length;if(!this.repeat){maxChunkX=Math.min(maxChunkX,maxRealChunkX);maxChunkY=Math.min(maxChunkY,maxRealChunkY);}
var nudgeY=0;for(var cy=minChunkY;cy<maxChunkY;cy++){var nudgeX=0;for(var cx=minChunkX;cx<maxChunkX;cx++){var chunk=this.preRenderedChunks[cy%maxRealChunkY][cx%maxRealChunkX];var x=-dx+cx*this.chunkSize-nudgeX;var y=-dy+cy*this.chunkSize-nudgeY;ig.system.context.drawImage(chunk,x,y);ig.Image.drawCount++;if(this.debugChunks){ig.system.context.strokeStyle='#f0f';ig.system.context.strokeRect(x,y,this.chunkSize,this.chunkSize);}
if(this.repeat&&chunk.width<this.chunkSize&&x+chunk.width<ig.system.realWidth){nudgeX+=this.chunkSize-chunk.width;maxChunkX++;}}
if(this.repeat&&chunk.height<this.chunkSize&&y+chunk.height<ig.system.realHeight){nudgeY+=this.chunkSize-chunk.height;maxChunkY++;}}},drawTiled:function(){var tile=0,anim=null,tileOffsetX=(this.scroll.x/this.tilesize).toInt(),tileOffsetY=(this.scroll.y/this.tilesize).toInt(),pxOffsetX=this.scroll.x%this.tilesize,pxOffsetY=this.scroll.y%this.tilesize,pxMinX=-pxOffsetX-this.tilesize,pxMinY=-pxOffsetY-this.tilesize,pxMaxX=ig.system.width+this.tilesize-pxOffsetX,pxMaxY=ig.system.height+this.tilesize-pxOffsetY;for(var mapY=-1,pxY=pxMinY;pxY<pxMaxY;mapY++,pxY+=this.tilesize){var tileY=mapY+tileOffsetY;if(tileY>=this.height||tileY<0){if(!this.repeat){continue;}
tileY=(tileY%this.height+this.height)%this.height;}
for(var mapX=-1,pxX=pxMinX;pxX<pxMaxX;mapX++,pxX+=this.tilesize){var tileX=mapX+tileOffsetX;if(tileX>=this.width||tileX<0){if(!this.repeat){continue;}
tileX=(tileX%this.width+this.width)%this.width;}
if((tile=this.data[tileY][tileX])){if((anim=this.anims[tile-1])){anim.draw(pxX,pxY);}
else{this.tiles.drawTile(pxX,pxY,tile-1,this.tilesize);}}}}}});});

// lib/impact/game.js
ig.baked=true;ig.module('impact.game').requires('impact.impact','impact.entity','impact.collision-map','impact.background-map').defines(function(){"use strict";ig.Game=ig.Class.extend({clearColor:'#000000',gravity:0,screen:{x:0,y:0},_rscreen:{x:0,y:0},entities:[],namedEntities:{},collisionMap:ig.CollisionMap.staticNoCollision,backgroundMaps:[],backgroundAnims:{},autoSort:false,sortBy:null,cellSize:64,_deferredKill:[],_levelToLoad:null,_doSortEntities:false,staticInstantiate:function(){this.sortBy=this.sortBy||ig.Game.SORT.Z_INDEX;ig.game=this;return null;},loadLevel:function(data){this.screen={x:0,y:0};this.entities=[];this.namedEntities={};for(var i=0;i<data.entities.length;i++){var ent=data.entities[i];this.spawnEntity(ent.type,ent.x,ent.y,ent.settings);}
this.sortEntities();this.collisionMap=ig.CollisionMap.staticNoCollision;this.backgroundMaps=[];for(var i=0;i<data.layer.length;i++){var ld=data.layer[i];if(ld.name=='collision'){this.collisionMap=new ig.CollisionMap(ld.tilesize,ld.data);}
else{var newMap=new ig.BackgroundMap(ld.tilesize,ld.data,ld.tilesetName);newMap.anims=this.backgroundAnims[ld.tilesetName]||{};newMap.repeat=ld.repeat;newMap.distance=ld.distance;newMap.foreground=!!ld.foreground;newMap.preRender=!!ld.preRender;newMap.name=ld.name;this.backgroundMaps.push(newMap);}}
for(var i=0;i<this.entities.length;i++){this.entities[i].ready();}},loadLevelDeferred:function(data){this._levelToLoad=data;},getMapByName:function(name){if(name=='collision'){return this.collisionMap;}
for(var i=0;i<this.backgroundMaps.length;i++){if(this.backgroundMaps[i].name==name){return this.backgroundMaps[i];}}
return null;},getEntityByName:function(name){return this.namedEntities[name];},getEntitiesByType:function(type){var entityClass=typeof(type)==='string'?ig.global[type]:type;var a=[];for(var i=0;i<this.entities.length;i++){var ent=this.entities[i];if(ent instanceof entityClass&&!ent._killed){a.push(ent);}}
return a;},spawnEntity:function(type,x,y,settings){var entityClass=typeof(type)==='string'?ig.global[type]:type;if(!entityClass){throw("Can't spawn entity of type "+type);}
var ent=new(entityClass)(x,y,settings||{});this.entities.push(ent);if(ent.name){this.namedEntities[ent.name]=ent;}
return ent;},sortEntities:function(){this.entities.sort(this.sortBy);},sortEntitiesDeferred:function(){this._doSortEntities=true;},removeEntity:function(ent){if(ent.name){delete this.namedEntities[ent.name];}
ent._killed=true;ent.type=ig.Entity.TYPE.NONE;ent.checkAgainst=ig.Entity.TYPE.NONE;ent.collides=ig.Entity.COLLIDES.NEVER;this._deferredKill.push(ent);},run:function(){this.update();this.draw();},update:function(){if(this._levelToLoad){this.loadLevel(this._levelToLoad);this._levelToLoad=null;}
this.updateEntities();this.checkEntities();for(var i=0;i<this._deferredKill.length;i++){this._deferredKill[i].erase();this.entities.erase(this._deferredKill[i]);}
this._deferredKill=[];if(this._doSortEntities||this.autoSort){this.sortEntities();this._doSortEntities=false;}
for(var tileset in this.backgroundAnims){var anims=this.backgroundAnims[tileset];for(var a in anims){anims[a].update();}}},updateEntities:function(){for(var i=0;i<this.entities.length;i++){var ent=this.entities[i];if(!ent._killed){ent.update();}}},draw:function(){if(this.clearColor){ig.system.clear(this.clearColor);}
this._rscreen.x=ig.system.getDrawPos(this.screen.x)/ig.system.scale;this._rscreen.y=ig.system.getDrawPos(this.screen.y)/ig.system.scale;var mapIndex;for(mapIndex=0;mapIndex<this.backgroundMaps.length;mapIndex++){var map=this.backgroundMaps[mapIndex];if(map.foreground){break;}
map.setScreenPos(this.screen.x,this.screen.y);map.draw();}
this.drawEntities();for(mapIndex;mapIndex<this.backgroundMaps.length;mapIndex++){var map=this.backgroundMaps[mapIndex];map.setScreenPos(this.screen.x,this.screen.y);map.draw();}},drawEntities:function(){for(var i=0;i<this.entities.length;i++){this.entities[i].draw();}},checkEntities:function(){var hash={};for(var e=0;e<this.entities.length;e++){var entity=this.entities[e];if(entity.type==ig.Entity.TYPE.NONE&&entity.checkAgainst==ig.Entity.TYPE.NONE&&entity.collides==ig.Entity.COLLIDES.NEVER){continue;}
var checked={},xmin=Math.floor(entity.pos.x/this.cellSize),ymin=Math.floor(entity.pos.y/this.cellSize),xmax=Math.floor((entity.pos.x+entity.size.x)/this.cellSize)+1,ymax=Math.floor((entity.pos.y+entity.size.y)/this.cellSize)+1;for(var x=xmin;x<xmax;x++){for(var y=ymin;y<ymax;y++){if(!hash[x]){hash[x]={};hash[x][y]=[entity];}
else if(!hash[x][y]){hash[x][y]=[entity];}
else{var cell=hash[x][y];for(var c=0;c<cell.length;c++){if(entity.touches(cell[c])&&!checked[cell[c].id]){checked[cell[c].id]=true;ig.Entity.checkPair(entity,cell[c]);}}
cell.push(entity);}}}}}});ig.Game.SORT={Z_INDEX:function(a,b){return a.zIndex-b.zIndex;},POS_X:function(a,b){return(a.pos.x+a.size.x)-(b.pos.x+b.size.x);},POS_Y:function(a,b){return(a.pos.y+a.size.y)-(b.pos.y+b.size.y);}};});

// lib/plusplus/core/timer.js
ig.baked=true;ig.module('plusplus.core.timer').requires('impact.timer','plusplus.core.config').defines(function(){'use strict';var _c=ig.CONFIG;ig.TimerExtended=ig.Timer.extend({pauseSignaller:null,init:function(seconds,pauseSignaller){this.parent(seconds);this.setPauseSignaller(pauseSignaller);},setPauseSignaller:function(pauseSignaller){if(this.pauseSignaller!==pauseSignaller){this.clearPauseSignaller();this.pauseSignaller=pauseSignaller;if(this.pauseSignaller&&this.pauseSignaller.onPaused){this.pauseSignaller.onPaused.add(this.pause,this);this.pauseSignaller.onUnpaused.add(this.unpause,this);}}},clearPauseSignaller:function(){if(this.pauseSignaller){if(this.pauseSignaller.onPaused){this.pauseSignaller.onPaused.remove(this.pause,this);this.pauseSignaller.onUnpaused.remove(this.unpause,this);}
this.pauseSignaller=null;}}});ig.Timer.minStep=_c.MIN_TIME_STEP;ig.Timer.overflow=0;ig.Timer.stepped=false;ig.Timer.step=function(){var current=Date.now();ig.Timer.overflow+=Math.min((current-ig.Timer._last)/1000,ig.Timer.maxStep);if(ig.Timer.overflow>=ig.Timer.minStep){ig.Timer.overflow-=ig.Timer.minStep;ig.Timer.time+=ig.Timer.minStep*ig.Timer.timeScale;ig.Timer.stepped=true;}
else{ig.Timer.stepped=false;}
ig.Timer._last=current;};});

// lib/plusplus/helpers/signals.js
ig.baked=true;ig.module('plusplus.helpers.signals').defines(function(){"use strict";function SignalBinding(signal,listener,isOnce,listenerContext,priority){this._listener=listener;this._isOnce=isOnce;this.context=listenerContext;this._signal=signal;this._priority=priority||0;}
SignalBinding.prototype={active:true,params:null,execute:function(paramsArr){var handlerReturn,params;if(this.active&&!!this._listener){params=this.params?this.params.concat(paramsArr):paramsArr;handlerReturn=this._listener.apply(this.context,params);if(this._isOnce){this.detach();}}
return handlerReturn;},detach:function(){return this.isBound()?this._signal.remove(this._listener,this.context):null;},isBound:function(){return(!!this._signal&&!!this._listener);},isOnce:function(){return this._isOnce;},getListener:function(){return this._listener;},getSignal:function(){return this._signal;},_destroy:function(){delete this._signal;delete this._listener;delete this.context;},toString:function(){return'[SignalBinding isOnce:'+this._isOnce+', isBound:'+this.isBound()+', active:'+this.active+']';}};function validateListener(listener,fnName){if(typeof listener!=='function'){throw new Error('listener is a required param of {fn}() and should be a Function.'.replace('{fn}',fnName));}}
ig.Signal=function(){this._bindings=[];this._prevParams=null;var self=this;this.dispatch=function(){ig.Signal.prototype.dispatch.apply(self,arguments);};}
ig.Signal.prototype={VERSION:'1.0.0',memorize:false,_shouldPropagate:true,active:true,_registerListener:function(listener,isOnce,listenerContext,priority){var prevIndex=this._indexOfListener(listener,listenerContext),binding;if(prevIndex!==-1){binding=this._bindings[prevIndex];if(binding.isOnce()!==isOnce){throw new Error('You cannot add'+(isOnce?'':'Once')+'() then add'+(!isOnce?'':'Once')+'() the same listener without removing the relationship first.');}}else{binding=new SignalBinding(this,listener,isOnce,listenerContext,priority);this._addBinding(binding);}
if(this.memorize&&this._prevParams){binding.execute(this._prevParams);}
return binding;},_addBinding:function(binding){var n=this._bindings.length;do{--n;}while(this._bindings[n]&&binding._priority<=this._bindings[n]._priority);this._bindings.splice(n+1,0,binding);},_indexOfListener:function(listener,context){var n=this._bindings.length,cur;while(n--){cur=this._bindings[n];if(cur._listener===listener&&cur.context===context){return n;}}
return-1;},has:function(listener,context){return this._indexOfListener(listener,context)!==-1;},add:function(listener,listenerContext,priority){validateListener(listener,'add');return this._registerListener(listener,false,listenerContext,priority);},addOnce:function(listener,listenerContext,priority){validateListener(listener,'addOnce');return this._registerListener(listener,true,listenerContext,priority);},remove:function(listener,context){validateListener(listener,'remove');var i=this._indexOfListener(listener,context);if(i!==-1){this._bindings[i]._destroy();this._bindings.splice(i,1);}
return listener;},removeAll:function(){var n=this._bindings.length;while(n--){this._bindings[n]._destroy();}
this._bindings.length=0;},getNumListeners:function(){return this._bindings.length;},halt:function(){this._shouldPropagate=false;},dispatch:function(params){if(!this.active){return;}
var paramsArr=Array.prototype.slice.call(arguments),n=this._bindings.length,bindings;if(this.memorize){this._prevParams=paramsArr;}
if(!n){return;}
bindings=this._bindings.slice();this._shouldPropagate=true;do{n--;}while(bindings[n]&&this._shouldPropagate&&bindings[n].execute(paramsArr)!==false);},forget:function(){this._prevParams=null;},dispose:function(){this.removeAll();delete this._bindings;delete this._prevParams;},toString:function(){return'[Signal active:'+this.active+' numListeners:'+this.getNumListeners()+']';}};});

// lib/plusplus/core/image.js
ig.baked=true;ig.module('plusplus.core.image').requires('impact.image','plusplus.helpers.signals').defines(function(){'use strict';ig.Image.inject({width:1,height:1,data:null,dataContext:null,dataWidth:1,dataHeight:1,scale:1,ignoreSystemScale:false,retainScaledData:true,scaleCache:null,onLoaded:null,_scale:0,init:function(path,settings){ig.merge(this,settings);this.onLoaded=new ig.Signal();this.scaleCache={};this.parent(path);},onload:function(event){this.width=this.data.width;this.height=this.data.height;this.loaded=true;var original=ig.$new('canvas');original.width=this.width;original.height=this.height;var originalContext=original.getContext('2d');ig.System.scaleMode(original,originalContext);originalContext.drawImage(this.data,0,0);this.data=original;this.dataContext=this.data.getContext('2d');this.dataWidth=this.data.width;this.dataHeight=this.data.height;if(!this.scaleCache){this.scaleCache={};}
this.scaleCache.x1=this.data;if(this.loadCallback){this.loadCallback(this.path,true);}
if(this.onLoaded){this.onLoaded.dispatch(this);this.onLoaded.removeAll();this.onLoaded.forget();}},resize:function(scale){if(scale&&this._scale!==scale){this.scale=this._scale=scale;if(!this.scaleCache){this.scaleCache={};}
this.data=this.scaleCache["x"+scale];if(this.data){this.dataContext=this.data.getContext('2d');this.dataWidth=this.data.width;this.dataHeight=this.data.height;}
else{var origData=this.scaleCache.x1;if(!origData){return;}
var origPixels=ig.getImagePixels(origData,0,0,this.width,this.height);var widthScaled=(this.width*scale)|0;var heightScaled=(this.height*scale)|0;var scaled=this.data=ig.$new('canvas');this.dataWidth=scaled.width=widthScaled;this.dataHeight=scaled.height=heightScaled;var scaledCtx=this.dataContext=this.data.getContext('2d');ig.System.scaleMode(scaled,scaledCtx);var scaledPixels=scaledCtx.getImageData(0,0,widthScaled,heightScaled);for(var y=0;y<heightScaled;y++){for(var x=0;x<widthScaled;x++){var index=(Math.floor(y/scale)*this.width+Math.floor(x/scale))*4;var indexScaled=(y*widthScaled+x)*4;scaledPixels.data[indexScaled]=origPixels.data[index];scaledPixels.data[indexScaled+1]=origPixels.data[index+1];scaledPixels.data[indexScaled+2]=origPixels.data[index+2];scaledPixels.data[indexScaled+3]=origPixels.data[index+3];}}
scaledCtx.putImageData(scaledPixels,0,0);if(this.retainScaledData){this.scaleCache["x"+scale]=this.data;}}}},draw:function(targetX,targetY,sourceX,sourceY,width,height,scale){if(!this.loaded){return;}
if(!scale){if(!this.ignoreSystemScale&&this._scale!==ig.system.scale){this.resize(ig.system.scale);}
else if(this._scale!==this.scale){this.resize(this.scale);}
scale=this._scale;}
else{this.resize(scale);}
width=((typeof width!=='undefined'?width:this.width)*scale)|0;height=((typeof height!=='undefined'?height:this.height)*scale)|0;if(width===0||height===0){return;}
sourceX=sourceX?(sourceX*scale)|0:0;sourceY=sourceY?(sourceY*scale)|0:0;ig.system.context.drawImage(this.data,sourceX,sourceY,width,height,ig.system.getDrawPos(targetX),ig.system.getDrawPos(targetY),width,height);ig.Image.drawCount++;},drawTile:function(targetX,targetY,tile,tileWidth,tileHeight,flipX,flipY,scale){tileHeight=tileHeight?tileHeight:tileWidth;if(!this.loaded||tileWidth>this.width||tileHeight>this.height){return;}
if(!scale){if(!this.ignoreSystemScale&&this._scale!==ig.system.scale){this.resize(ig.system.scale);}
else if(this._scale!==this.scale){this.resize(this.scale);}
scale=this._scale;}
else{this.resize(scale);}
var tileWidthScaled=Math.floor(tileWidth*scale);var tileHeightScaled=Math.floor(tileHeight*scale);var dirX;var dirY;var offsetX;var offsetY;if(flipX){dirX=-1;offsetX=tileWidthScaled;}
else{dirX=1;offsetX=0;}
if(flipY){dirY=-1;offsetY=tileHeightScaled;}
else{dirY=1;offsetY=0;}
if(flipX||flipY){ig.system.context.save();ig.system.context.scale(dirX,dirY);ig.system.context.drawImage(this.data,(Math.floor(tile*tileWidth)%this.width)*scale,(Math.floor(tile*tileWidth/this.width)*tileHeight)*scale,tileWidthScaled,tileHeightScaled,ig.system.getDrawPos(targetX)*dirX-offsetX,ig.system.getDrawPos(targetY)*dirY-offsetY,tileWidthScaled,tileHeightScaled);ig.system.context.restore();}
else{ig.system.context.drawImage(this.data,(Math.floor(tile*tileWidth)%this.width)*scale,(Math.floor(tile*tileWidth/this.width)*tileHeight)*scale,tileWidthScaled,tileHeightScaled,ig.system.getDrawPos(targetX)*dirX-offsetX,ig.system.getDrawPos(targetY)*dirY-offsetY,tileWidthScaled,tileHeightScaled);}
ig.Image.drawCount++;}});if(ig.global.wm){ig.Image.inject({resize:function(scale){if(scale&&this._scale!==scale){var origData=this.scaleCache.x1;if(!origData){this.scaleCache.x1=this.data;}
this.parent(scale);}},draw:function(targetX,targetY,sourceX,sourceY,width,height,scale){if(!scale){scale=ig.system.scale;}
this.parent(targetX,targetY,sourceX,sourceY,width,height,scale);},drawTile:function(targetX,targetY,tile,tileWidth,tileHeight,flipX,flipY,scale){if(!scale){scale=ig.system.scale;}
this.parent(targetX,targetY,tile,tileWidth,tileHeight,flipX,flipY,scale);}});}});

// lib/plusplus/core/font.js
ig.baked=true;ig.module('plusplus.core.font').requires('impact.font','plusplus.core.config','plusplus.core.image').defines(function(){"use strict";var _c=ig.CONFIG;ig.Font.inject({scale:_c.FONT.SCALE,ignoreSystemScale:_c.FONT.IGNORE_SYSTEM_SCALE,multilineForWidth:function(text,width){var formatted="";var lineWidth=0;var space=" ";var empty="";var words=text.split(space);text.replace("\n",empty);for(var i=0,il=words.length;i<il;i++){var word=words[i]+(i!==il-1?space:empty);var wordWidth=this._widthForLine(word);if(lineWidth!==0&&lineWidth+wordWidth>width){formatted+="\n";lineWidth=0;}
formatted+=word;lineWidth+=wordWidth;}
return formatted;},overflowForHeight:function(text,height){var display=text;var overflow="";var lines=text.split('\n');var multilineHeight=lines.length*(this.height+this.lineSpacing);if(multilineHeight>height){var linesDisplay=Math.floor(lines.length*height/multilineHeight);display="";for(var i=0,il=lines.length;i<il;i++){var line=lines[i];if(i<linesDisplay){display+=line;if(i<linesDisplay-1){display+="\n";}}
else{overflow+=line;if(i<il-1){overflow+="\n";}}}}
return{display:display,overflow:overflow};},draw:function(text,x,y,align,context,scale,scaleMod,forMultiline){if(!forMultiline){if(!this.loaded)return;context=context||ig.system.context;if(!scale){if(!this.ignoreSystemScale&&this._scale!==ig.system.scale){this.resize(ig.system.scale);}
else if(this._scale!==this.scale){this.resize(this.scale);}
scale=this._scale;}
else{var scaleLast=this.scale;this.resize(scale);this.scale=scaleLast;}
if(context===ig.system.context){scaleMod=scale/ig.system.scale;}
else{scaleMod=1;}
if(typeof(text)!='string'){text=text.toString();}
if(text.indexOf('\n')!==-1){var lines=text.split('\n');var lineHeight=(this.height+this.lineSpacing)*scaleMod;for(var i=0,il=lines.length;i<il;i++){this.draw(lines[i],x,y+i*lineHeight,align,context,scale,scaleMod,true);}
return;}}
var width;if(align===ig.Font.ALIGN.CENTER){x-=this._widthForLine(text)*0.5;}
else if(align===ig.Font.ALIGN.RIGHT){x-=this._widthForLine(text);}
if(this.alpha!==1){context.globalAlpha=this.alpha;}
for(var i=0;i<text.length;i++){var c=text.charCodeAt(i)-this.firstChar;x+=this._drawChar(c,x,y,context,scale)*scaleMod;}
if(this.alpha!==1){context.globalAlpha=1;}
ig.Image.drawCount+=text.length;},_drawChar:function(c,targetX,targetY,context,scale){var width=this.widthMap[c];var height=this.height-2;if(context===ig.system.context){context.drawImage(this.data,this.indices[c]*scale,0,width*scale,height*scale,ig.system.getDrawPos(targetX),ig.system.getDrawPos(targetY),width*scale,height*scale);}
else{context.drawImage(this.data,this.indices[c]*scale,0,width*scale,height*scale,targetX*scale,targetY*scale,width*scale,height*scale);}
return width+this.letterSpacing;}});ig.Font.FONTS={};ig.Font.FONTS.MAIN=(_c.FONT.MAIN_PATH?new ig.Font(_c.FONT.MAIN_PATH):null);ig.Font.FONTS.ALT=(_c.FONT.ALT_PATH?new ig.Font(_c.FONT.ALT_PATH):ig.Font.FONTS.MAIN);ig.Font.FONTS.CHAT=(_c.FONT.CHAT_PATH?new ig.Font(_c.FONT.CHAT_PATH):ig.Font.FONTS.MAIN);});

// lib/plusplus/core/image-drawing.js
ig.baked=true;ig.module('plusplus.core.image-drawing').requires('plusplus.core.image').defines(function(){"use strict";ig.ImageDrawing=ig.Image.extend({loaded:true,init:function(settings){ig.merge(this,settings);this.data=ig.$new('canvas');this.dataContext=this.data.getContext('2d');this.dataWidth=this.data.width=(this.width*this.scale)|0;this.dataHeight=this.data.height=(this.height*this.scale)|0;ig.System.scaleMode(this.data,this.dataContext);this.scaleCache={};this.scaleCache.x1=this.data;},load:function(){},reload:function(){},onload:function(){},setWidth:function(width){this.setDimensions(width,this.height);},setHeight:function(height){this.setDimensions(this.width,height);},setDimensions:function(width,height){this.width=this.dataWidth=this.data.width=width|0;this.height=this.dataHeight=this.data.height=height|0;ig.System.scaleMode(this.data,this.dataContext);},finalize:function(scale){if(!scale){this._scale=scale=1;}
else{this.scale=this._scale=scale;}
this.scaleCache={};this.scaleCache["x"+scale]=this.data;this.dataContext=this.data.getContext('2d');this.dataWidth=this.data.width;this.dataHeight=this.data.height;this.width=this.dataWidth/scale;this.height=this.dataHeight/scale;}});});

// lib/plusplus/helpers/shims.js
ig.baked=true;ig.module('plusplus.helpers.shims').defines(function(){"use strict";if(typeof Date.now!=='function'){Date.now=function(){return+(new Date);};}});

// lib/plusplus/helpers/utils.js
ig.baked=true;ig.module('plusplus.helpers.utils').requires('plusplus.helpers.shims','plusplus.core.config').defines(function(){"use strict";var _g=ig.global;var _c=ig.CONFIG;ig.utils={};ig.utils.type=function(o){return o==null?o+'':Object.prototype.toString.call(o).slice(8,-1).toLowerCase();};ig.utils.isNumber=function(n){return!isNaN(n)&&isFinite(n)&&typeof n!=='boolean';};ig.utils.isArray=function(target){return Object.prototype.toString.call(target)==='[object Array]';};ig.utils.toArray=function(target){return target?(ig.utils.isArray(target)!==true?[target]:target):[];};ig.utils.toNotArray=function(target,index){return ig.utils.isArray(target)===true?target[index||0]:target;};ig.utils.arrayCautiousAdd=function(target,element){var index=ig.utils.indexOfValue(target,element);if(index===-1){target.push(element);}
return target;};ig.utils.arrayCautiousAddMulti=function(target,elements){var element,index;elements=ig.utils.toArray(elements);for(var i=0,il=elements.length;i<il;i++){element=elements[i];if(element!==target){index=ig.utils.indexOfValue(target,element);if(index===-1){target.push(element);}}}
return target;};ig.utils.arrayCautiousRemove=function(target,element){var index=ig.utils.indexOfValue(target,element);if(index!==-1){target.splice(index,1);}
return target;};ig.utils.arrayCautiousRemoveMulti=function(target,elements){var element,index;elements=ig.utils.toArray(elements);for(var i=0,il=elements.length;i<il;i++){element=elements[i];if(element!==target){index=ig.utils.indexOfValue(target,element);if(index!==-1){target.splice(index,1);}}}
return target;};ig.utils.forEach=function(array,callback,args){for(var i=0,il=array.length;i<il;i++){callback.apply(array[i],args);}};ig.utils.indexOfValue=function(array,value){for(var i=0,il=array.length;i<il;i++){if(value===array[i]){return i;}}
return-1;};ig.utils.indexOfProperty=function(array,property,value){for(var i=0,il=array.length;i<il;i++){if(value===array[i][property]){return i;}}
return-1;};ig.utils.indexOfProperties=function(array,properties,values){for(var i=0,il=array.length;i<il;i++){var obj=array[i];var missing=false;for(var j=0,jl=properties.length;j<jl;j++){if(values[j]!==obj[properties[j]]){missing=true;break;}}
if(missing!==true){return i;}}
return-1;};ig.utils.throttle=function(callback,delay,trailing){var timeoutId;var timeLast=0;if(ig.utils.isNumber(delay)!==true){delay=_c.DURATION_THROTTLE;}
function throttled(){var me=this;var elapsed=Date.now()-timeLast;var args=arguments;function execute(){timeLast=Date.now();callback.apply(me,args);}
if(elapsed>delay){timeoutId&&_g.clearTimeout(timeoutId);execute();}
else if(trailing!==false){timeoutId&&_g.clearTimeout(timeoutId);timeoutId=_g.setTimeout(execute,delay-elapsed);}}
return throttled;};ig.utils.debounce=function(callback,delay){var timeoutId;if(ig.utils.isNumber(delay)!==true){delay=_c.DURATION_THROTTLE;}
function debounced(){var me=this;var args=arguments;timeoutId&&_g.clearTimeout(timeoutId);timeoutId=_g.setTimeout(function(){callback.apply(me,args);},delay);}
return debounced;};var MAX_TYPE=Math.pow(2,32);ig.utils.getType=function(classObject,names,typeListName){typeListName=typeListName||'TYPE';var types=classObject[typeListName];var typeLastName=typeListName+"_LAST";var type;if(!classObject[typeLastName]||!types){classObject[typeLastName]=1;types=classObject[typeListName]={};}
names=names.toUpperCase();type=types[names];if(!type){type=0;var typeLast=classObject[typeLastName];var namesList=names.split(" ");for(var i=0,il=namesList.length;i<il;i++){var name=namesList[i];var typeNext=types[name];if(!typeNext){if(typeLast>=MAX_TYPE){throw new TypeError('Bitwise flag out of range / above 32 bits!');}
typeNext=types[name]=typeLast;classObject[typeLastName]=typeLast*2;}
type|=typeNext;}
types[names]=type;}
return type;};ig.utils.addType=function(classObject,entity,property,names,typeListName){entity[property]|=ig.utils.getType(classObject,names,typeListName);};});

// lib/plusplus/core/background-map.js
ig.baked=true;ig.module('plusplus.core.background-map').requires('impact.background-map','plusplus.core.image-drawing','plusplus.helpers.utils').defines(function(){'use strict';var _ut=ig.utils;ig.BackgroundMapExtended=ig.BackgroundMap.extend({preRenderedScale:0,mergedMaps:[],setTileset:function(tileset){if(tileset instanceof ig.ImageDrawing){this.tiles=tileset;}
else{this.tilesetName=tileset instanceof ig.Image?tileset.path:tileset;this.tiles=new ig.Image(this.tilesetName);}
this.preRenderedChunks=null;},merge:function(map){if(this.preRender&&!this.repeat&&map instanceof ig.BackgroundMap&&map.preRender&&!map.repeat){_ut.arrayCautiousAdd(this.mergedMaps,map);this.preRenderedChunks=null;}},preRenderMapToChunks:function(){this.preRenderedScale=ig.system.scale;if(this.mergedMaps.length>0){this.preRenderedChunks=[];var maps=[this].concat(this.mergedMaps);var totalWidth=0;var totalHeight=0;var totalSize=0;var chunkSize=0;for(var i=0,il=maps.length;i<il;i++){var map=maps[i];totalWidth=Math.max(totalWidth,map.width*map.tilesize*ig.system.scale);totalHeight=Math.max(totalHeight,map.height*map.tilesize*ig.system.scale);totalSize=Math.max(totalWidth,totalHeight);chunkSize=Math.max(chunkSize,Math.min(totalSize,map.chunkSize));}
var chunkCols=Math.ceil(totalWidth/chunkSize);var chunkRows=Math.ceil(totalHeight/chunkSize);for(var y=0;y<chunkRows;y++){var chunkRow=this.preRenderedChunks[y]=this.preRenderedChunks[y]||[];for(var x=0;x<chunkCols;x++){var chunkWidth=(x===chunkCols-1)?totalWidth-x*chunkSize:chunkSize;var chunkHeight=(y===chunkRows-1)?totalHeight-y*chunkSize:chunkSize;chunkRow[x]=this.preRenderMergedChunk(maps,chunkSize,x,y,chunkWidth,chunkHeight);}}}
else{this.parent();}},preRenderMergedChunk:function(maps,chunkSize,cx,cy,w,h){var chunk=ig.$new('canvas');chunk.width=w;chunk.height=h;var screenContext=ig.system.context;ig.system.context=chunk.getContext("2d");for(var i=0,il=maps.length;i<il;i++){this.preRenderChunk(cx,cy,w,h,maps[i],chunkSize,chunk);}
ig.system.context=screenContext;return chunk;},preRenderChunk:function(cx,cy,w,h,map,chunkSize,chunk){map=map||this;chunkSize=chunkSize||this.chunkSize;var screenContext;if(!chunk){chunk=ig.$new('canvas');chunk.width=w;chunk.height=h;chunk.retinaResolutionEnabled=false;var chunkContext=chunk.getContext('2d');ig.System.scaleMode(chunk,chunkContext);screenContext=ig.system.context;ig.system.context=chunkContext;}
var tw=w/map.tilesize/ig.system.scale+1,th=h/map.tilesize/ig.system.scale+1;var nx=(cx*chunkSize/ig.system.scale)%map.tilesize,ny=(cy*chunkSize/ig.system.scale)%map.tilesize;var tx=Math.floor(cx*chunkSize/map.tilesize/ig.system.scale),ty=Math.floor(cy*chunkSize/map.tilesize/ig.system.scale);for(var x=0;x<tw;x++){for(var y=0;y<th;y++){if(x+tx<map.width&&y+ty<map.height){var tile=map.data[y+ty][x+tx];if(tile){map.tiles.drawTile(x*map.tilesize-nx,y*map.tilesize-ny,tile-1,map.tilesize);}}}}
if(screenContext){ig.system.context=screenContext;}
return chunk;},draw:function(){this.setScreenPos(ig.game.screen.x,ig.game.screen.y);if(!this.tiles.loaded||!this.enabled)return;if(this.preRender){if(this.preRenderedScale!==ig.system.scale){this.preRenderedChunks=null;}
this.drawPreRendered();}
else{this.drawTiled();}}});});

// lib/plusplus/core/collision-map.js
ig.baked=true;ig.module('plusplus.core.collision-map').requires('impact.collision-map','plusplus.core.config').defines(function(){'use strict';var _c=ig.CONFIG;ig.CollisionMap.inject({_traceStep:function(res,x,y,vx,vy,width,height,rvx,rvy,step){res.pos.x+=vx;res.pos.y+=vy;var t=0;if(vx){var pxOffsetX=(vx>0?width:0);var tileOffsetX=(vx<0?this.tilesize:0);var firstTileY=Math.max(Math.floor(y/this.tilesize),0);var lastTileY=Math.min(Math.ceil((y+height)/this.tilesize),this.height);var tileX=Math.floor((res.pos.x+pxOffsetX)/this.tilesize);var prevTileX=Math.floor((x+pxOffsetX)/this.tilesize);if(step>0||tileX==prevTileX||prevTileX<0||prevTileX>=this.width){prevTileX=-1;}
if(tileX>=0&&tileX<this.width){for(var tileY=firstTileY;tileY<lastTileY;tileY++){if(prevTileX!=-1){t=this.data[tileY][prevTileX];if(t>1&&t<=this.lastSlope&&this._checkTileDef(res,t,x,y,rvx,rvy,width,height,prevTileX,tileY)&&res.collision.slope.ny!==0){break;}}
t=this.data[tileY][tileX];if(t==1||t>this.lastSlope||(t>1&&this._checkTileDef(res,t,x,y,rvx,rvy,width,height,tileX,tileY))){res.tile.x=t;if(t>1&&t<=this.lastSlope&&res.collision.slope){break;}
res.collision.x=true;x=res.pos.x=tileX*this.tilesize-pxOffsetX+tileOffsetX;rvx=0;break;}}}}
if(vy){var pxOffsetY=(vy>0?height:0);var tileOffsetY=(vy<0?this.tilesize:0);var firstTileX=Math.max(Math.floor(res.pos.x/this.tilesize),0);var lastTileX=Math.min(Math.ceil((res.pos.x+width)/this.tilesize),this.width);var tileY=Math.floor((res.pos.y+pxOffsetY)/this.tilesize);var prevTileY=Math.floor((y+pxOffsetY)/this.tilesize);if(step>0||tileY==prevTileY||prevTileY<0||prevTileY>=this.height){prevTileY=-1;}
if(tileY>=0&&tileY<this.height){for(var tileX=firstTileX;tileX<lastTileX;tileX++){if(prevTileY!=-1){t=this.data[prevTileY][tileX];if(t>1&&t<=this.lastSlope&&this._checkTileDef(res,t,x,y,rvx,rvy,width,height,tileX,prevTileY)&&res.collision.slope.nx!==0){break;}}
t=this.data[tileY][tileX];if(t==1||t>this.lastSlope||(t>1&&this._checkTileDef(res,t,x,y,rvx,rvy,width,height,tileX,tileY))){res.tile.y=t;if(t>1&&t<=this.lastSlope&&res.collision.slope){break;}
res.collision.y=true;res.pos.y=tileY*this.tilesize-pxOffsetY+tileOffsetY;break;}}}}}});var NON_SOLID=false;ig.CollisionMap.defaultTileDef[_c.COLLISION.TILE_CLIMBABLE_WITH_TOP]=[0,0,1,0,NON_SOLID];ig.CollisionMap.defaultTileDef[_c.COLLISION.TILE_CLIMBABLE_STAIRS_WITH_TOP]=[0,0,1,0,NON_SOLID];});

// lib/plusplus/core/pathfinding-map.js
ig.baked=true;ig.module('plusplus.core.pathfinding-map').requires('impact.map','plusplus.core.config','plusplus.core.image').defines(function(){"use strict";var _c=ig.CONFIG;ig.PathfindingMap=ig.Map.extend({tiledef:null,init:function(tilesize,data,tiledef){this.parent(tilesize,data);this.tiledef=tiledef||_c.PATHFINDING.TILE_DEF;}});});

// lib/plusplus/core/animation.js
ig.baked=true;ig.module('plusplus.core.animation').requires('impact.animation','plusplus.core.config','plusplus.core.image','plusplus.core.image-drawing','plusplus.helpers.signals').defines(function(){'use strict';var _c=ig.CONFIG;ig.AnimationSheet.inject({init:function(path,width,height){if(!width||width<0){width=this.width;}
if(!height||height<0){height=this.height;}
this.parent(path,width,height);}});ig.AnimationExtended=ig.Animation.extend({frameTime:1,sequence:null,pivot:null,stop:false,changed:false,once:false,reverse:false,texturing:null,textureWidth:0,textureHeight:0,opaqueOffset:null,onCompleted:null,_texturingDeferred:false,init:function(sheet,settings){this.sheet=sheet;this.pivot={x:sheet.width*0.5,y:sheet.height*0.5};ig.merge(this,settings);this.tile=this.sequence[0];this.timer=new ig.Timer();this.onCompleted=new ig.Signal();},getDuration:function(){return this.frameTime*this.sequence.length;},texturize:function(entity){if(!this.sheet.image.loaded){this._texturingDeferred=entity;this.sheet.image.onLoaded.remove(this._texturizeDeferred,this);this.sheet.image.onLoaded.addOnce(this._texturizeDeferred,this);}
else{var sheetData=(this.sheet.image.scaleCache&&this.sheet.image.scaleCache.x1)||this.sheet.image.data;var textureWidth=entity.getSizeDrawX();var textureHeight=entity.getSizeDrawY();var tileWidth=this.sheet.width;var tileHeight=this.sheet.height;var sizeMismatch=this.textureWidth!==textureWidth||this.textureHeight!==textureHeight;if(tileWidth<textureWidth||tileHeight<textureHeight){this.texturing=entity;this.texturing.textures=this.texturing.textures||{};this.texturing.texturedAnimsCount=(this.texturing.texturedAnimsCount||0)+1;for(var i=0,il=this.sequence.length;i<il;i++){var tile=this.sequence[i];var texture=this.texturing.textures[tile];var recreate;if(!texture){texture=this.texturing.textures[tile]=new ig.ImageDrawing({width:textureWidth,height:textureHeight});recreate=true;}
else if(sizeMismatch){texture.setDimensions(textureWidth,textureHeight);recreate=true;}
if(recreate){var frame=ig.$new('canvas');frame.width=tileWidth;frame.height=tileHeight;var frameContext=frame.getContext('2d');ig.System.scaleMode(frame,frameContext);frameContext.drawImage(sheetData,-Math.floor(tile*tileWidth)%sheetData.width,-Math.floor(tile*tileHeight/sheetData.width)*tileHeight);texture.dataContext.fillStyle=texture.dataContext.createPattern(frame,'repeat');texture.dataContext.fillRect(0,0,textureWidth,textureHeight);texture.finalize();}}
this.textureWidth=textureWidth;this.textureHeight=textureHeight;}}},_texturizeDeferred:function(){this.texturize(this._texturingDeferred);this._texturingDeferred=undefined;},detexturize:function(){if(this.texturing){this.texturing.texturedAnimsCount=Math.max(0,this.texturing.texturedAnimsCount-1);if(!this.texturing.texturedAnimsCount){this.texturing.textures=undefined;}
this.sheet.image.onLoaded.remove(this._texturizeDeferred,this);this.texturing=this.textureWidth=this.textureHeight=this._texturingDeferred=undefined;}},playFromStart:function(once,reverse){this.stop=false;this.rewind(once,reverse);},rewind:function(once,reverse){this.once=typeof once!=='undefined'?once:this.once;this.reverse=typeof reverse!=='undefined'?reverse:this.reverse;return this.parent();},gotoFrame:function(f){var stopped=this.stop;this.stop=false;this.parent(f);this.stop=stopped;},update:function(){if(!this.stop){var loopCount=this.loopCount;var numFrames=this.sequence.length;var frameTotal=Math.floor(this.timer.delta()/this.frameTime);this.loopCount=Math.floor(frameTotal/numFrames);if(this.reverse){this.frame=(this.sequence.length-1)-(frameTotal%numFrames);}
else{this.frame=frameTotal%numFrames;}
if(this.loopCount>loopCount){if(this.once){this.once=false;this.stop=true;this.frame=numFrames-1;}
this.onCompleted.dispatch();}
var tile=this.tile;this.tile=this.sequence[this.frame];if(numFrames>1&&this.tile!==tile){this.changed=true;}
else{this.changed=false;}}},draw:function(targetX,targetY,scale,texturing){if(this.alpha!==1){ig.system.context.globalAlpha=this.alpha;}
texturing=texturing||this.texturing;if(texturing){if(this.texturing!==texturing){this.texturize(texturing);}
var texture=this.texturing&&this.texturing.textures&&this.texturing.textures[this.tile];if(texture){texture.draw(targetX,targetY,undefined,undefined,undefined,undefined,scale);}
else{return this.draw(targetX,targetY,scale);}}
else{if(this.angle===0){this.sheet.image.drawTile(targetX,targetY,this.tile,this.sheet.width,this.sheet.height,this.flip.x,this.flip.y,scale);}
else{ig.system.context.save();ig.system.context.translate(ig.system.getDrawPos(targetX+this.pivot.x),ig.system.getDrawPos(targetY+this.pivot.y));ig.system.context.rotate(this.angle);this.sheet.image.drawTile(-this.pivot.x,-this.pivot.y,this.tile,this.sheet.width,this.sheet.height,this.flip.x,this.flip.y,scale);ig.system.context.restore();}}
if(this.alpha!==1){ig.system.context.globalAlpha=1;}}});if(ig.global.wm){ig.AnimationExtended.inject({computeDrawCount:5,computeDrawCountMax:5,draw:function(targetX,targetY){if(this.texturing){if(this.computeDrawCount>=this.computeDrawCountMax){this.computeDrawCount=0;this.texturing.recordChanges(true);if(this.textureWidth*ig.system.scale!==this.texturing.getSizeDrawX()*ig.system.scale||this.textureHeight*ig.system.scale!==this.texturing.getSizeDrawY()*ig.system.scale){this.texturize(this.texturing);}}
else{this.computeDrawCount++;}}
this.parent(targetX,targetY);}});}});

// lib/plusplus/helpers/tweens.js
ig.baked=true;ig.module('plusplus.helpers.tweens').requires('plusplus.core.config').defines(function(){"use strict";var _c=ig.CONFIG;var TWEEN=TWEEN||(function(){var _tweens=[];var _paused=false;return{REVISION:'9',getAll:function(){return _tweens;},removeAll:function(){_tweens=[];},add:function(tween){if(_paused){tween.pause();}
else{tween.unpause();}
_tweens.push(tween);},remove:function(tween){var i=_tweens.indexOf(tween);if(i!==-1){_tweens.splice(i,1);}},pause:function(){if(!_paused){_paused=true;for(var i=0,il=_tweens.length;i<il;i++){_tweens[i].pause();}}},unpause:function(){if(_paused){_paused=false;for(var i=0,il=_tweens.length;i<il;i++){_tweens[i].unpause();}}},update:function(time){if(_tweens.length===0||_paused)return false;var i=0,numTweens=_tweens.length;time=time!==undefined?time:(ig.global.performance!==undefined&&ig.global.performance.now!==undefined?ig.global.performance.now():Date.now());while(i<numTweens){var tween=_tweens[i];if(tween.update(time)){i++;}else{_tweens.splice(i,1);tween.cleanup();numTweens--;}}
return true;}};})();TWEEN.Tween=function(object){var _object=object;var _valuesStart={};var _valuesEnd={};var _valuesStartRepeat={};var _duration=_c.DURATION_TWEEN;var _repeat=0;var _delayTime=0;var _startTime=null;var _paused=false;var _pausedAt=0;var _pauseSignaller=null;var _easingFunction=TWEEN.Easing.Linear.None;var _interpolationFunction=TWEEN.Interpolation.Linear;var _chainedTweens=[];var _onStartCallback=null;var _onStartCallbackFired=false;var _onUpdateCallback=null;var _onCompleteCallback=null;this.to=function(properties,duration){if(duration!==undefined){_duration=duration;}
_valuesEnd=properties;return this;};this.start=function(time){TWEEN.add(this);_onStartCallbackFired=false;_startTime=(time!==undefined?time:(ig.global.performance!==undefined&&ig.global.performance.now!==undefined?ig.global.performance.now():Date.now()));_startTime+=_delayTime;for(var property in _valuesEnd){if((property in _object)===false||_object[property]===null){continue;}
if(_valuesEnd[property]instanceof Array){if(_valuesEnd[property].length===0){continue;}
_valuesEnd[property]=[_object[property]].concat(_valuesEnd[property]);}
_valuesStart[property]=_object[property];if((_valuesStart[property]instanceof Array)==false){_valuesStart[property]*=1.0;}
_valuesStartRepeat[property]=_valuesStart[property];}
return this;};this.stop=function(){TWEEN.remove(this);return this.cleanup();};this.cleanup=function(){return this.pauseSignaller();};this.pause=function(){if(!_paused){_paused=true;_pausedAt=ig.global.performance!==undefined&&ig.global.performance.now!==undefined?ig.global.performance.now():Date.now();}
return this;};this.unpause=function(){if(_paused){_paused=false;_startTime+=(ig.global.performance!==undefined&&ig.global.performance.now!==undefined?ig.global.performance.now():Date.now())-_pausedAt;_pausedAt=0;}
return this;};this.pauseSignaller=function(pauseSignaller){if(_pauseSignaller!==pauseSignaller){if(_pauseSignaller&&_pauseSignaller.onPaused){_pauseSignaller.onPaused.remove(this.pause,this);_pauseSignaller.onUnpaused.remove(this.unpause,this);}
_pauseSignaller=pauseSignaller;if(_pauseSignaller&&_pauseSignaller.onPaused){_pauseSignaller.onPaused.add(this.pause,this);_pauseSignaller.onUnpaused.add(this.unpause,this);}}
return this;};this.delay=function(amount){_delayTime=amount;return this;};this.repeat=function(times){_repeat=times;return this;};this.easing=function(easing){if(typeof easing==='function'){_easingFunction=easing;}
return this;};this.interpolation=function(interpolation){if(typeof easing==='function'){_interpolationFunction=interpolation;}
return this;};this.chain=function(){_chainedTweens=arguments;return this;};this.onStart=function(callback){_onStartCallback=callback;return this;};this.onUpdate=function(callback){_onUpdateCallback=callback;return this;};this.onComplete=function(callback){_onCompleteCallback=callback;return this;};this.update=function(time){if(_paused||time<_startTime){return true;}
if(_onStartCallbackFired===false){if(_onStartCallback){_onStartCallback.call(_object);}
_onStartCallbackFired=true;}
var elapsed=(time-_startTime)/_duration;elapsed=elapsed>1?1:elapsed;var value=_easingFunction(elapsed);for(var property in _valuesStart){var start=_valuesStart[property];var end=_valuesEnd[property];if(end instanceof Array){_object[property]=_interpolationFunction(end,value);}else{_object[property]=start+(end-start)*value;}}
if(_onUpdateCallback){_onUpdateCallback.call(_object,value);}
if(elapsed==1){if(_repeat>0){if(isFinite(_repeat)){_repeat--;}
for(var property in _valuesStartRepeat){_valuesStart[property]=_valuesStartRepeat[property];}
_startTime=time+_delayTime;return true;}else{if(_onCompleteCallback){_onCompleteCallback.call(_object);}
for(var i=0,numChainedTweens=_chainedTweens.length;i<numChainedTweens;i++){_chainedTweens[i].start(time);}
return false;}}
return true;};};TWEEN.Easing={Linear:{None:function(k){return k;}},Quadratic:{In:function(k){return k*k;},Out:function(k){return k*(2-k);},InOut:function(k){if((k*=2)<1)return 0.5*k*k;return-0.5*(--k*(k-2)-1);}},Cubic:{In:function(k){return k*k*k;},Out:function(k){return--k*k*k+1;},InOut:function(k){if((k*=2)<1)return 0.5*k*k*k;return 0.5*((k-=2)*k*k+2);}},Quartic:{In:function(k){return k*k*k*k;},Out:function(k){return 1-(--k*k*k*k);},InOut:function(k){if((k*=2)<1)return 0.5*k*k*k*k;return-0.5*((k-=2)*k*k*k-2);}},Quintic:{In:function(k){return k*k*k*k*k;},Out:function(k){return--k*k*k*k*k+1;},InOut:function(k){if((k*=2)<1)return 0.5*k*k*k*k*k;return 0.5*((k-=2)*k*k*k*k+2);}},Sinusoidal:{In:function(k){return 1-Math.cos(k*Math.PI/2);},Out:function(k){return Math.sin(k*Math.PI/2);},InOut:function(k){return 0.5*(1-Math.cos(Math.PI*k));}},Exponential:{In:function(k){return k===0?0:Math.pow(1024,k-1);},Out:function(k){return k===1?1:1-Math.pow(2,-10*k);},InOut:function(k){if(k===0)return 0;if(k===1)return 1;if((k*=2)<1)return 0.5*Math.pow(1024,k-1);return 0.5*(-Math.pow(2,-10*(k-1))+2);}},Circular:{In:function(k){return 1-Math.sqrt(1-k*k);},Out:function(k){return Math.sqrt(1-(--k*k));},InOut:function(k){if((k*=2)<1)return-0.5*(Math.sqrt(1-k*k)-1);return 0.5*(Math.sqrt(1-(k-=2)*k)+1);}},Elastic:{In:function(k){var s,a=0.1,p=0.4;if(k===0)return 0;if(k===1)return 1;if(!a||a<1){a=1;s=p/4;}
else s=p*Math.asin(1/a)/(2*Math.PI);return-(a*Math.pow(2,10*(k-=1))*Math.sin((k-s)*(2*Math.PI)/p));},Out:function(k){var s,a=0.1,p=0.4;if(k===0)return 0;if(k===1)return 1;if(!a||a<1){a=1;s=p/4;}
else s=p*Math.asin(1/a)/(2*Math.PI);return(a*Math.pow(2,-10*k)*Math.sin((k-s)*(2*Math.PI)/p)+1);},InOut:function(k){var s,a=0.1,p=0.4;if(k===0)return 0;if(k===1)return 1;if(!a||a<1){a=1;s=p/4;}
else s=p*Math.asin(1/a)/(2*Math.PI);if((k*=2)<1)return-0.5*(a*Math.pow(2,10*(k-=1))*Math.sin((k-s)*(2*Math.PI)/p));return a*Math.pow(2,-10*(k-=1))*Math.sin((k-s)*(2*Math.PI)/p)*0.5+1;}},Back:{In:function(k){var s=1.70158;return k*k*((s+1)*k-s);},Out:function(k){var s=1.70158;return--k*k*((s+1)*k+s)+1;},InOut:function(k){var s=1.70158*1.525;if((k*=2)<1)return 0.5*(k*k*((s+1)*k-s));return 0.5*((k-=2)*k*((s+1)*k+s)+2);}},Bounce:{In:function(k){return 1-TWEEN.Easing.Bounce.Out(1-k);},Out:function(k){if(k<(1/2.75)){return 7.5625*k*k;}else if(k<(2/2.75)){return 7.5625*(k-=(1.5/2.75))*k+0.75;}else if(k<(2.5/2.75)){return 7.5625*(k-=(2.25/2.75))*k+0.9375;}else{return 7.5625*(k-=(2.625/2.75))*k+0.984375;}},InOut:function(k){if(k<0.5)return TWEEN.Easing.Bounce.In(k*2)*0.5;return TWEEN.Easing.Bounce.Out(k*2-1)*0.5+0.5;}}};TWEEN.Interpolation={Linear:function(v,k){var m=v.length-1,f=m*k,i=Math.floor(f),fn=TWEEN.Interpolation.Utils.Linear;if(k<0)return fn(v[0],v[1],f);if(k>1)return fn(v[m],v[m-1],m-f);return fn(v[i],v[i+1>m?m:i+1],f-i);},Bezier:function(v,k){var b=0,n=v.length-1,pw=Math.pow,bn=TWEEN.Interpolation.Utils.Bernstein,i;for(i=0;i<=n;i++){b+=pw(1-k,n-i)*pw(k,i)*v[i]*bn(n,i);}
return b;},CatmullRom:function(v,k){var m=v.length-1,f=m*k,i=Math.floor(f),fn=TWEEN.Interpolation.Utils.CatmullRom;if(v[0]===v[m]){if(k<0)i=Math.floor(f=m*(1+k));return fn(v[(i-1+m)%m],v[i],v[(i+1)%m],v[(i+2)%m],f-i);}else{if(k<0)return v[0]-(fn(v[0],v[0],v[1],v[1],-f)-v[0]);if(k>1)return v[m]-(fn(v[m],v[m],v[m-1],v[m-1],f-m)-v[m]);return fn(v[i?i-1:0],v[i],v[m<i+1?m:i+1],v[m<i+2?m:i+2],f-i);}},Utils:{Linear:function(p0,p1,t){return(p1-p0)*t+p0;},Bernstein:function(n,i){var fc=TWEEN.Interpolation.Utils.Factorial;return fc(n)/fc(i)/fc(n-i);},Factorial:(function(){var a=[1];return function(n){var s=1,i;if(a[n])return a[n];for(i=n;i>1;i--)s*=i;return a[n]=s;};})(),CatmullRom:function(p0,p1,p2,p3,t){var v0=(p2-p0)*0.5,v1=(p3-p1)*0.5,t2=t*t,t3=t*t2;return(2*p1-2*p2+v0+v1)*t3+(-3*p1+3*p2-2*v0-v1)*t2+v0*t+p1;}}};ig.TWEEN=TWEEN;ig.TWEEN.Tween;ig.TWEEN.tween=function(object,properties,options){options=options||{};if(options.tween){options.tween.stop();}
var tween=new ig.TWEEN.Tween(object).to(properties,options.duration).easing(options.easing).onStart(options.onStart).onUpdate(options.onUpdate).onComplete(options.onComplete).pauseSignaller(options.pauseSignaller);if(!options.stopped){tween.start();}
return tween;};});

// lib/plusplus/helpers/utilsmath.js
ig.baked=true;ig.module('plusplus.helpers.utilsmath').defines(function(){"use strict";ig.utilsmath={};ig.utilsmath.GOLDEN_ANGLE=Math.PI*(3-Math.sqrt(5));ig.utilsmath.TWOPI=Math.PI*2;ig.utilsmath.HALFPI=Math.PI*0.5;ig.utilsmath.almostEqual=function(a,b,threshold){if(a===b)return true;else{var d=b-a;return d>0?d<threshold:d>-threshold;}};ig.utilsmath.oppositeSidesOfZero=function(a,b){return(a<0&&b>0)||(a>0&&b<0);};ig.utilsmath.direction=function(n){return n===0?0:(n<0?-1:1);};ig.utilsmath.directionChange=function(a,b){return(a===0&&b!==0)||(a!==0&&b===0)||ig.utilsmath.oppositeSidesOfZero(a,b);};});

// lib/plusplus/helpers/utilsvector2.js
ig.baked=true;ig.module('plusplus.helpers.utilsvector2').requires('plusplus.core.config','plusplus.helpers.utilsmath').defines(function(){"use strict";var _c=ig.CONFIG;var _utm=ig.utilsmath;ig.utilsvector2={};ig.utilsvector2.vector=function(x,y,v){v=v||{};ig.utilsvector2.set(v,x||0,y||0);return v;};ig.utilsvector2.set=function(v,x,y){v.x=x;v.y=y;return v;};ig.utilsvector2.setScalar=function(v,s){v.x=s;v.y=s;return v;};ig.utilsvector2.clone=function(v){return ig.utilsvector2.vector(v.x,v.y);};ig.utilsvector2.copy=function(a,b){a.x=b.x;a.y=b.y;return a;};ig.utilsvector2.zero=function(v){v.x=0;v.y=0;return v;};ig.utilsvector2.isZero=function(v){return v.x===0&&v.y===0;};ig.utilsvector2.isAlmostZero=function(v){return _utm.almostEqual(v.x,0,_c.PRECISION_ZERO)&&_utm.almostEqual(v.y,0,_c.PRECISION_ZERO);};ig.utilsvector2.equal=function(a,b){return a.x===b.x&&a.y===b.y;};ig.utilsvector2.inverse=function(v){v.x=-v.x;v.y=-v.y;return v;};ig.utilsvector2.add=function(a,b){a.x+=b.x;a.y+=b.y;return a;};ig.utilsvector2.addVectors=function(a,b){return{x:a.x+b.x,y:a.y+b.y};};ig.utilsvector2.addScalar=function(v,s){v.x+=s;v.y+=s;return v;};ig.utilsvector2.subtract=function(a,b){a.x-=b.x;a.y-=b.y;return a;};ig.utilsvector2.subtractVectors=function(a,b){return{x:a.x-b.x,y:a.y-b.y};};ig.utilsvector2.subtractScalar=function(v,s){v.x-=s;v.y-=s;return v;};ig.utilsvector2.multiply=function(a,b){a.x*=b.x;a.y*=b.y;return a;};ig.utilsvector2.multiplyVectors=function(a,b){return{x:a.x*b.x,y:a.y*b.y};};ig.utilsvector2.multiplyScalar=function(v,s){v.x*=s;v.y*=s;return v;};ig.utilsvector2.divide=function(a,b){a.x/=b.x;a.y/=b.y;return a;};ig.utilsvector2.divideVectors=function(a,b){return{x:a.x/b.x,y:a.y/b.y};};ig.utilsvector2.divideScalar=function(v,s){v.x/=s;v.y/=s;return v;};ig.utilsvector2.min=function(a,b){return{x:a.x<b.x?a.x:b.x,y:a.y<b.y?a.y:b.y};};ig.utilsvector2.max=function(a,b){return{x:a.x>b.x?a.x:b.x,y:a.y>b.y?a.y:b.y};};ig.utilsvector2.abs=function(v){if(v.x<0){v.x=-v.x;}
if(v.y<0){v.y=-v.y;}
return v;};ig.utilsvector2.length=function(v){return Math.sqrt(v.x*v.x+v.y*v.y);};ig.utilsvector2.lengthSquared=function(v){return v.x*v.x+v.y*v.y;};ig.utilsvector2.normalize=function(v){var length=ig.utilsvector2.length(v);if(length>=Number.MIN_VALUE){var invLength=1/length;v.x*=invLength;v.y*=invLength;}
return v;};ig.utilsvector2.dot=function(a,b){return a.x*b.x+a.y*b.y;};ig.utilsvector2.cross=function(a,b){return a.x*b.y-a.y*b.x;};ig.utilsvector2.crossVF=function(v,s){var x=v.x;v.x=s*v.y;v.y=-s*x;return v;};ig.utilsvector2.crossFV=function(v,s){var x=v.x;v.x=-s*v.y;v.y=s*x;return v;};ig.utilsvector2.rotate=function(v,angle,originX,originY){var s=Math.sin(angle);var c=Math.cos(angle);var translatedX=v.x-originX;var translatedY=v.y-originY;v.x=originX+translatedX*c-translatedY*s;v.y=originY+translatedX*s+translatedY*c;return v;};ig.utilsvector2.projectPoints=function(points,offsetX,offsetY,scaleX,scaleY,angle,angleOffsetX,angleOffsetY){offsetX=offsetX||0;offsetY=offsetY||0;scaleX=scaleX||1;scaleY=scaleY||1;angle=angle||0;var pointsProjected=[];var i,il,point,pointRotated;if(angle!==0){angleOffsetX=angleOffsetX||0;angleOffsetY=angleOffsetY||0;for(i=0,il=points.length;i<il;i++){point=points[i];pointRotated=ig.utilsvector2.rotate(point,angle,angleOffsetX,angleOffsetY);pointsProjected[i]={x:pointRotated.x*scaleX+offsetX,y:pointRotated.y*scaleY+offsetY};}}
else{for(i=0,il=points.length;i<il;i++){point=points[i];pointsProjected[i]={x:point.x*scaleX+offsetX,y:point.y*scaleY+offsetY};}}
return pointsProjected;};ig.utilsvector2.centerOfPoints=function(points){var cx=0;var cy=0;var point;for(var i=0,il=points.length;i<il;i++){point=points[i];cx+=point.x;cy+=point.y;}
return{x:cx/il,y:cy/il};};ig.utilsvector2.pointsCW=function(p1,p2,p3){return(p2.x-p1.x)*(p3.y-p1.y)-(p2.y-p1.y)*(p3.x-p1.x);};ig.utilsvector2.radianBetweenPoints=function(a,b,c){var abx=b.x-a.x;var aby=b.y-a.y;var cbx=b.x-c.x;var cby=b.y-c.y;var dot=(abx*cbx+aby*cby);var cross=(abx*cby-aby*cbx);var alpha=Math.atan2(cross,dot);return alpha;};ig.utilsvector2.pointsToConvexHull=function(points){if(points.length<3)return points;var i,il;var indexMin=0,pointMin=points[indexMin],point;for(i=1,il=points.length;i<il;i++){point=points[i];if(point.y===pointMin.y){if(point.x<pointMin.x){indexMin=i;pointMin=point;}}
else if(point.y<pointMin.y){indexMin=i;pointMin=point;}}
var pointsByAngle=[];var pointFromMin;for(i=0,il=points.length;i<il;i++){if(i===indexMin)continue;point=points[i];pointFromMin={x:point.x,y:point.y};pointFromMin.angle=Math.atan((point.y-pointMin.y)/(point.x-pointMin.x));if(pointFromMin.angle<0)pointFromMin.angle+=Math.PI;pointFromMin.distance=(point.x-pointMin.x)*(point.x-pointMin.x)+(point.y-pointMin.y)*(point.y-pointMin.y);pointFromMin.index=i;pointsByAngle.push(pointFromMin);}
pointsByAngle.sort(function(a,b){if(a.angle<b.angle)return-1;else if(a.angle>b.angle)return 1;else{if(a.distance<b.distance)return-1;else if(a.distance>b.distance)return 1;}
return 0;});pointsByAngle.unshift(pointsByAngle[pointsByAngle.length-1],{x:pointMin.x,y:pointMin.y,index:indexMin});var pointTemp;var loc=2;for(i=3,il=points.length;i<=il;i++){while(ig.utilsvector2.pointsCW(pointsByAngle[loc-1],pointsByAngle[loc],pointsByAngle[i])<=0){loc--;}
loc++;pointTemp=pointsByAngle[i];pointsByAngle[i]=pointsByAngle[loc];pointsByAngle[loc]=pointTemp;}
var pointsSorted=[];for(i=0;i<=loc;i++){pointsSorted[i]=points[pointsByAngle[i].index];}
return pointsSorted;};ig.utilsvector2.Q_1=1;ig.utilsvector2.Q_2=1<<2;ig.utilsvector2.Q_3=1<<3;ig.utilsvector2.Q_4=1<<4;ig.utilsvector2.pointQuadrant=function(x,y,originX,originY){var q;var dx=originX-x;var dy=originY-y;if(dx===0&&dy===0){q=ig.utilsvector2.Q_1|ig.utilsvector2.Q_2|ig.utilsvector2.Q_3|ig.utilsvector2.Q_4;}
else if(dx===0){if(dy<0)q=ig.utilsvector2.Q_3|ig.utilsvector2.Q_4;else q=ig.utilsvector2.Q_1|ig.utilsvector2.Q_2;}
else if(dy===0){if(dx<0)q=ig.utilsvector2.Q_2|ig.utilsvector2.Q_4;else q=ig.utilsvector2.Q_1|ig.utilsvector2.Q_3;}
else{q=1;if(dx<0)q=2;if(dy<0)q+=2;q=1<<q;}
return q;};ig.utilsvector2.directionThreshold=function(v,thresholdX,thresholdY){thresholdX=thresholdX||0;thresholdY=thresholdY||0;if(thresholdY<thresholdX){if(v.y!==0){if(_utm.almostEqual(v.x,0,thresholdX)){v.x=0;}}
if(v.x!==0){if(_utm.almostEqual(v.y,0,thresholdY)){v.y=0;}}}
else{if(v.x!==0){if(_utm.almostEqual(v.y,0,thresholdY)){v.y=0;}}
if(v.y!==0){if(_utm.almostEqual(v.x,0,thresholdX)){v.x=0;}}}
return v;};ig.utilsvector2.directionToString=function(v){var xDir=_utm.direction(v.x);var yDir=_utm.direction(v.y);for(var direction in ig.utilsvector2.DIRECTION){var dv=ig.utilsvector2.DIRECTION[direction];if(dv.x===xDir&&dv.y===yDir){return direction;}}
return'NONE';};ig.utilsvector2.DIRECTION={NONE:ig.utilsvector2.vector(),LEFT:ig.utilsvector2.vector(-1,0),RIGHT:ig.utilsvector2.vector(1,0),UP:ig.utilsvector2.vector(0,-1),DOWN:ig.utilsvector2.vector(0,1),UPLEFT:ig.utilsvector2.vector(-1,-1),UPRIGHT:ig.utilsvector2.vector(1,-1),DOWNLEFT:ig.utilsvector2.vector(-1,1),DOWNRIGHT:ig.utilsvector2.vector(1,1)};});

// lib/plusplus/helpers/utilsintersection.js
ig.baked=true;ig.module('plusplus.helpers.utilsintersection').requires('plusplus.helpers.utilsmath').defines(function(){"use strict";var _utm=ig.utilsmath;ig.utilsintersection={};ig.utilsintersection.bounds=function(x,y,width,height,bounds){bounds=bounds||{};bounds.minX=x;bounds.minY=y;bounds.maxX=x+width;bounds.maxY=y+height;bounds.width=width;bounds.height=height;return bounds;};ig.utilsintersection.boundsMinMax=function(minX,minY,maxX,maxY,bounds){bounds=bounds||{};bounds.minX=minX;bounds.minY=minY;bounds.maxX=maxX;bounds.maxY=maxY;bounds.width=maxX-minX;bounds.height=maxY-minY;return bounds;};ig.utilsintersection.boundsOfPoints=function(points,bounds){var i,il,point=points[0];var minX=point.x;var minY=point.y;var maxX=point.x;var maxY=point.y;for(i=1,il=points.length;i<il;i++){point=points[i];if(point.x<minX)minX=point.x;else if(point.x>maxX)maxX=point.x;if(point.y<minY)minY=point.y;else if(point.y>maxY)maxY=point.y;}
bounds=bounds||{};bounds.minX=minX;bounds.minY=minY;bounds.maxX=maxX;bounds.maxY=maxY;bounds.width=maxX-minX;bounds.height=maxY-minY;return bounds;};ig.utilsintersection.boundsClone=function(boundsSource,offsetX,offsetY,bounds){offsetX=offsetX||0;offsetY=offsetY||0;var minX=boundsSource.minX+offsetX;var minY=boundsSource.minY+offsetY;var maxX=boundsSource.maxX+offsetX;var maxY=boundsSource.maxY+offsetY;bounds=bounds||{};bounds.minX=minX;bounds.minY=minY;bounds.maxX=maxX;bounds.maxY=maxY;bounds.width=maxX-minX;bounds.height=maxY-minY;return bounds;};ig.utilsintersection.boundsCopy=function(boundsA,boundsB,offsetX,offsetY,scaleX,scaleY){offsetX=offsetX||0;offsetY=offsetY||0;scaleX=scaleX||1;scaleY=scaleY||1;boundsA.minX=boundsB.minX*scaleX+offsetX;boundsA.maxX=boundsB.maxX*scaleX+offsetX;boundsA.minY=boundsB.minY*scaleY+offsetY;boundsA.maxY=boundsB.maxY*scaleY+offsetY;boundsA.width=boundsA.maxX-boundsA.minX;boundsA.height=boundsA.maxY-boundsA.minY;return boundsA;};ig.utilsintersection.boundsCopyX=function(boundsA,boundsB,offsetX,scaleX){offsetX=offsetX||0;scaleX=scaleX||1;boundsA.minX=boundsB.minX*scaleX+offsetX;boundsA.maxX=boundsB.maxX*scaleX+offsetX;boundsA.width=boundsA.maxX-boundsA.minX;return boundsA;};ig.utilsintersection.boundsCopyY=function(boundsA,boundsB,offsetY,scaleY){offsetY=offsetY||0;scaleY=scaleY||1;boundsA.minY=boundsB.minY*scaleY+offsetY;boundsA.maxY=boundsB.maxY*scaleY+offsetY;boundsA.height=boundsA.maxY-boundsA.minY;return boundsA;};ig.utilsintersection.boundsCopyRotated=function(boundsA,boundsB,angle){angle=(angle%_utm.TWOPI);if(angle>Math.PI){angle-=_utm.TWOPI;}
else if(angle<-Math.PI){angle+=_utm.TWOPI;}
var cos=Math.cos(angle);var sin=Math.sin(angle);var width=boundsB.width;var height=boundsB.height;var hcos=height*cos;var wcos=width*cos;var hsin=height*sin;var wsin=width*sin;var minX=boundsB.minX;var minY=boundsB.minY;var cX=minX+boundsB.width*0.5;var cY=minY+boundsB.height*0.5;var dminX=minX-cX;var dminY=minY-cY;var x=cX+dminX*cos-dminY*sin;var y=cY+dminX*sin+dminY*cos;if(angle>0){if(angle<_utm.HALFPI){boundsA.minY=y;boundsA.maxY=y+hcos+wsin;boundsA.minX=x-hsin;boundsA.maxX=x+wcos;}
else{boundsA.minY=y+hcos;boundsA.maxY=y+wsin;boundsA.minX=x-hsin+wcos;boundsA.maxX=x;}}
else{if(angle<-_utm.HALFPI){boundsA.minY=y+wsin;boundsA.maxY=y+hcos;boundsA.minX=x;boundsA.maxX=x+wcos-hsin;}
else{boundsA.minY=y+wsin+hcos;boundsA.maxY=y;boundsA.minX=x+wcos;boundsA.maxX=x-hsin;}}
boundsA.width=boundsA.maxX-boundsA.minX;boundsA.height=boundsA.maxY-boundsA.minY;return boundsA;};ig.utilsintersection.AABBContains=function(aminX,aminY,amaxX,amaxY,bminX,bminY,bmaxX,bmaxY){if(aminX>=bminX&&amaxX<=bmaxX&&aminY>=bminY&&amaxY<=bmaxY){return true;}
return false;};ig.utilsintersection.AABBIntersect=function(aminX,aminY,amaxX,amaxY,bminX,bminY,bmaxX,bmaxY){if(amaxX<bminX)return false;if(aminX>bmaxX)return false;if(amaxY<bminY)return false;if(aminY>bmaxY)return false;return true;};ig.utilsintersection.boundsIntersect=function(boundsA,boundsB){if(boundsA.maxX<boundsB.minX)return false;if(boundsA.minX>boundsB.maxX)return false;if(boundsA.maxY<boundsB.minY)return false;if(boundsA.minY>boundsB.maxY)return false;return true;};ig.utilsintersection.boundsAABBIntersect=function(bounds,minX,minY,maxX,maxY){if(bounds.maxX<minX)return false;if(bounds.minX>maxX)return false;if(bounds.maxY<minY)return false;if(bounds.minY>maxY)return false;return true;};ig.utilsintersection.pointInAABB=function(x,y,minX,minY,maxX,maxY){if(x<minX)return false;if(x>maxX)return false;if(y<minY)return false;if(y>maxY)return false;return true;};ig.utilsintersection.pointInBounds=function(x,y,bounds){if(x<bounds.minX)return false;if(x>bounds.maxX)return false;if(y<bounds.minY)return false;if(y>bounds.maxY)return false;return true;};ig.utilsintersection.pointInCircle=function(x,y,cx,cy,radius){var dx=cx-x;var dy=cy-y;var squareDistance=dx*dx+dy*dy;var squareRadius=radius*radius;return squareDistance<squareRadius;};ig.utilsintersection.pointInPolygon=function(x,y,vertices){var i,j=vertices.length-1;var oddNodes=false;for(i=0;i<vertices.length;i++){var va=vertices[j];var vb=vertices[i];if((va.x===x&&va.y===y)||(vb.x===x&&vb.y===y)){oddNodes=true;break;}
else if((vb.y<y&&va.y>=y||va.y<y&&vb.y>=y)&&(vb.x<=x||va.x<=x)){if(vb.x+(y-vb.y)/(va.y-vb.y)*(va.x-vb.x)<x){oddNodes=!oddNodes;}}
j=i;}
return oddNodes;};ig.utilsintersection.entitiesInAABB=function(left,top,right,bottom,targetable,layerName,unsorted){var intersected=[];var layer;var i,il;if(!layerName){for(i=0,il=ig.game.layers.length;i<il;i++){layer=ig.game.layers[i];if(layer.name&&layer.numEntities&&(!targetable||layer.itemsTargetable.length)){intersected=intersected.concat(ig.utilsintersection.entitiesInAABB(left,top,right,bottom,targetable,layer.name,true));}}}
else{layer=ig.game.layersMap[layerName];var entities=targetable?layer.itemsTargetable:layer.items;for(i=0,il=entities.length;i<il;i++){var entity=entities[i];var intersects;if(entity.fixed){var screenX=ig.game.screen.x;var screenY=ig.game.screen.y;intersects=ig.utilsintersection.AABBIntersect(entity.pos.x+screenX,entity.pos.y+screenY,entity.pos.x+entity.size.x+screenX,entity.pos.y+entity.size.y+screenY,left,top,right,bottom);}
else{intersects=ig.utilsintersection.AABBIntersect(entity.pos.x,entity.pos.y,entity.pos.x+entity.size.x,entity.pos.y+entity.size.y,left,top,right,bottom);}
if(intersects){intersected.push(entity);}}}
if(intersected.length>1&&!unsorted){ig.utilsintersection.sortByDistance(left+(right-left)*0.5,top+(bottom-top)*0.5,intersected);}
return intersected;};ig.utilsintersection.getIsAABBInScreen=function(x,y,width,height){var adjustedX=x-ig.game.screen.x;var adjustedY=y-ig.game.screen.y;return ig.utilsintersection.AABBIntersect(adjustedX,adjustedY,adjustedX+width,adjustedY+height,0,0,ig.system.width,ig.system.height);};ig.utilsintersection.sortByDistance=function sortByDistance(x,y,entities){x=x||0;y=y||0;entities.sort(function(a,b){var aToCenterX=x-(a.pos.x+a.size.x*0.5);var aToCenterY=y-(a.pos.y+a.size.y*0.5);var aDistance=aToCenterX*aToCenterX+aToCenterY*aToCenterY;var bToCenterX=x-(b.pos.x+b.size.x*0.5);var bToCenterY=y-(b.pos.y+b.size.y*0.5);var bDistance=bToCenterX*bToCenterX+bToCenterY*bToCenterY;return aDistance-bDistance;});return entities;};});

// lib/plusplus/helpers/utilsdraw.js
ig.baked=true;ig.module('plusplus.helpers.utilsdraw').requires('plusplus.helpers.utilsintersection').defines(function(){"use strict";var _uti=ig.utilsintersection;ig.utilsdraw={};ig.utilsdraw.pixelFillPolygon=function(context,minX,minY,maxX,maxY,vertices,r,g,b,a,add,boundsVertices,stabilize){minX|=0;minY|=0;var fminX,fminY,fmaxX,fmaxY;if(boundsVertices){fminX=boundsVertices.minX|0;fminY=boundsVertices.minY|0;fmaxX=Math.ceil(boundsVertices.maxX);fmaxY=Math.ceil(boundsVertices.maxY);}
else{fminX=minX;fminY=minY;fmaxX=Math.ceil(maxX);fmaxY=Math.ceil(maxY);}
var imageX,imageY,width,height;if(stabilize!==false){imageX=fminX-minX-1;imageY=fminY-minY-1;width=fmaxX-fminX+1;height=fmaxY-fminY+1;}
else{imageX=fminX-minX;imageY=fminY-minY;width=fmaxX-fminX;height=fmaxY-fminY;}
var r255=r*255|0;var g255=g*255|0;var b255=b*255|0;var a255=a*255|0;var shape=context.getImageData(imageX,imageY,width,height);if(add===true){for(var x=0;x<width;x++){for(var y=0;y<height;y++){if(_uti.pointInPolygon(x+fminX,y+fminY,vertices)){var index=(x+y*width)*4;shape.data[index]+=r255;shape.data[index+1]+=g255;shape.data[index+2]+=b255;shape.data[index+3]+=a255;}}}}
else{for(var x=0;x<width;x++){for(var y=0;y<height;y++){if(_uti.pointInPolygon(x+fminX,y+fminY,vertices)){var index=(x+y*width)*4;shape.data[index]=r255;shape.data[index+1]=g255;shape.data[index+2]=b255;shape.data[index+3]=a255;}}}}
context.putImageData(shape,imageX,imageY);};ig.utilsdraw.fillPolygon=function(context,vertices,offsetX,offsetY,scale){offsetX=offsetX||0;offsetY=offsetY||0;scale=scale||1;var vertex=vertices[0];context.beginPath();context.moveTo((vertex.x+offsetX)*scale,(vertex.y+offsetY)*scale);for(var i=1,il=vertices.length;i<il;i++){vertex=vertices[i];context.lineTo((vertex.x+offsetX)*scale,(vertex.y+offsetY)*scale);}
context.fill();};ig.utilsdraw.fillRoundedRect=function(context,x,y,width,height,radius){context.beginPath();context.moveTo(x+radius,y);context.lineTo(x+width-radius,y);context.quadraticCurveTo(x+width,y,x+width,y+radius);context.lineTo(x+width,y+height-radius);context.quadraticCurveTo(x+width,y+height,x+width-radius,y+height);context.lineTo(x+radius,y+height);context.quadraticCurveTo(x,y+height,x,y+height-radius);context.lineTo(x,y+radius);context.quadraticCurveTo(x,y,x+radius,y);context.closePath();context.fill();};ig.utilsdraw.pixelFillRoundedRect=function(context,minX,minY,maxX,maxY,x,y,width,height,radius,r,g,b,a,precision,add,stabilize){if(typeof precision==='undefined'){precision=Math.round(radius*0.25);}
var anglePerVertex=Math.PI*0.5/(precision+1);var addCornerVertices=function(cx,cy,angle){for(var i=0;i<precision;i++){angle+=anglePerVertex;vertices.push({x:cx+radius*Math.cos(angle),y:cy+radius*Math.sin(angle)});}}
var vertices=[];vertices.push({x:x+radius,y:y});vertices.push({x:x+width-radius,y:y});if(precision>0){addCornerVertices(x+width-radius,y+radius,Math.PI*1.5);}
vertices.push({x:x+width,y:y+radius});vertices.push({x:x+width,y:y+height-radius});if(precision>0){addCornerVertices(x+width-radius,y+height-radius,0);}
vertices.push({x:x+width-radius,y:y+height});vertices.push({x:x+radius,y:y+height});if(precision>0){addCornerVertices(x+radius,y+height-radius,Math.PI*0.5);}
vertices.push({x:x,y:y+height-radius});vertices.push({x:x,y:y+radius});if(precision>0){addCornerVertices(x+radius,y+radius,Math.PI);}
ig.utilsdraw.pixelFillPolygon(context,minX,minY,maxX,maxY,vertices,r,g,b,a,add,ig.utilsintersection.bounds(x,y,width,height),stabilize);};});

// lib/plusplus/helpers/utilscolor.js
ig.baked=true;ig.module('plusplus.helpers.utilscolor').defines(function(){"use strict";ig.utilscolor={};ig.utilscolor.hexToRGBA=function(hex){hex=Math.floor(hex);var rgba={};rgba.r=(hex>>24&255)/255;rgba.g=(hex>>16&255)/255;rgba.b=(hex>>8&255)/255;rgba.a=(hex&255)/255;return rgba;};ig.utilscolor.RGBAToHex=function(r,g,b,a){return(r*255)<<24^(g*255)<<16^(b*255)<<8^(a*255)<<0;};ig.utilscolor.RGBToHex=function(r,g,b){return(r*255)<<16^(g*255)<<8^(b*255)<<0;};ig.utilscolor.CSSToRGBA=(function(){var canvas=ig.$new("canvas");canvas.width=canvas.height=1;var ctx=canvas.getContext("2d");return function(color,alpha){ctx.clearRect(0,0,1,1);ctx.fillStyle=color;ctx.fillRect(0,0,1,1);var data=ctx.getImageData(0,0,1,1).data;var rgba={};rgba.r=data[0]/255;rgba.g=data[1]/255;rgba.b=data[2]/255;rgba.a=alpha;return rgba;}}());ig.utilscolor.RGBAToCSS=function(r,g,b,a){return'rgba('+((r*255)|0)+','+((g*255)|0)+','+((b*255)|0)+','+a+')';};ig.utilscolor.RGBToCSS=function(r,g,b){return'rgb('+((r*255)|0)+','+((g*255)|0)+','+((b*255)|0)+')';};ig.utilscolor.linearGradient=function(minX,minY,maxX,maxY,colors){var gradient=ig.system.context.createLinearGradient(minX,minY,maxX,maxY);var pctPerStop=1/(colors.length-1);for(var i=0,il=colors.length;i<il;i++){var color=colors[i];var style;if(typeof color==='object'){if(typeof color.a!=='undefined'){style=ig.utilscolor.RGBAToCSS(color.r,color.g,color.b,color.a);}
else{style=ig.utilscolor.RGBToCSS(color.r,color.g,color.b);}}
else{style=color;}
gradient.addColorStop(i*pctPerStop,style);}
return gradient;};ig.utilscolor.radialGradient=function(radius,colors){var gradient=ig.system.context.createRadialGradient(radius,radius,0,radius,radius,radius);var pctPerStop=1/(colors.length-1);for(var i=0,il=colors.length;i<il;i++){var color=colors[i];var style;if(typeof color==='object'){if(typeof color.a!=='undefined'){style=ig.utilscolor.RGBAToCSS(color.r,color.g,color.b,color.a);}
else{style=ig.utilscolor.RGBToCSS(color.r,color.g,color.b);}}
else{style=color;}
gradient.addColorStop(i*pctPerStop,style);}
return gradient;};});

// lib/plusplus/helpers/utilstile.js
ig.baked=true;ig.module('plusplus.helpers.utilstile').requires('plusplus.core.config','plusplus.core.collision-map','plusplus.helpers.utils','plusplus.helpers.utilsintersection','plusplus.helpers.utilsvector2').defines(function(){"use strict";var _c=ig.CONFIG;var _ut=ig.utils;var _uti=ig.utilsintersection;var _utv2=ig.utilsvector2;var TILE_ONE_WAY_UP=_c.COLLISION.TILE_ONE_WAY_UP;var TILE_ONE_WAY_DOWN=_c.COLLISION.TILE_ONE_WAY_DOWN;var TILE_ONE_WAY_RIGHT=_c.COLLISION.TILE_ONE_WAY_RIGHT;var TILE_ONE_WAY_LEFT=_c.COLLISION.TILE_ONE_WAY_LEFT;var TILE_CLIMBABLE_WITH_TOP=_c.COLLISION.TILE_CLIMBABLE_WITH_TOP;var TILE_CLIMBABLE=_c.COLLISION.TILE_CLIMBABLE;var TILE_CLIMBABLE_STAIRS_WITH_TOP=_c.COLLISION.TILE_STAIRS_WITH_TOP;var TILE_CLIMBABLE_STAIRS=_c.COLLISION.TILE_STAIRS;var HASH_WALKABLE=_c.COLLISION.TILES_HASH_WALKABLE;var HASH_WALKABLE_STRICT=_c.COLLISION.TILES_HASH_WALKABLE_STRICT;var HASH_ONE_WAY=_c.COLLISION.TILES_HASH_ONE_WAY;var HASH_CLIMBABLE=_c.COLLISION.TILES_HASH_CLIMBABLE;var HASH_CLIMBABLE_ONE_WAY=_c.COLLISION.TILES_HASH_CLIMBABLE_ONE_WAY;var HASH_CLIMBABLE_STAIRS=_c.COLLISION.TILES_HASH_CLIMBABLE_STAIRS;var SEGMENT_A=1;var SEGMENT_B=2;ig.utilstile={};ig.utilstile.defaultTileVerticesDef={};ig.utilstile.defaultTileSegmentsDef={};ig.utilstile.isTileWalkable=function(tileId){return HASH_WALKABLE[tileId];};ig.utilstile.isTileWalkableStrict=function(tileId){return HASH_WALKABLE_STRICT[tileId];};ig.utilstile.isTileOneWay=function(tileId){return HASH_ONE_WAY[tileId];};ig.utilstile.isTileClimbable=function(tileId){return HASH_CLIMBABLE[tileId];};ig.utilstile.isTileClimbableStairs=function(tileId){return HASH_CLIMBABLE_STAIRS[tileId];};ig.utilstile.isTileClimbableOneWay=function(tileId){return HASH_CLIMBABLE_ONE_WAY[tileId];};ig.utilstile.shapesFromCollisionMap=function(map,options){var shapes={oneWays:[],solids:[],climbables:[]};if(map instanceof ig.CollisionMap){options=options||{};var data=ig.copy(map.data);var tilesize=map.tilesize;var width=map.width;var height=map.height;var solids=[];var climbables=[];var oneWays=[];var vertices,scaledVertices,segments,segment;var ix,iy,x,y;var i,il,tile,shape;for(iy=0;iy<height;iy++){for(ix=0;ix<width;ix++){shape=ig.utilstile.shapeFromTile(map,ix,iy);tile={id:map.data[iy][ix],ix:ix,iy:iy,x:ix*tilesize,y:iy*tilesize,width:tilesize,height:tilesize,shape:shape};if(shape.vertices.length>0){scaledVertices=[];vertices=shape.vertices;segments=shape.segments;for(i=0,il=segments.length;i<il;i++){segment=segments[i];var va=vertices[segment.a];scaledVertices[segment.a]={x:tile.x+va.x*tilesize,y:tile.y+va.y*tilesize};}
shape.vertices=scaledVertices;if(HASH_CLIMBABLE[tile.id]&&!options.ignoreClimbables){climbables.push(tile);}
else if(HASH_ONE_WAY[tile.id]&&!options.ignoreOneWays){oneWays.push(tile);}
else if(!options.ignoreSolids){solids.push(tile);}}
data[iy][ix]=tile;}}
shapes.solids=shapes.solids.concat(ig.utilstile.shapedTilesToShapes(solids,data,{retainBoundaryOuter:options.retainBoundaryOuter,discardBoundaryInner:options.discardBoundaryInner,discardEdgesInner:options.discardEdgesInner}));shapes.climbables=shapes.climbables.concat(ig.utilstile.shapedTilesToShapes(climbables,data,{rectangles:options.rectangles||!options.contourClimbables,groupByTileId:!options.ungrouped}));for(i=0,il=shapes.climbables.length;i<il;i++){shape=shapes.climbables[i];if(HASH_CLIMBABLE_ONE_WAY[shape.id]){shape.settings.oneWay=true;}
else{shape.settings.sensor=true;}
if(HASH_CLIMBABLE_STAIRS[shape.id]){shape.settings.climbableStairs=true;}}
shapes.oneWays=shapes.oneWays.concat(ig.utilstile.shapedTilesToShapes(oneWays,data,{rectangles:options.rectangles||!options.contourSolids,groupByTileId:!options.ungrouped}));for(i=0,il=shapes.oneWays.length;i<il;i++){shape=shapes.oneWays[i];if(HASH_ONE_WAY[shape.id]){shape.settings.oneWay=true;if(shape.id===TILE_ONE_WAY_DOWN){shape.settings.oneWayFacing={x:0,y:1};}
else if(shape.id===TILE_ONE_WAY_RIGHT){shape.settings.oneWayFacing={x:1,y:0};}
else if(shape.id===TILE_ONE_WAY_LEFT){shape.settings.oneWayFacing={x:-1,y:0};}}}}
return shapes;};ig.utilstile.shapedTilesToShapes=function(tiles,data,options){options=options||{};var shapes=[];var vertices=[];var contours=[];var i,il,j,jl,index;if(options.groupByTileId){delete options.groupByTileId;var ids=[];var id;var groups={};var group;for(i=0,il=tiles.length;i<il;i++){var tile=tiles[i];if(groups[tile.id]){groups[tile.id].push(tile);}
else{ids.push(tile.id);groups[tile.id]=[tile];}}
for(i=0,il=ids.length;i<il;i++){id=ids[i];group=groups[id];options.id=id;shapes=shapes.concat(ig.utilstile.shapedTilesToShapes(group,data,options));}}
else{if(options.rectangles){var tilePool=tiles.slice(0);var rectangles=[];var line,length,stepped,rectangle;while(tilePool.length>0){line=ig.utilstile.findShapedTileLine(tilePool);_ut.arrayCautiousRemoveMulti(tilePool,line);length=line.length;rectangle=line;stepped=true;while(stepped){stepped=false;var tileLast=line[0];var tileFrom=data[tileLast.iy][tileLast.ix+1];if(tileFrom){index=_ut.indexOfValue(tilePool,tileFrom);if(index!==-1){line=ig.utilstile.findShapedTileLine(tilePool,false,index,length);if(line.length===length){_ut.arrayCautiousRemoveMulti(tilePool,line);rectangle=rectangle.concat(line);stepped=true;}}}}
if(rectangle.length>0){rectangles.push(rectangle);}}
for(j=0,jl=rectangles.length;j<jl;j++){rectangle=rectangles[j];vertices=[];for(i=0,il=rectangle.length;i<il;i++){vertices=vertices.concat(ig.utilstile.getNonDuplicateSegmentVertices(rectangle[i],data,rectangle));}
contours=contours.concat(ig.utilstile.verticesToContours(vertices,options));}}
else{for(i=0,il=tiles.length;i<il;i++){vertices=vertices.concat(ig.utilstile.getNonDuplicateSegmentVertices(tiles[i],data,tiles));}
contours=ig.utilstile.verticesToContours(vertices,options);}
for(i=0,il=contours.length;i<il;i++){var contour=contours[i];shapes.push({id:options.id,x:contour.minX,y:contour.minY,settings:{size:{x:contour.width,y:contour.height},vertices:contour.vertices}});}}
return shapes;};ig.utilstile.findShapedTileLine=function(tiles,horizontal,indexFrom,length){indexFrom=indexFrom||0;length=length||0;var tileFrom=tiles[indexFrom];var line=[];var stepped=true;var i,il;while(stepped){stepped=false;line.push(tileFrom);if(line.length===length){break;}
var tileNext=horizontal?ig.utilstile.stepShapedTileHorizontally(tiles,tileFrom):ig.utilstile.stepShapedTileVertically(tiles,tileFrom);if(tileFrom!==tileNext){stepped=true;tileFrom=tileNext;}}
return line;};ig.utilstile.stepShapedTileHorizontally=function(tiles,tileFrom){for(var i=0,il=tiles.length;i<il;i++){var tileNext=tiles[i];if(tileFrom.iy===tileNext.iy&&tileFrom.ix+1===tileNext.ix){return tileNext;}}
return tileFrom;};ig.utilstile.stepShapedTileVertically=function(tiles,tileFrom){for(var i=0,il=tiles.length;i<il;i++){var tileNext=tiles[i];if(tileFrom.ix===tileNext.ix&&tileFrom.iy+1===tileNext.iy){return tileNext;}}
return tileFrom;};ig.utilstile.verticesToContours=function(vertices,options){var contours=[];if(vertices.length>1){options=options||{};var vertexPool=vertices.slice(0);var contour={vertices:[],minX:Number.MAX_VALUE,minY:Number.MAX_VALUE,maxX:-Number.MAX_VALUE,maxY:-Number.MAX_VALUE};var contourVertices=contour.vertices;var vb=vertexPool.pop();var va=vertexPool.pop();var pva,pvb;var sva,svb;var i,il,j,jl;while(vertexPool.length>-2){var stepped=false;sva=contourVertices[0];svb=contourVertices[1];if(contourVertices.length<=2||vb.x!==sva.x||vb.y!==sva.y){for(i=0,il=vertexPool.length;i<il;i+=2){pva=vertexPool[i];pvb=vertexPool[i+1];if(vb.x===pva.x&&vb.y===pva.y){stepped=true;break;}}}
contourVertices.push(vb);if(vb.x<contour.minX)contour.minX=vb.x;if(vb.x>contour.maxX)contour.maxX=vb.x;if(vb.y<contour.minY)contour.minY=vb.y;if(vb.y>contour.maxY)contour.maxY=vb.y;if(stepped===true){vertexPool.splice(i,2);va=pva;vb=pvb;}
else{if(contour.vertices.length>=3){contours.push(contour);}
if(vertexPool.length>0){contour={vertices:[]};contour.minX=contour.minY=Number.MAX_VALUE;contour.maxX=contour.maxY=-Number.MAX_VALUE;contourVertices=contour.vertices;vb=vertexPool.pop();va=vertexPool.pop();}
else{break;}}}
for(i=0,il=contours.length;i<il;i++){contour=contours[i];contour.width=contour.maxX-contour.minX;contour.height=contour.maxY-contour.minY;}
contours.sort(function(a,b){return(b.width*b.width+b.height*b.height)-(a.width*a.width+a.height*a.height);});var contourPool=contours.slice(0);var containerChains=[];var containerChain=[];var containingContour,contained;contour=contourPool.pop();while(contourPool.length>-1){contained=false;if(contour){for(i=contours.length-1;i>-1;i--){containingContour=contours[i];if(contour!==containingContour&&_uti.AABBContains(contour.minX,contour.minY,contour.maxX,contour.maxY,containingContour.minX,containingContour.minY,containingContour.maxX,containingContour.maxY)){contained=true;break;}}
containerChain.push(contour);}
if(contained){contourPool.erase(containingContour);contour=containingContour;}
else{if(containerChain.length>1){containerChains.push(containerChain);}
if(contourPool.length>0){containerChain=[];contour=contourPool.pop();}
else{break;}}}
var contoursReversed=[];var contoursRemoved=[];for(i=0,il=containerChains.length;i<il;i++){containerChain=containerChains[i];var outerBoundary=containerChain[containerChain.length-1];var innerBoundary=containerChain[containerChain.length-2];if(containerChain.length%2===0){j=0;}
else{j=1;}
for(jl=containerChain.length;j<jl;j+=2){contour=containerChain[j];if(_ut.indexOfValue(contoursReversed,contour)===-1){contour.vertices.reverse();contoursReversed.push(contour);}}
if(!options.retainBoundaryOuter&&_ut.indexOfValue(contoursRemoved,outerBoundary)===-1){contoursRemoved.push(outerBoundary);_ut.arrayCautiousRemove(contours,outerBoundary);}
if(options.discardBoundaryInner&&_ut.indexOfValue(contoursRemoved,innerBoundary)===-1){contoursRemoved.push(innerBoundary);_ut.arrayCautiousRemove(contours,innerBoundary);}
if(options.discardEdgesInner&&containerChain.length>2){var otherContours=containerChain.slice(2);contoursRemoved=contoursRemoved.concat(otherContours);_ut.arrayCautiousRemoveMulti(contours,otherContours);}}
for(i=0,il=contours.length;i<il;i++){contour=contours[i];contourVertices=contour.vertices;if(!options.discardCollinear){sva=contourVertices[0];for(j=contourVertices.length-1;j>0;j--){va=contourVertices[j];vb=contourVertices[j-1];if(_utv2.pointsCW(sva,va,vb)===0){contourVertices.splice(j,1);}
else{sva=va;}
va=vb;}
if(_utv2.pointsCW(contourVertices[j+1],contourVertices[j],contourVertices[contourVertices.length-1])===0){contourVertices.splice(0,1);}}
if(options.reverse){contourVertices.reverse();}
var minX=contour.minX;var minY=contour.minY;var width=contour.width;var height=contour.height;for(j=0,jl=contourVertices.length;j<jl;j++){va=contourVertices[j];va.x-=minX+width*0.5;va.y-=minY+height*0.5;}}}
return contours;};ig.utilstile.shapeFromTile=function(map,ix,iy){var i,il;var tileId=map.data[iy][ix];var vertices=ig.utilstile.verticesFromTile(map,ix,iy);var segments;if(vertices){if(ig.utilstile.defaultTileSegmentsDef[tileId]){segments=ig.utilstile.defaultTileSegmentsDef[tileId];}
else{ig.utilstile.defaultTileSegmentsDef[tileId]=segments=[];for(i=0,il=vertices.length;i<il;i++){var va=vertices[i];var indexB=i===il-1?0:i+1;var vb=vertices[indexB];var dx=vb.x-va.x;var dy=vb.y-va.y;var l=Math.sqrt(dx*dx+dy*dy);var nx=dy/l;var ny=-dx/l;segments.push({a:i,b:indexB,normal:{x:nx,y:ny}});}}}
return{vertices:vertices,segments:segments||[]};};ig.utilstile.verticesFromTile=function(map,ix,iy){var tileId=map.data[iy][ix];var vertices;if(ig.utilstile.defaultTileVerticesDef[tileId]){vertices=ig.utilstile.defaultTileVerticesDef[tileId];}
else{if(tileId===1||HASH_CLIMBABLE[tileId]){vertices=[{x:0,y:0},{x:1,y:0},{x:1,y:1},{x:0,y:1}];}
else{vertices=[];var def=map.tiledef[tileId];if(def){var va=vertices[0]={x:def[0],y:def[1]};var vb=vertices[1]={x:def[2],y:def[3]};var ax=va.x;var ay=va.y;var bx=vb.x;var by=vb.y;var fx=bx-ax;var fy=by-ay;var vc=vertices[2]={x:(fy<0?1:0),y:(fx>0?1:0)};var cx=vc.x;var cy=vc.y;var vd,ve,dax,day,dbx,dby;var fiveSided=false;if(Math.abs(fx)<1&&Math.abs(fy)<1){var quadrantA=_utv2.pointQuadrant(ax,ay,0.5,0.5);var quadrantB=_utv2.pointQuadrant(bx,by,0.5,0.5);var quadrantC=_utv2.pointQuadrant(cx,cy,0.5,0.5);if(!(quadrantA&quadrantC)&&!(quadrantB&quadrantC)){fiveSided=true;}}
if(fiveSided===true){if(cx!==cy){dax=cx;dby=cy;if(cx==1){day=1;dbx=0;}
else{day=0;dbx=1;}}
else{day=cy;dbx=cx;if(cx==1){dax=0;dby=0;}
else{dax=1;dby=1;}}
vd=vertices[3]={x:dax,y:day};ve=vertices[4]={x:dbx,y:dby};}
else{if(cx!==cy){dax=cx;dby=cy;if(cx==1){day=Math.max(ay,by);dbx=Math.min(ax,bx);}
else{day=Math.min(ay,by);dbx=Math.max(ax,bx);}}
else{day=cy;dbx=cx;if(cx==1){dax=Math.min(ax,bx);dby=Math.min(ay,by);}
else{dax=Math.max(ax,bx);dby=Math.max(ay,by);}}
if((dax===ax&&day===ay)||(dax===bx&&day===by)){if(!((dbx===ax&&dby===ay)||(dbx===bx&&dby===by))){vd=vertices[3]={x:dbx,y:dby};}}
else{vd=vertices[3]={x:dax,y:day};}}
vertices=_utv2.pointsToConvexHull(vertices);}
ig.utilstile.defaultTileVerticesDef[tileId]=vertices;}}
return vertices;};ig.utilstile.getNonDuplicateSegmentVertices=function(tile,tileData,tilesAllowed){var ix=tile.ix;var iy=tile.iy;var shape=tile.shape;var vertices=shape.vertices;var segments=shape.segments;var nonDuplicates=[];var i,il;var j,jl;for(i=0,il=segments.length;i<il;i++){var segment=segments[i];var va=vertices[segment.a];var vb=vertices[segment.b];var normal=segment.normal;var overlap=false;if((normal.x===0&&normal.y!==0)||(normal.x!==0&&normal.y===0)){var touchingTiles=ig.utilstile.getTouchingTilesByDirection(tile,normal,tileData,tilesAllowed);for(j=0,jl=touchingTiles.length;j<jl;j++){var touchingTile=touchingTiles[j];if(touchingTile.shape.vertices.length>0){overlap=ig.utilstile.getSegmentOverlapWithTile(va,vb,normal,touchingTile);if(overlap)break;}}}
if(overlap===false){nonDuplicates.push(va,vb);}
else if(overlap.segmentA){nonDuplicates.push(overlap.segmentA.va,overlap.segmentA.vb);}}
return nonDuplicates;};ig.utilstile.getTouchingTilesByDirection=function(tile,direction,tileData,tilesAllowed){var ix=tile.ix;var iy=tile.iy;var nx=direction.x;var ny=direction.y;var touchingTiles=[];var touchingTile;var row;if(nx!==0){row=tileData[iy];if(nx>0){if(ix<row.length-1){touchingTile=row[ix+1];if(!tilesAllowed||_ut.indexOfValue(tilesAllowed,touchingTile)!==-1){touchingTiles.push(touchingTile);}}}
else{if(ix>0){touchingTile=row[ix-1];if(!tilesAllowed||_ut.indexOfValue(tilesAllowed,touchingTile)!==-1){touchingTiles.push(touchingTile);}}}}
if(ny!==0){if(ny>0){if(iy<tileData.length-1){touchingTile=tileData[iy+1][ix];if(!tilesAllowed||_ut.indexOfValue(tilesAllowed,touchingTile)!==-1){touchingTiles.push(touchingTile);}}}
else{if(iy>0){touchingTile=tileData[iy-1][ix];if(!tilesAllowed||_ut.indexOfValue(tilesAllowed,touchingTile)!==-1){touchingTiles.push(touchingTile);}}}}
return touchingTiles;};ig.utilstile.getSegmentOverlapWithTile=function(vaA,vbA,normalCompare,tile){var overlap=false;var shape=tile.shape;var vertices=shape.vertices;var segments=shape.segments;var i,il;var segmentPotential,normal,segment;for(i=0,il=segments.length;i<il;i++){segmentPotential=segments[i];normal=segmentPotential.normal;if(normalCompare.x===-normal.x&&normalCompare.y===-normal.y){segment=segmentPotential;break;}}
if(segment){var vaB=vertices[segment.a];var vbB=vertices[segment.b];var xaA=vaA.x;var yaA=vaA.y;var xbA=vbA.x;var ybA=vbA.y;var xaB=vaB.x;var yaB=vaB.y;var xbB=vbB.x;var ybB=vbB.y;var xlA=xbA-xaA;var ylA=ybA-yaA;var lenA=Math.sqrt(xlA*xlA+ylA*ylA);var xnA=xlA/lenA;var ynA=ylA/lenA;var xlB=xaB-xbB;var ylB=yaB-ybB;var lenB=Math.sqrt(xlB*xlB+ylB*ylB);var xnB=xlB/lenB;var ynB=ylB/lenB;var cross=xnA*ynB-ynA*xnB;if(cross===0){var saebMin,saebMax,easbMin,easbMax,normal;var minCompare,maxCompare,property;if(xnA!==0){saebMin=Math.min(xaA,xbB);saebMax=Math.max(xaA,xbB);easbMin=Math.min(xbA,xaB);easbMax=Math.max(xbA,xaB);normal=xnA;minCompare=xaA;maxCompare=xbA;property='x';}
else{saebMin=Math.min(yaA,ybB);saebMax=Math.max(yaA,ybB);easbMin=Math.min(ybA,yaB);easbMax=Math.max(ybA,yaB);normal=ynA;minCompare=yaA;maxCompare=ybA;property='y';}
if(saebMin===saebMax&&easbMin===easbMax){overlap=true;}
else{var overlappingBy=normal<0?saebMin-easbMax:easbMin-saebMax;if(overlappingBy>0){overlap={segmentA:{va:{x:vaA.x,y:vaA.y},vb:{x:vbA.x,y:vbA.y}},segmentB:{va:{x:vaB.x,y:vaB.y},vb:{x:vbB.x,y:vbB.y}}};var min,max;var wipeout=true;if(normal<0){min=saebMin===saebMax?0:(saebMin===minCompare?SEGMENT_B:SEGMENT_A);max=easbMin===easbMax?0:(easbMax===maxCompare?SEGMENT_B:SEGMENT_A);if(min===SEGMENT_A){overlap.segmentA.vb[property]+=overlappingBy;wipeout=false;}
else if(min===SEGMENT_B){overlap.segmentB.va[property]+=overlappingBy;}
if(max===SEGMENT_A){overlap.segmentA.va[property]-=overlappingBy;wipeout=false;}
else if(max===SEGMENT_B){overlap.segmentB.vb[property]-=overlappingBy;}
if(wipeout===true){overlap=true;}}
else{min=saebMin===saebMax?0:(saebMin===minCompare?SEGMENT_A:SEGMENT_B);max=easbMin===easbMax?0:(easbMax===maxCompare?SEGMENT_A:SEGMENT_B);if(min===SEGMENT_A){overlap.segmentA.vb[property]-=overlappingBy;wipeout=false;}
else if(min===SEGMENT_B){overlap.segmentB.va[property]-=overlappingBy;}
if(max===SEGMENT_A){overlap.segmentA.va[property]+=overlappingBy;wipeout=false;}
else if(max===SEGMENT_B){overlap.segmentB.vb[property]+=overlappingBy;}
if(wipeout===true){overlap=true;}}}}}}
return overlap;};});

// lib/plusplus/core/entity.js
ig.baked=true;ig.module('plusplus.core.entity').requires('impact.entity','plusplus.core.config','plusplus.core.timer','plusplus.core.image','plusplus.core.background-map','plusplus.core.animation','plusplus.helpers.signals','plusplus.helpers.tweens','plusplus.helpers.utils','plusplus.helpers.utilsmath','plusplus.helpers.utilsvector2','plusplus.helpers.utilsintersection','plusplus.helpers.utilsdraw','plusplus.helpers.utilscolor','plusplus.helpers.utilstile').defines(function(){"use strict";var _c=ig.CONFIG;var _tw=ig.TWEEN;var _ut=ig.utils;var _utm=ig.utilsmath;var _utv2=ig.utilsvector2;var _uti=ig.utilsintersection;var _utd=ig.utilsdraw;var _utc=ig.utilscolor;var _utt=ig.utilstile;ig.EntityExtended=ig.Entity.extend({layerName:'entities',pos:_utv2.vector(),size:_utv2.vector(_c.ENTITY.SIZE_EFFECTIVE_X,_c.ENTITY.SIZE_EFFECTIVE_Y),offset:_utv2.vector(_c.ENTITY.SIZE_OFFSET_X,_c.ENTITY.SIZE_OFFSET_Y),posDraw:_utv2.vector(),sizeDraw:_utv2.vector(),scale:_c.ENTITY.SCALE,scaleMod:1,ignoreSystemScale:_c.ENTITY.IGNORE_SYSTEM_SCALE,collides:0,collidesChanges:false,checkAgainst:0,type:0,group:0,frozen:false,controllable:true,performance:_c.STATIC,highPerformance:false,fixed:false,facing:_utv2.vector(1,0),canFlipX:_c.ENTITY.CAN_FLIP_X,canFlipY:_c.ENTITY.CAN_FLIP_Y,friction:_utv2.vector(_c.ENTITY.FRICTION_X,_c.ENTITY.FRICTION_Y),maxVel:_utv2.vector(_c.ENTITY.MAX_VEL_X,_c.ENTITY.MAX_VEL_Y),angle:0,bounciness:_c.ENTITY.BOUNCINESS,minBounceVelocity:_c.ENTITY.MIN_BOUNCE_VEL,currentAnim:null,overridingAnim:null,animSheetPath:'',animSheetWidth:0,animSheetHeight:0,animSettings:null,animationType:0,animationTypes:null,animSequenceCount:1,animTileOffset:0,animFrameTime:1,animInit:'',textured:false,persistent:false,targetable:false,climbable:false,climbableStairs:false,oneWay:false,oneWayFacing:null,opaque:_c.ENTITY.OPAQUE,opaqueOffset:_c.ENTITY.OPAQUE_OFFSET,opaqueVertices:null,opaqueFromVertices:_c.ENTITY.OPAQUE_FROM_VERTICES,diffuse:_c.ENTITY.DIFFUSE,hollow:true,activated:false,alwaysToggleActivate:false,activateCallback:null,activateContext:null,deactivateCallback:false,deactivateContext:false,alpha:1,health:_c.ENTITY.HEALTH,healthMax:_c.ENTITY.HEALTH,invulnerable:false,rangeInteractableX:0,rangeInteractableY:0,paused:false,visible:false,changed:false,checking:false,added:false,dieing:false,dieingSilently:false,flip:{x:false,y:false},grounded:_c.TOP_DOWN,standing:_c.TOP_DOWN,gravityFactor:_c.TOP_DOWN?0:1,collidingWithMap:false,slope:false,slopeSpeedMod:_c.ENTITY.SLOPE_SPEED_MOD,slopeStanding:{min:(_c.ENTITY.SLOPE_STANDING_MIN).toRad(),max:(_c.ENTITY.SLOPE_STANDING_MAX).toRad()},moving:false,movingX:false,movingY:false,movingTo:null,movedTo:true,movingToOnce:false,movingToTweening:false,movingToTweenPct:0,linkedTo:null,tweens:{},resetState:{},needsBounds:_c.ENTITY.NEEDS_BOUNDS,bounds:null,boundsDraw:null,needsVertices:_c.ENTITY.NEEDS_VERTICES,vertices:null,verticesWorld:null,onAdded:null,onRemoved:null,onPaused:null,onUnpaused:null,onMovedTo:null,onRefreshed:null,needsRebuild:true,_angleLast:0,_stopChecking:false,_changedAdd:false,_verticesFound:false,_overridedAnim:false,_cleanupPersistent:false,init:function(x,y,settings){this.id=++ig.Entity._lastId;this.initTypes();this.initProperties();this.reset(x,y,settings);},initTypes:function(){},initProperties:function(){this.onAdded=new ig.Signal();this.onRemoved=new ig.Signal();this.onPaused=new ig.Signal();this.onUnpaused=new ig.Signal();this.onMovedTo=new ig.Signal();this.onRefreshed=new ig.Signal();},reset:function(x,y,settings){this.resetCore(x,y,settings);this.resetExtras();},resetCore:function(x,y,settings){ig.merge(this,this.resetState);if(x){this.pos.x=x;}
if(y){this.pos.y=y;}
if(settings&&!ig.global.wm){if(typeof settings.type==='string'){_ut.addType(ig.EntityExtended,this,'type',settings.type);delete settings.type;}
if(typeof settings.checkAgainst==='string'){_ut.addType(ig.EntityExtended,this,'checkAgainst',settings.checkAgainst);delete settings.checkAgainst;}
if(typeof settings.group==='string'){_ut.addType(ig.EntityExtended,this,'group',settings.group,"GROUP");delete settings.group;}}
ig.merge(this,settings);},resetExtras:function(){this._killed=this.dieing=this.dieingSilently=false;this.healthMax=this.health;if(this.performance===_c.DYNAMIC){this.fixed=false;}
if(this.fixed){this.collides=ig.EntityExtended.COLLIDES.NEVER;}
if(this.gravityFactor===0||ig.game.gravity===0){this.standing=this.grounded=true;}
if(this.animSheetPath){this.animSheet=new ig.AnimationSheet(_c.PATH_TO_MEDIA+this.animSheetPath,this.animSheetWidth,this.animSheetHeight);this.animSheetPath='';}
if(this.animSettings){this.anims={};this.resetState.currentAnim=null;if(this.animSettings===true){this.createAnim();}
else{for(var animName in this.animSettings){this.createAnim(animName,this.animSettings[animName]);}}
this.animSettings=false;}
this.recordResetState();this.refresh();if(this.frozen){this.changed=this._changedAdd=false;}
else{this.changed=this._changedAdd=true;}
if(this.activated){this.activated=false;this.activate();}},recordResetState:function(){var rs=this.resetState;if(!rs.pos){rs.pos=_utv2.vector();}
_utv2.copy(rs.pos,this.pos);if(!rs.vel){rs.vel=_utv2.vector();}
_utv2.copy(rs.vel,this.vel);if(!rs.accel){rs.accel=_utv2.vector();}
_utv2.copy(rs.accel,this.accel);rs.layerName=this.layerName;rs.frozen=this.frozen;rs.activated=this.activated;rs.alpha=this.alpha;rs.type=this.type;rs.checkAgainst=this.checkAgainst;rs.collides=this.collides;rs.performance=this.performance;rs.health=this.health;},createAnim:function(name,settings){settings=settings||{};var sequence=settings.sequence;if(!sequence||!sequence.length){sequence=settings.sequence=[];var frameCount=settings.sequenceCount||this.animSequenceCount;var startFrame=settings.tileOffset||this.animTileOffset;var animationType=settings.type||this.animationType;if(animationType&&this.animationTypes){var orderIndex=_ut.indexOfValue(this.animationTypes,animationType);if(orderIndex!==-1){startFrame+=frameCount*orderIndex;}}
for(var j=0;j<frameCount;j++){sequence[j]=startFrame+j;}}
settings.frameTime=settings.frameTime||this.animFrameTime;if(name){this.addAnim(name,settings);}
else{var idleAnim=this.addAnim("idle",settings);this.anims.idleX=idleAnim;this.anims.idleY=idleAnim;this.anims.idleLeft=idleAnim;this.anims.idleRight=idleAnim;this.anims.idleUp=idleAnim;this.anims.idleDown=idleAnim;}},addAnim:function(name,settings){if(!this.animSheet){throw('No animSheet to add the animation '+name+' to.');}
var animation=new ig.AnimationExtended(this.animSheet,settings);this.anims[name]=animation;if(!this.currentAnim){this.currentAnim=animation;}
return animation;},getDirectionalAnimName:function(animName){if(this.facing.y!==0){if(this.canFlipY){return animName+"Y";}
else if(this.facing.y<0){return animName+"Up";}
else{return animName+"Down";}}
else{if(this.canFlipX){return animName+"X";}
else if(this.facing.x<0){return animName+"Left";}
else{return animName+"Right";}}},refresh:function(force){if(!this.ignoreSystemScale&&this.scale!==ig.system.scale){force=true;this.scale=ig.system.scale;}
if(this.needsRebuild){force=true;}
this.scaleMod=this.scale/ig.system.scale;force=this.resize(force)||force;if(force){this.sizeDraw.x=this.getSizeDrawX();this.sizeDraw.y=this.getSizeDrawY();}
force=this.reposition(force)||force;this.recordChanges(force);this.recordLast();if(force){this.rebuild();}
if(this.movingTo){this.moveToUpdate();}
this.onRefreshed.dispatch(this);if(this.frozen){this.changed=this.moving=this.movingX=this.movingY=false;this.facing.x=this.facing.y=0;}
else if(this.performance===_c.STATIC&&this.changed){this.moving=this.movingX=this.movingY=false;this._changedAdd=true;}
return force;},resize:function(force){return force;},reposition:function(force){if(this.movingTo){this.movedTo=false;}
return force;},rebuild:function(){this.needsRebuild=false;},adding:function(){this.ready();this.onAdded.dispatch(this);},ready:function(){this.changePerformance();if(this.linkedTo){this.link(this.linkedTo,this.linkedTo.added);}
else{ig.system.onResized.add(this.refresh,this);}
var animNameSpawn=this.getDirectionalAnimName("spawn");if(this.anims[animNameSpawn]){this.animOverride(animNameSpawn,{callback:this.spawn});}
else{this.spawn();}},spawn:function(){this.resetToInitAnim();},resetToInitAnim:function(){if(this.animInit instanceof ig.Animation){this.currentAnim=this.animInit;}
else if(this.animInit){this.currentAnim=this.anims[this.animInit];}
else{this.currentAnim=this.anims['idle']||this.currentAnim;}
if(this.currentAnim){this.resetState.currentAnim=this.currentAnim;var stop=this.currentAnim.stop;this.currentAnim.playFromStart();this.currentAnim.stop=stop;}},setPerformance:function(level){this.performance=level;if(this.performance!==this.performanceLast){this.changePerformance();}},changePerformance:function(){this.performanceLast=this.performance;if(this.performance===_c.MOVABLE){this.changePerformanceMovable();}
else if(this.performance===_c.DYNAMIC){this.changePerformanceDynamic();}
else{this.changePerformanceStatic();}},changePerformanceStatic:function(){},changePerformanceMovable:function(){},changePerformanceDynamic:function(){},setControllable:function(controllable){if(typeof controllable==='undefined'){controllable=true;}
if(!controllable){this.removeControl();}
else{this.addControl();}},addControl:function(){this.controllable=true;},removeControl:function(){this.controllable=false;this.applyAntiVelocity();},getLayer:function(){return ig.game.layersMap[this.layerName];},getBounds:function(){var bounds=this.bounds;if(!bounds){bounds=this.bounds={};}
bounds.minX=this.pos.x;bounds.minY=this.pos.y;bounds.maxX=this.pos.x+this.size.x;bounds.maxY=this.pos.y+this.size.y;bounds.width=this.size.x;bounds.height=this.size.y;return bounds;},getBoundsDraw:function(){var bounds=this.boundsDraw;if(!bounds){bounds=this.boundsDraw={};}
var minX=this.posDraw.x;var minY=this.posDraw.y;bounds.minX=minX;bounds.minY=minY;bounds.maxX=minX+this.sizeDraw.x;bounds.maxY=minY+this.sizeDraw.y;bounds.width=this.sizeDraw.x;bounds.height=this.sizeDraw.y;if(this.angle!==0){bounds=ig.utilsintersection.boundsCopyRotated(bounds,bounds,this.angle);}
return bounds;},getVertices:function(){var sizeX=this.size.x*0.5;var sizeY=this.size.y*0.5;return[_utv2.vector(-sizeX,-sizeY),_utv2.vector(sizeX,-sizeY),_utv2.vector(sizeX,sizeY),_utv2.vector(-sizeX,sizeY)];},getVerticesWorld:function(){if(!this.vertices){this.vertices=this.getVertices();}
return _utv2.projectPoints(this.vertices,this.pos.x+this.size.x*0.5,this.pos.y+this.size.y*0.5,1,1,this.angle);},getSizeDrawX:function(){return this.size.x+this.offset.x*2;},getSizeDrawY:function(){return this.size.y+this.offset.y*2;},getPosDrawX:function(){return this.pos.x-this.offset.x;},getPosDrawY:function(){return this.pos.y-this.offset.y;},getCenterX:function(){return this.pos.x+this.size.x*0.5;},getCenterY:function(){return this.pos.y+this.size.y*0.5;},getIsVisible:function(){if(this.alpha<=0)return false;else{if(this.fixed){return _uti.AABBIntersect(this.posDraw.x,this.posDraw.y,this.posDraw.x+this.sizeDraw.x,this.posDraw.y+this.sizeDraw.y,0,0,ig.system.width,ig.system.height);}
else{var minX=this.posDraw.x-ig.game.screen.x;var minY=this.posDraw.y-ig.game.screen.y;return _uti.AABBIntersect(minX,minY,minX+this.sizeDraw.x,minY+this.sizeDraw.y,0,0,ig.system.width,ig.system.height);}}},getIsMovingSelf:function(){return this.performance===_c.DYNAMIC||this.movingTo;},getIsCollidingWithOneWay:function(entityOneWay){if(entityOneWay.oneWayFacing.x!==0){if(entityOneWay.oneWayFacing.x<0){if((this.pos.x+this.size.x)-entityOneWay.pos.x<=Math.max(entityOneWay.size.x,this.size.x)*_c.PRECISION_PCT_ONE_SIDED+(this.vel.x>0?this.vel.x*ig.system.tick:0)){return true;}}
else if((entityOneWay.pos.x+entityOneWay.size.x)-this.pos.x<=Math.max(entityOneWay.size.x,this.size.x)*_c.PRECISION_PCT_ONE_SIDED+(this.vel.x<0?-this.vel.x*ig.system.tick:0)){return true;}}
if(entityOneWay.oneWayFacing.y!==0){if(entityOneWay.oneWayFacing.y<0){if((this.pos.y+this.size.y)-entityOneWay.pos.y<=Math.max(entityOneWay.size.y,this.size.y)*_c.PRECISION_PCT_ONE_SIDED+(this.vel.y>0?this.vel.y*ig.system.tick:0)){return true;}}
else if((entityOneWay.pos.y+entityOneWay.size.y)-this.pos.y<=Math.max(entityOneWay.size.y,this.size.y)*_c.PRECISION_PCT_ONE_SIDED+(this.vel.y<0?-this.vel.y*ig.system.tick:0)){return true;}}},touches:function(entity){return _uti.AABBIntersect(this.pos.x,this.pos.y,this.pos.x+this.size.x,this.pos.y+this.size.y,entity.pos.x,entity.pos.y,entity.pos.x+entity.size.x,entity.pos.y+entity.size.y);},distanceTo:function(entity){var distanceX=(this.pos.x+this.size.x*0.5)-(entity.pos.x+entity.size.x*0.5);var distanceY=(this.pos.y+this.size.y*0.5)-(entity.pos.y+entity.size.y*0.5);return Math.sqrt(distanceX*distanceX+distanceY*distanceY);},distanceSquaredTo:function(entity){var distanceX=(this.pos.x+this.size.x*0.5)-(entity.pos.x+entity.size.x*0.5);var distanceY=(this.pos.y+this.size.y*0.5)-(entity.pos.y+entity.size.y*0.5);return distanceX*distanceX+distanceY*distanceY;},distanceEdgeTo:function(entity){var minX=this.pos.x;var maxX=minX+this.size.x;var minY=this.pos.y;var maxY=minY+this.size.y;var entityMinX=entity.pos.x;var entityMaxX=entityMinX+entity.size.x;var entityMinY=entity.pos.y;var entityMaxY=entityMinY+entity.size.y;var distanceX;var distanceY;if(maxX<entityMinX){distanceX=entityMinX-maxX;}
else if(minX>entityMaxX){distanceX=minX-entityMaxX;}
else{distanceX=0;}
if(maxY<entityMinY){distanceY=entityMinY-maxY;}
else if(minY>entityMaxY){distanceY=minY-entityMaxY;}
else{distanceY=0;}
return Math.sqrt(distanceX*distanceX+distanceY*distanceY);},distanceSquaredEdgeTo:function(entity){var minX=this.pos.x;var maxX=minX+this.size.x;var minY=this.pos.y;var maxY=minY+this.size.y;var entityMinX=entity.pos.x;var entityMaxX=entityMinX+entity.size.x;var entityMinY=entity.pos.y;var entityMaxY=entityMinY+entity.size.y;var distanceX;var distanceY;if(maxX<entityMinX){distanceX=entityMinX-maxX;}
else if(minX>entityMaxX){distanceX=minX-entityMaxX;}
else{distanceX=0;}
if(maxY<entityMinY){distanceY=entityMinY-maxY;}
else if(minY>entityMaxY){distanceY=minY-entityMaxY;}
else{distanceY=0;}
return distanceX*distanceX+distanceY*distanceY;},angleTo:function(entity){return Math.atan2((this.pos.x+this.size.x*0.5)-(entity.pos.x+entity.size.x*0.5),(this.pos.y+this.size.y*0.5)-(entity.pos.y+entity.size.y*0.5));},applyAntiVelocity:function(){_utv2.zero(this.vel);},applyAntiVelocityX:function(){this.vel.x=0;},applyAntiVelocityY:function(){this.vel.y=0;},applyAntiGravity:function(){if(this.gravityFactor!==0){this.vel.y-=ig.game.gravity*ig.system.tick*this.gravityFactor;}},animOverride:function(animName,settings){settings=settings||{};var entity=settings.entity||this;var loop=settings.loop;var lock=settings.lock;if(entity.anims[animName]){if(this.overridingAnimName!==animName){this.animRelease();this.overridingAnimName=animName;this.overridingAnimCallback=settings.callback;this.overridingAnimContext=settings.context;this.overridingAnimFrozen=this.frozen;this._overridedAnim=this.currentAnim;this.currentAnim=this.overridingAnim=entity.anims[animName];if(!loop&&!lock){this.overridingAnim.onCompleted.addOnce(this.animRelease,this);}}
if(this.frozen){this.frozen=false;}
this.overridingAnim.playFromStart(!loop,settings.reverse);}
else if(typeof settings.callback==='function'){this.animRelease(true);settings.callback.call(settings.context||this);}},animRelease:function(silent){var callback=this.overridingAnimCallback;var context=this.overridingAnimContext;if(this.overridingAnimFrozen){this.frozen=this.overridingAnimFrozen;}
if(this.overridingAnim){this.overridingAnim.onCompleted.remove(this.animRelease,this);this.overridingAnim.stop=true;this.currentAnim=this._overridedAnim;this.overridingAnimName=this.overridingAnim=this._overridedAnim=this.overridingAnimCallback=this.overridingAnimContext=undefined;}
if(!silent&&callback){callback.call(context||this);}},initOpaqueVertices:function(){this.opaqueVertices=[_utv2.vector(),_utv2.vector(),_utv2.vector(),_utv2.vector()];},getOpaqueVertices:function(){var width=this.size.x;var height=this.size.y;var x=this.pos.x;var y=this.pos.y;var opaqueOffset=this.opaqueOffset;if(this.currentAnim&&this.currentAnim.opaqueOffset){opaqueOffset=(this.currentAnim.opaqueOffset.tiles&&this.currentAnim.opaqueOffset.tiles[this.currentAnim.tile])||this.currentAnim.opaqueOffset;}
var minX=x+opaqueOffset.left;var minY=y+opaqueOffset.top;var maxX=x+width+opaqueOffset.right;var maxY=y+height+opaqueOffset.bottom;var cX=x+width*0.5;var cY=y+height*0.5;var tl=this.opaqueVertices[0];var tr=this.opaqueVertices[1];var br=this.opaqueVertices[2];var bl=this.opaqueVertices[3];if(this.angle!==0){var cos=Math.cos(this.angle);var sin=Math.sin(this.angle);var dminX=minX-cX;var dminY=minY-cY;var dmaxX=maxX-cX;var dmaxY=maxY-cY;tl.x=cX+dminX*cos-dminY*sin;tl.y=cY+dminX*sin+dminY*cos;tr.x=cX+dmaxX*cos-dminY*sin;tr.y=cY+dmaxX*sin+dminY*cos;br.x=cX+dmaxX*cos-dmaxY*sin;br.y=cY+dmaxX*sin+dmaxY*cos;bl.x=cX+dminX*cos-dmaxY*sin;bl.y=cY+dminX*sin+dmaxY*cos;}
else{tl.x=minX;tl.y=minY;tr.x=maxX;tr.y=minY;br.x=maxX;br.y=maxY;bl.x=minX;bl.y=maxY;}
return this.opaqueVertices;},castShadow:function(light,context,point,minX,minY,radius){if(!this._contours){this._utilVec2Cast1=_utv2.vector();this._utilVec2Cast2=_utv2.vector();this._utilVec2Cast3=_utv2.vector();this._utilVec2Cast4=_utv2.vector();this._utilVec2Project1=_utv2.vector();this._utilVec2Project2=_utv2.vector();this._utilVec2Project3=_utv2.vector();this._utilVec2Project4=_utv2.vector();this._contourPool=[];this._contours=[];}
if(this.opaqueFromVertices){if(!this._verticesFound){this.opaqueVertices=this.verticesWorld=this.getVerticesWorld();}}
else{if(!this.opaqueVertices){this.initOpaqueVertices();}
if(!this._verticesFound){this.getOpaqueVertices();}}
this._verticesFound=true;if(!this.hollow&&_uti.pointInPolygon(point.x,point.y,this.opaqueVertices)){return;}
var alpha=this.diffuse>=1||light.diffuse>=1?1:this.diffuse*light.diffuse;var opaqueVertices=this.opaqueVertices;var maxX=minX+radius*2;var maxY=minY+radius*2;var withinLight=false;var contourPool=this._contourPool,contours=this._contours;var contour,contourVertices;var contourOther,contourOtherVertices;var oa,ob,oc,od,combined;var a=opaqueVertices[opaqueVertices.length-1],b,c,d;var i,il,j,jl,k,kl;for(i=0,il=opaqueVertices.length;i<il;i++){b=opaqueVertices[i];var abMinX;var abMinY;var abMaxX;var abMaxY;if(a.x<b.x){abMinX=a.x;abMaxX=b.x;}
else{abMinX=b.x;abMaxX=a.x;}
if(a.y<b.y){abMinY=a.y;abMaxY=b.y;}
else{abMinY=b.y;abMaxY=a.y;}
if(_uti.AABBIntersect(abMinX,abMinY,abMaxX,abMaxY,minX,minY,maxX,maxY)){withinLight=true;var aToB=_utv2.copy(this._utilVec2Cast1,b);_utv2.subtract(aToB,a);var normal=_utv2.set(this._utilVec2Cast2,aToB.y,-aToB.x);var pointToA=_utv2.copy(this._utilVec2Cast3,a);_utv2.subtract(pointToA,point);if(_utv2.dot(normal,pointToA)>0){var pointToB=_utv2.copy(this._utilVec2Cast4,b);_utv2.subtract(pointToB,point);contourPool.push({vertices:this.projectShadow(point,radius,a,b,pointToA,pointToB,aToB),verticesActual:[a,b],verticesHollow:[]});}}
a=b;}
if(withinLight){for(i=0,il=contourPool.length;i<il;i++){contour=contourPool[i];contourVertices=contour.vertices;combined=false;a=contourVertices[0];b=contourVertices[1];c=contourVertices[contourVertices.length-2];d=contourVertices[contourVertices.length-1];for(j=i+1;j<il;j++){contourOther=contourPool[j];contourOtherVertices=contourOther.vertices;oa=contourOtherVertices[0];ob=contourOtherVertices[1];oc=contourOtherVertices[contourOtherVertices.length-2];od=contourOtherVertices[contourOtherVertices.length-1];if(_utv2.equal(a,od)&&_utv2.equal(b,oc)){combined=true;contourPool[j]={vertices:contourOtherVertices.slice(0,-1).concat(contourVertices.slice(2)),verticesActual:contourOther.verticesActual.slice(0,-1).concat(contour.verticesActual),verticesHollow:contour.verticesHollow.concat(a,contourOther.verticesHollow)};break;}
else if(_utv2.equal(c,ob)&&_utv2.equal(d,oa)){combined=true;contourPool[j]={vertices:contourVertices.slice(0,-1).concat(contourOtherVertices.slice(2)),verticesActual:contour.verticesActual.slice(0,-1).concat(contourOther.verticesActual),verticesHollow:contourOther.verticesHollow.concat(d,contour.verticesHollow)};break;}}
if(combined!==true){contours.push(contour);}}
if(!this.hollow){var vertices=opaqueVertices.slice(0);var connections={};var connection=[];var connected=false;for(i=0,il=vertices.length;i<il;i++){var vertex=vertices[i];var matched=false;for(j=0,jl=contours.length;j<jl;j++){contour=contours[j];var contourVerticesActual=contour.verticesActual;for(k=0,kl=contourVerticesActual.length;k<kl;k++){var vertexActual=contourVerticesActual[k];if(vertex.x===vertexActual.x&&vertex.y===vertexActual.y){matched=true;if(connection){connections[j===0?jl-1:j-1]=connection;connection=undefined;connected=true;}
break;}}
if(matched===true){break;}}
if(matched===false){if(!connection){connection=[];}
connection.push(vertex);}}
if(connection){connections[jl-1]=connection!==connections[jl-1]?connection.concat(connections[jl-1]||[]):connection;}
if(connected){var contourConnected={vertices:[]};for(i=0,il=contours.length;i<il;i++){contour=contours[i];contourConnected.vertices=contourConnected.vertices.concat(contour.vertices,connections[i]||[]);}
contours=[contourConnected];}
else{contours.push({vertices:vertices});}}
else{for(i=0,il=contours.length;i<il;i++){contour=contours[i];contour.vertices=contour.vertices.concat(contour.verticesHollow);}}
if(light.pixelPerfect){for(i=0,il=contours.length;i<il;i++){contour=contours[i];_utd.pixelFillPolygon(context,minX,minY,maxX,maxY,contour.vertices,1,1,1,alpha,true,_uti.boundsOfPoints(contour.vertices));}}
else{context.fillStyle=_utc.RGBAToCSS(1,1,1,alpha);for(i=0,il=contours.length;i<il;i++){contour=contours[i];_utd.fillPolygon(context,contour.vertices,-minX,-minY,light.scale);}}
contourPool.length=contours.length=0;}},projectShadow:function(point,radius,a,b,pointToA,pointToB,aToB){var pointToAB=this._utilVec2Project1;var invOriginToA=_utv2.copy(this._utilVec2Project2,pointToA);_utv2.inverse(invOriginToA);var t=_utv2.dot(aToB,invOriginToA)/_utv2.lengthSquared(aToB);if(t<0){_utv2.copy(pointToAB,a);}
else if(t>1){_utv2.copy(pointToAB,b);}
else{_utv2.copy(pointToAB,a);var n=_utv2.copy(this._utilVec2Project3,aToB);_utv2.multiplyScalar(n,t)
_utv2.add(pointToAB,n);}
var pointToM=_utv2.copy(this._utilVec2Project4,pointToAB);_utv2.subtract(pointToM,point);_utv2.normalize(pointToM);_utv2.multiplyScalar(pointToM,radius);_utv2.normalize(pointToA);_utv2.multiplyScalar(pointToA,radius);_utv2.normalize(pointToB);_utv2.multiplyScalar(pointToB,radius);var ap=_utv2.clone(a);_utv2.add(ap,pointToA);var bp=_utv2.clone(b);_utv2.add(bp,pointToB);var oam,obm;if(t<0){obm=_utv2.clone(b);_utv2.add(obm,pointToM);return[a,ap,obm,bp,b];}
else if(t>1){oam=_utv2.clone(a);_utv2.add(oam,pointToM);return[a,ap,oam,bp,b];}
else{oam=_utv2.clone(a);_utv2.add(oam,pointToM);obm=_utv2.clone(b);_utv2.add(obm,pointToM);return[a,ap,oam,obm,bp,b];}},activate:function(entity){this.activated=true;if(this.activateCallback){this.activateCallback.call(this.activateContext||this,entity);}},deactivate:function(entity){this.activated=false;if(this.deactivateCallback){this.deactivateCallback.call(this.deactivateContext||this,entity);}},toggleActivate:function(entity){if(!this.alwaysToggleActivate&&this.activated){this.deactivate(entity);}
else{this.activate(entity);}},fadeIn:function(settings){return this.fadeTo(1,settings);},fadeOut:function(settings){return this.fadeTo(0,settings);},fadeTo:function(alpha,settings){settings=ig.merge({name:'fade',duration:_c.DURATION_FADE},settings);return this.tween({alpha:alpha||0},settings);},fadeToDeath:function(settings){settings=settings||{};var me=this;var onCompleteOriginal=settings.onComplete;settings.onComplete=function(){ig.game.removeEntity(me);if(onCompleteOriginal){onCompleteOriginal();}};return this.fadeTo(0,settings);},tween:function(properties,settings){var me=this;settings=settings||{};var name=settings.name||'tween';var tween=this.tweens[name];if(tween){tween.stop();}
settings.pauseSignaller=settings.pauseSignaller||this;if(!settings.noComplete){var onComplete=settings.onComplete;settings.onComplete=function(){delete me.tweens[name];if(typeof onComplete==='function'){onComplete();}};}
return this.tweens[name]=_tw.tween(this,properties,settings);},tweenEnd:function(name){if(typeof name==='string'){var tween=this.tweens[name];if(tween){tween.stop();delete this.tweens[name];}}
else{for(name in this.tweens){this.tweenEnd(name);}}},moveTo:function(item,settings){if(item&&this.movingTo!==item){this.moveToStop();settings=settings||{};if(_ut.isArray(item)){if(item.length===0){return;}
this.movingToSequence=item.slice(0);item=this.movingToSequence.shift();if(this.movingTo===item){return;}
this.movingToOnce=true;}
if(typeof settings.once!=='undefined'){this.movingToOnce=settings.once;}
var singleMove=!this.fixed&&this.performance===_c.STATIC;if(item instanceof ig.EntityExtended){if((settings.matchPerformance||this.ignoreSystemScale)&&this.performance!==_c.MOVABLE){this.setPerformance(_c.MOVABLE);singleMove=false;}}
if(settings.randomOffsetPct){settings.baseOffsetPct=settings.baseOffsetPct||settings.offsetPct||_utv2.vector();var randomOffsetPct=settings.randomOffsetPct;randomOffsetPct.x=randomOffsetPct.x||0;randomOffsetPct.y=randomOffsetPct.y||0;settings.offsetPct=_utv2.vector(settings.baseOffsetPct.x+(Math.random()*2*randomOffsetPct.x-randomOffsetPct.x),settings.baseOffsetPct.y+(Math.random()*2*randomOffsetPct.y-randomOffsetPct.y));}
if(singleMove&&!settings.lerp&&!settings.tween){this.moveToPosition(item,settings);this.recordChanges();}
else{this.frozen=false;this.movingTo=item;this.movedTo=false;this.movingToSettings=settings;if(settings.tween&&this.performance!==_c.DYNAMIC){this.movingToTweening=true;this.movingToTweenPct=0;this.movingToTweenX=this.pos.x;this.movingToTweenY=this.pos.y;var tweenSettings=settings.tweenSettings=settings.tweenSettings||{};tweenSettings.name="movingTo";tweenSettings.onComplete=function(){this.moveToUpdate();this.moveToComplete();}.bind(this);this.tween({movingToTweenPct:1},tweenSettings);}
return true;}}
return false;},moveToSequenceNext:function(){if(this.movingToSequence){if(this.movingToSequence.length>0){this.movingTo=null;this.moveTo(this.movingToSequence.shift(),this.movingToSettings);}
else{this.movingToSequence=undefined;this.moveToComplete();this.moveToStop();}}},moveToUpdate:function(){if(this.movingTo&&(!this.movedTo||this.movingTo.changed)){this.moveToPosition(this.movingTo,this.movingToSettings);}},moveToPosition:function(item,settings){var targetX=0;var targetY=0;var alignX=0.5;var alignY=0.5;if(item instanceof ig.EntityExtended){if(settings){var align=settings.align;if(align){if(typeof align.x!=='undefined'){alignX=align.x;}
if(typeof align.y!=='undefined'){alignY=align.y;}}
var offset=settings.offset;if(offset){targetX+=offset.x||0;targetY+=offset.y||0;this.flip=item.flip;}
var offsetPct=settings.offsetPct;if(offsetPct){var offsetX=offsetPct.x||0;var offsetY=offsetPct.y||0;targetX+=(offsetX*item.size.x*0.5+offsetX*this.size.x*0.5)*(item.flip.x?-1:1);targetY+=offsetY*item.size.y*0.5+offsetY*this.size.y*0.5;this.flip=item.flip;}}
var scaleMod=this.scale/item.scale;targetX+=item.pos.x+alignX*(item.size.x-this.size.x*scaleMod);targetY+=item.pos.y+alignY*(item.size.y-this.size.y*scaleMod);if(this.fixed){if(!item.fixed){targetX-=ig.game.screen.x;targetY-=ig.game.screen.y;}}
else{if(item.fixed){targetX+=ig.game.screen.x;targetY+=ig.game.screen.y;}}}
else{if(settings){var align=settings.align;if(align){if(typeof align.x!=='undefined'){alignX=align.x;}
if(typeof align.y!=='undefined'){alignY=align.y;}}
var offset=settings.offset;if(offset){targetX+=offset.x||0;targetY+=offset.y||0;}
var offsetPct=settings.offsetPct;if(offsetPct){var offsetX=offsetPct.x||0;var offsetY=offsetPct.y||0;targetX+=offsetX*this.size.x*0.5;targetY+=offsetY*this.size.y*0.5;}}
targetX+=item.x+alignX*this.size.x;targetY+=item.y+alignY*this.size.y;if(this.fixed){targetX-=ig.game.screen.x;targetY-=ig.game.screen.y;}}
var dx=targetX-this.pos.x;var dy=targetY-this.pos.y;if(this.movingToTweening){this.pos.x=this.movingToTweenX+(targetX-this.movingToTweenX)*this.movingToTweenPct;this.pos.y=this.movingToTweenY+(targetY-this.movingToTweenY)*this.movingToTweenPct;}
else if(settings&&settings.lerp){this.pos.x+=dx*settings.lerp;this.pos.y+=dy*settings.lerp;}
else{this.pos.x=targetX;this.pos.y=targetY;}
if(_utm.almostEqual(dx,0,_c.PRECISION_ZERO)&&_utm.almostEqual(dy,0,_c.PRECISION_ZERO)){this.moveToComplete();}},moveToComplete:function(){if(this.movingToSequence){this.moveToSequenceNext();}
else{this.movedTo=true;if(this.movingToOnce){this.moveToStop();this.onMovedTo.dispatch(this);}
return true;}},moveToStop:function(){if(this.movingTo){if(this.movingToTweening){this.tweenEnd("movingTo");this.movingToTweenPct=this.movingToTweenX=this.movingToTweenY=0;}
this.movedTo=this.movingToTweening=this.movingToOnce=false;this.movingTo=this.movingToSettings=this.movingToSequence=null;}},lookAt:function(target){if(target&&this!==target&&!target.fixed){var centerX=this.pos.x+this.size.x*0.5;var centerY;var targetCenterX;var targetCenterY;if(_c.TOP_DOWN){centerY=this.pos.y+this.size.y*0.5;if(target instanceof ig.EntityExtended){targetCenterX=target.pos.x+target.size.x*0.5;targetCenterY=target.pos.y+target.size.y*0.5;}
else{targetCenterX=target.x;targetCenterY=target.y;}
var xDiff=centerX-targetCenterX;var yDiff=centerY-targetCenterY;if(Math.abs(xDiff)>Math.abs(yDiff)){this.facing.y=0;if(xDiff>0){this.flip.x=this.canFlipX;this.facing.x=-1;}
else{this.flip.x=false;this.facing.x=1;}}
else{this.facing.x=0;if(yDiff>0){this.flip.y=this.canFlipY;this.facing.y=-1;}
else{this.flip.y=false;this.facing.y=1;}}}
else{if(target instanceof ig.EntityExtended){targetCenterX=target.pos.x+target.size.x*0.5;}
else{targetCenterX=target.x;}
if(centerX>targetCenterX){this.flip.x=this.canFlipX;this.facing.x=-1;}
else{this.flip.x=false;this.facing.x=1;}}}},lineOfSight:function(entity){var collisionMap=ig.game.collisionMap;var tilesize=collisionMap.tilesize;var cX=((this.pos.x+this.size.x*0.5)/tilesize)|0;var cY=((this.pos.y+this.size.y*0.5)/tilesize)|0;var ecX=((entity.pos.x+entity.size.x*0.5)/tilesize)|0;var ecY=((entity.pos.y+entity.size.y*0.5)/tilesize)|0;var dX=ecX-cX;var dY=ecY-cY;var length=Math.sqrt(dX*dX+dY*dY);var dirX=dX/length;var dirY=dY/length;cX=Math.round(cX+dirX);cY=Math.round(cY+dirY);for(var i=0,il=(length|0)-2;i<il;i++){var tileX=cX|0;var tileY=cY|0;var tileId=collisionMap.data[tileY][tileX];if(!_utt.isTileWalkableStrict(tileId)){return false;}
cX+=dirX;cY+=dirY;}
return true;},receiveDamage:function(amount,from,unblockable){if((!this.invulnerable||unblockable)&&amount){this.health-=amount;if(this.health<=0){this.kill();}
return true;}
return false;},pause:function(){if(!this.paused){this.paused=true;for(var animName in this.anims){var anim=this.anims[animName];if(anim){anim.timer.pause();}}
this.onPaused.dispatch(this);}},unpause:function(){if(this.paused){this.paused=false;for(var animName in this.anims){var anim=this.anims[animName];if(anim){anim.timer.unpause();}}
this.onUnpaused.dispatch(this);}},link:function(entity,refresh){if(entity!==this){this.unlink(false);this.linkedTo=entity;if(this.linkedTo){ig.system.onResized.remove(this.refresh,this);this.linkedTo.onRefreshed.add(this.refresh,this);this.linkedTo.onRemoved.add(this.unlink,this);}
if(refresh!==false){this.refresh(true);}}},unlink:function(refresh){if(this.linkedTo){this.linkedTo.onRefreshed.remove(this.refresh,this);this.linkedTo.onRemoved.remove(this.unlink,this);ig.system.onResized.add(this.refresh,this);this.linkedTo=null;}
if(refresh!==false){this.refresh(true);}},kill:function(silent){if(!this.dieing){this.dieing=true;this.dieingSilently=silent||false;if(!silent){var animNameDeath=this.getDirectionalAnimName("death");if(this.anims[animNameDeath]){ig.game.flagAsKilled(this);_utv2.zero(this.vel);return this.animOverride(animNameDeath,{callback:this.die});}}
this.die();}},die:function(){this.currentAnim=null;ig.game.removeEntity(this);},cleanup:function(){if(this._cleanupPersistent){this._cleanupPersistent=false;this.cleanupPersistent();}
this.tweenEnd();this.moveToStop();this.unlink(false);this.onRemoved.dispatch(this);ig.system.onResized.remove(this.refresh,this);if(!ig.game.hasLevel){this.onAdded.removeAll();this.onAdded.forget();this.onRemoved.removeAll();this.onRemoved.forget();this.onPaused.removeAll();this.onPaused.forget();this.onUnpaused.removeAll();this.onUnpaused.forget();this.onMovedTo.removeAll();this.onMovedTo.forget();this.onRefreshed.removeAll();this.onRefreshed.forget();for(var animName in this.anims){var anim=this.anims[animName];anim.onCompleted.removeAll();anim.onCompleted.forget();}}},cleanupPersistent:function(){},intersectWith:function(entity){},check:function(entity){this.checking=true;this._stopChecking=false;},checkStop:function(){this.checking=this._stopChecking=false;},collideWith:function(entity,dirX,dirY,nudge,vel,weak){var res;if(weak){if(this===weak){if(dirX!==0){this.vel.x=-this.vel.x*this.bounciness+entity.vel.x;res=ig.game.collisionMap.trace(this.pos.x,this.pos.y,nudge,0,this.size.x,this.size.y);}
else{this.vel.y=-this.vel.y*this.bounciness+entity.vel.y;var nudgeX=0;if(entity.collides===ig.EntityExtended.COLLIDES.FIXED&&dirY>0&&Math.abs(this.vel.y-entity.vel.y)<this.minBounceVelocity){this.standing=this.grounded=true;nudgeX=entity.vel.x*ig.system.tick;}
res=ig.game.collisionMap.trace(this.pos.x,this.pos.y,nudgeX,nudge,this.size.x,this.size.y);}
if(res.pos.x!==this.pos.x||res.pos.y!==this.pos.y){this.pos.x=res.pos.x;this.pos.y=res.pos.y;this.recordChanges(true);}}}
else{if(dirX!==0){this.vel.x=vel;res=ig.game.collisionMap.trace(this.pos.x,this.pos.y,nudge*0.5,0,this.size.x,this.size.y);}
else{var unfair;var nudgeX;if(dirY>0){nudgeX=entity.collides===ig.EntityExtended.COLLIDES.FIXED&&entity.vel.x*ig.system.tick;unfair=entity.grounded;}
else{if(this.grounded){return;}
nudgeX=0;}
if(unfair){res=ig.game.collisionMap.trace(this.pos.x,this.pos.y,nudgeX,nudge,this.size.x,this.size.y);if(this.bounciness>0&&this.vel.y>this.minBounceVelocity){this.vel.y*=-this.bounciness;}
else{this.standing=this.grounded=true;this.vel.y=0;}}
else{this.vel.y=vel;this.standing=this.grounded=true;res=ig.game.collisionMap.trace(this.pos.x,this.pos.y,nudgeX,nudge*0.5,this.size.x,this.size.y);}}
if(res&&(res.pos.x!==this.pos.x||res.pos.y!==this.pos.y)){this.pos.x=res.pos.x;this.pos.y=res.pos.y;this.recordChanges(true);}}},handleMovementTrace:function(res){if(!(this.gravityFactor===0||ig.game.gravity===0)){this.standing=false;if(this.vel.y!==0){this.grounded=false;}}
this.collidingWithMap=false;if(res.tile.x&&_utt.isTileClimbable(res.tile.x)){res.pos.x=this.pos.x+this.vel.x*ig.system.tick;}
else if(res.collision.x){this.collidingWithMap=true;if(this.bounciness>0&&Math.abs(this.vel.x)>this.minBounceVelocity){this.vel.x*=-this.bounciness;}
else{this.vel.x=0;}}
if(res.tile.y&&_utt.isTileClimbable(res.tile.y)&&(this._climbingIntentDown||this._climbingIntentUp||this.gravityFactor===0)){res.pos.y=this.pos.y+this.vel.y*ig.system.tick;res.collision.slope=false;}
else if(res.collision.y){this.collidingWithMap=true;if(this.bounciness>0&&Math.abs(this.vel.y)>this.minBounceVelocity){this.vel.y*=-this.bounciness;}
else{if(this.vel.y>0){this.standing=this.grounded=true;}
this.vel.y=0;}}
var s=res.collision.slope;if(s){this.slope=s;this.collidingWithMap=true;s.angle=Math.atan2(s.ny,s.nx);if(s.angle>this.slopeStanding.min&&s.angle<this.slopeStanding.max){this.standing=this.grounded=true;if(s.nx*this.vel.x<0){this.vel.y=-Math.abs((s.angle+_utm.HALFPI)*this.vel.x)*this.slopeSpeedMod;}}}
else{this.slope=false;}
if(!(this.slope&&this.grounded&&this.vel.x===0)){this.pos.x=res.pos.x;this.pos.y=res.pos.y;}},update:function(){if(!this.paused){if(!this.frozen){if(this.performance===_c.STATIC){if(this._changedAdd&&this.changed){this.updateBounds();this.changed=false;}}
else{if(this.controllable){this.updateChanges();if(this.performance===_c.DYNAMIC&&!this._killed){this.updateDynamics();}}
this.recordChanges();this.recordLast();}
this.visible=this.getIsVisible();if(this.visible){this.updateVisible();}
else{if(this.dieing){this.die();}}}
this.updateCleanup();}
else if(ig.game.camera&&!ig.game.camera.paused){this.visible=this.getIsVisible();}},updateCleanup:function(){if(this.checking&&!this._layerChange){if(this._stopChecking){this.checkStop();}
else{this._stopChecking=true;}}},recordLast:function(){_utv2.copy(this.last,this.pos);this._angleLast=this.angle;},recordChanges:function(force){if(force===true||this.pos.x!==this.last.x||this.pos.y!==this.last.y||this.angle!==this._angleLast){this.changed=true;if(this.vel.x!==0){this.movingX=true;if(this.vel.x<0){this.flip.x=this.canFlipX;}
else{this.flip.x=false;}}
else{this.movingX=false;}
if(this.vel.y!==0){this.movingY=true;if(_c.TOP_DOWN||this.canFlipY){if(this.vel.y<0){this.flip.y=this.canFlipY;}
else{this.flip.y=false;}}}
else{this.movingY=false;}
this.moving=this.movingX||this.movingY;this.updateBounds();}
else{this.changed=this.moving=this.movingX=this.movingY=false;}},updateBounds:function(){this.posDraw.x=this.getPosDrawX();this.posDraw.y=this.getPosDrawY();if(this.needsVertices){this._verticesFound=true;this.verticesWorld=this.getVerticesWorld();}
else{this._verticesFound=false;}
if(this.needsBounds){this.getBounds();this.getBoundsDraw();}},updateChanges:function(){this.moveToUpdate();},updateDynamics:function(){this.vel.y+=ig.game.gravity*ig.system.tick*this.gravityFactor;this.updateVelocity();var mx=this.vel.x*ig.system.tick;var my=this.vel.y*ig.system.tick;var res=ig.game.collisionMap.trace(this.pos.x,this.pos.y,mx,my,this.size.x,this.size.y);this.handleMovementTrace(res);},updateVelocity:function(){this.vel.x=this.getNewVelocity(this.vel.x,this.accel.x,this.friction.x,this.maxVel.x);this.vel.y=this.getNewVelocity(this.vel.y,this.accel.y,this.friction.y,this.maxVel.y);},updateVisible:function(){if(this.overridingAnim&&this.currentAnim!==this.overridingAnim){this._overridedAnim=this.currentAnim;this.currentAnim=this.overridingAnim;}
if(this.currentAnim){this.currentAnim.update();}
if(this._changedAdd){this._changedAdd=false;this.updateBounds();}},draw:function(){if(this.currentAnim&&this.visible){var minX=this.posDraw.x;var minY=this.posDraw.y;var alpha=this.currentAnim.alpha;this.currentAnim.alpha*=this.alpha;this.currentAnim.flip=this.flip;var angle;if(this.angle!==0){angle=this.currentAnim.angle;this.currentAnim.angle=this.angle;minX+=(this.sizeDraw.x-this.currentAnim.sheet.width)*0.5;minY+=(this.sizeDraw.y-this.currentAnim.sheet.height)*0.5;}
if(this.fixed){this.currentAnim.draw(minX,minY,this.scale,this.textured?this:undefined);}
else{this.currentAnim.draw(minX-ig.game.screen.x,minY-ig.game.screen.y,this.scale,this.textured?this:undefined);}
this.currentAnim.alpha=alpha;if(this.angle!==0){this.currentAnim.angle=angle;}}}});ig.EntityExtended.TYPE=(function(){var types=[];var combinationTypes=[];var name;var flag;for(name in ig.Entity.TYPE){types.push({name:name,flag:ig.Entity.TYPE[name]});}
types.sort(function(a,b){return a.flag-b.flag;});for(var i=0,il=types.length;i<il;i++){var type=types[i];name=type.name;flag=type.flag;if((flag===0)||((flag&(flag-1))!==0)){combinationTypes.push(type);}
else{_ut.getType(ig.EntityExtended,name);}}
for(var i=0,il=combinationTypes.length;i<il;i++){var type=combinationTypes[i];name=type.name;flag=type.flag;ig.EntityExtended.TYPE[name]=flag;}
return ig.EntityExtended.TYPE;})();ig.EntityExtended.TYPE.NONE;ig.EntityExtended.TYPE.A;ig.EntityExtended.TYPE.B;ig.EntityExtended.TYPE.BOTH;_ut.getType(ig.EntityExtended,"INTERACTIVE");ig.EntityExtended.TYPE.INTERACTIVE;_ut.getType(ig.EntityExtended,"DAMAGEABLE");ig.EntityExtended.TYPE.DAMAGEABLE;_ut.getType(ig.EntityExtended,"DANGEROUS");ig.EntityExtended.TYPE.DANGEROUS;ig.EntityExtended.GROUP={};ig.EntityExtended.GROUP.NONE=0;_ut.getType(ig.EntityExtended,"FRIEND","GROUP");ig.EntityExtended.GROUP.FRIEND;_ut.getType(ig.EntityExtended,"ENEMY","GROUP");ig.EntityExtended.GROUP.ENEMY;ig.EntityExtended.COLLIDES=ig.merge({},ig.Entity.COLLIDES);ig.EntityExtended.COLLIDES.DOUBLEFIXED=ig.EntityExtended.COLLIDES.FIXED+ig.EntityExtended.COLLIDES.FIXED;var COLLISION_ACTIVE=ig.EntityExtended.COLLIDES.ACTIVE;var COLLISION_DOUBLEFIXED=ig.EntityExtended.COLLIDES.DOUBLEFIXED;ig.EntityExtended.checkPair=function(a,b){a.intersectWith(b);b.intersectWith(a);if((a.group&b.group)===0){if(a.checkAgainst&b.type){a.check(b);}
if(b.checkAgainst&a.type){b.check(a);}
if(a.collides+b.collides>COLLISION_ACTIVE&&a.collides&&b.collides&&(!a.oneWay||b.getIsCollidingWithOneWay(a))&&(!b.oneWay||a.getIsCollidingWithOneWay(b))){ig.EntityExtended.solveCollision(a,b);}}};ig.EntityExtended.solveCollision=function(a,b){var weak=null;if(a.collides===ig.EntityExtended.COLLIDES.LITE||b.collides===ig.EntityExtended.COLLIDES.FIXED){weak=a;}
else if(b.collides===ig.EntityExtended.COLLIDES.LITE||a.collides===ig.EntityExtended.COLLIDES.FIXED){weak=b;}
var top;var bottom;var left;var right;var overlapX;var overlapY;if(a.pos.x<b.pos.x){left=a;right=b;overlapX=a.pos.x+a.size.x-b.pos.x;}
else{left=b;right=a;overlapX=b.pos.x+b.size.x-a.pos.x;}
if(a.pos.y<b.pos.y){top=a;bottom=b;overlapY=a.pos.y+a.size.y-b.pos.y;}
else{top=b;bottom=a;overlapY=b.pos.y+b.size.y-a.pos.y;}
var vel;if(overlapY>overlapX){if(left.collides+right.collides>=COLLISION_DOUBLEFIXED){left.collideWith(right,1,0,-overlapX,0);right.collideWith(left,-1,0,overlapX,0);}
else{vel=(left.vel.x-right.vel.x)*0.5;left.collideWith(right,1,0,-overlapX,-vel,weak);right.collideWith(left,-1,0,overlapX,vel,weak);}}
else{if(top.collides+bottom.collides>=COLLISION_DOUBLEFIXED){top.collideWith(bottom,0,1,-overlapY,0);bottom.collideWith(top,0,-1,overlapY,0);}
else{vel=(top.vel.y-bottom.vel.y)*0.5;top.collideWith(bottom,0,1,-overlapY,-vel,weak);bottom.collideWith(top,0,-1,overlapY,vel,weak);}}};if(ig.global.wm){delete ig.EntityExtended.prototype.staticInstantiate;ig.EntityExtended.inject({visible:true,touches:function(selector){return _uti.pointInAABB(selector.pos.x,selector.pos.y,this.pos.x,this.pos.y,this.pos.x+this.size.x,this.pos.y+this.size.y);},activate:function(){},draw:function(){this.refresh(true);this.updateVisible();if(this.textured){for(var name in this.anims){this.anims[name].texturize(this);}}
this.parent();}});}});

// lib/plusplus/entities/light.js
ig.baked=true;ig.module('plusplus.entities.light').requires('plusplus.core.entity','plusplus.core.config','plusplus.core.image-drawing','plusplus.helpers.utils','plusplus.helpers.utilsmath','plusplus.helpers.utilsvector2','plusplus.helpers.utilsintersection','plusplus.helpers.utilscolor').defines(function(){"use strict";var _c=ig.CONFIG;var _ut=ig.utils;var _utm=ig.utilsmath;var _utv2=ig.utilsvector2;var _uti=ig.utilsintersection;var _utc=ig.utilscolor;ig.EntityLight=ig.global.EntityLight=ig.EntityExtended.extend({_wmScalable:true,_wmScalableLinked:true,layerName:'lights',size:_utv2.vector(10,10),radius:10,r:_c.LIGHT.R,g:_c.LIGHT.G,b:_c.LIGHT.B,alpha:_c.LIGHT.ALPHA,dynamicColor:false,pixelPerfect:_c.LIGHT.PIXEL_PERFECT,gradient:_c.LIGHT.GRADIENT,castsShadows:_c.LIGHT.CASTS_SHADOWS,castsShadowsMovable:_c.LIGHT.CASTS_SHADOWS_MOVABLE,items:[],diffuse:_c.LIGHT.DIFFUSE,samples:_c.LIGHT.SAMPLES,image:null,imageBase:null,imageCast:null,imageColor:null,_shadowCastingInitialized:false,_dirtySize:false,_dirtyColor:false,_scaleComputedAt:0,_rLast:0,_gLast:0,_bLast:0,_alphaLast:0,_sizeLast:_utv2.vector(),_radiusLast:0,initTypes:function(){this.parent();_ut.addType(ig.EntityExtended,this,'type',"LIGHT");},initProperties:function(){this.image=new ig.ImageDrawing();this.imageBase=new ig.ImageDrawing();this.imageCast=new ig.ImageDrawing();this.imageColor=new ig.ImageDrawing();this.parent();},resetCore:function(x,y,settings){if(settings){if(settings.radius){this.size.x=this.size.y=settings.radius*2;}}
this.parent(x,y,settings);if(this.performance===_c.DYNAMIC){this.performance=_c.MOVABLE;}},resize:function(force){this.recordChanges();if(this.changed){force=this.needsRebuild=true;}
return force;},rebuild:function(){this.compute();this.parent();},ready:function(){ig.system.onResized.add(this.resize,this);this.parent();},getRadius:function(){return Math.max(this.size.x,this.size.y)*0.5;},getSizeDrawX:function(){return this.radius*2;},getSizeDrawY:function(){return this.radius*2;},compute:function(){if(this.castsShadows&&(this.performance===_c.MOVABLE||this._changedAdd)){this.findItems();}
if(this.changed||this._changedAdd){if(this.performance===_c.STATIC){this.changed=false;}
if(this._dirtySize||(this.castsShadows&&!this.imageCast)){this._dirtySize=false;this._scaleComputedAt=this.scale;this.resizeCache();this.drawLight();}
if(this.castsShadows){this.drawShadows();}}},resizeCache:function(){var diameter=this.radius*2;if(!this.pixelPerfect){diameter*=this.scale;}
if(this.castsShadows){this.image.setDimensions(diameter,diameter);this.imageBase.setDimensions(diameter,diameter);this.imageCast.setDimensions(diameter,diameter);}
else{this.image.setDimensions(diameter,diameter);if(this.imageBase.width!==0||this.imageBase.height!==0){this.imageBase.setDimensions(0,0);}
if(this.imageCast.width!==0||this.imageCast.height!==0){this.imageCast.setDimensions(0,0);}}
if(this.dynamicColor){this.imageColor.setDimensions(diameter,diameter);this._dirtyColor=true;}},drawLight:function(){var image=this.castsShadows?this.imageBase:this.image;var context,base;var r,g,b;if(!this.dynamicColor){r=this.r;g=this.g;b=this.b;}
else{r=1;g=1;b=1;}
context=image.dataContext;if(this.pixelPerfect){var diameter=this.radius*2;base=context.createImageData(diameter,diameter);for(var x=0;x<diameter;x++){for(var y=0;y<diameter;y++){if(_uti.pointInCircle(x,y,this.radius,this.radius,this.radius)){var index=(x+y*diameter)*4;base.data[index]=(r*255)|0;base.data[index+1]=(g*255)|0;base.data[index+2]=(b*255)|0;if(this.gradient){var dx=this.radius-x;var dy=this.radius-y;var invDistPct=1-(Math.sqrt(dx*dx+dy*dy)/this.radius);base.data[index+3]=(invDistPct*255)|0;}
else{base.data[index+3]=255;}}}}
context.putImageData(base,0,0);image.finalize(1);}
else{var radiusScaled=this.radius*this.scale;if(this.gradient){var diameterScaled=radiusScaled*2;var gradient=_utc.radialGradient(radiusScaled,[{r:r,g:g,b:b},{r:r,g:g,b:b,a:0}]);context.fillStyle=gradient;context.fillRect(0,0,diameterScaled,diameterScaled);}
else{context.fillStyle=_utc.RGBToCSS(r,g,b);context.arc(radiusScaled,radiusScaled,radiusScaled,0,_utm.TWOPI,false);context.fill();}
image.finalize(this.scale);}},findItems:function(){var minX=this.pos.x;var minY=this.pos.y;var maxX=minX+this.size.x;var maxY=minY+this.size.y;var numItemsPrefind=this.items.length;this.items.length=0;for(var i=0,il=ig.game.layers.length;i<il;i++){var layer=ig.game.layers[i];if(layer.numEntities){var itemsOpaque=layer.itemsOpaque;for(var j=0,jl=itemsOpaque.length;j<jl;j++){var item=itemsOpaque[j];if(item._killed!==true&&(item.performance===_c.STATIC||this.castsShadowsMovable)&&_uti.AABBIntersect(minX,minY,maxX,maxY,item.pos.x,item.pos.y,item.pos.x+item.size.x,item.pos.y+item.size.y)){this.items.push(item);var anim=item.currentAnim;if(item.changed){this.changed=true;}
else if(anim&&((anim!==item._animCastShadow&&(anim.opaqueOffset||(item._animCastShadow&&item._animCastShadow.opaqueOffset)))||(anim.changed&&anim.opaqueOffset&&anim.opaqueOffset.tiles))){this.changed=true;if(!item.opaqueFromVertices){item._verticesFound=false;}}
item._animCastShadow=anim;}}}}
if(numItemsPrefind!==this.items.length){this.changed=true;}},_initShadowCasting:function(){if(!this._shadowCastingInitialized){this._utilVec2Samples1=_utv2.vector();this._utilVec2Samples2=_utv2.vector();this._utilVec2Samples3=_utv2.vector();}},drawShadows:function(){this._initShadowCasting();var contextCast=this.imageCast.dataContext;var diameter=this.radius*2;if(this.pixelPerfect){contextCast.clearRect(0,0,diameter,diameter);this.castShadows();this.imageCast.finalize(1);}
else{diameter*=this.scale;contextCast.clearRect(0,0,diameter,diameter);this.castShadows();this.imageCast.finalize(this.scale);}
var context=this.image.dataContext;var compositeOperation=context.globalCompositeOperation;context.clearRect(0,0,diameter,diameter);context.drawImage(this.imageBase.data,0,0);context.globalCompositeOperation="destination-out";context.drawImage(this.imageCast.data,0,0);context.globalCompositeOperation=compositeOperation;this.image.finalize(this.pixelPerfect?1:this.scale);},castShadows:function(){var context=this.imageCast.dataContext;var minX=this.pos.x;var minY=this.pos.y;var radius=this.radius;var center=_utv2.set(this._utilVec2Samples1,minX+radius,minY+radius);var i,il;if(this.samples===1){for(i=0,il=this.items.length;i<il;i++){this.items[i].castShadow(this,context,center,minX,minY,radius);}}
else{for(var s=0;s<this.samples;++s){var a=s*_utm.GOLDEN_ANGLE;var r=Math.sqrt(s/this.samples)*this.radius;var delta=_utv2.set(this._utilVec2Samples2,Math.cos(a)*r,Math.sin(a)*r);_utv2.copy(this._utilVec2Samples3,center);_utv2.add(this._utilVec2Samples3,delta);for(i=0,il=this.items.length;i<il;i++){this.items[i].castShadow(this,context,this._utilVec2Samples3,minX,minY,radius);}}}},cleanup:function(){ig.system.onResized.remove(this.resize,this);this.parent();},recordChanges:function(force){if(this.alpha===0){this.visible=false;}
else{this._dirtySize=this._scaleComputedAt!==this.scale||this.radius-this._radiusLast!==0||this.size.x-this._sizeLast.x!==0|this.size.y-this._sizeLast.y!==0;if(this.alpha-this._alphaLast!==0||this._dirtySize){force=true;}
if(this.dynamicColor){var rDelta=this.r-this._rLast;var gDelta=this.g-this._gLast;var bDelta=this.b-this._bLast;if(rDelta!==0||gDelta!==0||bDelta!==0){force=this._dirtyColor=true;}
this._rLast=this.r;this._gLast=this.g;this._bLast=this.b;}
_utv2.copy(this._sizeLast,this.size);this._radiusLast=this.radius;this._alphaLast=this.alpha;}
this.parent(force);},updateBounds:function(){this.radius=this.getRadius();this.posDraw.x=this.pos.x;this.posDraw.y=this.pos.y;},updateVisible:function(){this.compute();this.parent();},draw:function(){var image=this.image;if(!this.visible||!image){return;}
if(this.dynamicColor){if(this._dirtyColor){this._dirtyColor=false;var diameter=this.radius*2;if(!this.pixelPerfect){diameter*=this.scale;}
var contextColor=this.imageColor.dataContext;contextColor.fillStyle=_utc.RGBToCSS(this.r,this.g,this.b);contextColor.fillRect(0,0,diameter,diameter);contextColor.globalCompositeOperation="destination-atop";contextColor.drawImage(this.image.data,0,0);this.imageColor.finalize(this.pixelPerfect?1:this.scale);}
image=this.imageColor;}
var context=ig.system.context;if(this.alpha!==1){context.globalAlpha=this.alpha;}
if(this.fixed){image.draw(this.posDraw.x,this.posDraw.y,undefined,undefined,undefined,undefined,this.scale);}
else{image.draw(this.posDraw.x-ig.game.screen.x,this.posDraw.y-ig.game.screen.y,undefined,undefined,undefined,undefined,this.scale);}
if(this.alpha!==1){context.globalAlpha=1;}}});if(ig.global.wm){ig.EntityLight.inject({dynamicColor:true,init:function(x,y,settings){this.parent(x,y,settings);this.performance=_c.MOVABLE;},findItems:function(){},resizeCache:function(){var diameter=this.radius*2;if(!this.pixelPerfect){diameter*=this.scale;}
this.imageBase=this.imageCast=this.image;this.image.setDimensions(diameter,diameter);this.imageColor.setDimensions(diameter,diameter);this._dirtyColor=true;},drawShadows:function(){},draw:function(){this.refresh();this.parent();}});}});

// lib/plusplus/core/layer.js
ig.baked=true;ig.module('plusplus.core.layer').requires('plusplus.core.config','plusplus.core.entity','plusplus.core.background-map','plusplus.entities.light','plusplus.helpers.utils').defines(function(){var _c=ig.CONFIG;var _ut=ig.utils;ig.Layer=ig.Class.extend({name:'',zIndex:0,clearOnLoad:true,noUpdate:false,noDraw:false,preRender:_c.PRERENDER_MAPS,items:[],itemsTargetable:[],itemsInteractive:[],itemsOpaque:[],itemsLight:[],itemsChecking:[],spatialHash:{},spatialHashCellSize:64,autoSort:_c.AUTO_SORT_LAYERS,sortBy:false,numEntities:0,numBackgroundMaps:0,changed:true,paused:false,ignorePause:false,_dirtySort:false,_dirtyItems:false,_itemsToAdd:[],init:function(name,settings){this.name=name;ig.merge(this,settings);this.reset();},reset:function(){this.changed=true;this.paused=false;this._dirtySort=false;this.sortBy=this.sortBy||ig.game.sortBy;if(this.items.length>0){var items=this.items;var item;var i,il;if(!this.clearOnLoad){this._itemsToAdd=this.items.slice(0);for(i=0,il=this._itemsToAdd.length;i<il;i++){item=this._itemsToAdd[i];if(item.linkedTo){item._wasLinkedTo=item.linkedTo;}}}
this.items=[];this.itemsTargetable.length=this.itemsInteractive.length=this.itemsOpaque.length=this.itemsLight.length=this.itemsChecking.length=this.numBackgroundMaps=this.numEntities=0;for(i=0,il=items.length;i<il;i++){item=items[i];if(item instanceof ig.EntityExtended){ig.game.removeEntity(item);}
else{ig.game.removeItem(item);}}}},ready:function(){var i,il;var item;if(this._itemsToAdd.length>0){for(i=0,il=this._itemsToAdd.length;i<il;i++){item=this._itemsToAdd[i];if(item._wasLinkedTo){ig.game.spawnEntity(item,item.pos.x,item.pos.y,{linkedTo:item._wasLinkedTo});delete item._wasLinkedTo;}
else{ig.game.spawnEntity(item,item.pos.x,item.pos.y,(item._wasLinkedTo?{linkedTo:item._wasLinkedTo}:undefined));}}
this._itemsToAdd.length=0;}
if(this.items.length>0){this.items.sort(this.sortBy);if(this.preRender&&this.numBackgroundMaps>1){var mergers=[];var merger;for(i=0,il=this.items.length;i<il;i++){item=this.items[i];if(item instanceof ig.BackgroundMap){if(item.preRender&&!item.repeat){if(!merger){merger=[];}
merger.push(item);}
else if(merger&&merger.length>1){mergers.push(merger);merger=undefined;}}}
if(merger&&merger.length>1){mergers.push(merger);}
for(i=0,il=mergers.length;i<il;i++){merger=mergers[i];var map=merger[0];if(!(map instanceof ig.BackgroundMapExtended)){map=merger[0]=new ig.BackgroundMapExtended(map.tilesize,map.data,map.tilesetName);}
for(var j=1,jl=merger.length;j<jl;j++){item=merger[j];map.merge(item);this.removeItem(item);}}}
for(i=0,il=this.items.length;i<il;i++){item=this.items[i];if(item.adding){item.adding();}}}},addItem:function(item){this._dirtyItems=true;this.items.push(item);if(item.highPerformance){this._addEntity(item);}
else{if(item.targetable){this.itemsTargetable.push(item);}
if(item.type&ig.EntityExtended.TYPE.INTERACTIVE){this.itemsInteractive.push(item);}
if(item instanceof ig.EntityLight){this.itemsLight.push(item);}
else if(item.opaque){this.itemsOpaque.push(item);}
if(item instanceof ig.EntityExtended){this._addEntity(item);}
else if(item instanceof ig.BackgroundMap){this.numBackgroundMaps++;if(this.preRender){item.preRender=true;}}
if(this.autoSort){this.sort();}}},removeItem:function(item){var length=this.items.length;if(length>0){this._dirtyItems=true;_ut.arrayCautiousRemove(this.items,item);if(length!==this.items.length){if(item.highPerformance){this._removeEntity(item);}
else{if(item.targetable){_ut.arrayCautiousRemove(this.itemsTargetable,item);}
if(item.type&ig.EntityExtended.TYPE.INTERACTIVE){_ut.arrayCautiousRemove(this.itemsInteractive,item);}
if(item.opaque){_ut.arrayCautiousRemove(this.itemsOpaque,item);}
if(item instanceof ig.EntityLight){_ut.arrayCautiousRemove(this.itemsLight,item);}
if(item instanceof ig.EntityExtended){this._removeEntity(item);}
else if(item instanceof ig.BackgroundMap){this.numBackgroundMaps=Math.max(0,this.numBackgroundMaps-1);}
if(this.autoSort){this.sort();}}}}},_addEntity:function(item){this.numEntities++;if(item.type!==ig.Entity.TYPE.NONE||item.checkAgainst!==ig.EntityExtended.TYPE.NONE||item.collides!==ig.EntityExtended.COLLIDES.NEVER||item.collidesChanges){this.itemsChecking.push(item);}},_removeEntity:function(item){this.numEntities=Math.max(0,this.numEntities-1);if(item.type!==ig.Entity.TYPE.NONE||item.checkAgainst!==ig.EntityExtended.TYPE.NONE||item.collides!==ig.EntityExtended.COLLIDES.NEVER||item.collidesChanges){var numEntitiesChecking=this.itemsChecking.length;_ut.arrayCautiousRemove(this.itemsChecking,item);if(this.itemsChecking.length!==numEntitiesChecking&&this.itemsChecking.length===0){this.spatialHash={};}}},pause:function(){if(!this.ignorePause){this.paused=true;var items=this.items;for(var i=0,il=items.length;i<il;i++){var item=items[i];if(item.pause){item.pause();}}}},unpause:function(){this.paused=false;var items=this.items;for(var i=0,il=items.length;i<il;i++){var item=items[i];if(item.unpause){item.unpause();}}},sort:function(){this._dirtySort=true;},update:function(){var i,il;var item;this.changed=this.changedLights=false;if(this._dirtySort){this.items.sort(this.sortBy);this._dirtySort=false;}
if(!this.noUpdate&&this.items.length>0){if(this._dirtyItems){this.changed=true;this._dirtyItems=false;}
for(i=0,il=this.items.length;i<il;i++){item=this.items[i];item.update();if(!item.highPerformance&&!item.paused&&(item.changed||item.checking)){this.changed=true;if(item instanceof ig.EntityLight){this.changedLights=true;}}}
if(this.changed&&this.itemsChecking.length>0){this.checkEntities();}}},draw:function(){if(!this.noDraw&&this.items.length>0){for(var i=0,il=this.items.length;i<il;i++){this.items[i].draw();}}},checkEntities:function(){var hash=this.spatialHash={};var cellSize=this.spatialHashCellSize;for(var i=0,il=this.itemsChecking.length;i<il;i++){var item=this.itemsChecking[i];var itemsChecked={};var minX=Math.floor(item.pos.x/cellSize);var minY=Math.floor(item.pos.y/cellSize);var maxX=Math.floor((item.pos.x+item.size.x)/cellSize)+1;var maxY=Math.floor((item.pos.y+item.size.y)/cellSize)+1;for(var x=minX;x<maxX;x++){for(var y=minY;y<maxY;y++){var column=hash[x];if(!column){column=hash[x]={};}
var cell=column[y];if(!cell){column[y]=[item];}
else{for(var j=0,jl=cell.length;j<jl;j++){var other=cell[j];if(!itemsChecked[other.id]){itemsChecked[other.id]=true;if(item.touches(other)){ig.EntityExtended.checkPair(item,other);}}}
cell.push(item);}}}}}});});

// lib/plusplus/core/input.js
ig.baked=true;ig.module('plusplus.core.input').requires('impact.input','plusplus.core.config','plusplus.helpers.utils','plusplus.helpers.utilsintersection').defines(function(){var _c=ig.CONFIG;var _g=_c.GESTURE;var _ut=ig.utils;var _uti=ig.utilsintersection;ig.Input.inject({inputPoints:[],initMouse:function(){this.parent();ig.system.canvas.addEventListener('mouseout',this.keycancel.bind(this),false);ig.system.canvas.addEventListener('mouseleave',this.keycancel.bind(this),false);if(ig.ua.touchDevice){ig.system.canvas.addEventListener('touchcancel',this.keycancel.bind(this),false);ig.system.canvas.addEventListener('MSPointerOut',this.keycancel.bind(this),false);ig.system.canvas.addEventListener('MSPointerLeave',this.keycancel.bind(this),false);}},keydown:function(event){if(event.type=='mousedown'||event.type=='touchstart'){var inputPoint;if(event.changedTouches){for(var i=0,il=event.changedTouches.length;i<il;i++){inputPoint=this.getInputPoint(event.changedTouches[i]);inputPoint.touch=true;inputPoint.setDown();}}
else{inputPoint=this.getInputPoint(event);inputPoint.setDown();}}
this.parent(event);},keyup:function(event){if(event.type==='mouseup'||event.type==='touchend'||event.type==='mouseout'||event.type==='mouseleave'||event.type==='touchcancel'){var inputPoint;if(event.changedTouches){for(var i=0,il=event.changedTouches.length;i<il;i++){inputPoint=this.getInputPoint(event.changedTouches[i]);inputPoint.setUp();}}
else{inputPoint=this.getInputPoint(event);inputPoint.setUp();}
this.mousemove(event,true);}
this.parent(event);},keycancel:function(event){var action=this.bindings[event.button===2?ig.KEY.MOUSE2:ig.KEY.MOUSE1];if(action&&this.actions[action]){this.keyup(event);}},mousemove:function(event){var internalWidth=parseInt(ig.system.canvas.offsetWidth)||ig.system.realWidth;var scale=ig.system.scale*(internalWidth/ig.system.realWidth);var boundsClient;if(ig.system.canvas.getBoundingClientRect){boundsClient=ig.system.canvas.getBoundingClientRect();}
if(event.changedTouches){for(var i=0,il=event.changedTouches.length;i<il;i++){this.inputPointMove(event.changedTouches[i],scale,boundsClient);}}
else{this.inputPointMove(event,scale,boundsClient);}
var mousePoint=this.inputPoints[0];ig.input.mouse.x=mousePoint.x;ig.input.mouse.y=mousePoint.y;},inputPointMove:function(event,scale,boundsClient){var x=event.clientX;var y=event.clientY;if(boundsClient){x=x-boundsClient.left;y=y-boundsClient.top;}
x/=scale;y/=scale;var inputPoint=this.getInputPoint(event,x,y);inputPoint.reposition(x,y);},getInputPointId:function(parameters){if(typeof parameters==='string'){return parameters;}
else if(parameters){if(typeof parameters.identifier==='string'){return parameters.identifier;}
else if(parameters.properties&&parameters.values){return _ut.indexOfProperties(this.inputPoints,parameters.properties,parameters.values);}}
return 0;},getInputPoint:function(parameters){var id=this.getInputPointId(parameters);var inputPoint=this.inputPoints[id];if(!inputPoint){inputPoint=this.inputPoints[id]=new ig.InputPoint(0,0,id);}
return inputPoint;},getInputPoints:function(properties,values){var inputPoints=[];for(var i=0,il=this.inputPoints.length;i<il;i++){var inputPoint=this.inputPoints[i];var missing;for(var j=0,jl=properties.length;j<jl;j++){if(values[j]!==inputPoint[properties[j]]){missing=true;break;}}
if(missing!==true){inputPoints.push(inputPoint);}}
return inputPoints;},removeInputPoint:function(parameters){var id=this.getInputPointId(parameters);var inputPoint=this.inputPoints[id];if(inputPoint){inputPoint.setUp();this.inputPoints.splice(id,1);}},inputPressed:function(code){var action=this.bindings[code];if(action){this.actions[action]=true;if(!this.locks[action]){this.presses[action]=true;this.locks[action]=true;}}},inputReleased:function(code){var action=this.bindings[code];if(action){this.delayedKeyup[action]=true;}},update:function(){for(var i=0,il=this.inputPoints.length;i<il;i++){this.inputPoints[i].update();}}});ig.InputPoint=ig.Class.extend({id:0,x:0,y:0,lastX:0,lastY:0,worldX:0,worldY:0,deltaX:0,deltaY:0,directionX:0,directionY:0,downDeltaX:0,downDeltaY:0,swipeDistanceX:0,swipeDistanceY:0,swipeTotalDeltaX:0,swipeTotalDeltaY:0,duration:0,targets:null,targetsUp:null,targetsDown:null,targetsDownStart:null,down:false,tapped:false,holding:false,holdingActivate:false,moved:false,swipingX:false,swipingY:false,swipingLeft:false,swipingRight:false,swipingUp:false,swipingDown:false,_taps:0,_downTotalDeltaX:0,_downTotalDeltaY:0,_directionDeltaTotalX:0,_directionDeltaTotalY:0,_durationReleased:0,_durationSwipeTry:0,_unpositioned:true,_movedWithReposition:false,_holdingActivatable:true,_downLast:false,_blockTap:false,init:function(x,y,id){this.x=x||0;this.y=y||0;this.id=id||0;this.targets=[];this.targetsUp=[];this.targetsDown=[];this.targetsDownStart=[];this.lastX=this.x;this.lastY=this.y;this.worldX=this.x+ig.game.screen.x;this.worldY=this.y+ig.game.screen.y;},reset:function(){this._unpositioned=true;this.lastX=this.x;this.lastY=this.y;this.worldX=this.x+ig.game.screen.x;this.worldY=this.y+ig.game.screen.y;this._taps=this._durationReleased=this.deltaX=this.deltaY=this.directionX=this.directionY=this._directionDeltaTotalX=this._directionDeltaTotalY=0;this.moved=this._movedWithReposition=false;this.resetTargets();this.resetDown();},resetTargets:function(){this.targets.length=this.targetsUp.length=this.targetsDown.length=this.targetsDownStart.length=0;},resetDown:function(){if(this.down!==false){if(this.holding){ig.input.inputReleased(ig.KEY.HOLD);}
this.duration=this.downDeltaX=this.downDeltaY=this._downTotalDeltaX=this._downTotalDeltaY=0;this.down=this._downLast=this.holding=this._blockTap=this.holdingActivate=false;this._holdingActivatable=true;this.resetSwipe();}},resetSwipe:function(){if(this.swiping!==false){ig.input.inputReleased(ig.KEY.SWIPE);this.releaseSwipeX();this.releaseSwipeY();this.swiping=false;this.resetSwipeValues();}},resetSwipeValues:function(){this._durationSwipeTry=this.swipeDistanceX=this.swipeDistanceY=this.swipeTotalDeltaX=this.swipeTotalDeltaY=0;},releaseSwipeX:function(){if(this.swipingX){ig.input.inputReleased(ig.KEY.SWIPE_X);if(this.swipingLeft){ig.input.inputReleased(ig.KEY.SWIPE_LEFT);this.swipingLeft=false;}
else if(this.swipingRight){ig.input.inputReleased(ig.KEY.SWIPE_RIGHT);this.swipingRight=false;}
this.swipingX=false;}},releaseSwipeY:function(){if(this.swipingY){ig.input.inputReleased(ig.KEY.SWIPE_Y);if(this.swipingUp){ig.input.inputReleased(ig.KEY.SWIPE_UP);this.swipingUp=false;}
else if(this.swipingDown){ig.input.inputReleased(ig.KEY.SWIPE_DOWN);this.swipingDown=false;}
this.swipingY=false;}},setDown:function(){this.resetDown();this.down=true;},setUp:function(){if(this.down){if(!this._blockTap){this.tapped=true;this._taps++;this._durationReleased=0;ig.input.inputReleased(ig.KEY.TAP);if(this._taps===2&&this._downTotalDeltaX*this._downTotalDeltaX+this._downTotalDeltaY*this._downTotalDeltaY<=(this.screenSize*this.screenSize)*_g.TAP_MULTI_DISTANCE_PCT){this._taps=0;ig.input.inputReleased(ig.KEY.TAP_DOUBLE);}
if(_g.TARGET_TAP){if(_g.TARGET_DOWN_START){this.targets=this.targetsDownStart;}
else{this.targets=this.getTargets();}}}
else{this._taps=0;this.tapped=false;}
this.resetDown();}},getTargets:function(){var searchRadius=_g.TARGET_SEARCH_RADIUS/ig.system.scale;return _uti.entitiesInAABB(this.worldX-searchRadius,this.worldY-searchRadius,this.worldX+searchRadius,this.worldY+searchRadius,true);},reposition:function(x,y){var directionChangedX;var directionChangedY;this.screenSize=Math.min(ig.system.width,ig.system.height);if(this._unpositioned){this.x=x;this.y=y;this._unpositioned=false;}
else{this.deltaX=x-this.x;this.deltaY=y-this.y;if(this.deltaX!==0){var directionX=this.deltaX<0?-1:1;if(this.directionX!==directionX){this._directionDeltaTotalX+=this.deltaX*directionX;if(this._directionDeltaTotalX>=this.screenSize*_g.DIRECTION_SWITCH_PCT){directionChangedX=true;this._directionDeltaTotalX=0;this.directionX=directionX;}}}
if(this.deltaY!==0){var directionY=this.deltaY<0?-1:1;if(this.directionY!==directionY){this._directionDeltaTotalY+=this.deltaY*directionY;if(this._directionDeltaTotalY>=this.screenSize*_g.DIRECTION_SWITCH_PCT){directionChangedY=true;this._directionDeltaTotalY=0;this.directionY=directionY;}}}
this._movedWithReposition=this.deltaX!==0||this.deltaY!==0;this.x=x;this.y=y;}
this.worldX=this.x+ig.game.screen.x;this.worldY=this.y+ig.game.screen.y;if(_g.TARGET_UP){this.targetsUp=this.getTargets();}
if(this.down){if(_g.TARGET_DOWN){if(_g.TARGET_UP){this.targetsDown=this.targetsUp;}
else{this.targetsDown=this.getTargets();}}
if(this._downLast!==this.down){this._downLast=this.down;if(_g.TARGET_DOWN_START){if(_g.TARGET_DOWN){this.targetsDownStart=this.targetsDown;}
else if(_g.TARGET_UP){this.targetsDownStart=this.targetsUp;}
else{this.targetsDownStart=this.getTargets();}}}
this.downDeltaX=this.deltaX;this.downDeltaY=this.deltaY;this._downTotalDeltaX+=this.downDeltaX;this._downTotalDeltaY+=this.downDeltaY;if(this._holdingActivatable&&this._downTotalDeltaX*this._downTotalDeltaX+this._downTotalDeltaY*this._downTotalDeltaY>=(this.screenSize*this.screenSize)*_g.HOLD_ACTIVATE_DISTANCE_PCT){this._holdingActivatable=false;}
this.swipeTotalDeltaX+=this.downDeltaX;this.swipeTotalDeltaY+=this.downDeltaY;this.swipeDistanceX=this.swipeTotalDeltaX<0?-this.swipeTotalDeltaX:this.swipeTotalDeltaX;this.swipeDistanceY=this.swipeTotalDeltaY<0?-this.swipeTotalDeltaY:this.swipeTotalDeltaY;if(this.swiping!==true&&this._durationSwipeTry>_g.SWIPE_DURATION_TRY){this.resetSwipeValues();}
else{if(this.swipingX!==true&&this.swipeDistanceX>=this.screenSize*_g.SWIPE_DISTANCE_PCT){this.swiping=this._blockTap=true;this._holdingActivatable=false;ig.input.inputPressed(ig.KEY.SWIPE);this.swipingX=directionChangedX=true;ig.input.inputPressed(ig.KEY.SWIPE_X);}
if(this.swipingX&&directionChangedX){if(this.directionX===-1){if(this.swipingRight){this.swipingRight=false;ig.input.inputReleased(ig.KEY.SWIPE_RIGHT);}
this.swipingLeft=true;ig.input.inputPressed(ig.KEY.SWIPE_LEFT);}
else if(this.directionX===1){if(this.swipingLeft){this.swipingLeft=false;ig.input.inputReleased(ig.KEY.SWIPE_LEFT);}
this.swipingRight=true;ig.input.inputPressed(ig.KEY.SWIPE_RIGHT);}}
if(this.swipingY!==true&&this.swipeDistanceY>=this.screenSize*_g.SWIPE_DISTANCE_PCT){this.swiping=this._blockTap=true;this._holdingActivatable=false;ig.input.inputPressed(ig.KEY.SWIPE);this.swipingY=directionChangedY=true;ig.input.inputPressed(ig.KEY.SWIPE_Y);}
if(this.swipingY&&directionChangedY){if(this.directionY===-1){if(this.swipingDown){this.swipingDown=false;ig.input.inputReleased(ig.KEY.SWIPE_DOWN);}
this.swipingUp=true;ig.input.inputPressed(ig.KEY.SWIPE_UP);}
else if(this.directionY===1){if(this.swipingUp){this.swipingUp=false;ig.input.inputReleased(ig.KEY.SWIPE_UP);}
this.swipingDown=true;ig.input.inputPressed(ig.KEY.SWIPE_DOWN);}}}}},update:function(){this.moved=this.x-this.lastX!==0||this.y-this.lastY!==0;this.lastX=this.x;this.lastY=this.y;this.worldX=this.x+ig.game.screen.x;this.worldY=this.y+ig.game.screen.y;if(this.down){this.duration+=ig.system.tick;this._durationSwipeTry+=ig.system.tick;if(!this.holding&&this.duration>=_g.HOLD_DELAY){this.holding=true;ig.input.inputPressed(ig.KEY.HOLD);}
if(!this._blockTap&&this.duration>=_g.HOLD_DELAY_BLOCK_TAP){this._blockTap=true;}
if(this._holdingActivatable&&!this.holdingActivate&&this.duration>=_g.HOLD_DELAY_ACTIVATE){this.holdingActivate=true;ig.input.inputPressed(ig.KEY.HOLD_ACTIVATE);}
if(!this.moved&&this._durationSwipeTry>_g.SWIPE_DURATION_RESET){this.resetSwipe();}}
else if(this._taps>0){this._durationReleased+=ig.system.tick;if(this._durationReleased>=_g.RELEASE_DELAY){if(this.touch){ig.input.removeInputPoint(this.id);}
else{this._taps=0;}}}}});ig.KEY.TAP=-6;ig.KEY.TAP_DOUBLE=-7;ig.KEY.HOLD=-9;ig.KEY.HOLD_ACTIVATE=-10;ig.KEY.SWIPE=-11;ig.KEY.SWIPE_X=-12;ig.KEY.SWIPE_Y=-13;ig.KEY.SWIPE_LEFT=-14;ig.KEY.SWIPE_RIGHT=-15;ig.KEY.SWIPE_UP=-16;ig.KEY.SWIPE_DOWN=-17;});

// lib/plusplus/ui/ui-element.js
ig.baked=true;ig.module('plusplus.ui.ui-element').requires('plusplus.core.config','plusplus.core.entity','plusplus.helpers.signals','plusplus.helpers.utils','plusplus.helpers.utilsvector2').defines(function(){var _c=ig.CONFIG;var _ut=ig.utils;var _utv2=ig.utilsvector2;ig.UIElement=ig.global.UIElement=ig.EntityExtended.extend({layerName:'ui',frozen:true,visible:true,fixed:true,canFlipX:_c.UI.CAN_FLIP_X,canFlipY:_c.UI.CAN_FLIP_Y,posAsPct:_c.UI.POS_AS_PCT,posPct:_utv2.vector(),align:_utv2.vector(),margin:_utv2.vector(),marginAsPct:true,marginAsPctSmallest:true,marginScaleless:true,totalMarginX:0,totalMarginY:0,scale:_c.UI.SCALE,ignoreSystemScale:_c.UI.IGNORE_SYSTEM_SCALE,linkAlign:_utv2.vector(),onActivated:null,onDeactivated:null,initTypes:function(){this.parent();_ut.addType(ig.EntityExtended,this,'type',"UI");},initProperties:function(){this.parent();this.onActivated=new ig.Signal();this.onDeactivated=new ig.Signal();},changePerformanceDynamic:function(){if(this.layerName==='ui'){ig.game.removeItem(this,{layerName:this.layerName});this.layerName='entities';ig.game.addItem(this);}},activate:function(){this.parent();this.onActivated.dispatch(this);},deactivate:function(){this.parent();this.onDeactivated.dispatch(this);},cleanup:function(){if(!ig.game.hasLevel){this.onActivated.removeAll();this.onActivated.forget();this.onDeactivated.removeAll();this.onDeactivated.forget();}
this.deactivate();this.parent();},reposition:function(force){if(!this.getIsMovingSelf()){if(this.linkedTo){var scaleSystemMod=this.scale/ig.system.scale;var sizeDrawX=this.sizeDraw.x*scaleSystemMod;var sizeDrawY=this.sizeDraw.y*scaleSystemMod;var linkedScaleSystemMod=this.linkedTo.scale/ig.system.scale;var linkedSizeDrawX=this.linkedTo.sizeDraw.x*linkedScaleSystemMod;var linkedSizeDrawY=this.linkedTo.sizeDraw.y*linkedScaleSystemMod;var diffX=(linkedSizeDrawX-sizeDrawX)*0.5;var diffY=(linkedSizeDrawY-sizeDrawY)*0.5;this.pos.x=this.linkedTo.posDraw.x+diffX;this.pos.y=this.linkedTo.posDraw.y+diffY;var offsetX=(linkedSizeDrawX+sizeDrawX)*0.5;var offsetY=(linkedSizeDrawY+sizeDrawY)*0.5;this.pos.x+=this.linkAlign.x*offsetX;this.pos.y+=this.linkAlign.y*offsetY;}
else if(this.posAsPct){this.pos.x=this.posPct.x*ig.system.width;this.pos.y=this.posPct.y*ig.system.height;}
else{this.pos.x=this.resetState.pos.x;this.pos.y=this.resetState.pos.y;}
this.totalMarginX=Math.round(this.marginAsPct?this.margin.x*(this.marginAsPctSmallest?ig.system.size:ig.system.width):this.margin.x);this.totalMarginY=Math.round(this.marginAsPct?this.margin.y*(this.marginAsPctSmallest?ig.system.size:ig.system.height):this.margin.y);if(this.marginScaleless){this.totalMarginX/=ig.system.scale;this.totalMarginY/=ig.system.scale;}
if(this.linkedTo){this.pos.x+=this.linkAlign.x*this.totalMarginX;this.pos.y+=this.linkAlign.y*this.totalMarginY;}
else{this.pos.x-=this.align.x*this.sizeDraw.x*this.scaleMod;this.pos.y-=this.align.y*this.sizeDraw.y*this.scaleMod;this.pos.x+=(1-this.align.x)*this.totalMarginX-this.align.x*this.totalMarginX;this.pos.y+=(1-this.align.y)*this.totalMarginY-this.align.y*this.totalMarginY;}}
return this.parent(force);},getBounds:function(){return this.bounds=this.getBoundsDraw();},moveTo:function(item,settings){this.align.x=this.align.y=this.margin.x=this.margin.y=0;this.unlink(false);return this.parent(item,settings);},link:function(entity,refresh){if(!this.movingTo){this.parent(entity,refresh);}
else{this.unlink(false);}}});_ut.getType(ig.EntityExtended,"UI");ig.EntityExtended.TYPE.UI;});

// lib/plusplus/ui/ui-text.js
ig.baked=true;ig.module('plusplus.ui.ui-text').requires('plusplus.core.config','plusplus.core.font','plusplus.core.image-drawing','plusplus.ui.ui-element','plusplus.helpers.utilsvector2').defines(function(){"use strict";var _c=ig.CONFIG;var _utv2=ig.utilsvector2;ig.UIText=ig.global.UIText=ig.UIElement.extend({align:_utv2.vector(),linkAlign:_utv2.vector(),font:null,scale:_c.FONT.SCALE,ignoreSystemScale:_c.FONT.IGNORE_SYSTEM_SCALE,text:'',textDisplay:'',textOverflow:'',textImage:null,textAlign:ig.Font.ALIGN.CENTER,maxWidth:0,maxHeight:0,refresh:function(force){this.font=this.font||ig.Font.FONTS.MAIN;if(this.text&&this.font){if(!this.textImage){this.textImage=new ig.ImageDrawing();}}
else{this.textImage=null;}
this.parent(force);},resize:function(force){if(this.text&&this.font){var textDisplay=this.text;var textOverflow='';var sizeX=this.font.widthForString(textDisplay);var sizeY=this.font.heightForString(textDisplay);if(this.maxWidth>0&&sizeX>this.maxWidth){textDisplay=this.font.multilineForWidth(textDisplay,this.maxWidth);sizeX=this.font.widthForString(textDisplay);sizeY=this.font.heightForString(textDisplay);}
if(this.maxHeight>0&&sizeY>this.maxHeight){var textFormatted=this.font.overflowForHeight(textDisplay,this.maxHeight);textDisplay=textFormatted.display;textOverflow=textFormatted.overflow;sizeX=this.font.widthForString(textDisplay);sizeY=this.font.heightForString(textDisplay);}
this.textDisplay=textDisplay;this.textOverflow=textOverflow;if(this.size.x!==sizeX){this.size.x=sizeX;force=this.needsRebuild=true;}
if(this.size.y!==sizeY){this.size.y=sizeY;force=this.needsRebuild=true;}}
return force;},rebuild:function(){this.parent();if(this.textDisplay&&this.font){this.textImage.setDimensions(this.size.x,this.size.y);var offsetX;if(this.textAlign===ig.Font.ALIGN.CENTER){offsetX=this.size.x*0.5;}
else if(this.textAlign===ig.Font.ALIGN.RIGHT){offsetX=this.size.x;}
else{offsetX=0;}
this.font.draw(this.textDisplay,offsetX,0,this.textAlign,this.textImage.dataContext,1);this.textImage.finalize();}},draw:function(){this.parent();if(this.visible&&this.textImage){if(this.alpha!==1){ig.system.context.globalAlpha=this.alpha;}
if(this.fixed){this.textImage.draw(this.posDraw.x,this.posDraw.y,undefined,undefined,undefined,undefined,this.scale);}
else{this.textImage.draw(this.posDraw.x-ig.game.screen.x,this.posDraw.y-ig.game.screen.y,undefined,undefined,undefined,undefined,this.scale);}
if(this.alpha!==1){ig.system.context.globalAlpha=1;}}}});});

// lib/plusplus/ui/ui-overlay.js
ig.baked=true;ig.module('plusplus.ui.ui-overlay').requires('plusplus.core.font','plusplus.core.config','plusplus.core.image-drawing','plusplus.ui.ui-element','plusplus.ui.ui-text','plusplus.helpers.utilsvector2','plusplus.helpers.utilsdraw','plusplus.helpers.utilscolor').defines(function(){"use strict";var _c=ig.CONFIG;var _utv2=ig.utilsvector2;var _utd=ig.utilsdraw;var _utc=ig.utilscolor;ig.UIOverlay=ig.global.UIOverlay=ig.UIElement.extend({layerName:"overlay",zIndex:_c.Z_INDEX_OVERLAY,ignoreSystemScale:false,sizeAsPct:true,sizePct:_utv2.vector(1,1),fill:null,filled:true,r:_c.OVERLAY.R,g:_c.OVERLAY.G,b:_c.OVERLAY.B,alpha:_c.OVERLAY.ALPHA,fillStyle:'',fillColors:null,gradientRadial:false,gradientHorizontal:false,cover:false,cornerRadius:0,cornerRadiusAsPct:false,pixelPerfect:_c.OVERLAY.PIXEL_PERFECT,message:null,messageEntity:ig.UIText,textSettings:null,textMoveToSettings:{matchPerformance:true},resetExtras:function(){if(this.filled){this.fill=new ig.ImageDrawing();}
else{this.fill=null;}
if(typeof this.text==='string'){this.textSettings=this.textSettings||{};this.textSettings.text=this.text;this.text=undefined;}
if(typeof this.message==='string'){this.textSettings=this.textSettings||{};this.textSettings.text=this.message;this.message=undefined;}
if(!this.message&&this.textSettings&&this.textSettings.text&&this.textSettings.text.length>0){this.message=new(this.messageEntity)(0,0,ig.merge({layerName:this.layerName,fixed:this.fixed,alpha:this.alpha,linkedTo:this},this.textSettings));}
this.parent();},resize:function(force){if(this.sizeAsPct){var sizeX=ig.system.width*this.sizePct.x;var sizeY=ig.system.height*this.sizePct.y;if(this.size.x!==sizeX){this.size.x=sizeX;force=this.needsRebuild=true;}
if(this.size.y!==sizeY){this.size.y=sizeY;force=this.needsRebuild=true;}}
return force;},rebuild:function(){this.refill();if(this.fill){this.fill.finalize(this.pixelPerfect?1:this.scale);}
this.parent();},refill:function(width,height){if(this.fill){if(typeof width==='undefined'){width=this.sizeDraw.x;}
if(typeof height==='undefined'){height=this.sizeDraw.y;}
var context=this.fill.dataContext;if(this.pixelPerfect){this.fill.setDimensions(this.sizeDraw.x,this.sizeDraw.y);if(this.cornerRadius>0){_utd.pixelFillRoundedRect(context,0,0,this.fill.width,this.fill.height,0,0,width,height,this.cornerRadiusAsPct?Math.min(width,height)*this.cornerRadius:this.cornerRadius,this.r,this.g,this.b,1);}
else{context.fillStyle=this.getFillStyle();context.fillRect(0,0,width,height);}}
else{this.fill.setDimensions(this.sizeDraw.x*this.scale,this.sizeDraw.y*this.scale);context.fillStyle=this.getFillStyle();width*=this.scale;height*=this.scale;if(this.cornerRadius>0){_utd.fillRoundedRect(context,0,0,width,height,this.cornerRadiusAsPct?Math.min(width,height)*this.cornerRadius:this.cornerRadius);}
else{context.fillRect(0,0,width,height);}}}},getFillStyle:function(){var fillStyle;if(!this.pixelPerfect){if(this.fillStyle){fillStyle=this.fillStyle;}
else if(this.fillColors){if(this.gradientRadial){fillStyle=_utc.radialGradient(this.cover?Math.max(this.sizeDraw.x,this.sizeDraw.y):Math.min(this.sizeDraw.x,this.sizeDraw.y),this.fillColors);}
else{if(this.gradientHorizontal){fillStyle=_utc.linearGradient(0,0,this.sizeDraw.x,0,this.fillColors);}
else{fillStyle=_utc.linearGradient(0,0,0,this.sizeDraw.y,this.fillColors);}}}}
if(!fillStyle){fillStyle=_utc.RGBToCSS(this.r,this.g,this.b);}
return fillStyle;},ready:function(){if(this.message){ig.game.spawnEntity(this.message,0,0);}
this.parent();},moveTo:function(item,settings){var movingTo=this.parent(item,settings);if(this.message){this.message.moveTo(this,this.textMoveToSettings);}
return movingTo;},moveToStop:function(){if(this.message){this.message.moveToStop();}
this.parent();},pause:function(){this.parent();if(this.message){this.message.pause();}},unpause:function(){this.parent();if(this.message){this.message.unpause();}},cleanup:function(){if(this.message){ig.game.removeEntity(this.message);}
this.parent();},draw:function(){if(this.message){this.message.alpha=this.alpha;}
if(this.visible){if(this.fill){if(this.alpha!==1){ig.system.context.globalAlpha=this.alpha;}
if(this.fixed){this.fill.draw(this.posDraw.x,this.posDraw.y,undefined,undefined,undefined,undefined,this.scale);}
else{this.fill.draw(this.posDraw.x-ig.game.screen.x,this.posDraw.y-ig.game.screen.y,undefined,undefined,undefined,undefined,this.scale);}
if(this.alpha!==1){ig.system.context.globalAlpha=1;}}
this.parent();}}});});

// lib/plusplus/core/camera.js
ig.baked=true;ig.module('plusplus.core.camera').requires('plusplus.core.config','plusplus.core.image-drawing','plusplus.ui.ui-overlay','plusplus.helpers.utils','plusplus.helpers.utilsmath','plusplus.helpers.utilsvector2','plusplus.helpers.utilsintersection','plusplus.helpers.signals','plusplus.helpers.tweens').defines(function(){"use strict";var _c=ig.CONFIG;var _ut=ig.utils;var _utm=ig.utilsmath;var _utv2=ig.utilsvector2;var _uti=ig.utilsintersection;var _tw=ig.TWEEN;ig.Camera=ig.Class.extend({boundsTrapAsPct:_c.CAMERA.BOUNDS_TRAP_AS_PCT,boundsTrap:_uti.boundsMinMax(_c.CAMERA.BOUNDS_TRAP_MINX,_c.CAMERA.BOUNDS_TRAP_MINY,_c.CAMERA.BOUNDS_TRAP_MAXX,_c.CAMERA.BOUNDS_TRAP_MAXY),boundsTrapPct:_uti.boundsMinMax(_c.CAMERA.BOUNDS_TRAP_PCT_MINX,_c.CAMERA.BOUNDS_TRAP_PCT_MINY,_c.CAMERA.BOUNDS_TRAP_PCT_MAXX,_c.CAMERA.BOUNDS_TRAP_PCT_MAXY),keepCentered:_c.CAMERA.KEEP_CENTERED,keepInsideLevel:{x:_c.CAMERA.KEEP_INSIDE_LEVEL,y:_c.CAMERA.KEEP_INSIDE_LEVEL},boundsLevel:_uti.boundsMinMax(0,0,0,0),paused:false,changed:false,entity:null,entityFallback:null,autoFollowPlayer:_c.CAMERA.AUTO_FOLLOW_PLAYER,lerp:_c.CAMERA.LERP,transitionDuration:_c.CAMERA.TRANSITION_DURATION,transitionDurationMin:_c.CAMERA.TRANSITION_DURATION_MIN,transitionDurationMax:_c.CAMERA.TRANSITION_DURATION_MAX,transitionDistance:_c.CAMERA.TRANSITION_DISTANCE,transitioning:false,transitioningInstantly:false,transitioningCenter:false,transitionPct:0,screenLast:_utv2.vector(),atmosphere:false,atmosphereOverlay:null,atmosphereSettings:{r:0,g:0,b:0,alpha:0.9},atmosphereFadeDuration:1000,lightAmplification:3,lightBaseOnly:true,lightsCutout:true,onTransitioned:null,shaking:false,shakeStrength:8,shakeDuration:2,shakeFunction:false,shakeOffset:null,shakeTimer:null,_transitionTime:0,_transitionDuration:0,_transitionFrom:_utv2.vector(),_entityInvulnerable:false,_entityPaused:false,_entityAlpha:1,_needsPlayer:false,_boundsScreen:_uti.boundsMinMax(0,0,0,0),_rLast:0,_gLast:0,_bLast:0,_alphaLast:0,init:function(settings){ig.merge(this,settings);this.onTransitioned=new ig.Signal();ig.system.onResized.add(this.resize,this,-1);},reset:function(){this.screenLast.x=ig.game.screen.x=0;this.screenLast.y=ig.game.screen.y=0;this.shakeStop();this.removeAtmosphere(0);this.unfollow();this.unfollowFallback();this.onTransitioned.removeAll();this.onTransitioned.forget();},ready:function(){this.getBoundsLevel();if(this.autoFollowPlayer){this.followPlayer(true,true);}},getBoundsLevel:function(map){map=typeof map!='undefined'?map:ig.game.collisionMap;if(map&&(this.keepInsideLevel.x=this.keepInsideLevel.y=_c.CAMERA.KEEP_INSIDE_LEVEL)){this.boundsLevel=_uti.boundsMinMax(0,0,map.width*map.tilesize-ig.system.width,map.height*map.tilesize-ig.system.height,this.boundsLevel);if(this.boundsLevel.maxX<0){this.keepInsideLevel.x=false;}
if(this.boundsLevel.maxY<0){this.keepInsideLevel.y=false;}}},shake:function(duration,strength,fn){if(!this.shaking){this.shaking=true;this.shakeDuration=duration||this.shakeDuration;this.shakeStrength=strength||this.shakeStrength;this.shakeFunction=fn||this.shakeFunction;if(!this.shakeOffset){this.shakeOffset=_utv2.vector();}
else{_utv2.zero(this.shakeOffset);}
if(!this.shakeTimer){this.shakeTimer=new ig.TimerExtended();}
this.shakeTimer.set(this.shakeDuration);}},shakeStop:function(){if(this.shaking){this.shaking=false;ig.game.screen.x-=this.shakeOffset.x;ig.game.screen.y-=this.shakeOffset.y;}},updateShake:function(){if(this.shaking){ig.game.screen.x-=this.shakeOffset.x;ig.game.screen.y-=this.shakeOffset.y;var delta=this.shakeTimer.delta();if(delta>=0){this.shakeStop();}
else{var deltaPct=-delta/this.shakeDuration;var value=this.shakeFunction?this.shakeFunction():(this.shakeStrength*Math.pow(deltaPct,2));if(value>0.5){this.shakeOffset.x+=Math.random().map(0,1,-value,value);this.shakeOffset.y+=Math.random().map(0,1,-value,value);}
_utv2.multiplyScalar(this.shakeOffset,deltaPct);}}},toggleAtmosphere:function(duration,atmosphereSettings){if(!this.atmosphere){this.addAtmosphere(duration,atmosphereSettings);}
else{this.removeAtmosphere(duration);}},addAtmosphere:function(duration,atmosphereSettings){if(!this.atmosphere||atmosphereSettings){if(this.atmosphere){this.removeAtmosphere(duration);}
this.atmosphere=true;this.atmosphereFadeDuration=_ut.isNumber(duration)?duration:this.atmosphereFadeDuration;this.atmosphereOverlay=ig.game.spawnEntity(ig.UIOverlay,0,0,(atmosphereSettings?ig.merge(ig.merge({},this.atmosphereSettings),atmosphereSettings):this.atmosphereSettings));if(this.atmosphereOverlay.added){this._showAtmosphere();}
else{this.atmosphereOverlay.onAdded.addOnce(this._showAtmosphere,this);}}},_showAtmosphere:function(){if(this.atmosphereOverlay){this.atmosphereOverlay.alpha=0;this.atmosphereOverlay.fadeTo(this.atmosphereOverlay.resetState.alpha,{duration:this.atmosphereFadeDuration});this.changed=true;this.updateAtmosphere();}},removeAtmosphere:function(duration){this.atmosphere=false;if(this.atmosphereOverlay){if(!this.atmosphereOverlay.added){this.atmosphereOverlay.onAdded.remove(this._showAtmosphere,this);ig.game.removeEntity(this.atmosphereOverlay);}
else{this.atmosphereOverlay.fadeToDeath({duration:_ut.isNumber(duration)?duration:this.atmosphereFadeDuration});}
this.atmosphereOverlay=undefined;}},updateAtmosphere:function(){if(this.atmosphere){if(this.changed||(this.lightsCutout&&(ig.game.dirtyLights||ig.game.changedLights))){this.atmosphereOverlay.refresh(true);var context=this.atmosphereOverlay.fill.dataContext;if(this.lightsCutout){context.globalCompositeOperation="destination-out";var lights=ig.game.lights;var i,il;for(i=0,il=lights.length;i<il;i++){var light=lights[i];if(light.visible&&light.image){context.globalAlpha=Math.min(1,light.alpha*this.lightAmplification);context.drawImage((this.lightBaseOnly&&light.castsShadows?light.imageBase.data:light.image.data),ig.system.getDrawPos(light.posDraw.x-ig.game.screen.x),ig.system.getDrawPos(light.posDraw.y-ig.game.screen.y));}}
context.globalCompositeOperation="source-over";}}}},follow:function(entity,snap,center){if(this.entity!==entity||snap||center){this.unfollow();this.entity=entity;if(this.entity){this.transitioning=true;this.transitioningInstantly=snap;this.transitioningCenter=center;this._transitionTime=0;_utv2.copy(this._transitionFrom,ig.game.screen);if(this.transitioningCenter){_uti.bounds(ig.game.screen.x,ig.game.screen.y,0,0,this._boundsScreen);}
else{_uti.boundsCopy(this._boundsScreen,this.boundsTrap,ig.game.screen.x,ig.game.screen.y);}}}
if(this.transitioning){if(this.transitioningInstantly){this.updateFollow();}}
else if(this.entity){this.transitionComplete();}},followFallback:function(entity,snap,center){if(this.entityFallback!==entity){this.entityFallback=entity;if(!this.entity){this.follow(this.entityFallback,snap,center);}}},followRespawnable:function(entity){this.followFallback(entity);if(this.transitioning){if(!entity.invulnerable){entity.invulnerable=this._entityInvulnerable=true;}
if(!entity.paused){this._entityPaused=true;entity.pause();this._entityAlpha=entity.alpha;entity.alpha=0;}}},followPlayer:function(snap,center){var player=ig.game.getPlayer();if(player){this._needsPlayer=false;this.unfollow();this.followFallback(player,snap,center);player.onRemoved.add(this.unfollowFallback,this);player.onAdded.add(this.followRespawnable,this);}
else{this._needsPlayer=true;}},unfollow:function(){if(this.entity){this.entity=undefined;}
if(this.transitioning){this.transitioning=false;this._transitionTime=0;_uti.boundsCopy(this._boundsScreen,this.boundsTrap,ig.game.screen.x,ig.game.screen.y);}},unfollowFallback:function(){if(this.entityFallback){if(this.entityFallback===this.entity){this.unfollow();}
this.entityFallback=undefined;}
if(this.transitioning){this.transitioning=false;_uti.boundsCopy(this._boundsScreen,this.boundsTrap,ig.game.screen.x,ig.game.screen.y);}},transitionComplete:function(){this.transitioning=this.transitioningInstantly=this.transitioningCenter=false;if(this._entityInvulnerable&&this.entity.invulnerable){this.entity.invulnerable=this._entityInvulnerable=false;}
if(this._entityPaused&&this.entity.paused){this._entityPaused=false;this.entity.unpause();this.entity.alpha=this._entityAlpha;}
this.onTransitioned.dispatch();},updateFollow:function(){var screen=ig.game.screen;if(!this.entity&&this.entityFallback){this.follow(this.entityFallback);}
else if(this._needsPlayer){this.followPlayer();}
if(this.entity){_utv2.copy(this.screenLast,screen);var screenNextX=this.entity.pos.x+this.entity.size.x*0.5-ig.system.width*0.5;var screenNextY=this.entity.pos.y+this.entity.size.y*0.5-ig.system.height*0.5;var noteX,noteY;if(this.transitioning){this.changed=true;if(this.transitioningInstantly){this.transitionPct=1;}
else{if(this._transitionTime===0){if(this.transitionDistance>0){var dx=(screenNextX-this._boundsScreen.minX);var dy=(screenNextY-this._boundsScreen.minY);var distance=Math.sqrt(dx*dx+dy*dy);this._transitionDuration=(this.transitionDuration*(distance/this.transitionDistance)).limit(this.transitionDurationMin,this.transitionDurationMax);}
else{this._transitionDuration=this.transitionDuration;}}
this._transitionTime+=ig.system.tick;this.transitionPct=this._transitionTime/this._transitionDuration;}
var value=_tw.Easing.Quadratic.InOut(this.transitionPct);if(screenNextX<this._boundsScreen.minX){screen.x=this._transitionFrom.x+(screenNextX-(this._boundsScreen.minX+(this.transitioningCenter?this._boundsScreen.width*0.5:0)))*value;}
else if(screenNextX>this._boundsScreen.maxX){screen.x=this._transitionFrom.x+(screenNextX-(this._boundsScreen.maxX-(this.transitioningCenter?this._boundsScreen.width*0.5:0)))*value;}
else{noteX=true;}
if(screenNextY<this._boundsScreen.minY){screen.y=this._transitionFrom.y+(screenNextY-(this._boundsScreen.minY+(this.transitioningCenter?this._boundsScreen.height*0.5:0)))*value;}
else if(screenNextY>this._boundsScreen.maxY){screen.y=this._transitionFrom.y+(screenNextY-(this._boundsScreen.maxY-(this.transitioningCenter?this._boundsScreen.height*0.5:0)))*value;}
else{noteY=true;}
if(this.transitionPct>=1||(noteX&&noteY)){this.transitionComplete();}}
else{if(this.keepCentered){screen.x+=(screenNextX-screen.x)*this.lerp;screen.y+=(screenNextY-screen.y)*this.lerp;}
else{if(screenNextX<this._boundsScreen.minX){screen.x+=screenNextX-this._boundsScreen.minX;}
else if(screenNextX>this._boundsScreen.maxX){screen.x+=screenNextX-this._boundsScreen.maxX;}
if(screenNextY<this._boundsScreen.minY){screen.y+=screenNextY-this._boundsScreen.minY;}
else if(screenNextY>this._boundsScreen.maxY){screen.y+=screenNextY-this._boundsScreen.maxY;}}
if(screen.x-this.screenLast.x!==0||screen.y-this.screenLast.y!==0){this.changed=true;}}}
if(this.changed){if(this.keepInsideLevel.x){this.screenLast.x=screen.x=screen.x.limit(this.boundsLevel.minX,this.boundsLevel.maxX);}
else{this.screenLast.x=screen.x;}
if(this.keepInsideLevel.y){this.screenLast.y=screen.y=screen.y.limit(this.boundsLevel.minY,this.boundsLevel.maxY);}
else{this.screenLast.y=screen.y;}
if(!this.transitioning){_uti.boundsCopy(this._boundsScreen,this.boundsTrap,screen.x,screen.y);}}
if(this.shaking){screen.x+=this.shakeOffset.x;screen.y+=this.shakeOffset.y;this.changed=true;}},update:function(){this.changed=false;if(!this.paused){this.updateShake();this.updateFollow();this.updateAtmosphere();}},resize:function(){this.changed=true;this.getBoundsLevel();if(this.boundsTrapAsPct){_uti.boundsCopy(this.boundsTrap,this.boundsTrapPct,0,0,ig.system.width*0.5,ig.system.height*0.5);}
if(this.entity){this.follow(this.entity,true,true);}
this.updateAtmosphere();}});});

// lib/plusplus/entities/trigger.js
ig.baked=true;ig.module('plusplus.entities.trigger').requires('plusplus.core.timer','plusplus.core.entity','plusplus.helpers.utils','plusplus.helpers.signals').defines(function(){"use strict";var _ut=ig.utils;ig.EntityTrigger=ig.global.EntityTrigger=ig.EntityExtended.extend({_wmScalable:true,_wmDrawBox:true,_wmBoxColor:'rgba( 255, 255, 0, 0.7 )',frozen:true,target:{},sortTargetsBy:null,targetSequence:[],wait:0,delay:0,triggerAfterDelay:false,once:true,suicidal:true,triggerable:true,useCheckingAsTarget:false,triggering:false,autoToggle:false,waitTimer:null,delayTimer:null,onCompleted:null,_delaying:false,initTypes:function(){this.parent();_ut.addType(ig.EntityExtended,this,'type',"TRIGGER");_ut.addType(ig.EntityExtended,this,'checkAgainst',"PLAYER");},initProperties:function(){this.parent();this.waitTimer=new ig.TimerExtended(0,this);this.delayTimer=new ig.TimerExtended(0,this);this.onCompleted=new ig.Signal();},resetExtras:function(){var activated=this.activated;this.activated=false;this.parent();if(activated){this.trigger();}},check:function(entity){this.parent(entity);if(this.triggerable){this.trigger(entity,true,true);}},trigger:function(entity,needsActivation,entityIsChecking){if(!this.triggering&&(!this.once||!this.activated)&&(!this.wait||this.waitTimer.delta()>=0)){if(this.delay>0&&!this._delaying){this._delaying=true;var pausedAt=this.delayTimer.pausedAt;this.delayTimer.set(this.delay);this.delayTimer.pausedAt=pausedAt;}
if(this.delayTimer.delta()>=0){this._delaying=false;this.triggering=true;this.targetSequence.length=0;for(var name in this.target){var target=ig.game.namedEntities[this.target[name]];if(target&&!target.triggering){this.targetSequence.push(target);}}
if(entityIsChecking&&this.useCheckingAsTarget){_ut.arrayCautiousAdd(this.targetSequence,entity);}
if(this.sortTargetsBy){this.targetSequence.sort(this.sortTargetsBy);}
this.handleTargets(entity,needsActivation);if(this.wait){this.waitTimer.set(this.wait);}
this.triggering=false;this.complete();}}},handleTargets:function(entity,needsActivation){if(needsActivation!==false){this.activate(entity);}
for(var i=0,il=this.targetSequence.length;i<il;i++){var target=this.targetSequence[i];if(target instanceof ig.EntityTrigger){target.trigger(entity);}
else if(target.activate){target.activate(entity);}}},activate:function(entity){if(!this.needsTeardown){this.setup();}
if(!this.triggering){this.trigger(entity,false);}
this.parent(entity);},deactivate:function(entity){if(this.needsTeardown){this.teardown();}
this.parent(entity);},complete:function(){this.onCompleted.dispatch();this.targetSequence.length=0;if(this.suicidal){this.kill(true);}
else{if(!this.checking&&this.autoToggle&&this.activated){this.deactivate();}
else if(this.needsTeardown){this.teardown();}}},setup:function(){this.needsTeardown=true;},teardown:function(){this.needsTeardown=false;},kill:function(silent){this.triggerable=false;this.parent(silent);},cleanup:function(){if(!ig.game.hasLevel){this.onCompleted.removeAll();this.onCompleted.forget();}
if(this.needsTeardown){this.teardown();}
this.parent();},checkStop:function(){this.parent();if(!this.triggerAfterDelay){this._delaying=false;}
if(this.autoToggle&&this.activated){this.deactivate();}},update:function(){if(this._delaying&&this.triggerAfterDelay&&this.delayTimer.delta()>=0){this.trigger(this);}
this.parent();}});if(ig.global.wm){delete ig.EntityExtended.prototype.staticInstantiate;ig.EntityTrigger.inject({trigger:function(){}});}});

// lib/plusplus/abstractities/spawner.js
ig.baked=true;ig.module('plusplus.abstractities.spawner').requires('plusplus.core.timer','plusplus.entities.trigger','plusplus.helpers.utils','plusplus.helpers.signals').defines(function(){"use strict";var _ut=ig.utils;ig.Spawner=ig.EntityTrigger.extend({_wmBoxColor:'rgba( 0, 100, 255, 0.7)',triggerable:false,triggerAfterDelay:true,spawningEntity:'',spawnSettings:null,spawnCountMax:1,spawnCount:0,spawnedCount:0,spawning:false,pool:[],entities:[],duration:0,durationTimer:null,respawnDelay:0,respawnTimer:null,spawnDelay:-1,spawnAt:false,spawnTarget:{},spawnTargetSequence:[],spawnAtRandomPosition:true,spawnAtSide:null,spawnAtRandomTarget:false,spawnAndMoveTo:false,spawnAndMoveToSettings:null,spawnedDieWith:false,spawnTimer:null,onSpawned:null,onUnspawned:null,_spawnedAtTargetIndex:0,_spawningComplete:false,_reactivate:false,initProperties:function(){this.parent();this.durationTimer=new ig.TimerExtended(0,this);this.respawnTimer=new ig.TimerExtended(0,this);this.spawnTimer=new ig.TimerExtended(0,this);this.onSpawned=new ig.Signal();this.onUnspawned=new ig.Signal();},resetExtras:function(){this.spawnAt=this.spawnAt||this;if(this.duration===-1){this.suicidal=false;}
this.parent();},activate:function(entity){this.parent(entity);if(!this.spawning&&this.spawnedCount<this.spawnCountMax&&(this.spawningEntity||this.pool.length>0)){this._spawningComplete=false;this.spawning=true;this.spawnedCount=this.spawnCount;if(this.spawnDelay<0){this.spawnDelay=this.duration>0?(this.duration/this.spawnCountMax):0;}
this.spawnTargetSequence.length=0;for(var name in this.spawnTarget){var target=ig.game.namedEntities[this.spawnTarget[name]];if(target){this.spawnTargetSequence.push(target);}}
if(this.duration===0||this.spawnDelay===0){var entitySpawned=true;while(this.spawnedCount<this.spawnCountMax&&entitySpawned){entitySpawned=this.spawnNext();}
this._spawningComplete=true;if(!this.triggering){this.complete();}}
else{this.durationTimer.set(this.duration);this.spawnTimer.set(0);}}},deactivate:function(entity){this.spawning=this._spawningComplete=this._reactivate=false;this.spawnedCount=this.spawnTargetSequence.length=this._spawnedAtTargetIndex=0;this.parent(entity);for(var i=this.entities.length-1;i>=0;i--){var spawned=this.entities[i];this.unspawn(spawned);}},spawnNext:function(entity){if(this.spawnTargetSequence.length>0){if(this.spawnAtRandomTarget){this.spawnAt=this.spawnTargetSequence[Math.round(Math.random()*(this.spawnTargetSequence.length-1))];}
else{this.spawnAt=this.spawnTargetSequence[this._spawnedAtTargetIndex];this._spawnedAtTargetIndex=(this._spawnedAtTargetIndex+1)%this.spawnTargetSequence.length;}}
else{this.spawnAt=this;}
if(entity){if(!entity.added||entity._killed){entity=ig.game.spawnEntity(entity,0,0,this.spawnSettings);}
_ut.arrayCautiousRemove(this.pool,entity);_ut.arrayCautiousAdd(this.entities,entity);}
else if(this.pool.length>0){entity=this.pool.pop();if(entity){entity=ig.game.spawnEntity(entity,0,0,this.spawnSettings);this.entities.push(entity);}}
else if(this.spawningEntity&&this.spawnedCount<this.spawnCountMax){entity=ig.game.spawnEntity(this.spawningEntity,0,0,this.spawnSettings);this.entities.push(entity);}
if(entity){this.spawnCount=Math.min(this.spawnCountMax,this.spawnCount+1);this.spawnedCount=Math.min(this.spawnCountMax,this.spawnedCount+1);this.spawned(entity);}
return entity;},unspawn:function(entity){if(!entity._killed){entity.kill(true);}
else{if(entity.spawner){entity.spawner.unlinkSpawned(entity);}
this.spawnCount=Math.max(0,this.spawnCount-1);if(!this._killed){_ut.arrayCautiousRemove(this.entities,entity);_ut.arrayCautiousAdd(this.pool,entity);this.onUnspawned.dispatch(entity);if(this.activated&&this.duration===-1&&!this.spawning&&(this.spawnDelay>0||this.spawnCount===0)){this.spawnedCount=this.spawnCount;this.respawnTimer.set(this.respawnDelay);this._reactivate=true;}}}},spawned:function(entity){this.linkSpawned(entity);var width=entity.size.x;var height=entity.size.y;var halfWidth=width*0.5;var halfHeight=height*0.5;var spawnAtWidth=this.spawnAt.size.x;var spawnAtHeight=this.spawnAt.size.y;var spawnAtMinX=this.spawnAt.pos.x;var spawnAtMinY=this.spawnAt.pos.y;var spawnAtMaxX=spawnAtMinX+spawnAtWidth;var spawnAtMaxY=spawnAtMinY+spawnAtHeight;if(this.spawnAtRandomPosition){entity.pos.x=Math.random().map(0,1,spawnAtMinX+halfWidth,spawnAtMaxX-halfWidth);entity.pos.y=Math.random().map(0,1,spawnAtMinY+halfHeight,spawnAtMaxY-halfHeight);}
else{entity.pos.x=spawnAtMinX+spawnAtWidth*0.5;entity.pos.y=spawnAtMinY+spawnAtHeight*0.5;}
entity.pos.x-=halfWidth;entity.pos.y-=halfHeight;if(this.spawnAtSide){if(this.spawnAtSide.x>0){entity.pos.x=spawnAtMaxX-width-spawnAtWidth*0.5*(1-this.spawnAtSide.x);}
else if(this.spawnAtSide.x<0){entity.pos.x=spawnAtMinX+spawnAtWidth*0.5*(1+this.spawnAtSide.x);}
if(this.spawnAtSide.y>0){entity.pos.y=spawnAtMaxY-height-spawnAtHeight*0.5*(1-this.spawnAtSide.y);}
else if(this.spawnAtSide.y<0){entity.pos.y=spawnAtMinY+spawnAtHeight*0.5*(1+this.spawnAtSide.y);}}
if(this.spawnAndMoveTo&&this.spawnTargetSequence.length>0){entity.moveTo(this.spawnTargetSequence,this.spawnAndMoveToSettings);}
this.onSpawned.dispatch(entity);},linkSpawned:function(entity){if(entity.spawner){entity.spawner.unlinkSpawned(entity);}
entity.onRemoved.add(this.unspawn,this);entity.spawner=this;},unlinkSpawned:function(entity){entity.onRemoved.remove(this.unspawn,this);entity.spawner=undefined;},complete:function(){if(this.spawning&&this._spawningComplete){this.spawning=false;this.parent();}},cleanup:function(){if(!ig.game.hasLevel){this.onSpawned.removeAll();this.onSpawned.forget();this.onUnspawned.removeAll();this.onUnspawned.forget();}
if(this.spawnedDieWith){for(var i=this.entities.length-1;i>=0;i--){this.unspawn(this.entities[i]);}}
if(this.entities.length){for(var i=this.entities.length-1;i>=0;i--){this.unlinkSpawned(this.entities[i]);}
this.entities.length=0;}
if(this.pool.length){for(var i=this.pool.length-1;i>=0;i--){this.unlinkSpawned(this.pool[i]);}
this.pool.length=0;}
this.spawning=this._spawningComplete=this._reactivate=false;this.spawnCount=this.spawnedCount=this.spawnTargetSequence.length=this._spawnedAtTargetIndex=0;this.parent();},update:function(){this.parent();if(this.spawning&&!this._spawningComplete&&this.spawnTimer.delta()>=0){this.spawnTimer.set(this.spawnDelay);var entitySpawned=this.spawnNext();if(this.spawnedCount>=this.spawnCountMax||!entitySpawned){this._spawningComplete=true;this.complete();}}
else if(this._reactivate===true&&this.respawnTimer.delta()>=0){this._reactivate=false;this.activate();}}});});

// lib/plusplus/abstractities/shape.js
ig.baked=true;ig.module('plusplus.abstractities.shape').requires('plusplus.core.entity','plusplus.helpers.utils').defines(function(){"use strict";var _ut=ig.utils;ig.Shape=ig.EntityExtended.extend({_wmScalable:true,_wmDrawBox:true,_wmBoxColor:'rgba( 0, 255, 255, 0.7)',frozen:true,opaqueFromVertices:true,initTypes:function(){this.parent();_ut.addType(ig.EntityExtended,this,'type',"SHAPE");}});});

// lib/plusplus/entities/shape-solid.js
ig.baked=true;ig.module('plusplus.entities.shape-solid').requires('plusplus.abstractities.shape').defines(function(){"use strict";ig.EntityShapeSolid=ig.global.EntityShapeSolid=ig.Shape.extend({opaque:true,diffuse:1,hollow:true});});

// lib/plusplus/entities/shape-climbable.js
ig.baked=true;ig.module('plusplus.entities.shape-climbable').requires('plusplus.abstractities.shape').defines(function(){"use strict";ig.EntityShapeClimbable=ig.global.EntityShapeClimbable=ig.Shape.extend({climbable:true});});

// lib/plusplus/entities/shape-climbable-one-way.js
ig.baked=true;ig.module('plusplus.entities.shape-climbable-one-way').requires('plusplus.entities.shape-climbable','plusplus.helpers.utilsvector2').defines(function(){"use strict";var _utv2=ig.utilsvector2;ig.EntityShapeClimbableOneWay=ig.global.EntityShapeClimbableOneWay=ig.EntityShapeClimbable.extend({collides:ig.EntityExtended.COLLIDES.FIXED,oneWay:true,oneWayFacing:_utv2.vector(0,-1)});});

// lib/plusplus/ui/ui-overlay-pause.js
ig.baked=true;ig.module('plusplus.ui.ui-overlay-pause').requires('plusplus.ui.ui-overlay','plusplus.helpers.utilsvector2').defines(function(){var _utv2=ig.utilsvector2;ig.UIOverlayPause=ig.global.UIOverlayPause=ig.UIOverlay.extend({layerName:'ui',textSettings:{text:"PAUSED"}});});

// lib/plusplus/helpers/pathfinding.js
ig.baked=true;ig.module('plusplus.helpers.pathfinding').requires('plusplus.core.config','plusplus.core.collision-map','plusplus.core.pathfinding-map','plusplus.helpers.utilstile','plusplus.helpers.utilsintersection').defines(function(){"use strict";var _c=ig.CONFIG;var _uti=ig.utilsintersection;var COLLISION_TILE_ONE_WAY_UP=_c.COLLISION.TILE_ONE_WAY_UP;var COLLISION_TILE_ONE_WAY_DOWN=_c.COLLISION.TILE_ONE_WAY_DOWN;var COLLISION_TILE_ONE_WAY_RIGHT=_c.COLLISION.TILE_ONE_WAY_RIGHT;var COLLISION_TILE_ONE_WAY_LEFT=_c.COLLISION.TILE_ONE_WAY_LEFT;var COLLISION_TILE_CLIMBABLE_WITH_TOP=_c.COLLISION.TILE_CLIMBABLE_WITH_TOP;var COLLISION_TILE_CLIMBABLE_STAIRS_WITH_TOP=_c.COLLISION.TILE_CLIMBABLE_STAIRS_WITH_TOP;var COLLISION_TILES_HASH_WALKABLE=_c.COLLISION.TILES_HASH_WALKABLE;var COLLISION_TILES_HASH_SLOPED=_c.COLLISION.TILES_HASH_SLOPED;var COLLISION_TILES_HASH_CLIMBABLE=_c.COLLISION.TILES_HASH_CLIMBABLE;var COLLISION_TILES_HASH_ONE_WAY=_c.COLLISION.TILES_HASH_ONE_WAY;var WEIGHTED=_c.PATHFINDING.WEIGHTED;var WEIGHT=_c.PATHFINDING.WEIGHT;var WEIGHT_AWAY_FROM=_c.PATHFINDING.WEIGHT_AWAY_FROM;var ALLOW_DIAGONAL=_c.PATHFINDING.ALLOW_DIAGONAL;var DIAGONAL_REQUIRES_BOTH_DIRECT=_c.PATHFINDING.DIAGONAL_REQUIRES_BOTH_DIRECT;var AWAY_FROM_DISTANCE=_c.PATHFINDING.AWAY_FROM_DISTANCE;var AWAY_FROM_MAX_NODES=_c.PATHFINDING.AWAY_FROM_MAX_NODES;ig.pathfinding={};var _collisionMap=null;var _collisionMapData=null;var _pathfindingMap=null;var _pathfindingMapData=null;var _tilesize=ig.pathfinding.tilesize=1;var _tilesizeReciprocal=1;var _grid=[];var _open=[];var _closed=[];function _cleanup(){var i,il;for(i=0,il=_open.length;i<il;i++){_open[i].cleanup();}
for(i=0,il=_closed.length;i<il;i++){_closed[i].cleanup();}
_open.length=_closed.length=0;}
var HEURISTIC=ig.pathfinding.HEURISTIC={MANHATTAN:function(dx,dy){return dx+dy;},EUCLIDEAN:function(dx,dy){return Math.sqrt(dx*dx+dy*dy);},CHEBYSHEV:function(dx,dy){return Math.max(dx,dy);}};var Node=ig.pathfinding.Node=ig.Class.extend({x:0,y:0,gridX:0,gridY:0,size:0,walkable:true,ungrounded:true,tile:0,sloped:false,slopedNeighbor:false,climbable:false,oneWay:false,oneWayFacing:{x:0,y:0},weightPct:1,weight:0,neighbors:null,directNeighbors:null,neighborMap:{},corner:false,cornerMap:{},closed:false,opened:false,openIndex:0,parent:null,g:0,w:0,h:0,f:0,init:function(x,y,gridX,gridY,walkable,tile){this.x=x||0;this.y=y||0;this.gridX=gridX||0;this.gridY=gridY||0;this.walkable=typeof walkable!=='undefined'?walkable:true;this.tile=tile||0;this.climbable=!!COLLISION_TILES_HASH_CLIMBABLE[this.tile];this.oneWay=!!COLLISION_TILES_HASH_ONE_WAY[this.tile];this.sloped=!!COLLISION_TILES_HASH_SLOPED[this.tile];if(this.oneWay){if(this.tile===COLLISION_TILE_ONE_WAY_UP||this.tile===COLLISION_TILE_CLIMBABLE_WITH_TOP||this.tile===COLLISION_TILE_CLIMBABLE_STAIRS_WITH_TOP){this.oneWayFacing.y=-1;}
else if(this.tile===COLLISION_TILE_ONE_WAY_DOWN){this.oneWayFacing.y=1;}
if(this.tile===COLLISION_TILE_ONE_WAY_LEFT){this.oneWayFacing.x=-1;}
else if(this.tile===COLLISION_TILE_ONE_WAY_RIGHT){this.oneWayFacing.x=1;}}},cleanup:function(){this.g=this.h=this.f=this.w=this.openIndex=0;this.parent=null;this.closed=this.opened=false;}});ig.pathfinding.rebuild=function(collisionMap,pathfindingMap){ig.pathfinding.unload();_collisionMap=collisionMap;_pathfindingMap=pathfindingMap;if(_collisionMap&&_pathfindingMap&&_pathfindingMap.tilesize!==_collisionMap.tilesize){throw new Error("Maps tilesize mismatch: pathfinding map and collision map must have the same tilesize!");}
if(_collisionMap){_collisionMapData=_collisionMap.data;_tilesize=ig.pathfinding.tilesize=_collisionMap.tilesize;_tilesizeReciprocal=1/_collisionMap.tilesize;}
if(_pathfindingMap){_pathfindingMapData=_pathfindingMap.data;_tilesize=ig.pathfinding.tilesize=_pathfindingMap.tilesize;_tilesizeReciprocal=1/_pathfindingMap.tilesize;}
ig.pathfinding.rebuildGrid();};ig.pathfinding.unload=function(){_grid.length=0;_collisionMap=_collisionMapData=_pathfindingMap=_pathfindingMapData=null;};ig.pathfinding.rebuildGrid=function(){var row;var tile;var gridRow;var node;var y,yl;var x,xl;var worldX,worldY;if(_collisionMap&&_collisionMapData){for(y=0,yl=_collisionMapData.length;y<yl;y++){row=_collisionMapData[y];gridRow=_grid[y];if(!gridRow){gridRow=_grid[y]=[];}
for(x=0,xl=row.length;x<xl;x++){tile=row[x];worldX=x*_tilesize+_tilesize*0.5;worldY=y*_tilesize+_tilesize*0.5;gridRow[x]=new Node(worldX,worldY,x,y,!!COLLISION_TILES_HASH_WALKABLE[tile],tile);}}}
if(_pathfindingMap&&_pathfindingMapData){for(y=0,yl=_pathfindingMapData.length;y<yl;y++){row=_pathfindingMapData[y];gridRow=_grid[y];if(!gridRow){gridRow=_grid[y]=[];}
for(x=0,xl=(!_collisionMap||!_collisionMapData[0]||row.length>=_collisionMapData[0].length?row.length:_collisionMapData[0].length);x<xl;x++){tile=row[x]||0;var settings=_pathfindingMap.tiledef[tile];node=gridRow[x];if(!node){worldX=x*_tilesize+_tilesize*0.5;worldY=y*_tilesize+_tilesize*0.5;node=gridRow[x]=new Node(worldX,worldY,x,y,settings&&typeof settings.walkable!=='undefined'?settings.walkable:true,tile);}
ig.merge(node,settings);}}}
for(y=0,yl=_grid.length;y<yl;y++){row=_grid[y];for(x=0,xl=row.length;x<xl;x++){node=row[x];node.size=_tilesize;var nm=node.neighborMap;var prevRow=_grid[y-1];var nextRow=_grid[y+1];if(prevRow){nm.top=prevRow[x];if(x>0){nm.topleft=prevRow[x-1];}
if(x<xl-1){nm.topright=prevRow[x+1];}}
if(x>0){nm.left=row[x-1];}
if(x<xl-1){nm.right=row[x+1];}
if(nextRow){nm.bottom=nextRow[x];if(x>0){nm.bottomleft=nextRow[x-1];}
if(x<xl-1){nm.bottomright=nextRow[x+1];}}
node.ungrounded=!nm.bottom||(nm.bottom.walkable&&nm.bottom.oneWayFacing.y>=0);if(nm.top&&nm.top.walkable&&(nm.top.climbable||nm.top.oneWayFacing.y<=0)&&nm.left&&nm.left.walkable&&(nm.left.climbable||nm.left.oneWayFacing.x<=0)&&(!nm.topleft||(!nm.topleft.walkable&&!nm.topleft.sloped))){node.corner=node.cornerMap.topleft=true;}
if(nm.top&&nm.top.walkable&&(nm.top.climbable||nm.top.oneWayFacing.y<=0)&&nm.right&&nm.right.walkable&&(nm.right.climbable||nm.right.oneWayFacing.x>=0)&&(!nm.topright||(!nm.topright.walkable&&!nm.topright.sloped))){node.corner=node.cornerMap.topright=true;}
if(nm.bottom&&nm.bottom.walkable&&(nm.bottom.climbable||nm.bottom.oneWayFacing.y>=0)&&nm.left&&nm.left.walkable&&(nm.left.climbable||nm.left.oneWayFacing.x<=0)&&(!nm.bottomleft||(!nm.bottomleft.walkable&&!nm.bottomleft.sloped))){node.corner=node.cornerMap.bottomleft=true;}
if(nm.bottom&&nm.bottom.walkable&&(nm.bottom.climbable||nm.bottom.oneWayFacing.y>=0)&&nm.right&&nm.right.walkable&&(nm.right.climbable||nm.right.oneWayFacing.x>=0)&&(!nm.bottomright||(!nm.bottomright.walkable&&!nm.bottomright.sloped))){node.corner=node.cornerMap.bottomright=true;}
if((nm.top&&nm.top.sloped)||(nm.bottom&&nm.bottom.sloped)||(nm.right&&nm.right.sloped)||(nm.left&&nm.left.sloped)||(nm.topleft&&nm.topleft.sloped)||(nm.topright&&nm.topright.sloped)||(nm.bottomleft&&nm.bottomleft.sloped)||(nm.bottomright&&nm.bottomright.sloped)){node.slopedNeighbor=true;}
node.directNeighbors=ig.pathfinding.getDirectNeighbors(node);node.neighbors=[].concat(node.directNeighbors,ig.pathfinding.getDiagonalNeighbors(node));}}};ig.pathfinding.getPathToEntity=function(entityPathing,entityTarget,avoidEntities,searchDistance,heuristicType){return ig.pathfinding.getPathTo(entityPathing.pos.x+entityPathing.size.x*0.5,entityPathing.pos.y+entityPathing.size.y*0.5,entityTarget.pos.x+entityTarget.size.x*0.5,entityTarget.pos.y+entityTarget.size.y*0.5,avoidEntities,searchDistance,entityPathing,entityTarget,heuristicType);};ig.pathfinding.getPathToPoint=function(entityPathing,targetX,targetY,avoidEntities,searchDistance,entityTarget,heuristicType){return ig.pathfinding.getPathTo(entityPathing.pos.x+entityPathing.size.x*0.5,entityPathing.pos.y+entityPathing.size.y*0.5,targetX,targetY,avoidEntities,searchDistance,entityPathing,entityTarget,heuristicType);};ig.pathfinding.getPathTo=function(fromX,fromY,targetX,targetY,avoidEntities,searchDistance,entityPathing,entityTarget,heuristicType){var path;if(entityPathing&&entityPathing.path){path=entityPathing.path;path.length=0;}
else{path=[];}
var grid=_grid;if(grid.length===0){return path;}
var gridFromX=Math.floor(fromX*_tilesizeReciprocal);var gridFromY=Math.floor(fromY*_tilesizeReciprocal);var gridDestinationX=Math.floor(targetX*_tilesizeReciprocal);var gridDestinationY=Math.floor(targetY*_tilesizeReciprocal);var startNode=grid[gridFromY]&&grid[gridFromY][gridFromX];var destinationNode=grid[gridDestinationY]&&grid[gridDestinationY][gridDestinationX];if(!startNode||!destinationNode||startNode===destinationNode){return path;}
var open=_open;var closed=_closed;var heuristic=HEURISTIC[heuristicType||'MANHATTAN'];var abs=Math.abs;var SQRT2=Math.SQRT2;var neighbors;var neighbor;var openNode;var i,il;var j,jl;var tilesize=_tilesize;var entityPathingSize=tilesize;var needsAvoidEntityCheck;var diagonalDouble;var nodeHasCollidingEntities;var neighborMap;var diagonalUnsafe;var topleft;var topright;var bottomleft;var bottomright;var diagonalStartIndex;if(entityPathing){entityPathingSize=Math.max(entityPathing.size.x,entityPathing.size.y);diagonalDouble=ALLOW_DIAGONAL&&DIAGONAL_REQUIRES_BOTH_DIRECT;if(avoidEntities){needsAvoidEntityCheck=true;nodeHasCollidingEntities=ig.pathfinding.nodeHasCollidingEntities;}}
var needsDistCheck;if(entityTarget&&searchDistance>0){needsDistCheck=true;searchDistance*=_tilesizeReciprocal;searchDistance*=searchDistance;}
else{needsDistCheck=false;}
open.push(startNode);while(open.length>0){var currentNode=open.pop();var gridCurrentX=currentNode.gridX;var gridCurrentY=currentNode.gridY;closed.push(currentNode);currentNode.closed=true;if(currentNode===destinationNode){while(currentNode){path.push(currentNode);currentNode=currentNode.parent;}
_cleanup();return path;}
neighbors=currentNode.neighbors;il=neighbors.length;if(diagonalDouble){if(entityPathingSize>tilesize&&il<8&&!currentNode.slopedNeighbor){neighbors=currentNode.directNeighbors;il=neighbors.length;diagonalStartIndex=-1;diagonalUnsafe=false;}
else{neighborMap=currentNode.neighborMap;topleft=topright=bottomleft=bottomright=diagonalUnsafe=false;diagonalStartIndex=(il*0.5)|0+1;}}
for(i=0;i<il;i++){neighbor=neighbors[i];if(neighbor.closed){continue;}
var gridX=neighbor.gridX;var gridY=neighbor.gridY;if(needsDistCheck){var deltaX=gridX-gridDestinationX;var deltaY=gridY-gridDestinationY;if(deltaX*deltaX+deltaY*deltaY>searchDistance){continue;}}
if(needsAvoidEntityCheck){if(diagonalUnsafe&&((topleft&&neighbor===neighborMap.topleft)||(topright&&neighbor===neighborMap.topright)||(bottomleft&&neighbor===neighborMap.bottomleft)||(bottomright&&neighbor===neighborMap.bottomright))){continue;}
else if(nodeHasCollidingEntities(neighbor,currentNode,entityPathing,entityTarget)){if(diagonalDouble&&i<diagonalStartIndex){if(neighbor===neighborMap.top){diagonalUnsafe=topleft=topright=true;}
if(neighbor===neighborMap.bottom){diagonalUnsafe=bottomleft=bottomright=true;;}
if(neighbor===neighborMap.left){diagonalUnsafe=topleft=bottomleft=true;}
if(neighbor===neighborMap.right){diagonalUnsafe=topright=bottomright=true;}}
continue;}}
var dg=(gridX-gridCurrentX)===0||(gridY-gridCurrentY)===0?1:SQRT2;var ng=currentNode.g+dg;var nw;if(WEIGHTED){nw=currentNode.w+dg+neighbor.weight+WEIGHT*neighbor.weightPct;}
else{nw=ng;}
if(!neighbor.opened||nw<neighbor.w){neighbor.g=ng;neighbor.w=nw;neighbor.h=neighbor.h||heuristic(abs(gridX-gridDestinationX),abs(gridY-gridDestinationY));neighbor.f=neighbor.w+neighbor.h;neighbor.parent=currentNode;if(!neighbor.opened){neighbor.opened=true;for(j=open.length;j>0;j--){openNode=open[j-1];if(neighbor.f<=openNode.f){break;}
else{openNode.openIndex=j;open[j]=openNode;}}
neighbor.openIndex=j;open[j]=neighbor;}
else{var shifted;for(j=neighbor.openIndex,jl=open.length-1;j<jl;j++){openNode=open[j+1];if(openNode.f<=neighbor.f){shifted=true;break;}
else{openNode.openIndex=j;open[j]=openNode;}}
if(!shifted){j=open.length;}
neighbor.openIndex=j;open[j]=neighbor;}}}}
_cleanup();return path;};ig.pathfinding.getPathAwayFromEntity=function(entityPathing,entityTarget,avoidEntities,searchDistance,heuristicType){return ig.pathfinding.getPathAwayFrom(entityPathing.pos.x+entityPathing.size.x*0.5,entityPathing.pos.y+entityPathing.size.y*0.5,entityTarget.pos.x+entityTarget.size.x*0.5,entityTarget.pos.y+entityTarget.size.y*0.5,avoidEntities,searchDistance,entityPathing,heuristicType);};ig.pathfinding.getPathAwayFromPoint=function(entityPathing,awayFromX,awayFromY,avoidEntities,searchDistance,heuristicType){return ig.pathfinding.getPathAwayFrom(entityPathing.pos.x+entityPathing.size.x*0.5,entityPathing.pos.y+entityPathing.size.y*0.5,awayFromX,awayFromY,avoidEntities,searchDistance,entityPathing,heuristicType);};ig.pathfinding.getPathAwayFrom=function(fromX,fromY,awayFromX,awayFromY,avoidEntities,searchDistance,entityPathing,heuristicType){var path;if(entityPathing&&entityPathing.path){path=entityPathing.path;path.length=0;}
else{path=[];}
var grid=_grid;if(grid.length===0){return path;}
var gridFromX=Math.floor(fromX*_tilesizeReciprocal);var gridFromY=Math.floor(fromY*_tilesizeReciprocal);var gridAwayFromX=Math.floor(awayFromX*_tilesizeReciprocal);var gridAwayFromY=Math.floor(awayFromY*_tilesizeReciprocal);var startNode=grid[gridFromY]&&grid[gridFromY][gridFromX];var awayFromNode=grid[gridAwayFromY]&&grid[gridAwayFromY][gridAwayFromX];if(!startNode||!awayFromNode){return path;}
var open=_open;var closed=_closed;var heuristic=HEURISTIC[heuristicType||'MANHATTAN'];var abs=Math.abs;var SQRT2=Math.SQRT2;var neighbors;var neighbor;var openNode;var i,il;var j,jl;var tilesize=_tilesize;var entityPathingSize=tilesize;var needsAvoidEntityCheck;var diagonalDouble;var nodeHasCollidingEntities;var neighborMap;var diagonalUnsafe;var topleft;var topright;var bottomleft;var bottomright;var diagonalStartIndex;if(entityPathing){entityPathingSize=Math.max(entityPathing.size.x,entityPathing.size.y);diagonalDouble=ALLOW_DIAGONAL&&DIAGONAL_REQUIRES_BOTH_DIRECT;if(avoidEntities){needsAvoidEntityCheck=true;nodeHasCollidingEntities=ig.pathfinding.nodeHasCollidingEntities;}}
if(searchDistance>0){searchDistance*=_tilesizeReciprocal;}
else{searchDistance=AWAY_FROM_DISTANCE*_tilesizeReciprocal;}
searchDistance*=searchDistance;open.push(startNode);var bestCost=Infinity;var bestDistance=-Infinity;var bestFleeNode;var gridDeltaX=gridFromX-gridAwayFromX;var gridDeltaY=gridFromY-gridAwayFromY;var gridDistanceAwayStart=gridDeltaX*gridDeltaX+gridDeltaY*gridDeltaY;var fleeNode;while(open.length>0){var currentNode=open.pop();var gridCurrentX=currentNode.gridX;var gridCurrentY=currentNode.gridY;closed.push(currentNode);currentNode.closed=true;gridDeltaX=gridCurrentX-gridAwayFromX;gridDeltaY=gridCurrentY-gridAwayFromY;var gridDistanceAway=(gridDeltaX*gridDeltaX+gridDeltaY*gridDeltaY)-gridDistanceAwayStart;if(gridDistanceAway>0&&currentNode.g>1&&gridDistanceAway>bestDistance&&currentNode.w*0.5<bestCost){bestFleeNode=currentNode;bestCost=currentNode.w;bestDistance=gridDistanceAway;}
if(closed.length>=AWAY_FROM_MAX_NODES){fleeNode=bestFleeNode;}
if(fleeNode){while(fleeNode){path.push(fleeNode);fleeNode=fleeNode.parent;}
_cleanup();return path;}
neighbors=currentNode.neighbors;il=neighbors.length;if(diagonalDouble){if(entityPathingSize>tilesize&&!currentNode.slopedNeighbor&&il<8){neighbors=currentNode.directNeighbors;il=neighbors.length;diagonalStartIndex=-1;diagonalUnsafe=false;}
else{neighborMap=currentNode.neighborMap;topleft=topright=bottomleft=bottomright=diagonalUnsafe=false;diagonalStartIndex=(il*0.5)|0+1;}}
for(i=0;i<il;i++){neighbor=neighbors[i];if(neighbor.closed){continue;}
if(needsAvoidEntityCheck){if(diagonalUnsafe&&((topleft&&neighbor===neighborMap.topleft)||(topright&&neighbor===neighborMap.topright)||(bottomleft&&neighbor===neighborMap.bottomleft)||(bottomright&&neighbor===neighborMap.bottomright))){continue;}
else if(nodeHasCollidingEntities(neighbor,currentNode,entityPathing)){if(diagonalDouble&&i<diagonalStartIndex){if(neighbor===neighborMap.top){diagonalUnsafe=topleft=topright=true;}
if(neighbor===neighborMap.bottom){diagonalUnsafe=bottomleft=bottomright=true;;}
if(neighbor===neighborMap.left){diagonalUnsafe=topleft=bottomleft=true;}
if(neighbor===neighborMap.right){diagonalUnsafe=topright=bottomright=true;}}
continue;}}
var gridX=neighbor.gridX;var gridY=neighbor.gridY;var dx=gridX-gridCurrentX;var dy=gridY-gridCurrentY;var dg=dx===0||dy===0?1:SQRT2;var ng=currentNode.g+dg;var dw;if(WEIGHTED){dw=dg+neighbor.weight+WEIGHT*neighbor.weightPct;}
else{dw=dg;}
if((gridDeltaX>0&&gridDeltaX+dx<gridDeltaX)||(gridDeltaX<0&&gridDeltaX+dx>gridDeltaX)){dw+=WEIGHT_AWAY_FROM;}
if((gridDeltaY>0&&gridDeltaY+dy<gridDeltaY)||(gridDeltaY<0&&gridDeltaY+dy>gridDeltaY)){dw+=WEIGHT_AWAY_FROM;}
var nw=currentNode.w+dw;if(!neighbor.opened||nw<neighbor.w){neighbor.g=ng;neighbor.w=nw;neighbor.h=neighbor.h||heuristic(abs(gridX-gridAwayFromX),abs(gridY-gridAwayFromY));neighbor.f=neighbor.w+neighbor.h;neighbor.parent=currentNode;if(!neighbor.opened){neighbor.opened=true;for(j=open.length;j>0;j--){openNode=open[j-1];if(neighbor.f<=openNode.f){break;}
else{openNode.openIndex=j;open[j]=openNode;}}
neighbor.openIndex=j;open[j]=neighbor;}
else{var shifted;for(j=neighbor.openIndex,jl=open.length-1;j<jl;j++){openNode=open[j+1];if(openNode.f<=neighbor.f){shifted=true;break;}
else{openNode.openIndex=j;open[j]=openNode;}}
if(!shifted){j=open.length;}
neighbor.openIndex=j;open[j]=neighbor;}}}}
_cleanup();return path;};ig.pathfinding.getNeighbors=function(node){var neighbors=[];var gridX=node.gridX;var gridY=node.gridY;var grid=_grid;var neighbor;var row=grid[gridY];var prevRow=grid[gridY-1];var nextRow=grid[gridY+1];neighbor=prevRow&&prevRow[gridX];if(neighbor&&neighbor.walkable&&ig.pathfinding.isDirectionWalkable(neighbor,0,-1,node)){neighbors.push(neighbor);}
neighbor=row&&row[gridX+1];if(neighbor&&neighbor.walkable&&ig.pathfinding.isDirectionWalkable(neighbor,1,0,node)){neighbors.push(neighbor);}
neighbor=nextRow&&nextRow[gridX];if(neighbor&&neighbor.walkable&&ig.pathfinding.isDirectionWalkable(neighbor,0,1,node)){neighbors.push(neighbor);}
neighbor=row&&row[gridX-1];if(neighbor&&neighbor.walkable&&ig.pathfinding.isDirectionWalkable(neighbor,-1,0,node)){neighbors.push(neighbor);}
neighbor=prevRow&&prevRow[gridX-1];if(neighbor&&neighbor.walkable&&ig.pathfinding.isDirectionWalkable(neighbor,-1,-1,node)){neighbors.push(neighbor);}
neighbor=prevRow&&prevRow[gridX+1];if(neighbor&&neighbor.walkable&&ig.pathfinding.isDirectionWalkable(neighbor,1,-1,node)){neighbors.push(neighbor);}
neighbor=nextRow&&nextRow[gridX+1];if(neighbor&&neighbor.walkable&&ig.pathfinding.isDirectionWalkable(neighbor,1,1,node)){neighbors.push(neighbor);}
neighbor=nextRow&&nextRow[gridX-1];if(neighbor&&neighbor.walkable&&ig.pathfinding.isDirectionWalkable(neighbor,-1,1,node)){neighbors.push(neighbor);}
return neighbors;};ig.pathfinding.getDirectNeighbors=function(node){var neighbors=[];var gridX=node.gridX;var gridY=node.gridY;var grid=_grid;var neighbor;var row=grid[gridY];var prevRow=grid[gridY-1];var nextRow=grid[gridY+1];neighbor=prevRow&&prevRow[gridX];if(neighbor&&neighbor.walkable&&ig.pathfinding.isDirectionWalkable(neighbor,0,-1,node)){neighbors.push(neighbor);}
neighbor=row&&row[gridX+1];if(neighbor&&neighbor.walkable&&ig.pathfinding.isDirectionWalkable(neighbor,1,0,node)){neighbors.push(neighbor);}
neighbor=nextRow&&nextRow[gridX];if(neighbor&&neighbor.walkable&&ig.pathfinding.isDirectionWalkable(neighbor,0,1,node)){neighbors.push(neighbor);}
neighbor=row&&row[gridX-1];if(neighbor&&neighbor.walkable&&ig.pathfinding.isDirectionWalkable(neighbor,-1,0,node)){neighbors.push(neighbor);}
return neighbors;};ig.pathfinding.getDiagonalNeighbors=function(node){var neighbors=[];var gridX=node.gridX;var gridY=node.gridY;var grid=_grid;var neighbor;var row=grid[gridY];var prevRow=grid[gridY-1];var nextRow=grid[gridY+1];neighbor=prevRow&&prevRow[gridX-1];if(neighbor&&neighbor.walkable&&ig.pathfinding.isDirectionWalkable(neighbor,-1,-1,node)){neighbors.push(neighbor);}
neighbor=prevRow&&prevRow[gridX+1];if(neighbor&&neighbor.walkable&&ig.pathfinding.isDirectionWalkable(neighbor,1,-1,node)){neighbors.push(neighbor);}
neighbor=nextRow&&nextRow[gridX+1];if(neighbor&&neighbor.walkable&&ig.pathfinding.isDirectionWalkable(neighbor,1,1,node)){neighbors.push(neighbor);}
neighbor=nextRow&&nextRow[gridX-1];if(neighbor&&neighbor.walkable&&ig.pathfinding.isDirectionWalkable(neighbor,-1,1,node)){neighbors.push(neighbor);}
return neighbors;};ig.pathfinding.nodeHasCollidingEntities=function(node,nodeFrom,entityPathing,entityTarget){var layer=ig.game.layersMap[entityPathing.layerName];if(layer&&layer.spatialHash){var hash=layer.spatialHash;var cellSize=layer.spatialHashCellSize;var x=node.x;var y=node.y;var cellX=(x/cellSize)|0;var cellY=(y/cellSize)|0;var column=hash[cellX];if(column){var cell=column[cellY];if(cell&&cell.length>0){var halfWidth=entityPathing.size.x*0.45;var halfHeight=entityPathing.size.y*0.45;var minX=x-halfWidth;var minY=y-halfHeight;var maxX=x+halfWidth;var maxY=y+halfHeight;var dirX=node.gridX-nodeFrom.gridX;var dirY=node.gridY-nodeFrom.gridY;for(var i=0,il=cell.length;i<il;i++){var entity=cell[i];if(entity!==entityPathing&&!(entity.group&entityPathing.group)&&(!entityTarget||entity!==entityTarget)&&(entity.collides!==ig.EntityExtended.COLLIDES.NEVER||((entity.type&ig.EntityExtended.TYPE.DANGEROUS)&&(entity.checkAgainst&entityPathing.type)))&&_uti.AABBIntersect(minX,minY,maxX,maxY,entity.pos.x,entity.pos.y,entity.pos.x+entity.size.x,entity.pos.y+entity.size.y)){if(!entity.oneWay||(!(entity.climbable&&(entityPathing.canClimb||entityPathing.gravityFactor===0||ig.game.gravity===0))&&(((dirY<0&&entity.oneWayFacing.y>0)||(dirY>0&&entity.oneWayFacing.y<0))||((dirX<0&&entity.oneWayFacing.x>0)||(dirX>0&&entity.oneWayFacing.x<0))))){return true;}}}}}}
return false;};ig.pathfinding.getNodeAt=function(gridX,gridY){return _grid[gridY]&&_grid[gridY][gridX];};ig.pathfinding.getWorldNodeAt=function(x,y,gridOffsetX,gridOffsetY){var gridX=Math.floor(x*_tilesizeReciprocal)+(gridOffsetX||0);var gridY=Math.floor(y*_tilesizeReciprocal)+(gridOffsetY||0);return ig.pathfinding.getNodeAt(gridX,gridY);};ig.pathfinding.getWalkableNodeAt=function(x,y,gridOffsetX,gridOffsetY,avoidEntities,entityPathing){var gridX=x+(gridOffsetX||0);var gridY=y+(gridOffsetY||0);var node=_grid[gridY]&&_grid[gridY][gridX];var nodeFrom=_grid[y]&&_grid[y][x];if(node&&node.walkable&&((!gridOffsetX&&!gridOffsetY)||ig.pathfinding.isDirectionWalkable(node,gridOffsetX,gridOffsetY,nodeFrom))){if(avoidEntities&&entityPathing){if(!nodeFrom||!ig.pathfinding.nodeHasCollidingEntities(node,nodeFrom,entityPathing)){return node;}}
else{return node;}}};ig.pathfinding.getWorldWalkableNodeAt=function(x,y,gridOffsetX,gridOffsetY,avoidEntities,entityPathing){return ig.pathfinding.getWalkableNodeAt(Math.floor(x*_tilesizeReciprocal),Math.floor(y*_tilesizeReciprocal),gridOffsetX,gridOffsetY,avoidEntities,entityPathing);};ig.pathfinding.getWorldWalkableNodeChain=function(x,y,dirX,dirY,numNodes,avoidEntities,entityPathing,nodes){var gridX=Math.floor(x*_tilesizeReciprocal);var gridY=Math.floor(y*_tilesizeReciprocal);numNodes=numNodes||2;if(nodes){nodes.length=0;}
else{nodes=[];}
for(var i=1;i<=numNodes;i++){var node=ig.pathfinding.getWalkableNodeAt(gridX+dirX*i,gridY+dirY*i,dirX,dirY,avoidEntities,entityPathing);if(!node){break;}
nodes.push(node);}
return nodes;};ig.pathfinding.isWalkableAt=function(x,y,gridOffsetX,gridOffsetY,avoidEntities,entityPathing){var gridX=x+(gridOffsetX||0);var gridY=y+(gridOffsetY||0);var node=_grid[gridY]&&_grid[gridY][gridX];var nodeFrom=_grid[y]&&_grid[y][x];if(node&&node.walkable&&((!gridOffsetX&&!gridOffsetY)||ig.pathfinding.isDirectionWalkable(node,gridOffsetX,gridOffsetY,nodeFrom))){if(avoidEntities&&entityPathing){if(nodeFrom&&!ig.pathfinding.nodeHasCollidingEntities(node,nodeFrom,entityPathing)){return true;}}
else{return true;}}
return false;};ig.pathfinding.isWorldWalkableAt=function(x,y,gridOffsetX,gridOffsetY,avoidEntities,entityPathing){return ig.pathfinding.isWalkableAt(Math.floor(x*_tilesizeReciprocal),Math.floor(y*_tilesizeReciprocal),gridOffsetX,gridOffsetY,avoidEntities,entityPathing);};ig.pathfinding.isDirectionWalkable=function(node,dirX,dirY,nodeFrom){if(dirX!==0&&dirY!==0&&nodeFrom){if(!ALLOW_DIAGONAL){return false;}
var nm=nodeFrom.neighborMap;if(DIAGONAL_REQUIRES_BOTH_DIRECT){if(dirX>0){if(!nm.right||(!nm.right.walkable&&!nm.right.sloped)){return false;}
if(dirY>0){if(!nm.bottom||(!nm.bottom.walkable&&!nm.bottom.sloped)){return false;}}
else if(!nm.top||(!nm.top.walkable&&!nm.top.sloped)){return false;}}
else{if(!nm.left||(!nm.left.walkable&&!nm.left.sloped)){return false;}
if(dirY>0){if(!nm.bottom||(!nm.bottom.walkable&&!nm.bottom.sloped)){return false;}}
else if(!nm.top||(!nm.top.walkable&&!nm.top.sloped)){return false;}}}
else{if(dirX>0){if(dirY>0){if((!nm.right||(!nm.right.walkable&&!nm.right.sloped))&&(!nm.bottom||(!nm.bottom.walkable&&!nm.bottom.sloped))){return false;}}
else if((!nm.right||(!nm.right.walkable&&!nm.right.sloped))&&(!nm.top||(!nm.top.walkable&&!nm.top.sloped))){return false;}}
else{if(dirY>0){if((!nm.left||(!nm.left.walkable&&!nm.left.sloped))&&(!nm.bottom||(!nm.bottom.walkable&&!nm.bottom.sloped))){return false;}}
else if((!nm.left||(!nm.left.walkable&&!nm.left.sloped))&&(!nm.top||(!nm.top.walkable&&!nm.top.sloped))){return false;}}}}
if(node.oneWay&&!node.climbable&&(((dirY<0&&node.oneWayFacing.y>0)||(dirY>0&&node.oneWayFacing.y<0))||((dirX<0&&node.oneWayFacing.x>0)||(dirX>0&&node.oneWayFacing.x<0)))){return false;}
return true;};ig.pathfinding.isPointInGrid=function(gridX,gridY){return _grid[gridY]&&_grid[gridY][gridX]instanceof Node;};ig.pathfinding.isWorldPointInGrid=function(x,y,gridOffsetX,gridOffsetY){var gridX=Math.floor(x*_tilesizeReciprocal)+(gridOffsetX||0);var gridY=Math.floor(y*_tilesizeReciprocal)+(gridOffsetY||0);return _grid[gridY]&&_grid[gridY][gridX]instanceof Node;};});

// lib/plusplus/core/game.js
ig.baked=true;ig.module('plusplus.core.game').requires('impact.game','plusplus.core.config','plusplus.core.timer','plusplus.core.font','plusplus.core.image','plusplus.core.background-map','plusplus.core.collision-map','plusplus.core.pathfinding-map','plusplus.core.animation','plusplus.core.layer','plusplus.core.input','plusplus.core.camera','plusplus.core.entity','plusplus.abstractities.spawner','plusplus.entities.light','plusplus.entities.shape-solid','plusplus.entities.shape-climbable','plusplus.entities.shape-climbable-one-way','plusplus.ui.ui-overlay-pause','plusplus.helpers.signals','plusplus.helpers.tweens','plusplus.helpers.pathfinding','plusplus.helpers.utils','plusplus.helpers.utilstile','plusplus.helpers.utilsintersection').defines(function(){'use strict';var _c=ig.CONFIG;var _pf=ig.pathfinding;var _ut=ig.utils;var _utt=ig.utilstile;var _uti=ig.utilsintersection;ig.GameExtended=ig.Game.extend({shapesPasses:[{ignoreSolids:true,ignoreOneWays:true}],layers:[],layersMap:{},sortLayersBy:null,paused:false,pauseLocked:false,changed:false,changedLights:false,dirtyEntities:true,dirtyLights:true,deferring:false,hasLevel:false,entities:[],persistentEntities:{},autoSpawnPlayer:_c.AUTO_SPAWN_PLAYER,playerClass:null,lights:[],gravity:_c.TOP_DOWN?0:400,cameraClass:ig.Camera,camera:null,pathfindingMap:null,onPaused:null,onUnpaused:null,_levelBuilding:false,_levelToBuild:null,_levelNeedsBuild:false,_levelNeedsUnload:false,_playerSpawnerName:'',_layersToChange:[],_layersToAdd:[],_layersToRemove:[],_itemsToAdd:[],_itemsToAddNext:[],_itemsToRemove:[],_itemsToRemoveNext:[],init:function(){this.onPaused=new ig.Signal();this.onUnpaused=new ig.Signal();this.camera=new(this.cameraClass)();this.sortLayersBy=this.sortLayersBy||ig.Game.SORT.Z_INDEX;this.addLayer(new ig.Layer('backgroundMaps',{preRender:_c.PRERENDER_BACKGROUND_LAYER,noUpdate:_c.NO_UPDATE_BACKGROUND_LAYER}));this.addLayer(new ig.Layer('lights'));this.addLayer(new ig.Layer('entities'));this.addLayer(new ig.Layer('foregroundMaps',{preRender:_c.PRERENDER_FOREGROUND_LAYER,noUpdate:_c.NO_UPDATE_FOREGROUND_LAYER}));this.addLayer(new ig.Layer('overlay',{zIndex:1,ignorePause:_c.IGNORE_PAUSE_OVERLAY_LAYER,autoSort:_c.AUTO_SORT_OVERLAY_LAYER}));this.addLayer(new ig.Layer('ui',{zIndex:2,clearOnLoad:_c.CLEAR_ON_LOAD_UI_LAYER,ignorePause:_c.IGNORE_PAUSE_UI_LAYER,autoSort:_c.AUTO_SORT_UI_LAYER}));for(var layerName in _c.LAYERS_CUSTOM){var layerSettings=_c.LAYERS_CUSTOM[layerName];this.addLayer(new ig.Layer(layerName,layerSettings));}
this._addDeferredLayers();ig.global.addEventListener('resize',_ut.debounce(this.resize.bind(this),_c.RESIZE_DELAY),false);this.resize();this.inputStart();},loadLevelDeferred:function(level,playerSpawnerName){this.resetLoadLevel();this._levelToLoad=level;this._playerSpawnerName=playerSpawnerName;},loadLevel:function(level,playerSpawnerName){level=level||this._levelToLoad;this._levelToLoad=undefined;if(typeof level==='string'){var levelName=level.replace(/^(Level)?(\w)(\w*)/,function(m,l,a,b){return a.toUpperCase()+b;});levelName=levelName.replace(/[-|\s?)](.)/g,function(m,a){return a.toUpperCase();});level=ig.global['Level'+levelName];}
if(!this.transitioner){this.transitioner=this.spawnEntity(ig.UIOverlay,0,0,{layerName:_c.TRANSITIONER_LAYER,zIndex:_c.Z_INDEX_TRANSITIONER,fillStyle:_c.TRANSITIONER_COLOR,r:_c.TRANSITIONER_R,g:_c.TRANSITIONER_G,b:_c.TRANSITIONER_B,alpha:0});}
if(level){this._levelToBuild=level;if(this.hasLevel&&_c.TRANSITION_LEVELS&&this.layersMap[_c.TRANSITIONER_LAYER]&&this.layersMap[_c.TRANSITIONER_LAYER].ignorePause){var me=this;this.transitioner.fadeTo(1,{onComplete:function(){me.buildLevelDeferred();}});this.pause(true);}
else{this.buildLevel();}}},buildLevelDeferred:function(){if(this._levelToBuild){this._levelNeedsBuild=true;}},buildLevel:function(){var levelData=this._levelToBuild;var playerSpawnerName=this._playerSpawnerName;var entData,ld,newMap;var i,il;if(levelData){this._levelBuilding=true;this.unloadLevel();this.namedEntities={};for(i=0,il=levelData.entities.length;i<il;i++){entData=levelData.entities[i];this.spawnEntity(entData.type,entData.x,entData.y,entData.settings);}
var player=this.getPlayer();if(!player&&this.autoSpawnPlayer){player=this.persistentEntities['player']||this.playerClass;if(player){this.spawnEntity(player,0,0);}}
this.collisionMap=ig.CollisionMap.staticNoCollision;for(i=0;i<levelData.layer.length;i++){ld=levelData.layer[i];if(ld.name==='collision'){this.collisionMap=new ig.CollisionMap(ld.tilesize,ld.data);}
else if(ld.name==='pathfinding'){this.pathfindingMap=new ig.PathfindingMap(ld.tilesize,ld.data);}
else{newMap=new ig.BackgroundMapExtended(ld.tilesize,ld.data,ld.tilesetName);newMap.anims=this.backgroundAnims[ld.tilesetName]||{};newMap.repeat=ld.repeat;newMap.distance=ld.distance;newMap.foreground=!!ld.foreground;newMap.preRender=!!ld.preRender;newMap.name=ld.name;if(!newMap.layerName&&newMap.foreground){newMap.layerName='foregroundMaps';}
else if(!newMap.layerName){newMap.layerName='backgroundMaps';}
this.addItem(newMap);}}
if(_c.PATHFINDING.BUILD_WITH_LEVEL){_pf.rebuild(this.collisionMap,this.pathfindingMap);}
this.createShapes();this.sortEntities();for(i=0,il=this.layers.length;i<il;i++){this.layers[i].ready();}
if(player&&playerSpawnerName){var playerSpawner=this.namedEntities[playerSpawnerName];if(playerSpawner){if(playerSpawner instanceof ig.Spawner){playerSpawner.spawnNext(player);}
else{player.moveToPosition(playerSpawner);}}}
this._levelBuilding=false;this.unpause(true);if(this.transitioner){if(!this.transitioner.added){this.spawnEntity(this.transitioner,0,0,{alpha:1});}
this.transitioner.fadeToDeath();this.transitioner=undefined;}
if(this.camera){this.camera.ready();}
this.hasLevel=this.dirtyEntities=this.dirtyLights=true;}},unloadLevelDeferred:function(){this._levelNeedsUnload=true;},unloadLevel:function(){if(this.hasLevel){this.hasLevel=false;this._removeDeferredItems();this._addDeferredItems();this.resetLoadLevel();_pf.unload();if(this.camera){this.camera.reset();}
for(var i=0,il=this.layers.length;i<il;i++){this.layers[i].reset();}}},resetLoadLevel:function(){this._levelToLoad=this._levelToBuild=undefined;this._levelNeedsBuild=this._levelNeedsUnload=false;this._playerSpawnerName='';},createShapes:function(){var i,il,j,jl;var options,shapes;if(this.shapesPasses){for(i=0,il=this.shapesPasses.length;i<il;i++){options=this.shapesPasses[i];shapes=_utt.shapesFromCollisionMap(this.collisionMap,options);for(j=0,jl=shapes.solids.length;j<jl;j++){var shape=shapes.solids[j];this.spawnEntity(ig.EntityShapeSolid,shape.x,shape.y,shape.settings);}
for(j=0,jl=shapes.oneWays.length;j<jl;j++){var shape=shapes.oneWays[j];this.spawnEntity(ig.EntityShapeSolid,shape.x,shape.y,shape.settings);}
for(j=0,jl=shapes.climbables.length;j<jl;j++){var shape=shapes.climbables[j];this.spawnEntity((shape.settings.oneWay?ig.EntityShapeClimbableOneWay:ig.EntityShapeClimbable),shape.x,shape.y,shape.settings);}}}},addLayer:function(layer){this._layersToAdd.push(layer);return layer;},_addDeferredLayers:function(layers){layers=layers||this._layersToAdd;if(layers.length>0){for(var i=0,il=layers.length;i<il;i++){var layer=layers[i];if(this.layersMap[layer.name]!==layer){if(this.layersMap[layer.name]){this.removeLayer(this.layersMap[layer.name]);}
this.layersMap[layer.name]=layer;this.layers.push(layer);if(this.sortLayersBy){this.layers.sort(this.sortLayersBy);}}}
if(layers===this._layersToAdd){this._layersToAdd.length=0;}}},removeLayer:function(layer){this._layersToRemove.push(layer);},_removeDeferredLayers:function(layers){layers=layers||this._layersToRemove;if(layers.length>0){for(var i=0,il=layers.length;i<il;i++){var layer=layers[i];_ut.arrayCautiousRemove(this.layers,layer);if(this.layersMap[layer.name]===layer){delete this.layersMap[layer.name];}
layer.reset();}
if(layers===this._layersToRemove){this._layersToRemove.length=0;}}},changeLayer:function(layerName,settings){this._layersToChange.push({name:layerName,settings:settings});},_changeDeferredLayers:function(){if(this._layersToChange.length>0){for(var i=0,il=this._layersToChange.length;i<il;i++){var change=this._layersToChange[i];var layerName=change.name;var settings=change.settings;var layer=this.layersMap[layerName];if(layer){ig.merge(layer,settings);}}
this._layersToChange.length=0;}},spawnEntity:function(type,x,y,settings){var EntityClass=typeof type==='string'?ig[type]||ig.global[type]:type;if(!EntityClass){throw new Error("Can't spawn entity of type: "+type+". It does not exist in namespace 'ig' or 'ig.global'/'window'.");}
var entity;if(EntityClass instanceof ig.EntityExtended){entity=EntityClass;if(entity._layerNameAdd){return entity;}
entity.reset(x,y,settings);}
else{entity=new(EntityClass)(x,y,settings);}
if(entity.name){if(entity.persistent){if(this.persistentEntities[entity.name]instanceof ig.EntityExtended){entity=this.persistentEntities[entity.name];entity.reset(x,y,settings);}
else{this.persistentEntities[entity.name]=entity;}}
this.namedEntities[entity.name]=entity;}
if(_c.FORCE_ENTITY_EXTENDED&&!(entity instanceof ig.EntityExtended)){throw new Error("You are trying to spawn an entity that does not inherit or extend ig.EntityExtended. Although it is not recommended (seriously), if you wish to allow this, see ig.CONFIG.FORCE_ENTITY_EXTENDED.")}
this.addItem(entity);return entity;},removeEntity:function(entity,settings){if(entity instanceof ig.EntityExtended&&!entity._killed){this.flagAsKilled(entity);}
this.removeItem(entity,settings);},clearPersistentEntity:function(name){var entity=ig.game.persistentEntities[name];if(entity){if(entity.added){entity._cleanupPersistent=true;}
else{entity.cleanupPersistent();}
delete ig.game.persistentEntities[name];}},flagAsKilled:function(entity){if(entity.name)delete this.namedEntities[entity.name];entity._killed=true;entity.type=ig.EntityExtended.TYPE.NONE;entity.checkAgainst=ig.EntityExtended.TYPE.NONE;entity.collides=ig.EntityExtended.COLLIDES.NEVER;},addItem:function(item,settings){if(!item._killed){settings=settings||{};item._layerChange=settings.forChange||false;var layerNameAdd=settings.layerName||item.layerName||"entities";if(item._layerChange||!item._layerNameAdd){item._layerNameAdd=layerNameAdd;if(!this._levelBuilding){if(this.deferring){this._itemsToAdd.push(item);}
else{this._itemsToAddNext.push(item);}}
else{this._addDeferredItem(item);}}}},_addDeferredItems:function(){if(this._itemsToAdd.length>0){for(var i=0,il=this._itemsToAdd.length;i<il;i++){this._addDeferredItem(this._itemsToAdd[i]);}
this._itemsToAdd.length=0;}},_addDeferredItem:function(item){item.layerName=item._layerNameAdd;item._layerNameAdd=undefined;var layer=this.layersMap[item.layerName];if(!layer){throw new Error("Attempting to add item/entity to layer named "+item.layerName+" and that layer doesn't exist. Your item needs a 'layerName' property with a value matching one of the existing game layer names: ",this.layersMap);}
layer.addItem(item);item.added=true;if(!item._layerChange&&!this._levelBuilding){if(layer.paused){if(item.pause){item.pause();}}
else if(item.paused&&item.unpause){item.unpause();}
if(item.adding){item.adding();}}
item._layerChange=false;this.dirtyEntities=true;if(item instanceof ig.EntityLight){this.dirtyLights=true;}},removeItem:function(item,settings){settings=settings||{};item._layerNameRemove=settings.layerName||item.layerName;item._layerChange=settings.forChange||false;if(!item._layerChange){if(item.cleanup){item.cleanup();}}
item.added=false;if(!this._levelBuilding){if(item._layerNameAdd){item._layerNameAdd=undefined;_ut.arrayCautiousRemove(this._itemsToAddNext,item);_ut.arrayCautiousRemove(this._itemsToAdd,item);}
if(this.deferring){this._itemsToRemove.push(item);}
else{this._itemsToRemoveNext.push(item);}}
else{this._removeDeferredItem(item);}},_removeDeferredItems:function(){if(this._itemsToRemove.length>0){for(var i=0,il=this._itemsToRemove.length;i<il;i++){this._removeDeferredItem(this._itemsToRemove[i]);}
this._itemsToRemove.length=0;}},_removeDeferredItem:function(item){var layer=this.layersMap[item._layerNameRemove];item._layerNameRemove=undefined;if(layer){layer.removeItem(item);}
this.dirtyEntities=true;if(item instanceof ig.EntityLight){this.dirtyLights=true;}},_advanceDeferredNext:function(){if(this._itemsToAddNext.length>0){this._itemsToAdd=this._itemsToAddNext;this._itemsToAddNext=[];}
if(this._itemsToRemoveNext.length>0){this._itemsToRemove=this._itemsToRemoveNext;this._itemsToRemoveNext=[];}},layerChangeItem:function(item,layerName){if(item){if(!layerName&&item.resetState){layerName=item.resetState.layerName;}
if(layerName&&item.layerName!==layerName){this.removeItem(item,{layerName:item.layerName,forChange:true});this.addItem(item,{layerName:layerName,forChange:true});}}},sortEntities:function(layerName){if(typeof layerName==='string'){this.sortEntitiesOnLayer(this.layersMap[layerName]);}
else{for(var i=0,il=this.layers.length;i<il;i++){this.sortEntitiesOnLayer(this.layers[i]);}}},sortEntitiesOnLayer:function(layer){if(layer){layer.items.sort(layer.sortBy);}},sortEntitiesDeferred:function(layerName){if(typeof layerName==='string'){this.sortEntitiesOnLayerDeferred(this.layersMap[layerName]);}
else{for(var i=0,il=this.layers.length;i<il;i++){this.sortEntitiesOnLayerDeferred(this.layers[i]);}}},sortEntitiesOnLayerDeferred:function(layer){if(layer){layer._dirtySort=true;}},getPlayer:function(settings){return this.namedEntities["player"]||this.getEntitiesByClass("Player",settings||{first:true})[0]||this.getEntitiesByType(ig.EntityExtended.TYPE.PLAYER,settings||{first:true})[0];},getEntitiesByClass:function(cls,settings){var entityClass=typeof(cls)==='string'?ig.global[cls]:cls;if(entityClass){return this.getEntitiesMatching(function(entity){return entity instanceof entityClass;},settings);}
else{return[];}},getEntitiesByType:function(type,settings){var entityType=typeof(type)==='string'?_ut.getType(ig.EntityExtended,type):type;return this.getEntitiesMatching(function(entity){return entity.type&entityType;},settings);},getEntitiesByGroup:function(group,settings){var entityGroup=typeof(group)==='string'?_ut.getType(ig.EntityExtended,group):group;return this.getEntitiesMatching(function(entity){return entity.group&entityGroup;},settings);},getCharactersByGroup:function(group,settings){var entityGroup=typeof(group)==='string'?_ut.getType(ig.EntityExtended,group):group;return this.getEntitiesMatching(function(entity){return(entity.group&entityGroup)&&entity instanceof ig.Character;},settings);},getEntitiesMatching:function(matchBy,settings){var matching=[];var layer;var layerName;var unsorted;var byDistance;var lineOfSight;var from;var intersects;var minX;var minY;var maxX;var maxY;var first;var i,il;if(!settings||!settings.layerName){settings=settings||{};settings.unsorted=true;for(i=0,il=this.layers.length;i<il;i++){layer=this.layers[i];if(layer.numEntities){settings.layerName=layer.name;var layerMatching=this.getEntitiesMatching(matchBy,settings);if(layerMatching.length){matching=matching.concat(layerMatching);if(settings.first){break;}}}}}
else{if(settings){layerName=settings.layerName;unsorted=settings.unsorted;byDistance=settings.byDistance;lineOfSight=settings.lineOfSight;from=settings.from;first=settings.first;if(typeof settings.minX!=='undefined'){intersects=true;minX=settings.minX;minY=settings.minY;maxX=settings.maxX;maxY=settings.maxY;}}
layer=this.layersMap[layerName];if(layer){var items=layer.items;for(i=0,il=items.length;i<il;i++){var item=items[i];if(!item._killed&&matchBy(item)&&(!intersects||_uti.AABBIntersect(minX,minY,maxX,maxY,item.pos.x,item.pos.y,item.pos.x+item.width,item.pos.y+item.height))&&(!lineOfSight||from.lineOfSight(item))){matching.push(item);if(first){break;}}}}}
if(matching.length>1&&!unsorted){if(byDistance){if(from instanceof ig.EntityExtended){_uti.sortByDistance(from.pos.x+from.width*0.5,from.pos.y+from.height*0.5,matching);}
else{_uti.sortByDistance(from.x,from.y,matching);}}
else{matching.sort(this.sortBy);}}
return matching;},getMapByName:function(name){var i,il,j,jl,items,layer;if(name==='collision'){return this.collisionMap;}
for(i=0,il=this.layers.length;i<il;i++){layer=this.layers[i];items=layer.items;if(layer.numBackgroundMaps){for(j=0,jl=items.length;j<jl;j++){var item=items[j];if(item.name===name){return item;}}}}},pause:function(lock){if(!this.pauseLocked&&!this._levelBuilding){for(var i=0,il=this.layers.length;i<il;i++){this.layers[i].pause();}
if(!this.paused){this.paused=this.camera.paused=true;this.pauseLocked=lock;if(!this.pauseLocked&&_c.DIMMED_PAUSE){if(!this.dimmer){this.dimmer=this.spawnEntity(ig.UIOverlayPause,0,0,{fillStyle:_c.DIMMER_COLOR,r:_c.DIMMER_R,g:_c.DIMMER_G,b:_c.DIMMER_B,alpha:0});}
this.dimmer.fadeTo(_c.DIMMER_ALPHA);}
this.onPaused.dispatch(this);}}},unpause:function(unlock){if(unlock){this.pauseLocked=false;}
if(!this.pauseLocked&&!this._levelBuilding){for(var i=0,il=this.layers.length;i<il;i++){this.layers[i].unpause();}
if(this.paused){this.paused=this.camera.paused=false;if(this.dimmer){this.dimmer.fadeToDeath();this.dimmer=undefined;}
this.onUnpaused.dispatch(this);}}},inputStart:function(){ig.input.bind(ig.KEY.MOUSE1,'touch');ig.input.bind(ig.KEY.MOUSE2,'touch');ig.input.bind(ig.KEY.TAP,'tap');ig.input.bind(ig.KEY.TAP_DOUBLE,'tapDouble');ig.input.bind(ig.KEY.HOLD,'hold');ig.input.bind(ig.KEY.HOLD_ACTIVATE,'holdActivate');ig.input.bind(ig.KEY.SWIPE,'swipe');ig.input.bind(ig.KEY.SWIPE_X,'swipeX');ig.input.bind(ig.KEY.SWIPE_Y,'swipeY');ig.input.bind(ig.KEY.SWIPE_LEFT,'swipeLeft');ig.input.bind(ig.KEY.SWIPE_RIGHT,'swipeRight');ig.input.bind(ig.KEY.SWIPE_UP,'swipeUp');ig.input.bind(ig.KEY.SWIPE_DOWN,'swipeDown');ig.input.bind(ig.KEY.LEFT_ARROW,'left');ig.input.bind(ig.KEY.RIGHT_ARROW,'right');ig.input.bind(ig.KEY.UP_ARROW,'up');ig.input.bind(ig.KEY.DOWN_ARROW,'down');ig.input.bind(ig.KEY.A,'left');ig.input.bind(ig.KEY.D,'right');ig.input.bind(ig.KEY.W,'up');ig.input.bind(ig.KEY.S,'down');ig.input.bind(ig.KEY.SPACE,'jump');},inputEnd:function(){ig.input.unbind(ig.KEY.MOUSE1,'touch');ig.input.unbind(ig.KEY.MOUSE2,'touch');ig.input.unbind(ig.KEY.TAP,'tap');ig.input.unbind(ig.KEY.TAP_DOUBLE,'tapDouble');ig.input.unbind(ig.KEY.HOLD,'hold');ig.input.unbind(ig.KEY.HOLD_ACTIVATE,'holdActivate');ig.input.unbind(ig.KEY.SWIPE,'swipe');ig.input.unbind(ig.KEY.SWIPE_X,'swipeX');ig.input.unbind(ig.KEY.SWIPE_Y,'swipeY');ig.input.unbind(ig.KEY.SWIPE_LEFT,'swipeLeft');ig.input.unbind(ig.KEY.SWIPE_RIGHT,'swipeRight');ig.input.unbind(ig.KEY.SWIPE_UP,'swipeUp');ig.input.unbind(ig.KEY.SWIPE_DOWN,'swipeDown');ig.input.unbind(ig.KEY.LEFT_ARROW,'left');ig.input.unbind(ig.KEY.RIGHT_ARROW,'right');ig.input.unbind(ig.KEY.UP_ARROW,'up');ig.input.unbind(ig.KEY.DOWN_ARROW,'down');ig.input.unbind(ig.KEY.A,'left');ig.input.unbind(ig.KEY.D,'right');ig.input.unbind(ig.KEY.W,'up');ig.input.unbind(ig.KEY.S,'down');ig.input.unbind(ig.KEY.SPACE,'jump');},respondInput:function(){var i,il;var j,jl;var inputPoints;var inputPoint;var targets;var target;if(ig.input.released('tap')){inputPoints=ig.input.getInputPoints(['tapped'],[true]);for(i=0,il=inputPoints.length;i<il;i++){inputPoint=inputPoints[i];targets=inputPoint.targets;if(targets.length>0){for(j=0,jl=targets.length;j<jl;j++){target=targets[j];if(target.type&ig.EntityExtended.TYPE.UI&&target.fixed){target.toggleActivate();break;}}}}}},update:function(){var i,il;var layer;this.deferring=false;this._removeDeferredLayers();this._addDeferredLayers();this._changeDeferredLayers();this._removeDeferredItems();this._addDeferredItems();this._advanceDeferredNext();if(this._levelToLoad){this.loadLevel();}
else if(this._levelNeedsBuild){this.buildLevel();}
else if(this._levelNeedsUnload){this.unloadLevel();}
this.deferring=true;if(this.dirtyEntities!==false){this.entities.length=this.lights.length=0;for(i=0,il=this.layers.length;i<il;i++){layer=this.layers[i];if(layer.numEntities&&layer.items.length>0){this.entities=this.entities.concat(layer.items);this.lights=this.lights.concat(layer.itemsLight);}}}
ig.input.update();this.respondInput();ig.TWEEN.update();this.changed=this.changedLights=false;for(i=0,il=this.layers.length;i<il;i++){var layer=this.layers[i];layer.update();this.changed|=layer.changed;this.changedLights|=layer.changedLights;}
for(var tileset in this.backgroundAnims){var anims=this.backgroundAnims[tileset];for(i in anims){anims[i].update();}}
this.camera.update();this.dirtyEntities=this.dirtyLights=false;},updateEntities:function(layerName){var layer=this.layersMap[layerName];if(layer){var items=layer.items;for(var i=0,il=items.length;i<il;i++){var item=items[i];if(!item._killed){item.update();}}}},draw:function(){if(this.clearColor){ig.system.clear(this.clearColor);}
this._rscreen.x=ig.system.getDrawPos(this.screen.x)/ig.system.scale;this._rscreen.y=ig.system.getDrawPos(this.screen.y)/ig.system.scale;for(var i=0,il=this.layers.length;i<il;i++){this.layers[i].draw();}},drawEntities:function(layerName){var layer=this.layersMap[layerName];if(layer){var entities=layer.items;for(var i=0,il=entities.length;i<il;i++){entities[i].draw();}}},resize:function(){var width=_c.GAME_WIDTH_PCT?ig.global.innerWidth*_c.GAME_WIDTH_PCT:_c.GAME_WIDTH;var height=_c.GAME_HEIGHT_PCT?ig.global.innerHeight*_c.GAME_HEIGHT_PCT:_c.GAME_HEIGHT;var scale=_c.SCALE;if(_c.GAME_WIDTH_VIEW||_c.GAME_HEIGHT_VIEW){var viewWidth=_c.GAME_WIDTH_VIEW||1;var viewHeight=_c.GAME_HEIGHT_VIEW||1;scale=Math.floor(Math.max(Math.min(width/viewWidth,height/viewHeight),1));}
var scaleReciprocal=1/scale;ig.system.resize(width*scaleReciprocal,height*scaleReciprocal,scale);if(this.camera){this.camera.getBoundsLevel();}}});});

// lib/plusplus/core/plusplus.js
ig.baked=true;ig.module('plusplus.core.plusplus').requires('plusplus.core.config','plusplus.core.loader','plusplus.core.game','plusplus.helpers.signals').defines(function(){"use strict";var _c=ig.CONFIG;ig.System.inject({size:240,onResized:null,init:function(canvasId,fps,width,height,scale){var scaleMode;if(this.scale!==1&&!_c.AUTO_CRISP_SCALING){scaleMode=ig.System.scaleMode;}
this.onResized=new ig.Signal();this.parent(canvasId,fps,width,height,scale);if(ig.System.scaleMode!==scaleMode&&this.scale!==1&&!_c.AUTO_CRISP_SCALING){ig.System.scaleMode=scaleMode;ig.System.scaleMode(this.canvas,this.context);}},run:function(){ig.Timer.step();if(ig.Timer.stepped){this.tick=this.clock.tick();this.delegate.run();ig.input.clearPressed();if(this.newGameClass){this.setGameNow(this.newGameClass);this.newGameClass=null;}}},resize:function(width,height,scale){this.parent(width,height,scale);this.size=Math.min(this.width,this.height);if(this.scale!==1&&_c.AUTO_CRISP_SCALING){ig.System.scaleMode=ig.System.SCALE.CRISP;}
if(this.canvas&&this.context){ig.System.scaleMode(this.canvas,this.context);}
this.onResized.dispatch();}});});

// lib/game/entities/title-alt.js
ig.baked=true;ig.module('game.entities.title-alt').requires('plusplus.core.config','plusplus.core.entity').defines(function(){"use strict";var _c=ig.CONFIG;ig.EntityTitleAlt=ig.global.EntityTitleAlt=ig.EntityExtended.extend({size:{x:256,y:44},animSheet:new ig.AnimationSheet(_c.PATH_TO_MEDIA+'title_alt.png',256,44),animInit:"blinkX",animSettings:{idleX:{sequence:[3],frameTime:1,stop:true},blinkX:{sequence:[0,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,0,0,0,0,0,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,0,1,2,1,0,0,0,0,0],frameTime:0.05}},activate:function(entity){this.parent(entity);this.currentAnim=this.anims["idleX"];}});});

// lib/plusplus/entities/void.js
ig.baked=true;ig.module('plusplus.entities.void').requires('plusplus.core.entity').defines(function(){ig.EntityVoid=ig.global.EntityVoid=ig.EntityExtended.extend({_wmScalable:true,_wmDrawBox:true,_wmBoxColor:'rgba(100, 100, 100, 0.7)',update:function(){}});});

// lib/plusplus/entities/trigger-input.js
ig.baked=true;ig.module('plusplus.entities.trigger-input').requires('plusplus.core.input','plusplus.entities.trigger').defines(function(){"use strict";ig.EntityTriggerInput=ig.global.EntityTriggerInput=ig.EntityTrigger.extend({action:'',triggerable:false,update:function(){if(!this._killed&&this.action&&(ig.input.pressed(this.action)||ig.input.released(this.action))){this.trigger(this);}
this.parent();}});});

// lib/plusplus/core/hierarchy.js
ig.baked=true;ig.module('plusplus.core.hierarchy').requires('plusplus.helpers.utils').defines(function(){"use strict";var _ut=ig.utils;var count=0;ig.Hierarchy=ig.Class.extend({id:count++,name:'',descendants:[],descendantsMap:{},ancestor:null,init:function(settings){this.id=count++;ig.merge(this,settings);},setAncestor:function(ancestor){this.ancestor=ancestor;},setName:function(name){if(this.name!==name){if(this.ancestor instanceof ig.Hierarchy){this.ancestor.unmapDescendant(this);}
this.name=name;if(this.ancestor instanceof ig.Hierarchy){this.ancestor.mapDescendant(this);}}},setFallback:function(fallback){this.fallback=fallback;},addDescendants:function(adding){adding=_ut.toArray(adding);for(var i=0,il=adding.length;i<il;i++){this.addDescendant(adding[i]);}},addDescendant:function(adding){if(adding instanceof ig.Hierarchy){if(this.isAncestor(adding)===true){return;}
if(adding.ancestor!==undefined){adding.ancestor.removeDescendant(adding);}
adding.setAncestor(this);}
this.mapDescendant(adding);this.descendants.push(adding);},removeDescendants:function(removing){removing=_ut.toArray(removing);for(var i=0,il=removing.length;i<il;i++){this.removeDescendant(removing[i]);}},removeDescendant:function(removing){var index=_ut.indexOfValue(this.descendants,removing);if(index!==-1){if(removing instanceof ig.Hierarchy){removing.setAncestor();}
this.descendants.splice(index,1);this.unmapDescendant(removing);}
else{for(var i=0,il=this.descendants.length;i<il;i++){var descendant=this.descendants[i]
if(descendant instanceof ig.Hierarchy){descendant.removeDescendant(removing);}}}},clearDescendants:function(){for(var i=this.descendants.length-1;i>=0;i--){var descendant=this.descendants[i];if(descendant instanceof ig.Hierarchy){descendant.setAncestor();}
this.descendants.length--;this.unmapDescendant(descendant);}},mapDescendant:function(descendant){if(descendant.name){var existing=this.descendantsMap[descendant.name];if(existing instanceof ig.Hierarchy){existing.ancestor.removeDescendant(existing);}
this.descendantsMap[descendant.name]=descendant;}},unmapDescendant:function(descendant){if(descendant.name){var mapped=this.descendantsMap[descendant.name];if(descendant===mapped){delete this.descendantsMap[descendant.name];}}},getDescendantByName:function(name,recursive){var named=this._getDescendantByName(name,recursive);if(!named&&this.fallback){named=this.fallback._getDescendantByName(name,recursive);}
return named;},_getDescendantByName:function(name,recursive){var named=this.descendantsMap[name];if(recursive===true&&!named){for(var i=0,il=this.descendants.length;i<il;i++){var descendant=this.descendants[i];if(descendant instanceof ig.Hierarchy){named=descendant.getDescendantByName(name,recursive);if(named){break;}}}}
return named;},getDescendantsByType:function(type,recursive){var matching=this._getDescendantsByType(type,recursive,[]);if(!matching.length&&this.fallback){matching=this.fallback._getDescendantsByType(type,recursive,matching);}
return matching;},_getDescendantsByType:function(type,recursive,matching){for(var i=0,il=this.descendants.length;i<il;i++){var descendant=this.descendants[i];if(descendant.type&type){matching.push(descendant);}
if(recursive===true&&descendant instanceof ig.Hierarchy){descendant._getDescendantsByType(name,recursive,matching);}}
return matching;},getDescendants:function(array){array=_ut.toArray(array).concat(this.descendants);for(var i=0,il=this.descendants.length;i<il;i++){var descendant=this.descendants[i];if(descendant instanceof ig.Hierarchy){array=descendant.getDescendants(array);}}
return array;},getRoot:function(){var ancestor=this;var root;while(ancestor){root=ancestor;ancestor=ancestor.ancestor;}
return root;},isAncestor:function(target){var ancestor=this.ancestor;while(ancestor){if(ancestor===target){return true;}
ancestor=ancestor.ancestor;}
return false;},forAll:function(callback){var args=Array.prototype.slice.call(arguments,1);callback.apply(this,args);this.forAllDescendants.apply(this,arguments);},forAllDescendants:function(callback){var args=Array.prototype.slice.call(arguments,1);for(var i=0,il=this.descendants.length;i<il;i++){var descendant=this.descendants[i];callback.apply(descendant,args);if(descendant instanceof ig.Hierarchy){descendant.forAllDescendants.apply(descendant,arguments);}}},forAllWithCallback:function(callbackName){var callback=this[callbackName];if(typeof callback==='function'){var args=Array.prototype.slice.call(arguments,1);callback.apply(this,args);}
this.forAllDescendantsWithCallback.apply(this,arguments);},forAllDescendantsWithCallback:function(callbackName){var args=Array.prototype.slice.call(arguments,1);for(var i=0,il=this.descendants.length;i<il;i++){var descendant=this.descendants[i];var callback=descendant[callbackName];if(typeof callback==='function'){callback.apply(descendant,args);}
if(descendant instanceof ig.Hierarchy){descendant.forAllWithCallback.apply(descendant,arguments);}}},forImmediate:function(callback){var args=Array.prototype.slice.call(arguments,1);callback.apply(this,args);for(var i=0,il=this.descendants.length;i<il;i++){callback.apply(this.descendants[i],args);}},forImmediateWithCallback:function(callbackName){var callback=this[callbackName];if(typeof callback==='function'){var args=Array.prototype.slice.call(arguments,1);callback.apply(this,args);}
for(var i=0,il=this.descendants.length;i<il;i++){var descendant=this.descendants[i];callback=descendant[callbackName];if(typeof callback==='function'){callback.apply(descendant,args);}}},update:function(){for(var i=0,il=this.descendants.length;i<il;i++){var descendant=this.descendants[i];if(descendant.update){descendant.update();}}
if(this.fallback){this.fallback.update();}},cleanup:function(){for(var i=0,il=this.descendants.length;i<il;i++){var descendant=this.descendants[i];if(descendant.cleanup){descendant.cleanup();}}
if(this.fallback){this.fallback.cleanup();}},clone:function(c){if(c instanceof ig.Hierarchy!==true){c=new ig.Hierarchy();}
c.name=this.name;for(var i=0,il=this.descendants.length;i<il;i++){var descendant=this.descendants[i];if(typeof descendant.clone==='function'){c.addDescendant(descendant.clone());}}
return c;}});});

// lib/plusplus/abstractities/spawner-fast.js
ig.baked=true;ig.module('plusplus.abstractities.spawner-fast').requires('plusplus.abstractities.spawner','plusplus.helpers.utils').defines(function(){var _ut=ig.utils;ig.SpawnerFast=ig.global.SpawnerFast=ig.Spawner.extend({spawnNext:function(entity){if(this.pool.length>0){entity=this.pool.pop();if(entity){entity=ig.game.spawnEntity(entity,0,0,this.spawnSettings);this.entities.push(entity);}}
else if(this.spawningEntity&&this.spawnedCount<this.spawnCountMax){entity=ig.game.spawnEntity(this.spawningEntity,0,0,this.spawnSettings);this.entities.push(entity);this.linkSpawned(entity);}
if(entity){this.spawnCount=Math.min(this.spawnCountMax,this.spawnCount+1);this.spawnedCount=Math.min(this.spawnCountMax,this.spawnedCount+1);this.spawned(entity);}
return entity;},unspawn:function(entity){if(!entity._killed){entity.kill(true);}
else{this.spawnCount=Math.max(0,this.spawnCount-1);_ut.arrayCautiousRemove(this.entities,entity);this.pool.push(entity);if(this.activated&&this.duration===-1&&!this.spawning&&(this.spawnDelay>0||this.spawnCount===0)){this.spawnedCount=this.spawnCount;this.respawnTimer.set(this.respawnDelay);this._reactivate=true;}}},spawned:function(entity){var width=entity.size.x;var height=entity.size.y;var spawnAtWidth=this.size.x;var spawnAtHeight=this.size.y;var spawnAtMinX=this.pos.x;var spawnAtMinY=this.pos.y;var spawnAtMaxX=spawnAtMinX+spawnAtWidth;var spawnAtMaxY=spawnAtMinY+spawnAtHeight;entity.pos.x=Math.random().map(0,1,spawnAtMinX,spawnAtMaxX-width)-width*0.5;entity.pos.y=Math.random().map(0,1,spawnAtMinY,spawnAtMaxY-height)-height*0.5;}});});

// lib/plusplus/abstractities/particle.js
ig.baked=true;ig.module('plusplus.abstractities.particle').requires('plusplus.core.config','plusplus.core.timer','plusplus.core.entity','plusplus.helpers.utilsvector2').defines(function(){"use strict";var _c=ig.CONFIG;var _utv2=ig.utilsvector2;ig.Particle=ig.EntityExtended.extend({animAutomatic:_c.PARTICLE.ANIM_AUTOMATIC,animsExpected:["move"],zIndex:_c.Z_INDEX_ABOVE_ALL,performance:_c.DYNAMIC,size:_utv2.vector(1,1),maxVel:_utv2.vector(150,150),friction:_utv2.vector(20,0),minBounceVelocity:0,bounciness:0.6,lifeDuration:1,fadeAfterSpawnDuration:0,fadeBeforeDeathDuration:0.5,collisionKills:false,collisionSticky:false,randomVel:true,randomDoubleVel:true,randomFlip:true,lifeTimer:null,_fadeAfterInv:0,_fadeBeforeDiff:0,_fadeBeforeInv:0,initProperties:function(){this.parent();this.lifeTimer=new ig.TimerExtended(0,this);},resetExtras:function(){this.parent();if(this.animAutomatic&&!this._animsPlaceheld){this._animsPlaceheld=true;this.placeholdAnims();}
if(this.fadeAfterSpawnDuration){this._fadeAfterInv=1/(this.fadeAfterSpawnDuration);}
if(this.fadeBeforeDeathDuration){this._fadeBeforeInv=1/(this.fadeBeforeDeathDuration);this._fadeBeforeDiff=this.lifeDuration-this.fadeBeforeDeathDuration;}},placeholdAnims:function(){if(this.animsExpected.length>0){var anims=this.anims;var animInitPlaceholder;if(this.animInit instanceof ig.Animation){animInitPlaceholder=animInit;}
else if(this.animInit&&anims[this.animInit]){animInitPlaceholder=anims[this.animInit];}
else{animInitPlaceholder=anims['idle']||this.currentAnim;}
for(var i=0,il=this.animsExpected.length;i<il;i++){var animName=this.animsExpected[i];var animPlaceholder=anims[animName]||animInitPlaceholder;if(animPlaceholder){if(!anims[animName+"X"]){anims[animName+"X"]=animPlaceholder;}
if(!anims[animName+"Right"]){anims[animName+"Right"]=anims[animName+"X"];}
if(!anims[animName+"Left"]){anims[animName+"Left"]=anims[animName+"X"];}
if(!anims[animName+"Y"]){anims[animName+"Y"]=animPlaceholder;}
if(!anims[animName+"Down"]){anims[animName+"Down"]=anims[animName+"Y"];}
if(!anims[animName+"Up"]){anims[animName+"Up"]=anims[animName+"Y"];}}}}},ready:function(){this.lifeTimer.set(this.lifeDuration);if(this.randomVel){if(this.randomDoubleVel){this.vel.x=(Math.random()*2-1)*this.vel.x;this.vel.y=(Math.random()*2-1)*this.vel.y;}
else{this.vel.x*=Math.random();this.vel.y*=Math.random();}}
if(this.currentAnim){if(this.randomFlip){this.flip.x=(Math.random()>0.5);this.flip.y=(Math.random()>0.5);}
else{if(this.canFlipX){this.flip.x=this.vel.x<0?true:false;}
if(this.canFlipY){this.flip.y=this.vel.y<0?true:false;}}}
this.parent();},collideWith:function(entity,dirX,dirY,nudge,vel,weak){this.parent(entity,dirX,dirY,nudge,vel,weak);if(this.collisionKills){this.kill();}
else if(this.collisionSticky&&!(entity instanceof ig.Particle)){this.collides=ig.EntityExtended.COLLIDES.NEVER;this.performance=_c.MOVABLE;this.moveTo(entity,{offset:{x:(this.pos.x+this.size.x*0.5)-(entity.pos.x+entity.size.x*0.5),y:(this.pos.y+this.size.y*0.5)-(entity.pos.y+entity.size.y*0.5)}});}},handleMovementTrace:function(res){this.parent(res);if(this.collidingWithMap){if(this.collisionKills){this.kill();}
else if(this.collisionSticky){this.collides=ig.EntityExtended.COLLIDES.NEVER;this.performance=_c.STATIC;}}},update:function(){var delta=this.lifeTimer.delta();if(delta>=0){this.kill();}
else{var deltaInv=delta+this.lifeDuration;this.alpha=(this.fadeAfterSpawnDuration!==0?Math.min(1,deltaInv*this._fadeAfterInv):1)-(this.fadeBeforeDeathDuration!==0?Math.max(0,(deltaInv-this._fadeBeforeDiff)*this._fadeBeforeInv):0);}
this.parent();},recordChanges:function(force){this.parent(force);if(this.changed){if(_c.TOP_DOWN||this.canFlipY){if(this.movingX){this.facing.x=this.vel.x<0?-1:1;if(this.movingY){this.facing.y=this.vel.y<0?-1:1;}
else{this.facing.y=0;}}
else if(this.movingY){this.facing.x=0;this.facing.y=this.vel.y<0?-1:1;}}
else if(this.movingX){this.facing.x=this.vel.x<0?-1:1;}}},updateVisible:function(){if(this.animAutomatic&&!this._killed){this.updateCurrentAnim();}
this.parent();},updateCurrentAnim:function(){if(this.performance===_c.DYNAMIC){this.currentAnim=this.anims[this.getDirectionalAnimName("move")];}}});});

// lib/plusplus/abstractities/particle-fast.js
ig.baked=true;ig.module('plusplus.abstractities.particle-fast').requires('plusplus.core.config','plusplus.abstractities.particle').defines(function(){"use strict";var _c=ig.CONFIG;ig.ParticleFast=ig.Particle.extend({type:ig.EntityExtended.TYPE.NONE,collides:ig.EntityExtended.COLLIDES.NEVER,checkAgainst:ig.EntityExtended.TYPE.NONE,performance:_c.DYNAMIC,highPerformance:true,init:function(x,y,settings){this.id=++ig.Entity._lastId;this.initProperties();this.reset(x,y,settings);},reset:function(x,y,settings){this.pos.x=x;this.pos.y=y;this.posDraw=this.pos;this.sizeDraw=this.size;ig.merge(this,settings);this._killed=false;this.changed=true;this.moving=this.movingX=this.movingY=true;if(!this.ignoreSystemScale&&this.scale!==ig.system.scale){this.scale=ig.system.scale;}
this.scaleMod=this.scale/ig.system.scale;if(this.fadeAfterSpawnDuration){this._fadeAfterInv=1/(this.fadeAfterSpawnDuration);}
if(this.fadeBeforeDeathDuration){this._fadeBeforeInv=1/(this.fadeBeforeDeathDuration);this._fadeBeforeDiff=this.lifeDuration-this.fadeBeforeDeathDuration;}},refresh:function(){},resetCore:function(){},resetExtras:function(){},recordResetState:function(){},ready:function(){this.lifeTimer.set(this.lifeDuration);if(this.randomVel){if(this.randomDoubleVel){this.vel.x=(Math.random()*2-1)*this.vel.x;this.vel.y=(Math.random()*2-1)*this.vel.y;}
else{this.vel.x*=Math.random();this.vel.y*=Math.random();}}
if(this.currentAnim){if(this.randomFlip){this.flip.x=(Math.random()>0.5);this.flip.y=(Math.random()>0.5);}
else{if(this.canFlipX){this.flip.x=this.vel.x<0?true:false;}
if(this.canFlipY){this.flip.y=this.vel.y<0?true:false;}}}},spawn:function(){},tween:function(){throw new Error("Attempting to TWEEN fast particle but fast particle does not tween!");},collideWith:function(){throw new Error("Attempting to COLLIDE fast particle but fast particle does not collide!");},handleMovementTrace:function(){throw new Error("Attempting to TRACE COLLISION MAP fast particle but fast particle ignore collision map!");},kill:function(){if(!this._killed){ig.game.removeEntity(this);}},die:function(){},cleanup:function(){this.moveToStop();this.onRemoved.dispatch(this);if(!ig.game.hasLevel){this.onAdded.removeAll();this.onAdded.forget();this.onRemoved.removeAll();this.onRemoved.forget();this.onPaused.removeAll();this.onPaused.forget();this.onUnpaused.removeAll();this.onUnpaused.forget();this.onMovedTo.removeAll();this.onMovedTo.forget();this.onRefreshed.removeAll();this.onRefreshed.forget();this.currentAnim.onCompleted.removeAll();this.currentAnim.onCompleted.forget();}},update:function(){if(!this.paused){if(!this._killed){var delta=this.lifeTimer.delta();if(delta>=0){return this.kill();}
else{var deltaInv=delta+this.lifeDuration;this.alpha=(this.fadeAfterSpawnDuration!==0?Math.min(1,deltaInv*this._fadeAfterInv):1)-(this.fadeBeforeDeathDuration!==0?Math.max(0,(deltaInv-this._fadeBeforeDiff)*this._fadeBeforeInv):0);}
if(this.movingTo){this.moveToUpdate();}
else{this.pos.x+=this.vel.x*ig.system.tick;this.pos.y+=this.vel.y*ig.system.tick;}
if(this.getIsVisible()){this.visible=true;this.currentAnim.update();}
else{this.visible=false;}}}
else if(ig.game.camera&&!ig.game.camera.paused){this.visible=this.getIsVisible();}},getIsVisible:function(){if(this.alpha<=0)return false;else{var minX=this.posDraw.x-ig.game.screen.x;var minY=this.posDraw.y-ig.game.screen.y;if(minX<0||minY<0||minX+this.sizeDraw.x>ig.system.width||minY+this.sizeDraw.y>ig.system.height)return false;}
return true;},recordChanges:function(){throw new Error("Attempting to RECORD CHANGES in fast particle but fast particle is always changed!");},recordLast:function(){throw new Error("Attempting to RECORD LAST of fast particle but fast particle doesn't record last!");},updateBounds:function(){throw new Error("Attempting to UPDATE BOUNDS of fast particle but fast particle does not update bounds!");},draw:function(){if(this.visible){var anim=this.currentAnim;var sheet=anim.sheet;var image=sheet.image;if(image.loaded){if(image._scale!==this.scale){image.resize(this.scale);}
var scale=this.scale;var tileWidth=sheet.width;var tileHeight=sheet.height;var tileWidthScaled=Math.floor(tileWidth*scale);var tileHeightScaled=Math.floor(tileHeight*scale);if(this.alpha!==1){ig.system.context.globalAlpha=this.alpha;ig.system.context.drawImage(image.data,(Math.floor(anim.tile*tileWidth)%image.width)*scale,(Math.floor(anim.tile*tileWidth/image.width)*tileHeight)*scale,tileWidthScaled,tileHeightScaled,ig.system.getDrawPos(this.posDraw.x-ig.game.screen.x),ig.system.getDrawPos(this.posDraw.y-ig.game.screen.y),tileWidthScaled,tileHeightScaled);ig.system.context.globalAlpha=1;}
else{ig.system.context.drawImage(image.data,(Math.floor(anim.tile*tileWidth)%image.width)*scale,(Math.floor(anim.tile*tileWidth/image.width)*tileHeight)*scale,tileWidthScaled,tileHeightScaled,ig.system.getDrawPos(this.posDraw.x-ig.game.screen.x),ig.system.getDrawPos(this.posDraw.y-ig.game.screen.y),tileWidthScaled,tileHeightScaled);}
ig.Image.drawCount++;}}}});});

// lib/plusplus/entities/particle-color.js
ig.baked=true;ig.module('plusplus.entities.particle-color').requires('plusplus.core.config','plusplus.abstractities.particle-fast','plusplus.helpers.utilsvector2').defines(function(){"use strict";var _c=ig.CONFIG;var _utv2=ig.utilsvector2;ig.EntityParticleColor=ig.global.EntityParticleColor=ig.ParticleFast.extend({size:_utv2.vector(2,2),animSheet:new ig.AnimationSheet(_c.PATH_TO_MEDIA+'particles.png',2,2),animTileOffset:0,animSequenceCount:7,vel:_utv2.vector(50,50),lifeDuration:0.35,fadeBeforeDeathDuration:0.15,_animTileOffsetLast:-1,reset:function(x,y,settings){this.parent(x,y,settings);if(this._animTileOffsetLast!==this.animTileOffset){this._animTileOffsetLast=this.animTileOffset;this.addAnim("move",{sequence:[Math.round(Math.random()*this.animSequenceCount)+(this.animTileOffset*(this.animSequenceCount+1))],frameTime:1,stop:true});}}});ig.EntityParticleColor.colorOffsets={RED:0,YELLOW:4,GREEN:8,BLUE:12,PURPLE:16,BROWN:20,GRAY:24,WHITE:28};});

// lib/plusplus/entities/explosion.js
ig.baked=true;ig.module('plusplus.entities.explosion').requires('plusplus.abstractities.spawner-fast','plusplus.entities.particle-color','plusplus.helpers.utilsvector2').defines(function(){var _utv2=ig.utilsvector2;ig.EntityExplosion=ig.global.EntityExplosion=ig.SpawnerFast.extend({spawningEntity:ig.EntityParticleColor,spawnCountMax:3,spawnSettings:{vel:_utv2.vector(100,100),animTileOffset:ig.EntityParticleColor.colorOffsets.YELLOW},activated:true});});

// lib/plusplus/abstractities/character.js
ig.baked=true;ig.module('plusplus.abstractities.character').requires('plusplus.core.config','plusplus.core.timer','plusplus.core.entity','plusplus.core.hierarchy','plusplus.entities.explosion','plusplus.helpers.utils','plusplus.helpers.utilsintersection','plusplus.helpers.utilsvector2','plusplus.helpers.tweens','plusplus.helpers.pathfinding').defines(function(){"use strict";var _c=ig.CONFIG;var _ut=ig.utils;var _uti=ig.utilsintersection;var _utv2=ig.utilsvector2;var _pf=ig.pathfinding;ig.Character=ig.EntityExtended.extend({performance:_c.MOVABLE,targetable:true,animAutomatic:_c.CHARACTER.ANIM_AUTOMATIC,animsExpected:["idle","move","stairs","climb","jump","fall"],size:_utv2.vector(_c.CHARACTER.SIZE_EFFECTIVE_X,_c.CHARACTER.SIZE_EFFECTIVE_Y),offset:_utv2.vector(_c.CHARACTER.SIZE_OFFSET_X,_c.CHARACTER.SIZE_OFFSET_Y),maxVelUngrounded:_utv2.vector(_c.CHARACTER.MAX_VEL_UNGROUNDED_X,_c.CHARACTER.MAX_VEL_UNGROUNDED_Y),maxVelGrounded:_utv2.vector(_c.CHARACTER.MAX_VEL_GROUNDED_X,_c.CHARACTER.MAX_VEL_GROUNDED_Y),maxVelClimbing:_utv2.vector(_c.CHARACTER.MAX_VEL_CLIMBING_X,_c.CHARACTER.MAX_VEL_CLIMBING_Y),frictionUngrounded:_utv2.vector(_c.CHARACTER.FRICTION_UNGROUNDED_X,_c.CHARACTER.FRICTION_UNGROUNDED_Y),frictionGrounded:_utv2.vector(_c.CHARACTER.FRICTION_GROUNDED_X,_c.CHARACTER.FRICTION_GROUNDED_Y),speed:_utv2.vector(_c.CHARACTER.SPEED_X,_c.CHARACTER.SPEED_Y),canJump:_c.CHARACTER.CAN_JUMP&&!_c.TOP_DOWN,jumpSteps:_c.CHARACTER.JUMP_STEPS,jumpForce:_c.CHARACTER.JUMP_FORCE,jumpControl:_c.CHARACTER.JUMP_CONTROL,canClimb:_c.CHARACTER.CAN_CLIMB&&!_c.TOP_DOWN,climbingControl:_c.CHARACTER.CLIMBING_CONTROL,movingFrom:false,moveToUnsafe:false,canPathfind:_c.CHARACTER.CAN_PATHFIND,path:[],pathfindingDelay:_c.CHARACTER.PATHFINDING_DELAY,pathfindingUpdateDelay:_c.CHARACTER.PATHFINDING_UPDATE_DELAY,pathfindingSimpleDelay:_c.CHARACTER.PATHFINDING_SIMPLE_DELAY,pathingTimer:null,stuck:false,stuckDelay:_c.CHARACTER.STUCK_DELAY,stuckTimer:null,health:_c.CHARACTER.HEALTH,healthMax:_c.CHARACTER.HEALTH,energy:_c.CHARACTER.ENERGY,energyMax:_c.CHARACTER.ENERGY,damageDelay:0,damageTimer:null,temporaryInvulnerabilityPulses:2,temporaryInvulnerabilityAlpha:0.5,regen:false,regenDelay:0,regenTimer:null,regenRateHealth:_c.CHARACTER.REGEN_RATE_HEALTH,regenAsPctHealth:false,regenRateEnergy:_c.CHARACTER.REGEN_RATE_ENERGY,regenAsPctEnergy:false,regenHealth:true,regenEnergy:true,mimicLevel:_c.RANKS_MAP.NONE,explodingDamage:_c.CHARACTER.EXPLODING_DAMAGE,damageSettings:{spawnCountMax:_c.CHARACTER.EXPLODING_DAMAGE_PARTICLE_COUNT,spawnSettings:{animTileOffset:ig.EntityParticleColor.colorOffsets.WHITE}},explodingDeath:_c.CHARACTER.EXPLODING_DEATH,deathSettings:{spawnCountMax:_c.CHARACTER.EXPLODING_DEATH_PARTICLE_COUNT,spawnSettings:{animTileOffset:ig.EntityParticleColor.colorOffsets.WHITE}},abilities:null,abilitiesOriginal:null,ungroundedFor:0,ungroundedForThreshold:_c.CHARACTER.UNGROUNDED_FOR_THRESHOLD,ungroundedForAndFallingThreshold:_c.CHARACTER.UNGROUNDED_FOR_AND_FALLING_THRESHOLD,withinClimbables:false,withinStairs:false,withinOneWay:false,jumping:false,jumpAscend:false,climbing:false,needsNewPath:false,_jumpPushing:false,_jumpWhileClimbing:false,_climbingIntentDown:false,_climbingIntentUp:false,_temporarilyInvulnerable:false,_temporarilyInvulnerablePulsing:false,_cleanWithinClimbable:false,initTypes:function(){this.parent();_ut.addType(ig.EntityExtended,this,'type',"CHARACTER");},initProperties:function(){this.parent();this.regenTimer=new ig.TimerExtended(0,this);this.damageTimer=new ig.TimerExtended(0,this);this.abilities=this.abilitiesOriginal=new ig.Hierarchy();},resetExtras:function(){this.parent();this.energyMax=this.energy;this.moveToStop();this.applyAntiVelocity();if(this.animAutomatic&&this.animsExpected.length>0&&!this._animsPlaceheld){this._animsPlaceheld=true;this.placeholdAnims();}},placeholdAnims:function(){var anims=this.anims;var animInitPlaceholder;if(this.animInit instanceof ig.Animation){animInitPlaceholder=animInit;}
else if(this.animInit&&anims[this.animInit]){animInitPlaceholder=anims[this.animInit];}
else{animInitPlaceholder=anims['idle']||this.currentAnim;}
for(var i=0,il=this.animsExpected.length;i<il;i++){var animName=this.animsExpected[i];var animPlaceholder=anims[animName]||animInitPlaceholder;if(animPlaceholder){if(!anims[animName+"X"]){anims[animName+"X"]=animPlaceholder;}
if(!anims[animName+"Right"]){anims[animName+"Right"]=anims[animName+"X"];}
if(!anims[animName+"Left"]){anims[animName+"Left"]=anims[animName+"X"];}
if(!anims[animName+"Y"]){anims[animName+"Y"]=animPlaceholder;}
if(!anims[animName+"Down"]){anims[animName+"Down"]=anims[animName+"Y"];}
if(!anims[animName+"Up"]){anims[animName+"Up"]=anims[animName+"Y"];}}}},recordResetState:function(){this.parent();this.resetState.energy=this.energy;},ready:function(){var me=this;this.abilities.forAllDescendants(function(){this.setEntity(me);});this.temporaryInvulnerability();this.removeControl();this.parent();},spawn:function(){this.parent();this.addControl();},removeControl:function(){this.parent();this.moveToStop();this.jumpEnd();this.climbEnd();},moveTo:function(entity,settings){if(this.performance===_c.DYNAMIC&&this.canPathfind){if(!this.pathingTimer){this.pathingTimer=new ig.TimerExtended(0,this);this.stuckTimer=new ig.TimerExtended(0,this);}
this.needsNewPath=true;}
return this.parent(entity,settings);},moveFrom:function(item,settings){var startedMoving=this.moveTo(item,settings);if(startedMoving){this.movingFrom=true;}
return startedMoving;},moveToUpdate:function(){if(this.performance===_c.DYNAMIC){if(this.movingTo){if(this.canPathfind){this.needsNewPath=this.movingTo.changed||this.changed||this.needsNewPath;if(!this.movedTo||this.needsNewPath){this.findMoveToPath();this.moveToPath();}}
else{this.lookAt(this.movingTo);}}}
else{this.parent();}},findMoveToPath:function(settings){if(this.pathingTimer.delta()>=0&&(this.path.length===0||this.needsNewPath)){this.needsNewPath=false;settings=settings||this.movingToSettings;var simple;var avoidEntities;var unsafe;var searchDistance;var alwaysKeepFirst;if(settings){simple=settings.simple;avoidEntities=settings.avoidEntities;unsafe=settings.unsafe;searchDistance=settings.searchDistance;alwaysKeepFirst=settings.alwaysKeepFirst;}
var x;var y;if(simple){var hasGravity=!(this.gravityFactor===0||ig.game.gravity===0);x=this.pos.x+this.size.x*0.5;y=this.pos.y+this.size.y*0.5;var dX;var dY;if(this.movingTo instanceof ig.EntityExtended){dX=(this.movingTo.pos.x+this.movingTo.size.x*0.5)-x;dY=(this.movingTo.pos.y+this.movingTo.size.y*(hasGravity?0.95:0.5))-y;}
else{dX=this.movingTo.x-x;dY=this.movingTo.y-y;}
if(this.movingFrom){dX=-dX;dY=-dY;}
if(dX!==0&&dY!==0&&hasGravity){if(dY*dY<dX*dX*2){dY=0;}}
var eX;var eY;if(dX!==0){if(dX*dX<this.size.x*this.size.x*0.25){dX=0;eX=x;}
else if(dX>0){eX=this.pos.x+(this.size.x*0.5>_pf.tilesize*0.25?this.size.x-_pf.tilesize*0.25:this.size.x);dX=1;}
else{eX=this.pos.x+(this.size.x*0.5>_pf.tilesize*0.25?_pf.tilesize*0.25:0);dX=-1;}}
else{eX=x;}
if(dY!==0){if(dY*dY<this.size.y*this.size.y*0.25){dY=0;eY=y;}
else{if(dY>0){eY=this.pos.y+(this.size.y*0.5>_pf.tilesize*0.25?this.size.y-_pf.tilesize*0.25:this.size.y);dY=1;}
else{eY=this.pos.y+(this.size.y*0.5>_pf.tilesize*0.25?_pf.tilesize*0.25:0);dY=-1;}}}
else{eY=y;}
var node=unsafe?_pf.getWorldNodeAt(eX,eY,dX,dY):_pf.getWorldWalkableNodeAt(eX,eY,dX,dY,avoidEntities,this);if(node){this.path[0]=node;}
else{this.path.length=0;this.moveToUnsafe=true;}
this.pathingTimer.set(this.pathfindingSimpleDelay);}
else{if(this.movingFrom){if(this.movingTo instanceof ig.EntityExtended){this.path=_pf.getPathAwayFromEntity(this,this.movingTo,avoidEntities,searchDistance);}
else{this.path=_pf.getPathAwayFromPoint(this,this.movingTo.x,this.movingTo.y,avoidEntities,searchDistance);}}
else{if(this.movingTo instanceof ig.EntityExtended){this.path=_pf.getPathToEntity(this,this.movingTo,avoidEntities,searchDistance);}
else{this.path=_pf.getPathToPoint(this,this.movingTo.x,this.movingTo.y,avoidEntities,searchDistance);}}
if(this.path.length===0){this._lastCornerNode=undefined;this.pathingTimer.set(this.pathfindingDelay)}
else{this.pathingTimer.set(this.pathfindingUpdateDelay);if(this.path.length>1&&!alwaysKeepFirst){var node=this.path[this.path.length-1];if(!node.corner||this._lastCornerNode===node){this.path.length--;return;}
var nextNode=this.path[this.path.length-2];x=this.pos.x+this.size.x*0.5;y=this.pos.y+this.size.y*0.5;if((node.x<x&&nextNode.x>x)||(node.x>x&&nextNode.x<x)||(node.y<y&&nextNode.y>y)||(node.y>y&&nextNode.y<y)){this.path.length--;}}}}}},moveToPath:function(path,settings){path=path||this.path;if(path){if(path.length===0||(this.stuck&&this.stuckTimer.delta()>=0)){this.moveToComplete();}
else{if(!this.changed){if(this.collidingWithMap&&!this.stuck){this.stuckTimer.set(this.stuckDelay);this.stuck=true;}}
else{this.stuck=false;}
this.movedTo=this.moveToUnsafe=false;settings=settings||this.movingToSettings;var unsafe;var avoidUngrounded;if(settings){unsafe=settings.unsafe;avoidUngrounded=settings.avoidUngrounded;}
var length=path.length;var node=path[length-1];var nodeX=node.x;var nodeY=node.y;var nodeSize=node.size*0.5;var atNode;var width=this.size.x;var height=this.size.y;var minX=this.pos.x;var minY=this.pos.y;var maxX=this.pos.x+width;var maxY=this.pos.y+height;if(this.jumping&&node.ungrounded&&length>1){atNode=minX<=nodeX&&maxX>=nodeX;}
else if(node.corner&&(nodeSize<width||nodeSize<height)){width=height=nodeSize*2;if(node.cornerMap.bottomleft){maxX=minX+nodeSize;minY=maxY-nodeSize;}
else if(node.cornerMap.bottomright){minX=maxX-nodeSize;minY=maxY-nodeSize;}
else if(node.cornerMap.topleft){maxX=minX+nodeSize;maxY=minY+nodeSize;}
else if(node.cornerMap.topright){minX=maxX-nodeSize;maxY=minY+nodeSize;}
atNode=_uti.pointInAABB(nodeX,nodeY,minX,minY,maxX,maxY);}
else{atNode=_uti.pointInAABB(nodeX,nodeY,minX,minY,maxX,maxY);}
if(atNode){if(node.corner){this._lastCornerNode=node;}
else{this._lastCornerNode=undefined;}
if(path.length===1){return this.moveToComplete();}
else{path.length--;return this.moveToPath(path);}}
var cX=minX+width*0.5;var cY=minY+height*0.5;if(this.gravityFactor===0||ig.game.gravity===0){if(minY<=nodeY&&maxY>=nodeY){this.moveToHereVertical();}
else if(cY<nodeY){this.moveToDown();}
else if(cY>nodeY){this.moveToUp();}
if(minX<=nodeX&&maxX>=nodeX){this.moveToHereHorizontal();}
else if(cX<nodeX){this.moveToRight();}
else if(cX>nodeX){this.moveToLeft();}}
else{if(!this.jumping){if(minY<=nodeY&&maxY>=nodeY){this.moveToHereVertical();}
else if(cY<nodeY){if(this.canClimb){this.climbDown();}
if(!this.climbing){this.moveToDown();}}
else if(cY>nodeY){this.moveToUnsafe=!unsafe&&node.ungrounded&&!node.slopedNeighbor;if(this.withinClimbables&&this.canClimb){this.moveToUnsafe=false;this.climbUp();}
else if(this.canJump&&!node.slopedNeighbor){this.moveToUnsafe=false;this.jump();}}
if(!unsafe&&(node.ungrounded&&(!node.oneWay||node.oneWayFacing.y>=0))&&avoidUngrounded&&(this.grounded||this.climbing)){var nodeBottom=node.neighborMap.bottom;while(nodeBottom){nodeBottom=nodeBottom.neighborMap.bottom;if((!nodeBottom.walkable&&!nodeBottom.sloped)||(nodeBottom.oneWay&&nodeBottom.oneWayFacing.y<0)){break;}
else if(nodeBottom.y>maxY){this.moveToUnsafe=true;break;}}}}
if(this.moveToUnsafe){return this.moveToComplete();}
if(minX<=nodeX&&maxX>=nodeX){this.moveToHereHorizontal();if(this.jumping&&(!node.ungrounded||node.x===path[0].x)){this.vel.x*=this.frictionGrounded.x;if(cX<nodeX){this.moveToRight();}
else if(cX>nodeX){this.moveToLeft();}}}
else if(cX<nodeX){this.moveToRight();}
else if(cX>nodeX){this.moveToLeft();}}}}},moveToLeft:function(mod){if(mod){this.accel.x=-this.speed.x*mod;}
else{this.accel.x=-this.speed.x;}
this.flip.x=this.canFlipX;if(!this.movingY){this.facing.y=0;}
this.facing.x=-1;},moveToRight:function(mod){if(mod){this.accel.x=this.speed.x*mod;}
else{this.accel.x=this.speed.x;}
this.flip.x=false;if(!this.movingY){this.facing.y=0;}
this.facing.x=1;},moveToUp:function(mod){if(mod){this.accel.y=-this.speed.y*mod;}
else{this.accel.y=-this.speed.y;}
this.flip.y=this.canFlipY;if(_c.TOP_DOWN||this.canFlipY){if(!this.movingX){this.facing.x=0;}
this.facing.y=-1;}},moveToDown:function(mod){if(mod){this.accel.y=this.speed.y*mod;}
else{this.accel.y=this.speed.y;}
this.flip.y=false;if(_c.TOP_DOWN||this.canFlipY){if(!this.movingX){this.facing.x=0;}
this.facing.y=1;}},moveToHereHorizontal:function(){this.accel.x=0;},moveToHereVertical:function(){this.accel.y=0;},moveToHere:function(){if(this.path.length>0){this.path.length=0;}
this.stuck=false;this._lastCornerNode=undefined;this.moveToHereHorizontal();this.moveToHereVertical();},moveToSequenceNext:function(){if(this.movingToSequence){if(this.movingToSequence.length>0){if(this.movingFrom){this.movingTo=null;this.movingFrom=false;this.moveFrom(this.movingToSequence.shift(),this.movingToSettings);}
else{this.movingTo=null;this.moveTo(this.movingToSequence.shift(),this.movingToSettings);}}
else{this.movingToSequence=undefined;this.moveToComplete();this.moveToStop();}}},moveToComplete:function(){this.moveToHere();this.parent();},moveToStop:function(){this.moveToHere();this.movingFrom=false;this.parent();},jump:function(){if(this.canJump){if(this.climbing){this._jumpWhileClimbing=true;this.climbEnd();}
if((this.grounded||(this.canClimb&&this.withinClimbables)||this.ungroundedFor<this.ungroundedForThreshold)&&this.jumping!==true){this.jumping=this._jumpPushing=true;this.jumpStepsRemaining=this.jumpSteps;}}},jumpUpdate:function(){if(this.jumping===true){if(this._jumpPushing){this.jumpPush();}
if(this.vel.y>=0){this.jumpAscend=false;}
if(!this._jumpPushing&&!this.jumpAscend&&(this.grounded||(this._jumpWhileClimbing&&this.withinClimbables))){this.jumpEnd();}}},jumpPush:function(){if(this.jumpStepsRemaining>0){if(this.jumpStepsRemaining===this.jumpSteps){this.ungroundedFor=0;this.applyAntiVelocityY();}
this.jumpAscend=true;this.jumpStepsRemaining--;this.moveToUp(this.jumpForce);if(this.jumpStepsRemaining<=0){this._jumpPushing=false;this.moveToHereVertical();}}},jumpEnd:function(){this.jumping=this._jumpPushing=false;this.jumpStepsRemaining=0;if(this._jumpWhileClimbing){this._jumpWhileClimbing=false;this.climb();}},climb:function(){if(this.canClimb&&this.withinClimbables){if(this.jumping){this.jumpEnd();}
if(this.climbing!==true&&!(this._climbingIntentDown&&this.grounded)){this.climbing=true;this.grounded=false;this.ungroundedFor=0;if(!this.jumping){this.applyAntiVelocityY();}}}},climbUp:function(){this._climbingIntentUp=true;this.climb();if(this.climbing){this.moveToUp();}},climbDown:function(){this._climbingIntentDown=true;this.climb();if(this.climbing){this.moveToDown();}},climbUpdate:function(){if(this.climbing){if(!this.withinClimbables||this.grounded){this.climbEnd();}
else{this.applyAntiGravity();}}},climbEnd:function(){if(this.climbing!==false){this.climbing=false;if(!this.jumping&&this.vel.y<0){this.applyAntiVelocityY();}}},receiveDamage:function(amount,from,unblockable){var applied=this.parent(amount,from,unblockable);if(applied&&!this._killed){if(this.explodingDamage){this.explode();}
if(!unblockable){this.temporaryInvulnerability();}}
return applied;},explode:function(settings){ig.game.spawnEntity(ig.EntityExplosion,this.pos.x,this.pos.y,ig.merge({size:{x:this.size.x,y:this.size.y}},settings||this.damageSettings));},receiveHealing:function(amount,from){this.health=Math.min(this.healthMax,this.health+amount);},drainEnergy:function(amount,from,unblockable){if(!this.invulnerable||unblockable){this.energy=Math.max(0,this.energy-amount);return true;}
return false;},receiveEnergy:function(amount,from){this.energy=Math.min(this.energyMax,this.energy+amount);},restoreStats:function(from){this.receiveHealing(this.healthMax-this.health,from);this.receiveEnergy(this.energyMax-this.energy,from);},regenerate:function(){if(this.regenHealth){this.receiveHealing(this.regenRateHealth*(this.regenAsPctHealth?this.healthMax:1),this);}
if(this.regenEnergy){this.receiveEnergy(this.regenRateEnergy*(this.regenAsPctEnergy?this.energyMax:1),this);}},temporaryInvulnerability:function(duration){if(typeof duration==='undefined'){duration=this.damageDelay;}
if(!this.invulnerable&&duration>0){this.damageTimer.set(duration);this.invulnerable=this._temporarilyInvulnerable=true;if(this.temporaryInvulnerabilityAlpha<1&&this.temporaryInvulnerabilityPulses>0){this._temporarilyInvulnerablePulsing=true;var hide=this.tween({alpha:this.temporaryInvulnerabilityAlpha},{name:"invulnerableHide",duration:duration*1000/(this.temporaryInvulnerabilityPulses*2),noComplete:true,stopped:true});var show=this.tween({alpha:1},{name:"invulnerableShow",duration:duration*1000/(this.temporaryInvulnerabilityPulses*2),noComplete:true,stopped:true});hide.chain(show);show.chain(hide);hide.start();}}},temporaryInvulnerabilityEnd:function(){if(this._temporarilyInvulnerable){if(this._temporarilyInvulnerablePulsing){this.tweenEnd("invulnerableHide");this.tweenEnd("invulnerableShow");this._temporarilyInvulnerablePulsing=false;}
this.invulnerable=this._temporarilyInvulnerable=false;this.alpha=1;}},kill:function(silent){this.controllable=false;this.parent(silent);},die:function(){this.temporaryInvulnerabilityEnd();if(!this.dieingSilently&&this.explodingDeath){this.explode(this.deathSettings);}
this.parent();},intersectWith:function(entity){if(entity.oneWay){this.withinOneWay=true;}
if(entity.climbable){this.withinClimbables=true;this.withinStairs=entity.climbableStairs;this._cleanWithinClimbable=false;}},getIsCollidingWithOneWay:function(entityOneWay){var colliding=this.parent(entityOneWay);if(colliding&&entityOneWay.climbable){if(this._climbingIntentDown&&entityOneWay.oneWayFacing.y<0){this.standing=this.grounded=false;this.withinClimbables=true;this.withinStairs=entityOneWay.climbableStairs;this._cleanWithinClimbable=false;this.climbDown();return false;}
else if(this._climbingIntentUp&&entityOneWay.oneWayFacing.y>0){this.standing=this.grounded=false;this.withinClimbables=true;this.withinStairs=entityOneWay.climbableStairs;this._cleanWithinClimbable=false;this.climbUp();return false;}
else{this.withinClimbables=this.withinStairs=false;this.climbEnd();}}
return colliding;},collideWith:function(entity,dirX,dirY,nudge,vel,weak){this.parent(entity,dirX,dirY,nudge,vel,weak);if(!weak||this===weak){if(dirY<0&&this.jumping){this.jumpEnd();}
if(this.changed){this.updateVisible();}}},update:function(){this._climbingIntentDown=this._climbingIntentUp=false;this.parent();},updateCleanup:function(){if(this.changed){this.withinOneWay=false;if(this._cleanWithinClimbable){this._cleanWithinClimbable=this.withinClimbables=this.withinStairs=false;}
else{this._cleanWithinClimbable=true;}}
this.parent();},updateChanges:function(){this.parent();if(this._temporarilyInvulnerable&&this.invulnerable&&this.damageTimer.delta()>=0){this.temporaryInvulnerabilityEnd();}
if(this.regen&&this.regenTimer.delta()>=0){this.regenTimer.set(this.regenDelay);this.regenerate();}
this.abilities.update();this.jumpUpdate();this.climbUpdate();if(this.grounded||this.climbing){this.ungroundedFor=0;}
else{this.ungroundedFor+=ig.system.tick;}},updateVelocity:function(){var control;if(this.climbing){_utv2.copy(this.maxVel,this.maxVelClimbing);control=this.climbingControl;}
else if(this.grounded){_utv2.copy(this.maxVel,this.maxVelGrounded);control=1;}
else{_utv2.copy(this.maxVel,this.maxVelUngrounded);control=this.jumpControl;}
if(this.standing||this.climbing){_utv2.copy(this.friction,this.frictionGrounded);}
else{_utv2.copy(this.friction,this.frictionUngrounded);}
this.vel.x=this.getNewVelocity(this.vel.x,this.accel.x*control,this.friction.x,this.maxVel.x);this.vel.y=this.getNewVelocity(this.vel.y,this.accel.y*control,this.friction.y,this.maxVel.y);},updateVisible:function(){if(this.animAutomatic&&!this._killed){this.updateCurrentAnim();}
this.parent();},updateCurrentAnim:function(){var anims=this.anims;var anim;if(this.performance===_c.DYNAMIC){if(this.climbing===true){if(this.withinStairs){if(this.moving){this.currentAnim=anims[this.getDirectionalAnimName("stairs")];return true;}}
else{this.currentAnim=anims[this.getDirectionalAnimName("climb")];this.currentAnim.stop=!this.moving;this.currentAnim.reverse=this.vel.y>0;return true;}}
else if(!this.grounded){if(this.jumping){anim=anims[this.getDirectionalAnimName("jump")];if(this.currentAnim!==anim){this.currentAnim=anim;this.currentAnim.playFromStart(true);}
return true;}
else if(this.ungroundedFor>this.ungroundedForAndFallingThreshold){this.currentAnim=anims[this.getDirectionalAnimName("fall")];return true;}}
else if(this.moving&&(this.movingX||this.canFlipY||_c.TOP_DOWN)){this.currentAnim=anims[this.getDirectionalAnimName("move")];return true;}}
anim=anims[this.getDirectionalAnimName("idle")];if(this.currentAnim!==anim){this.currentAnim=anim;this.currentAnim.playFromStart();}}});});

// lib/plusplus/entities/checkpoint.js
ig.baked=true;ig.module('plusplus.entities.checkpoint').requires('plusplus.core.config','plusplus.abstractities.spawner','plusplus.abstractities.character','plusplus.helpers.utils').defines(function(){"use strict";var _c=ig.CONFIG;var _ut=ig.utils;ig.EntityCheckpoint=ig.global.EntityCheckpoint=ig.Spawner.extend({_wmBoxColor:'rgba( 0, 255, 125, 0.7 )',triggerable:true,triggerAfterDelay:false,restorative:false,restorativeSpawn:true,showSpawn:true,respawnDelay:1,wait:1,duration:-1,once:false,suicidal:false,spawnAtRandomPosition:false,spawnAtSide:_c.TOP_DOWN?null:{x:0,y:1},initTypes:function(){this.parent();_ut.addType(ig.EntityExtended,this,'type',"CHECKPOINT");},activate:function(entity){this.parent(entity);if(entity instanceof ig.Character){this.linkSpawned(entity);if(this.restorative){entity.restoreStats(this);}}},spawned:function(entity){this.parent(entity);if(this.restorativeSpawn){entity.restoreStats(this);}}});});

// lib/plusplus/abilities/ability.js
ig.baked=true;ig.module('plusplus.abilities.ability').requires('plusplus.core.timer','plusplus.core.entity','plusplus.abstractities.particle','plusplus.helpers.utils','plusplus.helpers.utilsintersection','plusplus.helpers.signals').defines(function(){"use strict";var _ut=ig.utils;var _uti=ig.utilsintersection;var count=0;ig.Ability=ig.Class.extend({id:count++,name:'',type:0,enabled:true,entity:null,entityOptions:null,entityTarget:null,activated:false,executeToggle:false,channelled:false,costActivate:0,costChannel:0,cooldownDelay:0,cooldownTimer:null,requiresTarget:false,canFindTarget:false,canTargetSelf:true,canTargetOthers:true,rangeX:0,rangeY:0,typeTargetable:0,groupTargetable:0,faceTarget:true,retainTarget:false,retainTargetChannel:true,regenBlocking:true,rank:0,upgrades:[],activateCastSettings:null,activatePassCastSettings:null,activateSetupCastSettings:null,deactivateCastSettings:null,deactivateSetupCastSettings:null,failCastSettings:null,failReason:'',onActivated:null,onDeactivated:null,onFailed:null,_activating:false,_deactivating:false,_channelling:false,_regenBlocked:false,_entityTargetRetained:false,_casting:false,init:function(entity,settings){this.id=count++;if(settings&&!ig.global.wm){if(typeof settings.typeTargetable==='string'){_ut.addType(ig.EntityExtended,this,'typeTargetable',settings.typeTargetable);delete settings.typeTargetable;}
if(typeof settings.groupTargetable==='string'){_ut.addType(ig.EntityExtended,this,'groupTargetable',settings.groupTargetable,"GROUP");delete settings.groupTargetable;}
ig.merge(this,settings);}
this.initTypes();this.initProperties();this.initUpgrades();this.setEntity(entity);},initTypes:function(){},initProperties:function(){this.castTimer=new ig.TimerExtended();this.cooldownTimer=new ig.TimerExtended();this.onActivated=new ig.Signal();this.onDeactivated=new ig.Signal();this.onFailed=new ig.Signal();},initUpgrades:function(){},execute:function(){if(this.enabled){if(this.executeToggle&&this.activated){return this.deactivateSetup(arguments);}
else{this.activated=false;if(this.assert(this.cooledDown(),ig.Ability.FAIL.COOLDOWN)&&this.assert(this.hasTarget(),ig.Ability.FAIL.TARGET)){return this.activateSetup(arguments);}}}},executePlain:function(){return this.execute();},setEnabled:function(enabled){if(typeof enabled==='undefined'){enabled=true;}
if(!enabled){this.disable();}
else{this.enable();}},enable:function(){this.enabled=true;},disable:function(){this.enabled=false;if(this.activated){return this.deactivateSetup(arguments);}},cleanup:function(){var deactivateCastSettings=this.deactivateCastSettings;this.deactivateCastSettings=undefined;var result=this.deactivate.apply(this,arguments);this.deactivateCastSettings=deactivateCastSettings;if(!ig.game.hasLevel){this.onActivated.removeAll();this.onActivated.forget();this.onDeactivated.removeAll();this.onDeactivated.forget();this.onFailed.removeAll();this.onFailed.forget();}
return result;},cleanupPlain:function(){return this.cleanup();},activateSetup:function(args){if(!this._activating){this._deactivating=false;this._activating=true;if(this.faceTarget){this.entity.lookAt(this.entityTarget);}
if(this.activateSetupCastSettings){this.cast(this.activateSetupCastSettings,this.activateTry,args);}
else{return this.activateTry(args);}}},activateTry:function(args){if(this.costActivate===0){if(this.assert(this.hasValidTarget(),ig.Ability.FAIL.TARGET_INVALID)&&this.assert(this.closeEnough(),ig.Ability.FAIL.DISTANCE)){return this.activatePass(args);}}
else if(this.assert(this.canPayCost(this.costActivate),ig.Ability.FAIL.COST)&&this.assert(this.hasValidTarget(),ig.Ability.FAIL.TARGET_INVALID)&&this.assert(this.closeEnough(),ig.Ability.FAIL.DISTANCE)){this.extractCost(this.costActivate);return this.activatePass(args);}},activatePass:function(args){if(this.activatePassCastSettings){this.cast(this.activatePassCastSettings,this.activate,args);}
else{return this.activate.apply(this,args);}},activate:function(){this._activating=this._deactivating=false;this.activated=true;this.onActivated.dispatch(this);this.cast(this.activateCastSettings);if(this.cooldownDelay>0){this.cooldownTimer.set(this.cooldownDelay);}
this.dropEntityTarget();},cooledDown:function(){return this.cooldownDelay<=0||this.cooldownTimer.delta()>=0;},deactivateSetup:function(args){if(!this._deactivating){this._deactivating=true;this._activating=false;if(this.deactivateSetupCastSettings){this.cast(this.deactivateSetupCastSettings,this.deactivate,args);}
else{return this.deactivate.apply(this,args);}}},deactivate:function(){if(this._channelling){this.unblockRegen(this.entity);}
this.activated=this._activating=this._deactivating=false;this.onDeactivated.dispatch(this);this.cast(this.deactivateCastSettings);this.dropEntityTarget();},cast:function(settings,internalCallback,internalArgs){this.castEnd();settings=settings||{};var animName=settings.animName;if(animName&&!settings.animOmniDirectional){animName=this.entity.getDirectionalAnimName(animName);}
if(settings.delay){this.castStart(settings,internalCallback,internalArgs);this.castTimer.set(settings.delay);if(animName){this.entity.animOverride(animName,{loop:(typeof settings.loop!=='undefined'?settings.loop:true)});}}
else if(animName){this.castStart(settings,internalCallback,internalArgs);this.entity.animOverride(animName,{callback:function(){this.castComplete();},context:this,loop:settings.loop});}},castStart:function(settings,internalCallback,internalArgs){this._casting=true;this.castSettings=settings;this.castInternalCallback=internalCallback;this.castInternalArgs=internalArgs;var effects=settings.effects;if(effects){for(var i=0,il=effects.length;i<il;i++){this.effectStart(effects[i]);}}},castUpdate:function(){if(this._casting){if(this.castSettings.delay&&this.castTimer.delta()>=0){this.castComplete();}
else if(!this.failReason){this.assert(this.castSettings.moving||!this.entity.moving,ig.Ability.FAIL.INTERRUPT);}}},castComplete:function(){var settings=this.castSettings;var internalCallback=this.castInternalCallback;var internalArgs=this.castInternalArgs;this.castEnd();this.failReason='';if(settings&&settings.callback){settings.callback.apply(settings.context||this,settings.settings);}
if(internalCallback){internalCallback.apply(this,internalArgs);}},castEnd:function(){if(this._casting){this._casting=false;var effects=this.castSettings.effects;if(effects){for(var i=0,il=effects.length;i<il;i++){this.effectEnd(effects[i]);}}
var animName=this.castSettings.animName;if(animName){if(!this.castSettings.animOmniDirectional){animName=this.entity.getDirectionalAnimName(animName);}
if(this.entity.anims[animName]&&this.entity.overridingAnimName===animName){this.entity.animRelease(true);}}
this.castSettings=this.castInternalCallback=this.castInternalArgs=undefined;}},effectStart:function(effect){var es=effect.settings||{};if(!effect.ignoreDuration){if(this.castSettings){if(this.castSettings.delay){es.lifeDuration=this.castSettings.delay;}
else if(this.castSettings.animName){var anim=this.entity.anims[this.castSettings.animName];if(anim){es.lifeDuration=anim.frameTime*anim.sequence.length;}}}
if(effect.fade){es.fadeBeforeDeathDuration=es.fadeBeforeDeathDuration||0;}}
if(!effect.followTarget||this.entityTarget){var entity=effect.entity=ig.game.spawnEntity(effect.entityClass,0,0,es);if(effect.followSettings){if(effect.followTarget){if(this.entityTarget){entity.moveTo(this.entityTarget,effect.followSettings);}}
else{entity.moveTo(this.entity,effect.followSettings);}}
else if(effect.center!==false){entity.pos.x=this.entity.pos.x+(this.entity.size.x-entity.size.x)*0.5;entity.pos.y=this.entity.pos.y+(this.entity.size.y-entity.size.y)*0.5;}}},effectEnd:function(effect){if(effect.entity&&!effect.entity._killed&&(this.failReason===ig.Ability.FAIL.INTERRUPT||!(effect.entity instanceof ig.Particle))){effect.entity.kill();effect.entity=undefined;}},update:function(){if(this.enabled===true){this.castUpdate();if(this.activated){if(this.channelled){this.channelTry(arguments);}}}},channelTry:function(args){if(this.costChannel===0){if(this.assert(this.closeEnough(),ig.Ability.FAIL.DISTANCE)){return this.channel.apply(this,args);}}
else if(this.assert(this.canPayCost(this.costChannel),ig.Ability.FAIL.COST)&&this.assert(this.closeEnough(),ig.Ability.FAIL.DISTANCE)){this.extractCost(this.costChannel);return this.channel.apply(this,args);}
return this.deactivateSetup(args);},channel:function(){if(!this._channelling){this._channelling=true;this.blockRegen(this.entity);}
if(this.faceTarget){this.entity.lookAt(this.entityTarget);}},blockRegen:function(entity){if(entity.regenEnergy){this._regenBlocked=true;entity.regenEnergy=false;}},unblockRegen:function(entity){if(this._regenBlocked){entity.regenEnergy=true;this._regenBlocked=false;}},setEntity:function(entity){if(this.entity){this.entity.onRemoved.remove(this.cleanupPlain,this);this.entity.onAdded.remove(this.executePlain,this);this.cleanup();}
this.entity=entity;this.castTimer.setPauseSignaller(this.entity);this.cooldownTimer.setPauseSignaller(this.entity);if(this.entity){this.entity.onRemoved.add(this.cleanupPlain,this);if(this.type&ig.Ability.TYPE.PASSIVE){if(this.entity.added){this.executePlain();}
else{this.entity.onAdded.addOnce(this.executePlain,this);}}}},setEntityOptions:function(entity){this.entityOptions=entity;},setEntityTarget:function(entity){if(!entity||(this.entityTarget!==entity&&this.isEntityTargetable(entity))){this.entityTarget=entity;this._entityTargetRetained=false;}},isEntityTargetable:function(entity){return((entity.type&this.typeTargetable)||(entity.group&this.groupTargetable))&&((this.canTargetOthers&&this.entity!==entity)||(this.canTargetSelf&&this.entity===entity));},setEntityTargetFirst:function(entities){if(entities&&entities.length){for(var i=0,il=entities.length;i<il;i++){this.setEntityTarget(entities[i]);if(this.entityTarget){break;}}}
else{this.setEntityTarget();}},setClosestEntityTarget:function(){if(this.rangeX>0||this.rangeY>0){if(this.entityTarget){this.setEntityTarget();}
var entities=_uti.entitiesInAABB(this.entity.pos.x-this.rangeX,this.entity.pos.y-this.rangeY,this.entity.pos.x+this.entity.size.x+this.rangeX,this.entity.pos.y+this.entity.size.y+this.rangeY,true);this.setEntityTargetFirst(entities);}},dropEntityTarget:function(){if(this.entityTarget){if(this.isEntityTargetDroppable()){this.setEntityTarget();}
else{this._entityTargetRetained=true;}}},isEntityTargetDroppable:function(){return!this.retainTarget||!(this._channelling&&this.retainTargetChannel);},hasTarget:function(){if(this.requiresTarget){if(this.canFindTarget&&!this.entityTarget){this.setClosestEntityTarget();}
if(this.entityTarget){return true;}
return false;}
return true;},hasValidTarget:function(){return!this.requiresTarget||this.entityTarget;},closeEnough:function(){if(this.requiresTarget){if(this.entityTarget){var interactiveTarget=this.entityTarget.type&ig.EntityExtended.TYPE.INTERACTIVE;if((this.rangeX===0&&this.rangeY===0)||(interactiveTarget&&this.entityTarget.rangeInteractableX===0&&this.entityTarget.rangeInteractableY===0)){return true;}
else{var rangeX;var rangeY;if(interactiveTarget){rangeX=Math.max(this.rangeX,this.entityTarget.rangeInteractableX);rangeY=Math.max(this.rangeY,this.entityTarget.rangeInteractableY);}
else{rangeX=this.rangeX;rangeY=this.rangeY;}
var overlap=_uti.AABBIntersect(this.entityTarget.pos.x,this.entityTarget.pos.y,this.entityTarget.pos.x+this.entityTarget.size.x,this.entityTarget.pos.y+this.entityTarget.size.y,this.entity.pos.x-rangeX,this.entity.pos.y-rangeY,this.entity.pos.x+this.entity.size.x+rangeX,this.entity.pos.y+this.entity.size.y+rangeY);if(this.faceTarget){this.entity.lookAt(this.entityTarget);}
return overlap;}}
else{return false;}}
return true;},assert:function(checkResult,failReason){if(!checkResult){this.fail(failReason);}
else{this.failReason='';}
return checkResult;},fail:function(failReason){this.failReason=failReason||ig.Ability.FAIL.UNKNOWN;this._activating=this._deactivating=false;if(this.failReason===ig.Ability.FAIL.INTERRUPT){this.castEnd();}
else{var fs=this.failCastSettings;if(fs){if(fs.effects){for(var i=0,il=fs.effects.length;i<il;i++){var effect=fs.effects[i];effect.settings=effect.settings||{};effect.settings.animInit=this.failReason;}}
this.cast(this.failCastSettings);}}
this.onFailed.dispatch(this);this.dropEntityTarget();},canPayCost:function(amount){return!this.entity.hasOwnProperty('energy')||this.entity.invulnerable||this.entity.energy>=amount;},extractCost:function(amount){if(this.entity.drainEnergy){this.entity.drainEnergy(amount,this);}},addUpgrades:function(upgrades){_ut.arrayCautiousAddMulti(this.upgrades,upgrades);},upgrade:function(rank){if(rank===true){rank=this.upgrades.length;}
else if(!_ut.isNumber(rank)){rank=this.rank+1;}
this.changegrade(rank);},downgrade:function(rank){if(rank===true){rank=0;}
else if(!_ut.isNumber(rank)){rank=this.rank-1;}
this.changegrade(rank);},changegrade:function(rank){var rankMax=this.upgrades.length;var direction=rank<this.rank?-1:1;var rankNext=this.rank+direction;if(this.rank!==rank){this.cleanup();}
while(this.rank!==rank&&rankNext<rankMax&&rankNext>=0){this.rank=rankNext;var upgrade=this.upgrades[rankNext];var entity=this.entity;var entityOptions=this.entityOptions||entity;if(typeof upgrade==='function'){upgrade.call(this,entity,entityOptions);}
else{ig.merge(this,upgrade);}
rankNext+=direction;}},clone:function(c){if(c instanceof ig.Ability!==true){c=new ig.Ability();}
c.name=this.name;c.type=this.type;c.enabled=this.enabled;c.costActivate=this.costActivate;c.costDeactivate=this.costDeactivate;c.costChannel=this.costChannel;c.requiresTarget=this.requiresTarget;c.canFindTarget=this.canFindTarget;c.canTargetSelf=this.canTargetSelf;c.canTargetOthers=this.canTargetOthers;c.typeTargetable=this.typeTargetable;c.rangeX=this.rangeX;c.rangeY=this.rangeY;c.retainTarget=this.retainTarget;c.rank=this.rank;c.upgrades=this.upgrades.slice(0);c.regenBlocking=this.regenBlocking;c.setEntityOptions(this.entityOptions);c.setEntity(this.entity);return c;}});ig.Ability.TYPE;_ut.getType(ig.Ability,"PASSIVE");_ut.getType(ig.Ability,"SPAMMABLE");_ut.getType(ig.Ability,"TOGGLEABLE");ig.Ability.FAIL={UNKNOWN:'unknown',COST:"cost",TARGET:"target",TARGET_INVALID:"targetInvalid",DISTANCE:"distance",COOLDOWN:"cooldown",INTERRUPT:"interrupt"}});

// lib/plusplus/abilities/interact.js
ig.baked=true;ig.module('plusplus.abilities.interact').requires('plusplus.core.config','plusplus.abilities.ability','plusplus.helpers.utils').defines(function(){"use strict";var _c=ig.CONFIG;var _ut=ig.utils;ig.AbilityInteract=ig.Ability.extend({rangeX:_c.CHARACTER.SIZE_EFFECTIVE_X,rangeY:_c.CHARACTER.SIZE_EFFECTIVE_Y*0.5,requiresTarget:true,canFindTarget:false,canTargetSelf:false,initTypes:function(){this.parent();_ut.addType(ig.Ability,this,'type',"INTERACT");_ut.addType(ig.EntityExtended,this,'typeTargetable',"INTERACTIVE");},activate:function(){this.entityTarget.toggleActivate(this.entity);this.parent();}});});

// lib/plusplus/abstractities/player.js
ig.baked=true;ig.module('plusplus.abstractities.player').requires('plusplus.core.config','plusplus.abstractities.character','plusplus.abilities.interact','plusplus.helpers.utils','plusplus.helpers.utilsmath').defines(function(){"use strict";var _c=ig.CONFIG;var _ut=ig.utils;var _utm=ig.utilsmath;ig.Player=ig.Character.extend({name:"player",zIndex:_c.Z_INDEX_PLAYER,performance:_c.DYNAMIC,collides:ig.EntityExtended.COLLIDES.ACTIVE,persistent:true,damageDelay:1,initTypes:function(){this.parent();_ut.addType(ig.EntityExtended,this,'type',"PLAYER DAMAGEABLE MIMICABLE");_ut.addType(ig.EntityExtended,this,'group',"PLAYER FRIEND","GROUP");},initProperties:function(){this.parent();if(!ig.global.wm){this.abilityInteract=new ig.AbilityInteract(this);this.abilities.addDescendant(this.abilityInteract);}},handleInput:function(){var i,il;var j,jl;var inputPoints;var inputPoint;var abs;var ab;if(ig.input.released('tap')){inputPoints=ig.input.getInputPoints(['tapped'],[true]);for(i=0,il=inputPoints.length;i<il;i++){inputPoint=inputPoints[i];this.abilityInteract.setEntityTargetFirst(inputPoint.targets);if(this.abilityInteract.entityTarget&&(!(this.abilityInteract.entityTarget.type&ig.EntityExtended.TYPE.UI)||!this.abilityInteract.entityTarget.fixed)){this.abilityInteract.execute();}
else{abs=this.abilities.getDescendantsByType(ig.Ability.TYPE.SPAMMABLE);if(abs.length){for(j=0,jl=abs.length;j<jl;j++){ab=abs[j];ab.setEntityTargetFirst(inputPoint.targets);ab.execute({x:inputPoint.worldX,y:inputPoint.worldY});}}}}}
if(ig.input.state('hold')){inputPoints=ig.input.getInputPoints(['holding'],[true]);for(i=0,il=inputPoints.length;i<il;i++){inputPoint=inputPoints[i];if(!inputPoint.targetsDownStart.length){var halfWidth=this.size.x*0.5;var halfHeight=this.size.y*0.5;var dx=inputPoint.worldX-this.pos.x+halfWidth;var dy=inputPoint.worldY-this.pos.y+halfHeight;if(_utm.almostEqual(dx,0,halfWidth)!==true){if(dx>0){this.moveToRight();}
else{this.moveToLeft();}}
if(_utm.almostEqual(dy,0,halfHeight)!==true){if(dy>0){if(_c.TOP_DOWN){this.moveToDown();}
else{this.climbDown();}}
else{if(_c.TOP_DOWN){this.moveToUp();}
else{this.climbUp();}}}}}}
if(ig.input.state('holdActivate')){inputPoints=ig.input.getInputPoints(['holdingActivate'],[true]);for(i=0,il=inputPoints.length;i<il;i++){inputPoint=inputPoints[i];if(inputPoint.targetsDownStart.length){abs=this.abilities.getDescendantsByType(ig.Ability.TYPE.TOGGLEABLE);if(abs.length){for(j=0,jl=abs.length;j<jl;j++){ab=abs[j];ab.setEntityTargetFirst(inputPoint.targetsDownStart);ab.execute({x:inputPoint.worldX,y:inputPoint.worldY});}}}}}
if(ig.input.state('right')){this.moveToRight();}
else if(ig.input.state('left')){this.moveToLeft();}
if(ig.input.state('up')){if(_c.TOP_DOWN){this.moveToUp();}
else{this.climbUp();}}
else if(ig.input.state('down')){if(_c.TOP_DOWN){this.moveToDown();}
else{this.climbDown();}}
if(ig.input.pressed('jump')){this.jump();}},updateChanges:function(){if(this.movingTo!==true){if(this.jumping){this.moveToHereHorizontal();}
else{this.moveToHere();}}
this.handleInput();this.parent();}});});

// lib/plusplus/abilities/mimic.js
ig.baked=true;ig.module('plusplus.abilities.mimic').requires('plusplus.core.config','plusplus.abilities.ability','plusplus.helpers.utils').defines(function(){"use strict";var _c=ig.CONFIG;var _ut=ig.utils;ig.AbilityMimic=ig.Ability.extend({rangeX:_c.CHARACTER.SIZE_EFFECTIVE_MIN*2,rangeY:_c.CHARACTER.SIZE_EFFECTIVE_MIN*2,requiresTarget:true,canFindTarget:false,canTargetSelf:false,power:_c.RANKS_MAP["NONE"],_mimickedEffect:false,initTypes:function(){this.parent();_ut.addType(ig.Ability,this,'type',"MIMIC");_ut.addType(ig.EntityExtended,this,'typeTargetable',"MIMICABLE");},initUpgrades:function(){this.parent();var upgrades=[];for(var i=0,il=_c.RANKS.length;i<il;i++){upgrades.push({power:_c.RANKS[i].level});}
this.addUpgrades(upgrades);},hasValidTarget:function(){return this.parent()&&this.entityTarget.abilities&&this.power>=this.entityTarget.mimicLevel;},activate:function(){this.unmimic();this.entity.abilities=this.entityTarget.abilities.clone();this.entity.abilities.fallback=this.entity.abilitiesOriginal;this.entity.abilities.entityMimicked=this.entityTarget;this.entity.abilities.forAllDescendantsWithCallback('setEntityOptions',this.entityTarget);this.entity.abilities.forAllDescendantsWithCallback('setEntity',this.entity);if(this.entityTarget.mimicEffect){this._mimickedEffect=true;if(this.mimicEffectTarget!==this.entityTarget.mimicEffect){this.mimicEffectTarget=this.entityTarget.mimicEffect;this.mimicEffect=ig.merge({},this.mimicEffectTarget);}
this.effectStart(this.mimicEffect);}
this.parent();},deactivate:function(){this.unmimic();this.parent();},unmimic:function(){if(this.entity.abilities!==this.entity.abilitiesOriginal){var cloned=this.entity.abilities;this.entity.abilities=this.entity.abilitiesOriginal;if(this._mimickedEffect){this._mimickedEffect=false;this.effectEnd(this.mimicEffect);}
cloned.setFallback();cloned.cleanup();}},clone:function(c){if(c instanceof ig.AbilityMimic!==true){c=new ig.AbilityMimic();}
c.power=this.power;return this.parent(c);}});});

// lib/plusplus/abstractities/effect.js
ig.baked=true;ig.module('plusplus.abstractities.effect').requires('plusplus.abstractities.particle').defines(function(){ig.Effect=ig.Particle.extend({fadeAfterSpawnDuration:0,fadeBeforeDeathDuration:0,randomVel:false,randomDoubleVel:false,randomFlip:false});});

// lib/plusplus/entities/effect-electricity.js
ig.baked=true;ig.module('plusplus.entities.effect-electricity').requires('plusplus.core.config','plusplus.abstractities.effect','plusplus.helpers.utilsvector2').defines(function(){var _c=ig.CONFIG;var _utv2=ig.utilsvector2;ig.EntityEffectElectricity=ig.global.EntityEffectElectricity=ig.Effect.extend({performance:_c.STATIC,size:_utv2.vector(32,32),animAutomatic:false,animSheet:new ig.AnimationSheet(_c.PATH_TO_MEDIA+'effect_electricity.png',32,32),animSettings:{moveX:{sequence:[0,1,2,3],frameTime:0.15}}});});

// lib/game/entities/effect-mimic.js
ig.baked=true;ig.module('game.entities.effect-mimic').requires('plusplus.core.config','plusplus.abstractities.effect','plusplus.helpers.utilsvector2').defines(function(){var _c=ig.CONFIG;var _utv2=ig.utilsvector2;ig.global.EntityEffectMimic=ig.EntityEffectMimic=ig.Effect.extend({size:_utv2.vector(32,32),animSheet:new ig.AnimationSheet(_c.PATH_TO_MEDIA+'effect_mimic.png',32,32),animSettings:{idle:{sequence:[0,1,2,3],frameTime:0.1}}});});

// lib/game/entities/effect-fail.js
ig.baked=true;ig.module('game.entities.effect-fail').requires('plusplus.core.config','plusplus.abstractities.effect','plusplus.helpers.utilsvector2').defines(function(){var _c=ig.CONFIG;var _utv2=ig.utilsvector2;ig.global.EntityEffectFail=ig.EntityEffectFail=ig.Effect.extend({size:_utv2.vector(32,32),animSheet:new ig.AnimationSheet(_c.PATH_TO_MEDIA+'effect_fail.png',32,32),animSettings:{unknown:{sequence:[0],frameTime:1},cost:{sequence:[1],frameTime:1},distance:{sequence:[2],frameTime:1},target:{sequence:[3],frameTime:1},targetInvalid:{sequence:[4],frameTime:1},cooldown:{sequence:[5,6,7,8],frameTime:0.1}}});});

// lib/game/abilities/mimic-casted.js
ig.baked=true;ig.module('game.abilities.mimic-casted').requires('plusplus.abilities.mimic','plusplus.entities.effect-electricity','game.entities.effect-mimic','game.entities.effect-fail','plusplus.helpers.utils','plusplus.helpers.utilsvector2').defines(function(){"use strict";var _ut=ig.utils;var _utv2=ig.utilsvector2;ig.AbilityMimicCasted=ig.AbilityMimic.extend({activateSetupCastSettings:{animName:'mimicSetup'},activatePassCastSettings:{delay:1,animName:'mimicPass',effects:[{entityClass:ig.EntityEffectMimic,followSettings:{matchPerformance:true,offsetPct:_utv2.vector(1,-0.15)}}]},activateCastSettings:{animName:'mimicActivate',effects:[{entityClass:ig.EntityEffectElectricity,fade:true,followSettings:{matchPerformance:true}}]},failCastSettings:{delay:0.5,animName:'mimicFail',loop:false,effects:[{entityClass:ig.EntityEffectFail,fade:true,followSettings:{matchPerformance:true,offsetPct:_utv2.vector(1,-0.15)}}]},deactivateFromExecuteCastSettings:{animName:'mimicDeactivate'},canTargetSelf:true,initTypes:function(){_ut.addType(ig.Ability,this,'type',"SPAMMABLE MIMIC");_ut.addType(ig.EntityExtended,this,'typeTargetable',"MIMICABLE");},execute:function(){if(this.enabled){if(this.entity===this.entityTarget){this.cleanup();this.cast(this.deactivateFromExecuteCastSettings);}
else{this.parent();}}}});});

// lib/plusplus/abilities/ability-shoot.js
ig.baked=true;ig.module('plusplus.abilities.ability-shoot').requires('plusplus.core.config','plusplus.core.input','plusplus.abilities.ability').defines(function(){"use strict";var _c=ig.CONFIG;ig.AbilityShoot=ig.Ability.extend({spawningEntity:'',shootLocationMinPctX:0,shootLocationMaxPctX:1,shootLocationMinPctY:_c.TOP_DOWN?0:0.5,shootLocationMaxPctY:_c.TOP_DOWN?1:0.5,offsetAccelX:0,offsetAccelY:0,offsetVelX:0,offsetVelY:0,relativeVelPctX:0,relativeVelPctY:0,activateCastSettings:{animName:'shoot',moving:true},activate:function(settings){settings=settings||{};var minX=this.entity.pos.x;var minY=this.entity.pos.y;var width=this.entity.size.x;var height=this.entity.size.y;var centerX=minX+width*0.5;var centerY=minY+height*0.5;var entityOptions=this.entityOptions||this.entity;var ps={group:this.entity.group};if(entityOptions.projectileSettings){ig.merge(ps,entityOptions.projectileSettings);}
if(settings.projectileSettings){ig.merge(ps,settings.projectileSettings);}
var projectile=ig.game.spawnEntity(this.spawningEntity,centerX,centerY,ps);var shootX=centerX;var shootY=centerY;if(settings){var offsetX=settings.offsetX||0;var offsetY=settings.offsetY||0;var length;var normalX;var normalY;if(!offsetX&&!offsetY){var x;var y;if(settings instanceof ig.InputPoint){x=settings.worldX||0;y=settings.worldY||0;}
else{x=settings.x||0;y=settings.y||0;}
var diffX=x-centerX;var diffY=y-centerY;length=Math.sqrt(diffX*diffX+diffY*diffY);normalX=diffX/length;normalY=diffY/length;offsetX=normalX*width*0.5;offsetY=normalY*height*0.5;}
length=Math.sqrt(offsetX*offsetX+offsetY*offsetY);if(offsetX){shootX+=offsetX;normalX=offsetX/length;if((offsetX>0&&projectile.vel.x<0)||(offsetX<0&&projectile.vel.x>0)){projectile.vel.x=-projectile.vel.x;}
if(this.offsetAccelX){projectile.accel.x+=this.offsetAccelX*(this.offsetAccelY?normalX:(normalX<0?-1:1));}
if(this.offsetVelX){projectile.vel.x+=this.offsetVelX*(this.offsetVelY?normalX:(normalX<0?-1:1));}}
if(offsetY){shootY+=offsetY;normalY=offsetY/length;if((offsetY>0&&projectile.vel.y<0)||(offsetY<0&&projectile.vel.y>0)){projectile.vel.x=-projectile.vel.y;}
if(this.offsetAccelY){projectile.accel.y+=this.offsetAccelY*(this.offsetAccelX?normalY:(normalY<0?-1:1));}
if(this.offsetVelY){projectile.vel.y+=this.offsetVelY*(this.offsetVelX?normalY:(normalY<0?-1:1));}}}
if(this.relativeVelPctX){projectile.vel.x+=this.entity.vel.x*this.relativeVelPctX;}
if(this.relativeVelPctY){projectile.vel.y+=this.entity.vel.y*this.relativeVelPctY;}
projectile.pos.x=shootX.limit(minX+width*this.shootLocationMinPctX,minX+width*this.shootLocationMaxPctX)-projectile.size.x*0.5;projectile.pos.y=shootY.limit(minY+height*this.shootLocationMinPctY,minY+height*this.shootLocationMaxPctY)-projectile.size.y*0.5;this.entity.lookAt(projectile);this.parent();return projectile;},clone:function(c){if(c instanceof ig.AbilityShoot!==true){c=new ig.AbilityShoot();}
c.spawningEntity=this.spawningEntity;return this.parent(c);}});});

// lib/plusplus/abstractities/projectile.js
ig.baked=true;ig.module('plusplus.abstractities.projectile').requires('plusplus.core.config','plusplus.abstractities.particle','plusplus.helpers.utils').defines(function(){var _c=ig.CONFIG;var _ut=ig.utils;ig.Projectile=ig.Particle.extend({gravityFactor:0.1,lifeDuration:4,fadeBeforeDeathDuration:0,randomVel:false,randomDoubleVel:false,randomFlip:false,damage:1,damageAsPct:false,damageUnblockable:false,initProperties:function(){this.parent();_ut.addType(ig.EntityExtended,this,'checkAgainst',"DAMAGEABLE");},check:function(entity){this.parent(entity);var damage;if(this.damageAsPct){damage=entity.health*this.damage;}
else{damage=this.damage;}
entity.receiveDamage(damage,this,this.damageUnblockable);this.kill();}});});

// lib/game/entities/projectile-laser.js
ig.baked=true;ig.module('game.entities.projectile-laser').requires('plusplus.abstractities.projectile','plusplus.entities.explosion','plusplus.core.config','plusplus.helpers.utils').defines(function(){"use strict";var _c=ig.CONFIG;var _ut=ig.utils;ig.EntityProjectileLaser=ig.global.EntityProjectileLaser=ig.Projectile.extend({collides:ig.EntityExtended.COLLIDES.LITE,size:{x:4,y:4},offset:{x:2,y:2},animSheet:new ig.AnimationSheet(_c.PATH_TO_MEDIA+'projectile.png',8,8),animSettings:{moveX:{frameTime:1,sequence:[0]},deathX:{frameTime:0.05,sequence:[1,2,3,4,5]},moveY:{frameTime:1,sequence:[6]},deathY:{frameTime:0.05,sequence:[7,8,9,10,11]}},canFlipX:true,canFlipY:true,damage:2,lifeDuration:2,gravityFactor:0,friction:{x:0,y:0},bounciness:0,collisionKills:true});});

// lib/game/abilities/laser-gun.js
ig.baked=true;ig.module('game.abilities.laser-gun').requires('plusplus.core.config','plusplus.abilities.ability-shoot','game.entities.projectile-laser','plusplus.helpers.utils').defines(function(){"use strict";var _c=ig.CONFIG;var _ut=ig.utils;ig.AbilityLaserGun=ig.AbilityShoot.extend({spawningEntity:ig.EntityProjectileLaser,offsetVelX:200,offsetVelY:_c.TOP_DOWN?200:0,initTypes:function(){this.parent();_ut.addType(ig.Ability,this,'type',"SPAMMABLE");}});});

// lib/game/entities/projectile-grenade.js
ig.baked=true;ig.module('game.entities.projectile-grenade').requires('plusplus.abstractities.projectile','plusplus.core.config','plusplus.helpers.utils').defines(function(){"use strict";var _c=ig.CONFIG;var _ut=ig.utils;ig.EntityProjectileGrenade=ig.global.EntityProjectileGrenade=ig.Projectile.extend({collides:ig.EntityExtended.COLLIDES.LITE,size:{x:8,y:8},offset:{x:4,y:4},animSheet:new ig.AnimationSheet(_c.PATH_TO_MEDIA+'grenade.png',16,16),animSettings:{moveX:{frameTime:0.2,sequence:[0,1]},moveY:{frameTime:0.2,sequence:[0,1]},deathX:{frameTime:0.1,sequence:[2,3,4,5]},deathY:{frameTime:0.1,sequence:[2,3,4,5]}},canFlipX:true,canFlipY:true,damage:10,lifeDuration:1,gravityFactor:0.5,friction:{x:5,y:0}});});

// lib/game/abilities/grenade-launcher.js
ig.baked=true;ig.module('game.abilities.grenade-launcher').requires('plusplus.abilities.ability-shoot','game.entities.projectile-grenade','plusplus.helpers.utils').defines(function(){"use strict";var _ut=ig.utils;ig.AbilityGrenadeLauncher=ig.AbilityShoot.extend({spawningEntity:ig.EntityProjectileGrenade,costActivate:4,offsetVelX:100,offsetVelY:100,relativeVelPctX:1,relativeVelPctY:1,shootLocationMinPctY:0,shootLocationMaxPctY:1,initTypes:function(){this.parent();_ut.addType(ig.Ability,this,'type',"SPAMMABLE");}});});

// lib/plusplus/abilities/ability-damage.js
ig.baked=true;ig.module('plusplus.abilities.ability-damage').requires('plusplus.core.entity','plusplus.abilities.ability','plusplus.helpers.utils').defines(function(){"use strict";var _ut=ig.utils;ig.AbilityDamage=ig.Ability.extend({damage:1,damageAsPct:false,damageUnblockable:false,requiresTarget:true,canTargetSelf:false,initTypes:function(){this.parent();_ut.addType(ig.EntityExtended,this,'typeTargetable',"DAMAGEABLE");},activate:function(){var damage;if(this.damageAsPct){damage=this.entityTarget.health*this.damage;}
else{damage=this.damage;}
this.entityTarget.receiveDamage(damage,this.entity,this.damageUnblockable);this.parent();},clone:function(c){if(c instanceof ig.AbilityDamage!==true){c=new ig.AbilityDamage();}
c.damage=this.damage;c.damageAsPct=this.damageAsPct;c.damageUnblockable=this.damageUnblockable;return this.parent(c);}});});

// lib/plusplus/entities/effect-pow.js
ig.baked=true;ig.module('plusplus.entities.effect-pow').requires('plusplus.core.config','plusplus.abstractities.effect','plusplus.helpers.utilsvector2').defines(function(){"use strict";var _c=ig.CONFIG;var _utv2=ig.utilsvector2;ig.EntityEffectPow=ig.global.EntityEffectPow=ig.Effect.extend({performance:_c.STATIC,size:_utv2.vector(8,8),animAutomatic:false,animSheet:new ig.AnimationSheet(_c.PATH_TO_MEDIA+'effect_pow.png',8,8),animSettings:{moveX:{sequence:[0,1],frameTime:0.125}},lifeDuration:0.25,fadeBeforeDeathDuration:0.05});});

// lib/plusplus/abilities/melee.js
ig.baked=true;ig.module('plusplus.abilities.melee').requires('plusplus.core.config','plusplus.abilities.ability-damage','plusplus.entities.effect-pow','plusplus.helpers.utils','plusplus.helpers.utilsvector2').defines(function(){"use strict";var _c=ig.CONFIG;var _ut=ig.utils;var _utv2=ig.utilsvector2;ig.AbilityMelee=ig.AbilityDamage.extend({cooldownDelay:0.2,rangeX:_c.CHARACTER.SIZE_EFFECTIVE_X*1.5,canFindTarget:true,activateCastSettings:{animName:'melee',moving:true,effects:[{entityClass:ig.EntityEffectPow,ignoreDuration:true,followTarget:true,followSettings:{matchPerformance:true,randomOffsetPct:_utv2.vector(0.2,0.2)}}]},initTypes:function(){this.parent();_ut.addType(ig.Ability,this,'type',"SPAMMABLE");},clone:function(c){if(c instanceof ig.AbilityMelee!==true){c=new ig.AbilityMelee();}
return this.parent(c);}});});

// lib/plusplus/ui/ui-meter.js
ig.baked=true;ig.module('plusplus.ui.ui-meter').requires('plusplus.core.config','plusplus.core.image-drawing','plusplus.ui.ui-element','plusplus.helpers.utilsmath','plusplus.helpers.utilsvector2').defines(function(){var _c=ig.CONFIG;var _utm=ig.utilsmath;var _utv2=ig.utilsvector2;ig.UIMeter=ig.global.UIMeter=ig.UIElement.extend({_wmScalable:true,value:1,lerp:0.1,vertical:false,bar:true,barSize:_utv2.vector(_c.ENTITY.SIZE_X*2,Math.round(_c.ENTITY.SIZE_Y*0.25)),barAnimSpacing:1,fillStyle:'rgb(255,255,255)',backgroundStyle:'rgb(50,50,50)',borderWidth:1,borderSpacing:1,borderStyle:'',barTotalWidth:0,barTotalHeight:0,_valueTarget:1,_borderOffset:0,_borderExtra:0,resetExtras:function(){if(this.bar){if(!this.fill){this.fill=new ig.ImageDrawing();}
if(this.backgroundStyle){if(!this.background){this.background=new ig.ImageDrawing();}}
else{this.background=null;}
if(this.borderWidth){if(!this.border){this.border=new ig.ImageDrawing();}}
else{this.border=null;}}
else{this.fill=this.background=this.border=null;}
this._valueTarget=this.value;this.parent();},recordResetState:function(){this.parent();this.resetState.size=this.resetState.size||_utv2.vector();_utv2.copy(this.resetState.size,this.size);},resize:function(force){if(this.bar){var barTotalWidth=this.barTotalWidth;var barTotalHeight=this.barTotalHeight;this.barTotalWidth=this.barSize.x;this.barTotalHeight=this.barSize.y;if(this.borderWidth){this._borderExtra=this.borderWidth+this.borderSpacing;this.barTotalWidth+=this._borderExtra*2;this.barTotalHeight+=this._borderExtra*2;if(this.borderWidth%2===0){this._borderOffset=0.5;}}
if(this.barTotalWidth!==barTotalWidth){force=this.needsRebuild=true;}
if(this.barTotalHeight!==barTotalHeight){force=this.needsRebuild=true;}
if(this.vertical){this.size.y=this.resetState.size.y+this.barTotalHeight;if(this.animSheet||this.animSheetPath){this.size.y+=this.barAnimSpacing;}}
else{this.size.x=this.resetState.size.x+this.barTotalWidth;if(this.animSheet||this.animSheetPath){this.size.x+=this.barAnimSpacing;}}}
return this.parent(force);},rebuild:function(){if(this.bar){this.fill.setDimensions(this.barSize.x,this.barSize.y);this.fill.dataContext.fillStyle=this.fillStyle;this.fill.dataContext.fillRect(0,0,this.barSize.x,this.barSize.y);this.fill.finalize();if(this.background){this.background.setDimensions(this.barSize.x,this.barSize.y);this.background.dataContext.fillStyle=this.backgroundStyle;this.background.dataContext.fillRect(0,0,this.barSize.x,this.barSize.y);this.background.finalize();}
if(this.border){this.border.setDimensions(this.barTotalWidth,this.barTotalHeight);this.border.dataContext.strokeStyle=this.borderStyle||this.fillStyle;this.border.dataContext.strokeRect(this.borderWidth*0.5+this._borderOffset,this.borderWidth*0.5+this._borderOffset,this.barTotalWidth-this.borderWidth-this._borderOffset*2,this.barTotalHeight-this.borderWidth-this._borderOffset*2);this.border.finalize();}}
this.parent();},setValue:function(value){if(this._valueTarget!==value){this._valueTarget=value.limit(0,1);}},draw:function(){if(this.visible){if(this.value!==this._valueTarget){var dv=this._valueTarget-this.value;this.value+=dv*this.lerp;if(_utm.almostEqual(dv,0,_c.PRECISION_ZERO)){this.value=this._valueTarget;}
if(this.currentAnim){var frame=Math.round((this.currentAnim.sequence.length-1)*this.value);if(this.currentAnim.frame!==frame){this.currentAnim.gotoFrame(frame);}}}
this.parent();if(this.bar){var barSizeX=this.barSize.x;var barSizeY=this.barSize.y;var extraX=0;var extraY=0;var valueSizeX;var valueSizeY;var offsetSizeX;var offsetSizeY;var invValueSizeX;var invValueSizeY;var srcOriginX;var srcOriginY;if(this.vertical){extraX+=(this.sizeDraw.x-this.barTotalWidth)*0.5;valueSizeX=invValueSizeX=barSizeX;valueSizeY=srcOriginY=offsetSizeY=barSizeY*this.value;invValueSizeY=barSizeY-valueSizeY;offsetSizeX=srcOriginX=0;offsetSizeY*=this.scaleMod;if(this.animSheet){extraY+=this.barAnimSpacing+this.animSheet.height;}}
else{extraY+=(this.sizeDraw.y-this.barTotalHeight)*0.5;valueSizeX=srcOriginX=offsetSizeX=barSizeX*this.value;valueSizeY=invValueSizeY=barSizeY;invValueSizeX=barSizeX-valueSizeX;offsetSizeY=srcOriginY=0;offsetSizeX*=this.scaleMod;if(this.animSheet){extraX+=this.barAnimSpacing+this.animSheet.width;}}
extraX*=this.scaleMod;extraY*=this.scaleMod;if(this.fixed){if(this.borderWidth>0){this.border.draw(this.posDraw.x+extraX,this.posDraw.y+extraY,undefined,undefined,undefined,undefined,this.scale);extraX+=this._borderExtra*this.scaleMod;extraY+=this._borderExtra*this.scaleMod;}
if(this.value<1&&this.backgroundStyle){this.background.draw(this.posDraw.x+offsetSizeX+extraX,this.posDraw.y+offsetSizeY+extraY,srcOriginX,srcOriginY,invValueSizeX,invValueSizeY,this.scale);}
this.fill.draw(this.posDraw.x+extraX,this.posDraw.y+extraY,0,0,valueSizeX,valueSizeY,this.scale);}
else{if(this.borderWidth>0){this.border.draw(this.posDraw.x+extraX-ig.game.screen.x,this.posDraw.y+extraY-ig.game.screen.y,undefined,undefined,undefined,undefined,this.scale);extraX+=this._borderExtra;extraY+=this._borderExtra;}
if(this.value<1&&this.backgroundStyle){this.background.draw(this.posDraw.x+offsetSizeX+extraX-ig.game.screen.x,this.posDraw.y+offsetSizeY+extraY-ig.game.screen.y,srcOriginX,srcOriginY,invValueSizeX,invValueSizeY,this.scale);}
this.fill.draw(this.posDraw.x+extraX-ig.game.screen.x,this.posDraw.y+extraY-ig.game.screen.y,0,0,valueSizeX,valueSizeY,this.scale);}}}}});});

// lib/plusplus/ui/ui-interactive.js
ig.baked=true;ig.module('plusplus.ui.ui-interactive').requires('plusplus.ui.ui-element','plusplus.helpers.utils').defines(function(){"use strict";var _ut=ig.utils;ig.UIInteractive=ig.global.UIInteractive=ig.UIElement.extend({targetable:true,initTypes:function(){this.parent();_ut.addType(ig.EntityExtended,this,'type',"INTERACTIVE");}});});

// lib/plusplus/entities/direction.js
ig.baked=true;ig.module('plusplus.entities.direction').requires('plusplus.core.config','plusplus.abstractities.particle','plusplus.helpers.utilsvector2').defines(function(){"use strict";var _c=ig.CONFIG;var _utv2=ig.utilsvector2;ig.EntityDirection=ig.global.EntityDirection=ig.Particle.extend({performance:_c.STATIC,size:_utv2.vector(32,32),animSheet:new ig.AnimationSheet(_c.PATH_TO_MEDIA+'directions_32.png',32,32),randomFlip:false,lifeDuration:1.5,fadeAfterSpawnDuration:0.25,fadeBeforeDeathDuration:1,alpha:0.75,directionName:'',direction:_utv2.vector(),animSettings:{none:{sequence:[0]},left:{sequence:[1]},right:{sequence:[2]},up:{sequence:[3]},down:{sequence:[4]},upleft:{sequence:[5]},upright:{sequence:[6]},downleft:{sequence:[7]},downright:{sequence:[8]}},canFlipX:false,canFlipY:false,resetExtras:function(){for(var animName in this.anims){var anim=this.anims[animName];anim.frameTime=anim.sequence.length/this.lifeDuration;}
if(!this.directionName){this.setDirectionName(this.directionName);}
else{this.setDirection(this.direction);}
this.parent();},setDirection:function(direction){if(typeof direction==="undefined"){this.direction=_utv2.vector();}
else{this.direction=direction;}
this.directionName=_utv2.directionToString(this.direction).toLowerCase();this.currentAnim=this.anims[this.directionName];},setDirectionName:function(directionName){this.directionName=directionName||'NONE';this.direction=_utv2.copy(this.direction,_utv2.DIRECTION[this.directionName.toUpperCase()]);this.currentAnim=this.anims[this.directionName];}});});

// lib/plusplus/ui/ui-tracker.js
ig.baked=true;ig.module('plusplus.ui.ui-tracker').requires('plusplus.core.config','plusplus.core.timer','plusplus.ui.ui-interactive','plusplus.entities.direction','plusplus.helpers.utilsmath','plusplus.helpers.utilsvector2').defines(function(){"use strict";var _c=ig.CONFIG;var _utm=ig.utilsmath;var _utv2=ig.utilsvector2;ig.UITracker=ig.global.UITracker=ig.UIInteractive.extend({entityClass:'',entityName:'',entityTracking:'',entityDirectionClass:ig.EntityDirection,entityDirectionIndicator:null,autoTrackingDelay:2,autoTrackingTimer:null,alwaysToggleActivate:true,directionThresholdX:_c.CHARACTER.SIZE_EFFECTIVE_X,directionThresholdY:_c.CHARACTER.SIZE_EFFECTIVE_Y,initProperties:function(){this.parent();this.autoTrackingTimer=new ig.TimerExtended(0,this);},activate:function(entity){this.track(true,entity);this.parent(entity);},track:function(show,entity){this.untrack();var x;var y;if(show!==false){if(!entity){entity=ig.game.getPlayer();}
if(entity){x=entity.pos.x+entity.size.x*0.5;y=entity.pos.y+entity.size.y*0.5;}
else{x=ig.game.screen.x+ig.system.width*0.5;y=ig.game.screen.y+ig.system.height*0.5;}}
if(this.entityName){this.entityTracking=ig.game.namedEntities[this.entityName];}
if(!this.entityTracking&&this.entityClass){this.entityTracking=ig.game.getEntitiesByClass(this.entityClass,{from:{x:x,y:y},first:!show})[0];}
if(this.entityTracking){this.entityTracking.onRemoved.add(this.untrack,this);this.currentAnim=this.anims.tracking;if(show!==false){if(!this.entityDirectionIndicator){this.entityDirectionIndicator=ig.game.spawnEntity(this.entityDirectionClass,0,0);}
else{this.entityDirectionIndicator.kill(true);ig.game.spawnEntity(this.entityDirectionIndicator,0,0);}
var diffX=this.entityTracking.pos.x+this.entityTracking.size.x*0.5-x;var diffY=this.entityTracking.pos.y+this.entityTracking.size.y*0.5-y;var direction=_utv2.directionThreshold(_utv2.vector(diffX,diffY),this.directionThresholdX,this.directionThresholdY);this.entityDirectionIndicator.setDirection(direction);var dirX=_utm.direction(direction.x);var dirY=_utm.direction(direction.y);var length=Math.sqrt(dirX*dirX+dirY*dirY);var normalX=dirX/length;var normalY=dirY/length;var offsetX=normalX*(this.entityDirectionIndicator.sizeDraw.x*0.5+(entity?entity.size.x*0.5:0));var offsetY=normalY*(this.entityDirectionIndicator.sizeDraw.y*0.5+(entity?entity.size.y*0.5:0));this.entityDirectionIndicator.pos.x=x+offsetX-this.entityDirectionIndicator.sizeDraw.x*0.5;this.entityDirectionIndicator.pos.y=y+offsetY-this.entityDirectionIndicator.sizeDraw.y*0.5;}}
else{this.autoTrackingTimer.set(this.autoTrackingDelay);}},untrack:function(){if(this.entityTracking){this.entityTracking.onRemoved.remove(this.untrack,this);this.entityTracking=undefined;}
this.currentAnim=this.anims.idle;},updateVisible:function(){this.parent();if(!this.entityTracking&&this.autoTrackingTimer.delta()>=0){this.track(false);}}});});

// lib/plusplus/ui/ui-toggle.js
ig.baked=true;ig.module('plusplus.ui.ui-toggle').requires('plusplus.ui.ui-interactive').defines(function(){"use strict";ig.UIToggle=ig.global.UIToggle=ig.UIInteractive.extend({animNameActivate:'on',animNameDeactivate:'idle',activate:function(entity){this.currentAnim=this.anims[this.getDirectionalAnimName(this.animNameActivate)];this.parent(entity);},deactivate:function(entity){this.currentAnim=this.anims[this.getDirectionalAnimName(this.animNameDeactivate)];this.parent(entity);}});});

// lib/plusplus/ui/ui-toggle-pause.js
ig.baked=true;ig.module('plusplus.ui.ui-toggle-pause').requires('plusplus.core.config','plusplus.ui.ui-toggle').defines(function(){"use strict";var _c=ig.CONFIG;ig.UITogglePause=ig.global.UITogglePause=ig.UIToggle.extend({size:{x:12,y:12},animSheet:new ig.AnimationSheet(_c.PATH_TO_MEDIA+'icons_pause.png',12,12),animSettings:{idleX:{sequence:[0],frameTime:1},onX:{sequence:[1],frameTime:1}},ready:function(){ig.game.onPaused.add(this.activate,this);ig.game.onUnpaused.add(this.deactivate,this);this.parent();},activate:function(entity){this.parent(entity);if(!ig.game.paused){ig.game.pause();}},deactivate:function(entity){this.parent(entity);if(ig.game.paused){ig.game.unpause();}},cleanup:function(){ig.game.onPaused.remove(this.activate,this);ig.game.onUnpaused.remove(this.deactivate,this);this.parent();}});});

// lib/game/entities/player.js
ig.baked=true;ig.module('game.entities.player').requires('plusplus.core.config','plusplus.abstractities.player','game.abilities.mimic-casted','game.abilities.laser-gun','game.abilities.grenade-launcher','plusplus.abilities.melee','plusplus.ui.ui-meter','plusplus.ui.ui-tracker','plusplus.ui.ui-toggle-pause').defines(function(){"use strict";var _c=ig.CONFIG;ig.EntityPlayer=ig.global.EntityPlayer=ig.Player.extend({animSheet:new ig.AnimationSheet(_c.PATH_TO_MEDIA+'player.png',_c.CHARACTER.SIZE_X,_c.CHARACTER.SIZE_Y),animInit:"idleX",animSettings:{idleX:{sequence:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,2,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,5,5,5,5,5,5,5,5,5,5,5,5,5,4],frameTime:0.1},deathX:{sequence:[6,7,8],frameTime:0.05},spawnX:{sequence:[11,10,9,8,7,6],frameTime:0.1},moveX:{sequence:[12,13,14,15,16,17],frameTime:0.1},jumpX:{sequence:[16,18,19],frameTime:0.05,opaqueOffset:{left:6,right:-6,top:0,bottom:-5}},fallX:{sequence:[20,21],frameTime:0.1},climbX:{sequence:[24,25,26,27,28,29],frameTime:0.1,opaqueOffset:{left:6,right:-6,top:-3,bottom:-9}},stairsX:{sequence:[22,23],frameTime:0.15},talkX:{sequence:[0],frameTime:1},listenX:{sequence:[0],frameTime:1},meleeX:{sequence:[30,31],frameTime:0.1,opaqueOffset:{left:6,right:-6,top:2,bottom:3}},shootX:{sequence:[32,33,32],frameTime:0.1},mimicSetupX:{sequence:[32,33],frameTime:0.1},mimicPassX:{sequence:[34,35],frameTime:0.1},mimicFailX:{sequence:[34,35,33,33,32],frameTime:0.1},mimicActivateX:{sequence:[6,7,8,7,6],frameTime:0.1},mimicDeactivateX:{sequence:[32,33,32],frameTime:0.1}},opaque:true,opaqueOffset:{left:6,right:-6,top:-1,bottom:3},health:10,energy:10,regen:true,regenEnergy:true,regenRateEnergy:0.1,persistent:true,ui:{},initProperties:function(){this.parent();if(!ig.global.wm){this.abilityMelee=new ig.AbilityMelee(this,{name:'melee',enabled:false});this.abilityLaserGun=new ig.AbilityLaserGun(this,{name:'laserGun',enabled:false});this.abilityGrenadeLauncher=new ig.AbilityGrenadeLauncher(this,{name:'grenadeLauncher',enabled:false});this.abilityMimic=new ig.AbilityMimicCasted(this,{name:'mimic',enabled:false});this.abilities.addDescendants([this.abilityMelee,this.abilityLaserGun,this.abilityGrenadeLauncher,this.abilityMimic]);}},activate:function(){this.parent();if(!this._activeUI){this._activatingUI=true;if(!this.ui.pauseToggle){this.ui.pauseToggle=ig.game.spawnEntity(ig.UITogglePause,0,0,{posPct:{x:1,y:0},align:{x:1,y:0},marginAsPct:false,margin:{x:15,y:15}});return;}
if(!this.ui.healthMeter){this.ui.healthMeter=ig.game.spawnEntity(ig.UIMeter,0,0,{animSheetPath:'icons_stats.png',animSettings:true,fillStyle:'rgb(255,54,90)',size:{x:8,y:8},marginAsPct:false,margin:{x:15,y:15}});return;}
if(!this.ui.energyMeter){this.ui.energyMeter=ig.game.spawnEntity(ig.UIMeter,0,0,{animSheetPath:'icons_stats.png',animTileOffset:1,animSettings:true,fillStyle:'rgb(69,170,255)',size:{x:8,y:8},linkedTo:this.ui.healthMeter,linkAlign:{x:0,y:1},marginAsPct:false,margin:{x:0,y:10}});return;}
if(!this.ui.tracker){this.ui.tracker=ig.game.spawnEntity(ig.UITracker,0,0,{animSheetPath:'icons_trackers.png',animSheetWidth:16,animSheetHeight:16,animSettings:{idle:{sequence:[0]},tracking:{sequence:[1]}},entityName:'villainTracked',entityClass:'EntityVillain',frozen:false,size:{x:16,y:16},linkedTo:this.ui.pauseToggle,linkAlign:{x:-1,y:0},marginAsPct:false,margin:{x:10,y:0}});}
this._activeUI=true;this._activatingUI=false;}},deactivate:function(){this.parent();if(this._activatingUI||this._activeUI){this._activeUI=this._activatingUI=false;if(this.ui.healthMeter){ig.game.removeEntity(this.ui.healthMeter);this.ui.healthMeter=null;}
if(this.ui.energyMeter){ig.game.removeEntity(this.ui.energyMeter);this.ui.energyMeter=null;}
if(this.ui.pauseToggle){ig.game.removeEntity(this.ui.pauseToggle);this.ui.pauseToggle=null;}
if(this.ui.tracker){ig.game.removeEntity(this.ui.tracker);this.ui.tracker=null;}}},receiveDamage:function(amount,from,unblockable){var killed=this._killed;var applied=this.parent(amount,from,unblockable);if(!killed&&applied&&this.ui.healthMeter){this.ui.healthMeter.setValue(this.health/this.healthMax);}
return applied;},receiveHealing:function(amount,from){this.parent(amount,from);if(!this._killed&&this.ui.healthMeter){this.ui.healthMeter.setValue(this.health/this.healthMax);}},drainEnergy:function(amount,from,unblockable){var killed=this._killed;var applied=this.parent(amount,from,unblockable);if(!killed&&applied&&this.ui.energyMeter){this.ui.energyMeter.setValue(this.energy/this.energyMax);}},receiveEnergy:function(amount,from){this.parent(amount,from);if(!this._killed&&this.ui.energyMeter){this.ui.energyMeter.setValue(this.energy/this.energyMax);}},handleInput:function(){var i,il;var inputPoints;var inputPoint;if(ig.input.state('swipe')){inputPoints=ig.input.getInputPoints(['swiping'],[true]);for(i=0,il=inputPoints.length;i<il;i++){inputPoint=inputPoints[i];if(inputPoint.swipingUp){this.jump();}}}
this.parent();},cleanupPersistent:function(){this.deactivate();}});});

// lib/game/entities/checkpoint-start.js
ig.baked=true;ig.module('game.entities.checkpoint-start').requires('plusplus.entities.checkpoint','game.entities.player').defines(function(){"use strict";ig.EntityCheckpointStart=ig.global.EntityCheckpointStart=ig.EntityCheckpoint.extend({spawningEntity:ig.EntityPlayer});});

// lib/plusplus/abstractities/creature.js
ig.baked=true;ig.module('plusplus.abstractities.creature').requires('plusplus.core.config','plusplus.abstractities.character','plusplus.helpers.utils','plusplus.helpers.utilsintersection').defines(function(){"use strict";var _c=ig.CONFIG;var _ut=ig.utils;var _uti=ig.utilsintersection;ig.Creature=ig.Character.extend({performance:_c.DYNAMIC,collides:ig.EntityExtended.COLLIDES.PASSIVE,reactionDistance:_c.CREATURE.REACTION_DISTANCE,reactionDelay:_c.CREATURE.REACTION_DELAY,reactionTimer:null,preyName:'',preyClass:null,preyType:ig.EntityExtended.TYPE.NONE,preyGroup:ig.EntityExtended.GROUP.NONE,prey:null,needsLineOfSightPrey:_c.CREATURE.NEEDS_LINE_OF_SIGHT_PREY,moveToPreySettings:{avoidEntities:true,searchDistance:_c.CREATURE.REACTION_DISTANCE},predatorName:'',predatorClass:null,predatorType:ig.EntityExtended.TYPE.NONE,predatorGroup:ig.EntityExtended.GROUP.NONE,canLearnPredators:_c.CREATURE.CAN_LEARN_PREDATORS,predator:null,needsLineOfSightPredator:_c.CREATURE.NEEDS_LINE_OF_SIGHT_PREDATOR,moveToPredatorSettings:{avoidEntities:true,searchDistance:_c.CREATURE.REACTION_DISTANCE},canFlee:_c.CREATURE.CAN_FLEE,fleeHealthPct:_c.CREATURE.FLEE_HEALTH_PCT,fleeing:false,fleeingLowHealth:false,tetherDistance:_c.CREATURE.TETHER_DISTANCE,canBreakTether:_c.CREATURE.CAN_BREAK_TETHER,tetherName:'',tetherToSpawner:_c.CREATURE.TETHER_TO_SPAWNER,tethering:false,entityTether:null,moveToTetherSettings:{avoidEntities:true},canWanderX:_c.CREATURE.CAN_WANDER_X,canWanderY:_c.CREATURE.CAN_WANDER_Y,wanderSwitchChance:_c.CREATURE.WANDER_SWITCH_CHANCE,wanderSwitchChanceStopped:_c.CREATURE.WANDER_SWITCH_CHANCE_STOPPED,wandering:false,wanderDirection:{x:0,y:0},wanderPos:{x:0,y:0},moveToWanderSettings:{simple:true,avoidUngrounded:true},_preySearchSettings:{},_predatorSearchSettings:{},initTypes:function(){this.parent();_ut.addType(ig.EntityExtended,this,'type',"CREATURE");},initProperties:function(){this.parent();this.reactionTimer=new ig.TimerExtended(0,this);},resetCore:function(x,y,settings){if(settings&&!ig.global.wm){if(settings.preyType){_ut.addType(ig.EntityExtended,this,'preyType',settings.preyType);delete settings.preyType;}
if(settings.preyGroup){_ut.addType(ig.EntityExtended,this,'preyGroup',settings.preyGroup,"GROUP");delete settings.preyGroup;}
if(settings.predatorType){_ut.addType(ig.EntityExtended,this,'predatorType',settings.predatorType);delete settings.predatorType;}
if(settings.predatorGroup){_ut.addType(ig.EntityExtended,this,'predatorGroup',settings.predatorGroup,"GROUP");delete settings.predatorGroup;}}
this.parent(x,y,settings);},resetExtras:function(){if(this.canWanderX){this.wanderDirection.x=Math.random()<0.5?-1:1;}
else{this.wanderDirection.x=0;}
if(this.canWanderY){this.wanderDirection.y=Math.random()<0.5?-1:1;}
else{this.wanderDirection.y=0;}
var preySearchSettings=this._preySearchSettings;var predatorSearchSettings=this._preySearchSettings;preySearchSettings.from=predatorSearchSettings.from=this;preySearchSettings.layerName=predatorSearchSettings.layerName=this.layerName;preySearchSettings.byDistance=predatorSearchSettings.byDistance=true;preySearchSettings.lineOfSight=this.needsLineOfSightPrey;predatorSearchSettings.lineOfSight=this.needsLineOfSightPredator;this.parent();},spawn:function(){if(this.tetherDistance>0&&!this.entityTether){if(this.tetherName){this.entityTether=ig.game.getEntityByName(this.tetherName);}
if(!this.entityTether&&this.tetherToSpawner){this.entityTether=this.spawner;}}
this.parent();},findPredatorPrey:function(force){if(this.tethering&&!this.canBreakTether){return;}
var needsPrey=force||!this.prey;var needsPredator=force||!this.predator;if(needsPrey||needsPredator){var cX=this.pos.x+this.size.x*0.5;var cY=this.pos.y+this.size.y*0.5;var minX;var minY;var maxX;var maxY;if(this.reactionDistance<Number.MAX_VALUE){minX=cX-this.reactionDistance;minY=cY-this.reactionDistance;maxX=cX+this.reactionDistance;maxY=cY+this.reactionDistance;}
if(needsPrey){if(this.preyName){var prey=ig.game.getEntityByName(this.preyName);if(prey&&(!minX||_uti.AABBIntersect(minX,minY,maxX,maxY,prey.pos.x,prey.pos.y,prey.pos.x+prey.width,prey.pos.y+prey.height))&&(!this.needsLineOfSightPrey||this.lineOfSight(prey))){this.prey=prey;}}
else{var preySearchSettings=this._preySearchSettings;preySearchSettings.minX=minX;preySearchSettings.minY=minY;preySearchSettings.maxX=maxX;preySearchSettings.maxY=maxY;if(this.preyClass){this.prey=ig.game.getEntitiesByClass(this.preyClass,preySearchSettings)[0];}
else if(this.preyType){this.prey=ig.game.getEntitiesByType(this.preyType,preySearchSettings)[0];}
else if(this.preyGroup){this.prey=ig.game.getCharactersByGroup(this.preyGroup,preySearchSettings)[0];}}}
if(needsPredator){if(this.predatorName){var predator=ig.game.getEntityByName(this.predatorName);if(predator&&(!minX||_uti.AABBIntersect(minX,minY,maxX,maxY,predator.pos.x,predator.pos.y,predator.pos.x+predator.width,predator.pos.y+predator.height))&&(!this.needsLineOfSightPredator||this.lineOfSight(predator))){this.predator=predator;}}
else{var predatorSearchSettings=this._preySearchSettings;predatorSearchSettings.minX=minX;predatorSearchSettings.minY=minY;predatorSearchSettings.maxX=maxX;predatorSearchSettings.maxY=maxY;if(this.predatorClass){this.predator=ig.game.getEntitiesByClass(this.predatorClass,predatorSearchSettings)[0];}
else if(this.predatorType){this.predator=ig.game.getEntitiesByType(this.predatorType,predatorSearchSettings)[0];}
else if(this.predatorGroup){this.predator=ig.game.getCharactersByGroup(this.predatorGroup,predatorSearchSettings)[0];}}}}},removePrey:function(){if(this.prey){this.prey=null;return this.moveToStop();}},removePredator:function(){if(this.predator){this.fleeing=this.fleeingLowHealth=false;this.predator=null;this.moveToStop();}},attack:function(entity){return false;},flee:function(entity,settings){this.fleeing=true;return this.moveFrom(entity,settings);},receiveDamage:function(amount,from,unblockable){var res=this.parent(amount,from,unblockable);if(from){if(this.canLearnPredators){this.predatorType|=from.type;this.predatorGroup|=from.group;}
if(this.health<this.healthMax*this.fleeHealthPct){this.fleeing=this.fleeingLowHealth=true;this.predator=from;}}
return res;},receiveHealing:function(amount,from){this.parent(amount,from);if(this.fleeing&&this.health>=this.healthMax*this.fleeHealthPct){this.removePredator();}},cleanup:function(){this.removePrey();this.removePredator();this.tethering=this.wandering=false;this.parent();},updateChanges:function(){if(this.reactionTimer.delta()>=0){this.reactionTimer.set(this.reactionDelay);this.findPredatorPrey();}
this.updatePrey();this.updatePredator();this.updateTether();this.updateWander();this.parent();},updatePrey:function(){var prey=this.prey;if(prey){if(prey._killed){return this.removePrey();}
var distance=this.distanceSquaredTo(prey);if(distance>this.reactionDistance*this.reactionDistance){return this.removePrey();}
else if(!this.fleeing&&!this.fleeingLowHealth){this.attacking=this.attack(prey);if(this.attacking){this.moveToStop();}
else{this.moveTo(prey,this.moveToPreySettings);}}}},updatePredator:function(){var predator=this.predator;if(predator){if(predator._killed){return this.removePredator();}
if(!this.fleeingLowHealth&&this.distanceSquaredTo(predator)>this.reactionDistance*this.reactionDistance){return this.removePredator();}
else if(this.canFlee){this.flee(predator,this.moveToPredatorSettings);}}},updateTether:function(){if(this.tetherDistance>0){var tether=this.entityTether;if(tether){if(this.tethering){if(this.touches(tether)){this.tethering=false;this.fleeing=this.fleeingLowHealth;this.moveToStop();}
else{this.moveTo(tether,this.moveToTetherSettings);}}
else{if((!this.canBreakTether||(!this.prey&&!this.predator))&&this.distanceSquaredEdgeTo(this.entityTether)>this.tetherDistance*this.tetherDistance){this.removePrey();this.removePredator();this.tethering=true;}}}}},updateWander:function(){if((this.canWanderX||this.canWanderY)&&!this.tethering&&!this.prey&&!this.predator){this.wandering=true;var wanderSwitchChance=this.wanderDirection.x===0&&this.wanderDirection.y===0?this.wanderSwitchChanceStopped:this.wanderSwitchChance;if(this.moveToUnsafe){this._wanderSwitchedHorizontal=false;if(this.canWanderX&&Math.random()<0.5){this._wanderSwitchedHorizontal=true;this.wanderDirection.x=-this.wanderDirection.x||1;}
if(this.canWanderY&&(!this._wanderSwitchedHorizontal||Math.random()<0.5)){this.wanderDirection.y=-this.wanderDirection.y||1;}}
else if(wanderSwitchChance>0&&Math.random()<wanderSwitchChance){var ran=Math.random();if(this.canWanderX&&ran>0.5){this.wanderDirection.x=Math.round(ran*2-1);}
else if(this.canWanderY){this.wanderDirection.y=Math.round(ran*2-1);}}
else if(this.tetherDistance>0&&this.entityTether){if(this.canWanderX){var tetherCenterX=this.entityTether.pos.x+this.entityTether.size.x*0.5;if(tetherCenterX-this.tetherDistance>=this.pos.x){this.wanderDirection.x=1;}
else if(tetherCenterX+this.tetherDistance<=this.pos.x+this.size.x){this.wanderDirection.x=-1;}}
if(this.canWanderY){var tetherCenterY=this.entityTether.pos.y+this.entityTether.size.y*0.5;if(tetherCenterY-this.tetherDistance>=this.pos.y){this.wanderDirection.y=1;}
else if(tetherCenterY+this.tetherDistance<=this.pos.y+this.size.y){this.wanderDirection.y=-1;}}}
if(this.wanderDirection.x===0&&this.wanderDirection.y===0){this.moveToStop();}
else{if(this.wanderDirection.x!==0){if(this.wanderDirection.x>0){this.wanderPos.x=this.pos.x+this.size.x+1;}
else{this.wanderPos.x=this.pos.x-1;}}
else{this.wanderPos.x=this.pos.x+this.size.x*0.5;this.moveToHereHorizontal();}
if(this.wanderDirection.y!==0){if(this.wanderDirection.y>0){this.wanderPos.y=this.pos.y+this.size.y+1;}
else{this.wanderPos.y=this.pos.y-1;}}
else{this.wanderPos.y=this.pos.y+this.size.y*0.5;this.moveToHereVertical();}
this.moveTo(this.wanderPos,this.moveToWanderSettings);}}
else{this.wandering=false;}}});});

// lib/game/entities/villain.js
ig.baked=true;ig.module('game.entities.villain').requires('plusplus.core.config','plusplus.abstractities.creature','plusplus.abilities.melee').defines(function(){"use strict";var _c=ig.CONFIG;ig.EntityVillain=ig.global.EntityVillain=ig.Creature.extend({name:"villain",collides:ig.EntityExtended.COLLIDES.NEVER,animSheet:new ig.AnimationSheet(_c.PATH_TO_MEDIA+'villain.png',_c.CHARACTER.SIZE_X,_c.CHARACTER.SIZE_Y),animInit:"idleX",animSettings:{idleX:{sequence:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,3,2,1,0,1,2,3,3,2,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,5,4,5,4,5,4],frameTime:0.1},deathX:{sequence:[6,7,8],frameTime:0.05},spawnX:{sequence:[11,10,9,8,7,6],frameTime:0.1},moveX:{sequence:[12,13,14,15,16,17],frameTime:0.1},jumpX:{sequence:[16,18,19],frameTime:0.1},fallX:{sequence:[20,21],frameTime:0.1},climbX:{sequence:[24,25,26,27,28,29],frameTime:0.1},stairsX:{sequence:[22,23],frameTime:0.15},talkX:{sequence:[0],frameTime:1},listenX:{sequence:[0],frameTime:1},meleeX:{sequence:[30,31],frameTime:0.1},typeX:{sequence:[32,33],frameTime:0.1}},initProperties:function(){this.parent();this.abilityMelee=new ig.AbilityMelee(this,{canFindTarget:false,rangeX:_c.CHARACTER.SIZE_EFFECTIVE_X});},attack:function(entity){var closeEnough;if(this.grounded||this.climbing){this.abilityMelee.setEntityTarget(entity);closeEnough=this.abilityMelee.closeEnough();}
return closeEnough;}});});

// lib/game/entities/villain-working.js
ig.baked=true;ig.module('game.entities.villain-working').requires('plusplus.core.config','game.entities.villain').defines(function(){"use strict";var _c=ig.CONFIG;ig.EntityVillainWorking=ig.global.EntityVillainWorking=ig.EntityVillain.extend({performance:_c.STATIC,animInit:"typeX",initTypes:function(){this.type=0;},updateCurrentAnim:function(){}});});

// lib/game/entities/title-main.js
ig.baked=true;ig.module('game.entities.title-main').requires('plusplus.core.config','plusplus.core.entity').defines(function(){"use strict";var _c=ig.CONFIG;ig.EntityTitleMain=ig.global.EntityTitleMain=ig.EntityExtended.extend({size:{x:74,y:74},animSheet:new ig.AnimationSheet(_c.PATH_TO_MEDIA+'title_main.png',74,74),animInit:"idleX",animSettings:{idleX:{sequence:[0],frameTime:1,stop:true}}});});

// lib/plusplus/abstractities/tutorial.js
ig.baked=true;ig.module('plusplus.abstractities.tutorial').requires('plusplus.core.input','plusplus.abstractities.particle','plusplus.abstractities.spawner','plusplus.helpers.utilsvector2').defines(function(){"use strict";var _utv2=ig.utilsvector2;ig.Tutorial=ig.Spawner.extend({_wmBoxColor:'rgba( 0, 215, 255, 0.7)',loopDelay:1,loops:-1,loopTimer:null,actions:[],properties:[],learned:false,isolate:{},layerNameIsolation:'overlay',overlayEntity:null,overlaySettings:null,textEntity:null,textSettings:null,entity:null,triggerable:true,triggerAfterDelay:false,delay:1,autoToggle:true,spawnedDieWith:true,spawnSettings:{layerName:'overlay'},spawnAtRandomPosition:false,spawnAndMoveTo:true,spawnAndMoveToSettings:{tween:true},_loopCount:0,_loopDelayed:false,initProperties:function(){this.loopTimer=new ig.TimerExtended(0,this);this.parent();},resetExtras:function(){this.sortTargetsBy=this.sortTargetsBy||ig.Game.SORT.Z_INDEX;if(this.textSettings){this.textSettings.font=this.textSettings.font||ig.Font.FONTS.ALT;this.textSettings.posPct=this.textSettings.posPct||_utv2.vector(0.5,0.9);this.textSettings.align=this.textSettings.align||this.textSettings.posPct;this.textSettings.linkAlign=this.textSettings.linkAlign||_utv2.vector(0,0.65);}
this.parent();},deactivate:function(entity){this.loopEnd();this.parent(entity);},complete:function(entity){if(this.learned){this.parent(entity);}},spawned:function(entity){this.parent(entity);if(this.spawnedCount===this.spawnCountMax){this.loopSetup(entity);}},setup:function(entity){this.learned=false;this.delay=0;if(!this.entity){var entityClass;var entitySettings;if(this.overlayEntity){entityClass=this.overlayEntity;entitySettings=this.overlaySettings||{};entitySettings.textSettings=entitySettings.textSettings||this.textSettings;}
else if(this.textEntity){entityClass=this.textEntity;entitySettings=this.textSettings||{};}
if(entityClass){entitySettings.alpha=entitySettings.alpha||0;this.entity=ig.game.spawnEntity(entityClass,0,0,entitySettings);this.entity.fadeTo(entityClass.prototype&&entityClass.prototype.alpha||0.9);}}
if(this.layerNameIsolation){var isolating=[];var player=ig.game.getPlayer();if(player&&!player._killed){isolating.push(player);}
if(!this._killed){isolating.push(this);}
var target;for(var name in this.isolate){target=ig.game.namedEntities[this.isolate[name]];if(target&&!target._killed){isolating.push(target);}}
for(var name in this.target){target=ig.game.namedEntities[this.target[name]];if(target&&!target._killed){isolating.push(target);}}
if(isolating.length>0){for(var i=0,il=isolating.length;i<il;i++){ig.game.layerChangeItem(isolating[i],this.layerNameIsolation);}}}
this.parent();},teardown:function(){if(this.entity){this.entity.fadeToDeath();this.entity=undefined;}
if(this.layerNameIsolation){var isolating=[];var player=ig.game.getPlayer();if(player&&!player._killed){isolating.push(player);}
if(!this._killed){isolating.push(this);}
var target;for(var name in this.isolate){target=ig.game.namedEntities[this.isolate[name]];if(target&&!target._killed){isolating.push(target);}}
for(var name in this.target){target=ig.game.namedEntities[this.target[name]];if(target&&!target._killed){isolating.push(target);}}
if(isolating.length>0){for(var i=0,il=isolating.length;i<il;i++){ig.game.layerChangeItem(isolating[i]);}}}
this.parent();},loopSetup:function(entity){this.loopEnd();this.loopEntity=entity;if(this.spawnCount!==1||!this.loopEntity){this.loop();}
else{if(this.loopEntity instanceof ig.Particle){this.loopEntity.onRemoved.addOnce(this.loop,this);}
else if(this.loopEntity.movingTo&&this.loopEntity.movingToOnce){this.loopEntity.onMovedTo.addOnce(this.loop,this);}
else{if(!this.loopDelay&&this.loopEntity&&this.loopEntity.currentAnim){this.loopEntityAnim=this.loopEntity.currentAnim;this.loopEntityAnim.onCompleted.addOnce(this.loop,this);}
else{this.loop();}}}},loop:function(){if(this.loopDelay){this._loopDelayed=true;this.loopTimer.set(this.loopDelay);}
else{this.loopStart();}},loopStart:function(){var looping=false;if(this.loops!==0){this._loopCount++;if(this.loops===-1||this._loopCount<this.loops){looping=true;}}
if(looping){var needsTeardown=this.needsTeardown;this.needsTeardown=false;this.deactivate();this.needsTeardown=needsTeardown;if(this.loopEntity){this.loopEntity.onRemoved.addOnce(this.activate,this);}
else{this.activate();}}
else{this.learned=true;this.complete();}},loopEnd:function(){this._loopDelayed=false;if(this.loopEntity){this.loopEntity.onRemoved.remove(this.activate,this);this.loopEntity.onRemoved.remove(this.loop,this);this.loopEntity.onMovedTo.remove(this.loop,this);if(this.loopEntityAnim){this.loopEntityAnim.onCompleted.remove(this.loop,this);this.loopEntityAnim=undefined;}
this.loopEntity=undefined;}},update:function(){if(!this._killed&&this.activated){var i,il;if(this.actions.length>0){for(i=0,il=this.actions.length;i<il;i++){var action=this.actions[i];if(ig.input.pressed(action)||ig.input.released(action)){this.learned=true;return this.complete();}}}
if(this.properties.length>0){var player=ig.game.getPlayer();if(player){for(i=0,il=this.properties.length;i<il;i++){var property=this.properties[i];if(player[property]){this.learned=true;return this.complete();}}}}
if(this._loopDelayed&&this.loopTimer.delta()>=0){this.loopStart();}}
this.parent();}});});

// lib/plusplus/abstractities/demo.js
ig.baked=true;ig.module('plusplus.abstractities.demo').requires('plusplus.core.config','plusplus.abstractities.particle').defines(function(){var _c=ig.CONFIG;ig.Demo=ig.Particle.extend({performance:_c.STATIC,zIndex:_c.Z_INDEX_ABOVE_PLAYER,fadeAfterSpawnDuration:0.1,fadeBeforeDeathDuration:0.1,randomVel:false,randomDoubleVel:false,randomFlip:false,spawn:function(){this.parent();if(this.currentAnim){var animDuration=this.currentAnim.getDuration();if(this.lifeDuration!==animDuration){this.lifeDuration=animDuration;this.lifeTimer.set(this.lifeDuration);}}}});});

// lib/plusplus/entities/demo-hold.js
ig.baked=true;ig.module('plusplus.entities.demo-hold').requires('plusplus.core.config','plusplus.abstractities.demo','plusplus.helpers.utilsvector2').defines(function(){var _c=ig.CONFIG;var _utv2=ig.utilsvector2;ig.EntityDemoHold=ig.global.EntityDemoHold=ig.Demo.extend({size:_utv2.vector(64,64),animSheet:new ig.AnimationSheet(_c.PATH_TO_MEDIA+'demos_gestures_hold.png',64,64),animSettings:{moveX:{sequence:[0,1,2,3,4,4,4,4],frameTime:0.25}}});});

// lib/plusplus/entities/tutorial-hold.js
ig.baked=true;ig.module('plusplus.entities.tutorial-hold').requires('plusplus.abstractities.tutorial','plusplus.entities.demo-hold','plusplus.helpers.utilsvector2').defines(function(){var _utv2=ig.utilsvector2;ig.EntityTutorialHold=ig.global.EntityTutorialHold=ig.Tutorial.extend({spawningEntity:ig.EntityDemoHold,actions:['hold'],textSettings:{text:'hold!'},spawnAndMoveToSettings:{offsetPct:_utv2.vector(0.35,0.5)}});});

// lib/game/entities/tutorial-move.js
ig.baked=true;ig.module('game.entities.tutorial-move').requires('plusplus.entities.tutorial-hold','plusplus.ui.ui-text').defines(function(){ig.global.EntityTutorialMove=ig.EntityTutorialMove=ig.EntityTutorialHold.extend({delay:5,actions:[],properties:['moving'],layerNameIsolation:'',textEntity:ig.UIText,textSettings:{text:'hold to move!'}});});

// lib/plusplus/ui/ui-text-bubble.js
ig.baked=true;ig.module('plusplus.ui.ui-text-bubble').requires('plusplus.core.config','plusplus.ui.ui-overlay','plusplus.helpers.utilsvector2','plusplus.helpers.utilsdraw','plusplus.helpers.utilsintersection').defines(function(){"use strict";var _c=ig.CONFIG;var _utv2=ig.utilsvector2;var _utd=ig.utilsdraw;ig.UITextBubble=ig.global.UITextBubble=ig.UIOverlay.extend({layerName:'ui',size:_utv2.vector(_c.TEXT_BUBBLE.SIZE_X,_c.TEXT_BUBBLE.SIZE_Y),sizeAsPct:_c.TEXT_BUBBLE.SIZE_AS_PCT,sizePct:_utv2.vector(_c.TEXT_BUBBLE.SIZE_PCT_X,_c.TEXT_BUBBLE.SIZE_PCT_Y),cornerRadius:_c.TEXT_BUBBLE.CORNER_RADIUS,cornerRadiusAsPct:_c.TEXT_BUBBLE.CORNER_RADIUS_AS_PCT,r:_c.TEXT_BUBBLE.R,g:_c.TEXT_BUBBLE.G,b:_c.TEXT_BUBBLE.B,alpha:_c.TEXT_BUBBLE.ALPHA,pixelPerfect:_c.TEXT_BUBBLE.PIXEL_PERFECT,shrinkToText:_c.TEXT_BUBBLE.SHRINK_TO_TEXT,triangleLength:_c.TEXT_BUBBLE.TRIANGLE_LENGTH,triangleWidth:_c.TEXT_BUBBLE.TRIANGLE_WIDTH,padding:_utv2.vector(_c.TEXT_BUBBLE.PADDING_X,_c.TEXT_BUBBLE.PADDING_Y),resetExtras:function(){if(this.textSettings){this.textSettings.font=this.textSettings.font||ig.Font.FONTS.CHAT;this.textSettings.margin=_utv2.vector(0,this.padding.y-this.triangleLength);this.textSettings.marginAsPct=false;}
this.textMoveToSettings=ig.merge(this.textMoveToSettings,{offset:_utv2.vector(0,this.padding.y-this.triangleLength)});if(!this.sizeAsPct){this.resetState.size=this.resetState.size||_utv2.vector();_utv2.copy(this.resetState.size,this.size);}
this.parent();},recordResetState:function(){this.parent();this.resetState.size=this.resetState.size||_utv2.vector();_utv2.copy(this.resetState.size,this.size);this.resetState.sizePct=this.resetState.sizePct||_utv2.vector();_utv2.copy(this.resetState.sizePct,this.sizePct);},refresh:function(force){if(!this.sizeAsPct){_utv2.copy(this.size,this.resetState.size);}
if(this.message&&this.message.added&&this.added){this.message.maxWidth=this.message.maxHeight=0;this.message.resize(force);}
this.parent(force);},resize:function(force){var force=this.parent(force);if(this.message){var sizeX=this.getSizeDrawX()-this.padding.x*2;var sizeY=this.getSizeDrawY()-this.padding.y*2-this.triangleLength;var scaleMod=this.message.scale/this.scale;var messageSizeX=this.message.getSizeDrawX()*scaleMod;if(messageSizeX>sizeX){this.message.maxWidth=sizeX*(1/scaleMod);this.message.resize(true);messageSizeX=this.message.getSizeDrawX()*scaleMod;}
var messageSizeY=this.message.getSizeDrawY()*scaleMod;if(messageSizeY>sizeY){this.message.maxHeight=sizeY*(1/scaleMod);this.message.resize(true);messageSizeY=this.message.getSizeDrawY()*scaleMod;}
if(this.shrinkToText){if(messageSizeX<sizeX){this.size.x=messageSizeX+this.padding.x*2;force=this.needsRebuild=true;}
if(messageSizeY<sizeY){this.size.y=messageSizeY+this.padding.y*2+this.triangleLength;force=this.needsRebuild=true;}}}
return force;},refill:function(){if(this.fill&&this.triangleLength>0){var triangleLength=this.triangleLength;var triangleWidth=this.triangleWidth;var width=this.sizeDraw.x;var height=this.sizeDraw.y-triangleLength;this.parent(width,height);if(!this.pixelPerfect){width*=this.scale;height*=this.scale;triangleLength*=this.scale;triangleWidth*=this.scale;}
var vertices=[{x:width*0.5-triangleWidth*0.5,y:height},{x:width*0.5+triangleWidth*0.5,y:height},{x:width*0.5,y:height+triangleLength}];var context=this.fill.dataContext;if(this.pixelPerfect){_utd.pixelFillPolygon(context,0,0,this.fill.width,this.fill.height,vertices,this.r,this.g,this.b,this.alpha);}
else{context.fillStyle=this.getFillStyle();_utd.fillPolygon(context,vertices);}}
else{this.parent();}}});});

// lib/plusplus/entities/conversation.js
ig.baked=true;ig.module('plusplus.entities.conversation').requires('plusplus.core.timer','plusplus.ui.ui-text','plusplus.ui.ui-text-bubble','plusplus.entities.trigger','plusplus.helpers.utils').defines(function(){"use strict";var _ut=ig.utils;ig.EntityConversation=ig.global.EntityConversation=ig.EntityTrigger.extend({_wmBoxColor:'rgba(200, 200, 200, 0.7)',steps:{},stepsSorted:[],stepsUnused:[],stepsUsed:[],step:null,message:null,messageEntity:ig.UIText,messageContainer:null,messageContainerEntity:ig.UITextBubble,messageSettings:{},messageFollowsSpeaker:true,messageMoveToSettings:{matchPerformance:true,offsetPct:{x:0,y:-1.3}},speaker:null,speakerLast:null,participate:{},participating:[],looking:true,pausing:false,locking:false,lockingPlayer:false,interrupting:true,animNameTalk:'talk',animNameListen:'listen',cameraFollows:true,cameraCentered:false,autoAdvance:true,advanceTimer:null,durationPerLetter:0.1,durationPerStepMin:1,action:'tap',triggerAfterDelay:true,_order:0,_step:null,_speakersModified:[],_cameraWasFollowing:null,initProperties:function(){this.parent();this.advanceTimer=new ig.TimerExtended(0,this);},resetExtras:function(){this.stepsSorted.length=0;for(var name in this.steps){var step=this.steps[name];var order=parseInt(step.order);if(!_ut.isNumber(order)){order=step.order=parseInt(name);}
if(!_ut.isNumber(order)){order=step.order=++this._order;}
else if(order>this._order){this._order=order;}
this._addStep(step);}
this.parent();},addStep:function(text,speakerName,order,settings){if(text&&text.length>0){if(!_ut.isNumber(order)){order=++this._order;}
else if(order>this._order){this._order=order;}
var step=this.steps[order]={name:speakerName,text:text,order:order,settings:settings};this._addStep(step);}},_addStep:function(step){this.stepsSorted.push(step);this.stepsSorted.sort(function(a,b){return a.order-b.order;});if(this.activated){this._addUnusedStep(step);this.stepsUnused.sort(function(a,b){return a.order-b.order;});}},setup:function(){var i,il;if(this.pausing&&!this.action){this.pausing=false;this.autoAdvance=true;}
if(this.interrupting){var interrupted={};for(i=0,il=this.stepsSorted.length;i<il;i++){var step=this.stepsSorted[i];var speaker=ig.game.namedEntities[step.name];var conversation=speaker&&speaker.conversation;if(conversation&&conversation!==this&&!interrupted[conversation.id]&&conversation instanceof ig.EntityConversation&&conversation.activated){interrupted[conversation.id]=true;conversation.deactivate();}}}
if(this.pausing){ig.game.pause(true);if(ig.game.camera){ig.game.camera.paused=false;}
this.unpause();}
if(this.lockingPlayer){var player=ig.game.getPlayer();player&&player.removeControl();}
this.stepsUnused.length=this.stepsUsed.length=this.participating.length=this._speakersModified.length=0;for(i=0,il=this.stepsSorted.length;i<il;i++){this._addUnusedStep(this.stepsSorted[i]);}
this._speakersModified.length=0;for(var name in this.participate){var participant=ig.game.namedEntities[this.participate[name]];if(participant){_ut.arrayCautiousAdd(this.participating,participant);}}
this.nextStep();this.parent();},teardown:function(){this.hideStep();this.speakerLast=null;this.stepsUnused.length=this.stepsUsed.length=this.participating.length=this._speakersModified.length=0;for(var name in this.steps){var step=this.steps[name];var speaker=ig.game.namedEntities[step.name];if(speaker&&_ut.indexOfValue(this._speakersModified,step.name)===-1){this._speakersModified.push(step.name);speaker.conversation=undefined;if(step.locking||this.locking){speaker.addControl();}
var animNameTalk=speaker.getDirectionalAnimName(step.animNameTalk||this.animNameTalk);var animNameListen=speaker.getDirectionalAnimName(step.animNameListen||this.animNameListen);if((speaker.anims[animNameTalk]&&speaker.overridingAnim===speaker.anims[animNameTalk])||(speaker.anims[animNameListen]&&speaker.overridingAnim===speaker.anims[animNameListen])){speaker.animRelease();}}}
this._speakersModified.length=0;ig.game.camera.onTransitioned.remove(this.complete,this);this._cameraWasFollowing=null;if(this.lockingPlayer){var player=ig.game.getPlayer();player&&player.addControl();}
if(this.pausing){ig.game.unpause(true);}
this.parent();},_addUnusedStep:function(step){this.stepsUnused.push(step);var name=step.name;var speaker=ig.game.namedEntities[name];if(speaker&&_ut.indexOfValue(this._speakersModified,step.name)===-1){this._speakersModified.push(name);this.participating.push(speaker);speaker.conversation=this;if(this.pausing){speaker.unpause();}
if(step.locking||this.locking){speaker.removeControl();var animName;if(typeof step.animNameListen!=='undefined'){animName=step.animNameListen;}
else{animName=this.animNameListen;}
if(animName){speaker.animOverride(speaker.getDirectionalAnimName(animName),{loop:true});}}}},nextStep:function(){this.hideStep();if(this.stepsUnused.length>0){this._step=this.stepsUnused.shift();this.stepsUsed.push(this._step);if(this._step.name){this.speaker=ig.game.namedEntities[this._step.name];if(this.speaker){var unmoving=this._step.locking||this.locking;if(unmoving){var animName;if(typeof this._step.animNameTalk!=='undefined'){animName=this._step.animNameTalk;}
else{animName=this.animNameTalk;}
if(animName){this.speaker.animOverride(this.speaker.getDirectionalAnimName(animName),{loop:true});}}
if(this.looking){for(var i=0,il=this.participating.length;i<il;i++){var participant=this.participating[i];if(participant!==this.speaker){participant.lookAt(this.speaker);}}}
if((this.pausing||this.lockingPlayer||unmoving)&&ig.game.camera&&this.cameraFollows&&this.speaker!==this.speakerLast){if(!this._cameraWasFollowing){this._cameraWasFollowing=ig.game.camera.entity;}
this._cameraFollowing=this.speaker;ig.game.camera.onTransitioned.addOnce(this.showStep,this);ig.game.camera.follow(this.speaker,false,this.cameraCentered);}
else{this.showStep();}}}
else{this.showStep();}}
else{if(this.cameraFollows&&this._cameraWasFollowing){ig.game.camera.onTransitioned.addOnce(this.complete,this);ig.game.camera.follow(this._cameraWasFollowing,false,true);this._cameraWasFollowing=null;}
else{this.complete();}}},showStep:function(){if(this._step){var messageSettings=this.messageSettings;if(this.speaker&&this.messageFollowsSpeaker){messageSettings.fixed=messageSettings.fixed||false;}
var messageContainer;if(this.messageContainerEntity){messageSettings.textSettings={text:this._step.text};messageContainer=this.messageContainer=ig.game.spawnEntity(this.messageContainer||this.messageContainerEntity,0,0,ig.merge(messageSettings,this._step.settings));}
else{messageSettings.text=this._step.text;messageContainer=this.message=ig.game.spawnEntity(this.message||this.messageEntity,0,0,ig.merge(messageSettings,this._step.settings));}
if(messageContainer.added){this.activateStep();}
else{messageContainer.onAdded.addOnce(this.activateStep,this);}}},activateStep:function(){if(this._step){this.step=this._step;this._step=undefined;var messageContainer;var message;if(this.messageContainer){messageContainer=this.messageContainer;message=this.message=messageContainer.message;}
else{messageContainer=message=this.message;}
if(message.textOverflow){var overflow=message.textOverflow;message.text=message.textDisplay||message.text;message.textOverflow="";var overflowStep=ig.merge({},this.step);this.step.text=message.text;overflowStep.text=overflow;this._addStep(overflowStep);}
if(this.speaker&&this.messageFollowsSpeaker){messageContainer.unpause();messageContainer.moveTo(this.speaker,this.messageMoveToSettings);if((this.pausing||this.locking||this.lockingPlayer||this.step.locking)&&this.cameraFollows&&!messageContainer.fixed){if(!this._cameraWasFollowing){this._cameraWasFollowing=ig.game.camera.entity;}
this._cameraFollowing=messageContainer;ig.game.camera.follow(messageContainer,false,this.cameraCentered);}}
if(this.autoAdvance){this.advanceTimer.set(Math.max(this.step.text.length*this.durationPerLetter,this.durationPerStepMin));}}},hideStep:function(){if(this.messageContainer){this.messageContainer.onAdded.remove(this.activateStep,this);if(!this.messageContainer._killed){ig.game.removeEntity(this.messageContainer);}
this.messageContainer=null;}
if(this.message){this.message.onAdded.remove(this.activateStep,this);if(!this.message._killed){ig.game.removeEntity(this.message);}
this.message=null;}
if(this.speaker){if(this.stepsUnused.length>0){if(this.locking||(this.step&&this.step.locking)){var animName;if(this.step&&typeof this.step.animNameListen!=='undefined'){animName=this.step.animNameListen;}
else{animName=this.animNameListen;}
if(animName){this.speaker.animOverride(this.speaker.getDirectionalAnimName(animName),{loop:true});}}
this.speakerLast=this.speaker;}
else{var animNameTalk=this.speaker.getDirectionalAnimName(this.step.animNameTalk||this.animNameTalk);var animNameListen=this.speaker.getDirectionalAnimName(this.step.animNameListen||this.animNameListen);if((this.speaker.anims[animNameTalk]&&this.speaker.overridingAnim===this.speaker.anims[animNameTalk])||(this.speaker.anims[animNameListen]&&this.speaker.overridingAnim===this.speaker.anims[animNameListen])){this.speaker.animRelease();}}
this.speaker=null;}
if(this.cameraFollows){ig.game.camera.onTransitioned.remove(this.showStep,this);if(ig.game.camera&&this._cameraFollowing&&ig.game.camera.entity===this._cameraFollowing){ig.game.camera.unfollow();}
this._cameraFollowing=null;}
this.step=this._step=null;},complete:function(){if(this.stepsUnused.length===0&&!this._step&&!this.step){this.parent();}},update:function(){if(this.step){if(this.speaker&&this.speaker._killed){this.nextStep();}
else if(this.autoAdvance&&this.advanceTimer.delta()>=0){this.nextStep();}
else if(ig.input.pressed(this.action)||ig.input.released(this.action)){this.nextStep();}}
this.parent();}});});

// lib/plusplus/entities/demo-swipe.js
ig.baked=true;ig.module('plusplus.entities.demo-swipe').requires('plusplus.core.config','plusplus.abstractities.demo','plusplus.helpers.utilsvector2').defines(function(){var _c=ig.CONFIG;var _utv2=ig.utilsvector2;ig.EntityDemoSwipe=ig.global.EntityDemoSwipe=ig.Demo.extend({performance:_c.MOVABLE,size:_utv2.vector(64,64),animSheet:new ig.AnimationSheet(_c.PATH_TO_MEDIA+'demos_gestures_swipe.png',64,64),animSettings:{moveX:{sequence:[0,1,2],frameTime:0.2}}});});

// lib/plusplus/entities/tutorial-swipe.js
ig.baked=true;ig.module('plusplus.entities.tutorial-swipe').requires('plusplus.abstractities.tutorial','plusplus.entities.demo-swipe').defines(function(){ig.EntityTutorialSwipe=ig.global.EntityTutorialSwipe=ig.Tutorial.extend({spawningEntity:ig.EntityDemoSwipe,actions:['swipe'],textSettings:{text:'swipe!'}});});

// lib/game/entities/tutorial-jump.js
ig.baked=true;ig.module('game.entities.tutorial-jump').requires('plusplus.entities.tutorial-swipe','plusplus.ui.ui-overlay').defines(function(){ig.global.EntityTutorialJump=ig.EntityTutorialJump=ig.EntityTutorialSwipe.extend({actions:[],properties:['jumping'],overlayEntity:ig.UIOverlay,textSettings:{text:'swipe up to jump!'}});});

// lib/plusplus/entities/levelchange.js
ig.baked=true;ig.module('plusplus.entities.levelchange').requires('plusplus.entities.trigger').defines(function(){ig.EntityLevelchange=ig.global.EntityLevelchange=ig.EntityTrigger.extend({_wmBoxColor:'rgba(0, 0, 255, 0.7)',levelName:'',playerSpawnerName:'',clearPersistentPlayer:false,activate:function(entity){this.parent(entity);if(this.clearPersistentPlayer){var player=ig.game.getPlayer();var playerName="player";if(player){playerName=player.name||playerName;}
ig.game.clearPersistentEntity(playerName);}
ig.game.loadLevelDeferred(this.levelName,this.playerSpawnerName);}});});

// lib/game/levels/title.js
ig.baked=true;ig.module('game.levels.title').requires('impact.image','game.entities.title-alt','plusplus.entities.void','plusplus.entities.trigger-input','game.entities.checkpoint-start','game.entities.villain-working','game.entities.title-main','game.entities.tutorial-move','plusplus.entities.conversation','game.entities.tutorial-jump','plusplus.entities.levelchange','plusplus.entities.checkpoint').defines(function(){LevelTitle={"entities":[{"type":"EntityTitleAlt","x":146,"y":112,"settings":{"name":"title"}},{"type":"EntityVoid","x":352,"y":192,"settings":{"name":"moveDemoLocation"}},{"type":"EntityTriggerInput","x":228,"y":160,"settings":{"name":"clickOrTapTrigger","size":{"x":88,"y":12},"action":"tap","target":{"1":"playerStart","2":"title"}}},{"type":"EntityCheckpointStart","x":300,"y":192,"settings":{"size":{"x":16,"y":32},"name":"playerStart"}},{"type":"EntityVillainWorking","x":268,"y":192},{"type":"EntityTitleMain","x":234,"y":48},{"type":"EntityTutorialMove","x":308,"y":208,"settings":{"delay":2.75,"spawnTarget":{"1":"moveDemoLocation"}}},{"type":"EntityConversation","x":292,"y":208,"settings":{"steps":{"1":{"name":"villain","text":"welcome to the super collider!"},"2":{"name":"villain","text":"this is where we smash all the features together at incredibly unsafe speeds!"},"3":{"name":"villain","text":"i'll meet you in the first demo area, just through the door to your right"}},"delay":2.5,"autoAdvance":"false","participate":{"1":"player"},"pausing":"true"}},{"type":"EntityTutorialJump","x":368,"y":192,"settings":{"spawnTarget":{"1":"jumpDemoLocation1","2":"jumpDemoLocation2"},"size":{"x":16,"y":32}}},{"type":"EntityVoid","x":416,"y":208,"settings":{"name":"jumpDemoLocation1"}},{"type":"EntityVoid","x":432,"y":160,"settings":{"name":"jumpDemoLocation2"}},{"type":"EntityLevelchange","x":496,"y":192,"settings":{"size":{"x":16,"y":32},"levelName":"player","playerSpawnerName":"left"}},{"type":"EntityCheckpoint","x":464,"y":192,"settings":{"size":{"x":16,"y":32},"name":"right"}},{"type":"EntityLevelchange","x":32,"y":192,"settings":{"size":{"x":16,"y":32},"levelName":"spawners","playerSpawnerName":"right"}},{"type":"EntityCheckpoint","x":64,"y":192,"settings":{"size":{"x":16,"y":32},"name":"left"}}],"layer":[{"name":"collision","width":34,"height":16,"linkWithCollision":false,"visible":1,"tilesetName":"","repeat":false,"preRender":false,"distance":1,"tilesize":16,"foreground":false,"data":[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0],[0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0],[0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0],[0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0],[0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0],[0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0],[0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0],[0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0],[0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0],[0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0],[0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0],[0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0],[0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,0,0,0,1,0],[0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]]},{"name":"walls","width":34,"height":16,"linkWithCollision":false,"visible":1,"tilesetName":"media/tileset_walls.png","repeat":false,"preRender":false,"distance":"1","tilesize":16,"foreground":false,"data":[[1,29,30,31,29,31,31,32,33,31,32,29,30,31,29,30,31,32,33,31,32,33,32,30,31,32,33,32,29,31,31,32,33,14],[5,85,90,90,89,94,92,89,90,89,89,91,89,90,89,89,95,96,89,89,89,89,90,90,89,91,89,89,92,89,89,89,73,19],[6,65,173,172,173,148,149,150,172,173,172,173,148,149,150,172,173,172,173,148,149,150,172,173,172,173,148,149,150,172,173,172,53,21],[7,65,185,184,185,160,161,162,184,185,184,185,160,161,162,184,185,184,185,160,161,162,184,185,184,185,160,161,162,184,185,184,53,18],[8,65,173,172,173,148,149,150,172,173,172,173,148,149,150,172,173,172,173,148,149,150,172,173,172,173,148,149,150,172,173,172,53,17],[9,65,185,184,185,160,161,162,184,185,184,185,160,161,162,184,185,184,185,160,161,162,184,185,184,185,160,161,162,184,185,184,53,19],[5,65,173,172,173,148,149,150,172,173,172,173,148,149,150,172,173,172,173,148,149,150,172,173,172,173,148,149,150,172,173,172,53,20],[7,65,185,184,185,160,161,162,184,185,184,185,160,161,162,184,185,184,185,160,161,162,184,185,184,185,160,161,162,184,185,184,53,21],[7,68,173,172,173,148,149,150,172,173,172,173,148,149,150,172,173,172,173,148,149,150,172,173,172,173,148,149,150,172,173,172,55,21],[8,70,185,184,185,160,161,162,184,185,184,185,160,161,162,184,185,184,185,160,161,162,184,185,184,185,160,161,162,184,185,184,57,17],[7,65,173,172,173,148,149,150,172,173,172,173,148,149,150,172,173,172,173,148,149,150,172,173,172,173,148,149,150,172,173,172,53,19],[6,65,185,184,185,160,161,162,184,185,184,185,160,161,162,184,185,184,185,160,161,162,184,185,184,185,160,161,162,184,185,184,53,17],[5,65,173,172,173,148,149,150,172,173,172,173,148,149,150,172,173,172,173,148,149,150,172,173,172,173,148,149,150,172,173,172,53,19],[5,65,185,184,185,160,161,162,184,185,184,185,160,161,162,184,185,184,185,160,161,162,184,185,184,185,160,161,162,184,185,184,53,21],[9,49,78,78,77,81,77,78,78,77,78,77,77,79,80,77,82,83,84,77,77,79,77,82,77,77,77,77,77,78,78,77,62,21],[25,43,41,43,43,44,43,42,43,44,45,42,43,44,45,41,43,42,43,44,45,41,42,43,44,43,42,43,41,42,43,44,45,37]]},{"name":"shadows","width":34,"height":16,"linkWithCollision":false,"visible":1,"tilesetName":"media/tileset_details.png","repeat":false,"preRender":false,"distance":"1","tilesize":16,"foreground":false,"data":[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,137,137,137,137,0,0,0,0,140,137,137,0,0,0,0,0,0,0,0,137,137,142,0,0,0,0,137,137,137,137,0,0],[0,0,140,137,137,137,0,0,0,0,0,140,137,0,0,0,0,0,0,0,0,137,142,0,0,0,0,0,137,137,137,142,0,0],[0,0,0,140,137,137,0,0,0,0,0,0,137,0,0,0,0,0,0,0,0,137,0,0,0,0,0,0,137,137,142,0,0,0],[0,0,0,0,137,137,0,0,0,0,0,0,137,0,0,0,0,0,0,0,0,137,0,0,0,0,0,0,137,137,0,0,0,0],[0,0,0,0,137,137,0,0,0,0,0,0,137,0,0,0,0,0,0,0,0,137,0,0,0,0,0,0,137,137,0,0,0,0],[0,0,0,0,137,137,0,0,0,0,0,0,137,0,0,0,0,0,0,0,0,137,0,0,0,0,0,0,137,137,0,0,0,0],[0,0,0,0,137,137,0,0,0,0,0,0,137,0,0,0,0,0,0,0,0,137,0,0,0,0,0,0,137,137,0,0,0,0],[0,0,0,0,137,137,0,0,0,0,0,0,137,0,0,0,0,0,0,0,0,137,0,0,0,0,0,0,137,137,0,0,0,0],[0,0,0,0,137,137,0,0,0,0,0,0,137,0,0,0,0,0,0,0,0,137,0,0,0,0,0,0,137,137,0,0,0,0],[0,0,0,139,137,137,0,0,0,0,0,0,137,0,0,0,0,0,0,0,0,137,0,0,0,0,0,0,137,137,138,0,0,0],[0,0,139,137,137,137,0,0,0,0,0,139,137,0,0,0,0,0,0,0,0,137,138,0,0,0,0,0,137,137,137,138,0,0],[0,0,137,137,137,137,0,0,0,0,139,137,137,0,0,0,0,0,0,0,0,137,137,138,0,0,0,0,137,137,137,137,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]]},{"name":"detail","width":34,"height":16,"linkWithCollision":false,"visible":1,"tilesetName":"media/tileset_details.png","repeat":false,"preRender":false,"distance":"1","tilesize":16,"foreground":false,"data":[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,129,0,0,0,0,0,0,0,0,128,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,129,0,0,0,0,0,0,0,0,128,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,129,0,0,0,0,0,0,0,0,128,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,129,0,0,0,0,0,0,0,0,128,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,129,0,0,0,0,0,0,0,0,128,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,129,0,0,0,0,0,0,0,0,128,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,129,0,0,0,0,0,0,0,0,128,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,129,0,0,0,0,0,0,0,0,128,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,129,0,52,53,54,55,56,57,0,128,0,0,0,0,0,0,0,0,0,0,0,0],[0,62,0,0,0,0,0,0,0,0,0,0,129,0,69,70,71,72,73,74,0,128,0,0,0,0,0,0,0,0,0,0,61,0],[0,79,0,0,0,0,0,0,0,0,0,0,129,0,12,13,14,15,16,17,0,128,0,0,0,0,0,0,0,0,0,0,78,0],[0,96,0,0,0,0,0,0,0,0,0,0,129,0,29,30,31,32,33,34,0,128,0,0,149,150,151,152,153,0,0,0,95,0],[0,113,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,166,167,168,169,170,0,0,0,112,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]]}]};LevelTitleResources=[new ig.Image('media/tileset_walls.png'),new ig.Image('media/tileset_details.png'),new ig.Image('media/tileset_details.png')];});

// lib/game/entities/tutorial-climb.js
ig.baked=true;ig.module('game.entities.tutorial-climb').requires('plusplus.entities.tutorial-hold','plusplus.ui.ui-overlay').defines(function(){ig.global.EntityTutorialClimb=ig.EntityTutorialClimb=ig.EntityTutorialHold.extend({actions:[],properties:['climbing'],overlayEntity:ig.UIOverlay,textSettings:{text:'hold to climb!'}});});

// lib/plusplus/entities/pain.js
ig.baked=true;ig.module('plusplus.entities.pain').requires('plusplus.entities.trigger','plusplus.helpers.utils').defines(function(){"use strict";var _ut=ig.utils;ig.EntityPain=ig.global.EntityPain=ig.EntityTrigger.extend({_wmBoxColor:'rgba( 255, 0, 100, 0.7 )',damage:1,damageAsPct:false,damageUnblockable:false,once:false,suicidal:false,initTypes:function(){this.parent();_ut.addType(ig.EntityExtended,this,'type',"DANGEROUS");_ut.addType(ig.EntityExtended,this,'checkAgainst',"CHARACTER");},activate:function(entity){this.parent(entity);var damage;if(this.damageAsPct){damage=entity.health*this.damage;}
else{damage=this.damage;}
entity.receiveDamage(damage,this,this.damageUnblockable);}});});

// lib/plusplus/entities/pain-instagib.js
ig.baked=true;ig.module('plusplus.entities.pain-instagib').requires('plusplus.entities.pain').defines(function(){"use strict";ig.EntityPainInstagib=ig.global.EntityPainInstagib=ig.EntityPain.extend({damageAsPct:true,damageUnblockable:true});});

// lib/plusplus/entities/trigger-constant.js
ig.baked=true;ig.module('plusplus.entities.trigger-constant').requires('plusplus.entities.trigger').defines(function(){"use strict";ig.EntityTriggerConstant=ig.global.EntityTriggerConstant=ig.EntityTrigger.extend({suicidal:false});});

// lib/plusplus/entities/trigger-reverse.js
ig.baked=true;ig.module('plusplus.entities.trigger-reverse').requires('plusplus.entities.trigger').defines(function(){"use strict";ig.EntityTriggerReverse=ig.global.EntityTriggerReverse=ig.EntityTrigger.extend({_wmBoxColor:'rgba( 255, 200, 0, 0.7 )',handleTargets:function(entity,needsActivation){if(needsActivation!==false){this.deactivate(entity);}
for(var i=0,il=this.targetSequence.length;i<il;i++){var target=this.targetSequence[i];if(target instanceof ig.EntityTriggerReverse){target.trigger(entity);}
else{target.deactivate(entity);}}},activate:function(entity){if(this.needsTeardown){this.teardown();}
this.activated=false;if(this.deactivateCallback){this.deactivateCallback.call(this.deactivateContext||this,entity);}},deactivate:function(entity){if(!this.needsTeardown){this.setup();}
this.activated=true;if(this.activateCallback){this.activateCallback.call(this.activateContext||this,entity);}
if(!this.triggering){this.trigger(entity,false);}}});});

// lib/plusplus/entities/trigger-controller.js
ig.baked=true;ig.module('plusplus.entities.trigger-controller').requires('plusplus.entities.trigger-constant','plusplus.entities.trigger-reverse').defines(function(){"use strict";ig.EntityTriggerController=ig.global.EntityTriggerController=ig.EntityTriggerConstant.extend({_wmBoxColor:'rgba( 255, 150, 0, 0.7 )',triggerable:false,once:false,activeState:true,trigger:function(entity,needsActivation,activeState){if(typeof activeState!=='undefined'){this.activeState=activeState;}
else{this.activeState=true;}
this.parent(entity,needsActivation);},handleTargets:function(entity,needsActivation){if(this.activeState){if(needsActivation!==false){this.activate(entity);}
this.handleTargetsActivate();}
else{if(needsActivation!==false){this.deactivate(entity);}
this.handleTargetsDeactivate();}},handleTargetsActivate:function(entity){for(var i=0,il=this.targetSequence.length;i<il;i++){var target=this.targetSequence[i];if(target instanceof ig.EntityTrigger&&!(target instanceof ig.EntityTriggerReverse)){target.trigger(entity);}
else{target.activate(entity);}}},handleTargetsDeactivate:function(entity){for(var i=0,il=this.targetSequence.length;i<il;i++){var target=this.targetSequence[i];if(target instanceof ig.EntityTriggerReverse){target.trigger(entity);}
else{target.deactivate(entity);}}},deactivate:function(entity){this.parent(entity);if(!this.triggering){this.trigger(entity,false,false);}}});});

// lib/plusplus/entities/trigger-property.js
ig.baked=true;ig.module('plusplus.entities.trigger-property').requires('plusplus.entities.trigger-controller').defines(function(){"use strict";ig.EntityTriggerProperty=ig.global.EntityTriggerProperty=ig.EntityTriggerController.extend({propertyName:'',activateValue:true,deactivateValue:false,handleTargetsActivate:function(){if(this.propertyName){for(var i=0,il=this.targetSequence.length;i<il;i++){this.targetSequence[i][this.propertyName]=this.activateValue;}}},handleTargetsDeactivate:function(){if(this.propertyName){for(var i=0,il=this.targetSequence.length;i<il;i++){this.targetSequence[i][this.propertyName]=this.deactivateValue;}}}});});

// lib/game/entities/holo-bridge.js
ig.baked=true;ig.module('game.entities.holo-bridge').requires('plusplus.core.config','plusplus.core.entity').defines(function(){"use strict";var _c=ig.CONFIG;ig.EntityHoloBridge=ig.global.EntityHoloBridge=ig.EntityExtended.extend({size:{x:176,y:16},offset:{x:9,y:8},animSheet:new ig.AnimationSheet(_c.PATH_TO_MEDIA+'holo_bridge.png',192,32),animInit:"idleX",animSettings:{idleX:{sequence:[0],frameTime:1,stop:true}},collidesChanges:true,alpha:0,activate:function(entity){if(!this.activated){this.parent(entity);this.fadeIn();this.collides=ig.EntityExtended.COLLIDES.FIXED;}},deactivate:function(entity){if(this.activated){this.parent(entity);this.fadeOut();this.collides=ig.EntityExtended.COLLIDES.NEVER;}}});});

// lib/game/levels/player.js
ig.baked=true;ig.module('game.levels.player').requires('impact.image','plusplus.entities.checkpoint','game.entities.tutorial-climb','plusplus.entities.levelchange','plusplus.entities.pain-instagib','plusplus.entities.trigger-property','plusplus.entities.conversation','game.entities.villain-working','plusplus.entities.void','plusplus.entities.trigger','game.entities.holo-bridge').defines(function(){LevelPlayer={"entities":[{"type":"EntityCheckpoint","x":64,"y":192,"settings":{"size":{"x":16,"y":32},"name":"left"}},{"type":"EntityTutorialClimb","x":96,"y":208,"settings":{"size":{"x":32,"y":16},"spawnTarget":{"1":"climbDemoTarget"}}},{"type":"EntityLevelchange","x":528,"y":192,"settings":{"size":{"x":16,"y":32},"levelName":"camera","playerSpawnerName":"left"}},{"type":"EntityCheckpoint","x":496,"y":192,"settings":{"size":{"x":16,"y":32},"name":"right"}},{"type":"EntityPainInstagib","x":-144,"y":464,"settings":{"size":{"x":832,"y":32},"target":{"1":"makeTriggersTriggerable"}}},{"type":"EntityTriggerProperty","x":260,"y":512,"settings":{"propertyName":"triggerable","name":"makeTriggersTriggerable","target":{"1":"afterFall","2":"makeBridge"}}},{"type":"EntityLevelchange","x":32,"y":192,"settings":{"size":{"x":16,"y":32},"levelName":"title","playerSpawnerName":"right"}},{"type":"EntityConversation","x":96,"y":64,"settings":{"size":{"x":32,"y":64},"triggerable":"false","steps":{"1":{"name":"villain","text":"ha ha ha, you're terrible at flying!"},"2":{"name":"villain","text":"good thing we've got checkpoints for automatic respawning!"}},"name":"afterFall"}},{"type":"EntityVillainWorking","x":140,"y":98},{"type":"EntityVoid","x":104,"y":136,"settings":{"name":"climbDemoTarget"}},{"type":"EntityTrigger","x":448,"y":80,"settings":{"target":{"1":"bridge"},"size":{"x":32,"y":48}}},{"type":"EntityConversation","x":176,"y":32,"settings":{"size":{"x":28,"y":96},"steps":{"1":{"name":"villain","text":"lets talk about the player"},"2":{"name":"villain","text":"you've got movement, climbing, jumping, and interacting all built in"},"3":{"name":"villain","text":"and in the super collider, if you double tap while jumping over a hole, you fly"},"4":{"name":"villain","text":"give it a try!"}},"participate":{"1":"player"},"lockingPlayer":"true","autoAdvance":"false"}},{"type":"EntityHoloBridge","x":201,"y":128,"settings":{"name":"bridge"}},{"type":"EntityConversation","x":192,"y":52,"settings":{"size":{"x":16,"y":76},"triggerable":"false","steps":{"1":{"name":"villain","text":"how about I make you a holo bridge?"}},"name":"makeBridge","target":{"1":"bridge"}}}],"layer":[{"name":"collision","width":36,"height":16,"linkWithCollision":false,"visible":1,"tilesetName":"","repeat":false,"preRender":false,"distance":1,"tilesize":16,"foreground":false,"data":[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,1,1,38,39,40,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16,17,18,1,1,0,0,0,0,0,0],[0,0,0,0,0,1,36,37,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,14,15,1,0,0,0,0,0],[0,0,0,0,1,35,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,13,1,0,0,0,0],[0,0,0,1,35,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,13,1,0,0,0],[0,0,1,9,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8,1,0,0],[0,0,1,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,19,1,0,0],[0,1,31,0,12,12,46,46,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,46,46,12,12,0,30,1,0],[0,1,42,0,0,0,47,47,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,47,47,0,0,0,41,1,0],[0,1,53,0,0,0,47,47,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,47,47,0,0,0,52,1,0],[0,1,0,0,0,0,47,47,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,47,47,0,0,0,0,1,0],[0,1,0,0,0,0,47,47,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,47,47,0,0,0,0,1,0],[0,1,0,0,0,0,47,47,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,47,47,0,0,0,0,1,0],[0,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]]},{"name":"walls","width":36,"height":16,"linkWithCollision":false,"visible":1,"tilesetName":"media/tileset_walls.png","repeat":false,"preRender":false,"distance":"1","tilesize":16,"foreground":false,"data":[[0,0,0,0,0,0,0,0,0,0,0,29,30,31,32,33,29,30,29,30,31,32,33,32,30,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,89,89,90,92,89,94,89,89,89,95,96,89,90,90,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,172,173,172,173,148,149,150,172,173,172,173,172,173,148,149,150,172,173,172,173,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,184,185,184,185,184,185,160,161,162,184,185,184,185,184,185,160,161,162,184,185,184,185,184,185,0,0,0,0,0,0],[0,0,0,0,0,150,172,173,172,173,172,173,148,149,150,172,173,172,173,172,173,148,149,150,172,173,172,173,172,173,148,0,0,0,0,0],[0,0,0,0,161,162,184,185,184,185,184,185,160,161,162,184,185,184,185,184,185,160,161,162,184,185,184,185,184,185,160,161,0,0,0,0],[0,0,0,148,149,150,172,173,172,173,172,173,148,149,150,172,173,172,173,172,173,148,149,150,172,173,172,173,172,173,148,149,150,0,0,0],[0,0,0,160,161,162,184,185,184,185,184,185,160,161,162,184,185,184,185,184,185,160,161,162,184,185,184,185,184,185,160,161,162,0,0,0],[0,0,173,148,149,77,172,173,98,78,77,78,111,149,150,172,173,172,173,172,173,148,149,100,77,77,77,109,172,173,77,149,150,172,0,0],[0,0,185,160,161,162,184,185,53,39,43,27,65,161,162,184,185,184,185,184,185,160,161,54,39,43,27,66,184,185,160,161,162,184,0,0],[0,0,173,148,149,150,172,173,53,17,0,9,69,149,150,172,173,172,173,172,173,148,149,53,17,0,9,65,172,173,148,149,150,172,0,0],[6,65,185,160,161,162,184,185,53,17,0,7,66,161,162,184,185,184,185,184,185,160,161,55,19,0,5,66,184,185,160,161,162,184,53,17],[8,65,173,148,149,150,172,173,53,19,0,7,70,149,150,172,173,172,173,172,173,148,149,56,19,0,8,65,172,173,148,149,150,172,54,17],[6,66,185,160,161,162,184,185,53,18,0,7,65,161,162,184,185,184,185,184,185,160,161,54,19,0,6,65,184,185,160,161,162,184,53,19],[6,50,77,77,78,77,78,78,62,17,0,7,65,149,150,172,173,172,173,172,173,148,149,54,19,0,6,52,77,77,78,78,78,78,61,18],[25,43,42,43,44,42,41,45,43,37,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,26,43,42,43,44,42,41,45,43,37]]},{"name":"slopes","width":36,"height":16,"linkWithCollision":false,"visible":1,"tilesetName":"media/tileset_slopes.png","repeat":false,"preRender":false,"distance":"1","tilesize":16,"foreground":false,"data":[[0,0,0,0,0,0,0,0,257,258,259,0,0,0,0,0,0,0,0,0,0,0,0,0,0,254,255,256,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,128,129,270,271,272,0,0,0,0,0,0,0,0,0,0,0,0,0,0,267,268,269,126,127,0,0,0,0,0,0],[0,0,0,0,0,12,141,142,283,284,285,0,0,0,0,0,0,0,0,0,0,0,0,0,0,280,281,282,139,140,11,0,0,0,0,0],[0,0,0,0,12,25,154,155,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,152,153,24,11,0,0,0,0],[0,0,0,12,25,38,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,37,24,11,0,0,0],[0,0,12,25,38,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,37,24,11,0,0],[0,192,193,194,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,189,190,191,0],[0,205,206,207,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,202,203,204,0],[199,200,201,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,196,197,198],[212,213,214,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,209,210,211],[225,226,227,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,222,223,224],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]]},{"name":"details","width":36,"height":16,"linkWithCollision":false,"visible":1,"tilesetName":"media/tileset_details.png","repeat":false,"preRender":false,"distance":"1","tilesize":16,"foreground":false,"data":[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,137,129,0,137,137,137,137,137,137,137,137,0,128,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,137,129,0,137,137,142,0,0,140,137,137,0,128,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,58,0,0,137,129,0,137,137,0,0,0,0,137,137,0,128,0,0,0,58,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,137,129,0,137,137,0,0,0,0,137,137,0,128,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,46,47,48,49,0,137,129,0,137,137,0,0,0,0,137,137,0,128,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,63,64,65,66,0,137,129,0,137,137,0,0,0,0,137,137,0,128,0,0,0,0,0,139,0,0,0,0,0,0],[0,0,0,0,225,0,137,137,0,83,0,0,0,0,137,137,0,0,0,0,137,137,0,0,0,0,0,0,137,137,0,224,0,0,0,0],[0,0,0,0,0,0,137,137,0,0,0,0,0,138,137,137,0,0,0,0,137,137,139,0,0,0,0,0,137,137,137,0,0,0,0,0],[0,0,0,0,0,0,137,137,0,0,0,0,0,137,137,137,0,139,138,0,137,137,137,0,0,0,0,0,137,137,137,0,0,0,0,0],[0,62,0,0,0,0,137,137,0,0,0,0,139,137,137,137,139,137,137,138,137,137,137,138,0,0,0,0,137,137,137,0,0,0,61,0],[0,79,130,0,0,0,137,137,0,0,0,0,137,137,137,137,137,137,137,137,137,137,137,137,0,0,0,0,137,137,137,0,0,130,78,0],[0,96,0,0,0,0,137,137,0,0,0,0,137,137,137,137,137,137,137,137,137,137,137,137,0,0,0,0,137,137,137,107,0,0,95,0],[0,113,0,0,0,0,0,0,0,0,0,0,137,137,137,137,137,137,137,137,137,137,137,137,0,0,0,0,0,0,0,0,0,0,112,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]]},{"name":"shadows","width":36,"height":16,"linkWithCollision":false,"visible":1,"tilesetName":"media/tileset_details.png","repeat":false,"preRender":false,"distance":"1","tilesize":16,"foreground":false,"data":[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,137,0,0,0,0,0,0,0,0,0,0,137,137,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,137,0,0,0,0,0,0,0,0,0,0,137,137,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,139,0,0,0,0,0,0,137,0,0,0,0,0,0,0,0,0,0,137,137,0,0,0,0,0,138,0,0,0,0,0],[0,0,0,0,0,137,0,0,0,0,0,0,137,0,0,0,0,0,0,0,0,0,0,137,137,0,0,0,0,0,137,0,0,0,0,0],[0,0,0,0,0,137,0,0,0,0,50,51,137,0,0,0,0,0,0,0,0,0,0,137,137,0,0,0,0,0,137,0,0,0,0,0],[0,0,0,0,0,137,202,203,0,0,67,68,137,0,0,0,0,0,0,0,0,0,0,137,137,138,0,0,202,203,137,0,0,0,0,0],[0,0,0,0,0,218,219,220,187,0,84,85,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,186,219,220,221,0,0,0,0,0],[0,0,0,0,0,137,200,201,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,200,201,0,0,0,0,0,0],[0,0,0,0,0,137,200,201,0,0,0,0,0,0,0,0,0,44,45,0,0,0,0,0,0,0,0,0,200,201,0,0,0,0,0,0],[0,0,0,0,0,137,200,201,0,0,0,234,195,195,195,195,195,195,195,195,195,195,195,195,238,0,0,0,200,201,0,0,0,0,0,0],[0,0,0,0,0,137,200,201,0,0,0,233,212,212,212,212,212,212,212,212,212,212,212,212,237,0,0,0,200,201,0,0,0,0,0,0],[0,0,0,0,0,137,200,201,0,0,0,232,229,229,229,229,229,229,229,229,229,229,229,229,236,0,0,0,200,201,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,231,230,230,230,230,230,230,230,230,230,230,230,230,235,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]]}]};LevelPlayerResources=[new ig.Image('media/tileset_walls.png'),new ig.Image('media/tileset_slopes.png'),new ig.Image('media/tileset_details.png'),new ig.Image('media/tileset_details.png')];});

// lib/plusplus/entities/camera-atmosphere.js
ig.baked=true;ig.module('plusplus.entities.camera-atmosphere').requires('plusplus.entities.trigger-controller').defines(function(){"use strict";ig.EntityCameraAtmosphere=ig.global.EntityCameraAtmosphere=ig.EntityTriggerController.extend({_wmBoxColor:'rgba(80, 130, 170, 0.7)',atmosphereFadeDuration:false,atmosphereSettings:null,triggerable:true,activate:function(entity){this.parent(entity);if(ig.game.camera){ig.game.camera.addAtmosphere(this.atmosphereFadeDuration,this.atmosphereSettings);}},deactivate:function(entity){this.parent(entity);if(ig.game.camera){ig.game.camera.removeAtmosphere(this.atmosphereFadeDuration);}}});});

// lib/plusplus/entities/camera-shake.js
ig.baked=true;ig.module('plusplus.entities.camera-shake').requires('plusplus.entities.trigger').defines(function(){"use strict";ig.EntityCameraShake=ig.global.EntityCameraShake=ig.EntityTrigger.extend({_wmBoxColor:'rgba(80, 130, 170, 0.7)',shakeStrength:0,shakeDuration:0,shakeFunction:false,activate:function(entity){this.parent(entity);if(ig.game.camera){ig.game.camera.shake(this.shakeDuration,this.shakeStrength,this.shakeFunction);}},deactivate:function(entity){this.parent(entity);if(ig.game.camera){ig.game.camera.shakeStop();}}});});

// lib/game/entities/villain-friendly.js
ig.baked=true;ig.module('game.entities.villain-friendly').requires('game.entities.villain','plusplus.helpers.utils').defines(function(){"use strict";var _ut=ig.utils;ig.EntityVillainFriendly=ig.global.EntityVillainFriendly=ig.EntityVillain.extend({collides:ig.EntityExtended.COLLIDES.ACTIVE,canWanderX:false,canWanderY:false,reactionDistance:Infinity,needsLineOfSightPrey:false,moveToPreySettings:{searchDistance:Infinity},initTypes:function(){this.parent();_ut.addType(ig.EntityExtended,this,'group',"FRIEND","GROUP");},activate:function(entity){this.parent(entity);this.preyName="player";},deactivate:function(entity){this.parent(entity);this.preyName="";this.removePrey();}});});

// lib/plusplus/entities/trigger-reverse-constant.js
ig.baked=true;ig.module('plusplus.entities.trigger-reverse-constant').requires('plusplus.entities.trigger-reverse').defines(function(){"use strict";ig.EntityTriggerReverseConstant=ig.global.EntityTriggerReverseConstant=ig.EntityTriggerReverse.extend({suicidal:false});});

// lib/game/levels/camera.js
ig.baked=true;ig.module('game.levels.camera').requires('impact.image','plusplus.entities.camera-atmosphere','plusplus.entities.conversation','plusplus.entities.levelchange','plusplus.entities.checkpoint','plusplus.entities.camera-shake','game.entities.villain-friendly','plusplus.entities.trigger-reverse-constant','plusplus.entities.trigger-constant').defines(function(){LevelCamera={"entities":[{"type":"EntityCameraAtmosphere","x":156,"y":120,"settings":{"size":{"x":16,"y":16},"name":"atmosphere","target":{"1":"atmosphereOnLeft","2":"atmosphereOnRight","3":"atmosphereOffLeft","4":"atmosphereOffRight","5":"villain"}}},{"type":"EntityConversation","x":168,"y":44,"settings":{"steps":{"1":{"name":"villain","text":"ow! frak! my toe!"}},"size":{"x":16,"y":52}}},{"type":"EntityLevelchange","x":272,"y":64,"settings":{"size":{"x":16,"y":32},"levelName":"lighting","playerSpawnerName":"left"}},{"type":"EntityCheckpoint","x":240,"y":64,"settings":{"size":{"x":16,"y":32},"name":"right"}},{"type":"EntityCameraShake","x":64,"y":32,"settings":{"delay":1.1,"shakeStrength":16,"shakeDuration":2,"size":{"x":76,"y":64}}},{"type":"EntityLevelchange","x":32,"y":64,"settings":{"size":{"x":16,"y":32},"levelName":"player","playerSpawnerName":"right"}},{"type":"EntityCheckpoint","x":72,"y":64,"settings":{"size":{"x":16,"y":32},"name":"left"}},{"type":"EntityConversation","x":80,"y":80,"settings":{"pausing":"true","delay":1,"steps":{"1":{"name":"villain","text":"you've probably noticed the camera"},"2":{"name":"villain","text":"it comes with a trap, following, transitions, and it can even..."},"3":{"name":"villain","text":"BRING DA ROOF DOWN!"}},"participate":{"1":"player"},"autoAdvance":"false"}},{"type":"EntityVillainFriendly","x":48,"y":72,"settings":{"collides":0}},{"type":"EntityTriggerReverseConstant","x":96,"y":32,"settings":{"size":{"x":8,"y":64},"target":{"1":"atmosphere"},"name":"atmosphereOffLeft"}},{"type":"EntityTriggerConstant","x":124,"y":32,"settings":{"size":{"x":8,"y":64},"target":{"1":"atmosphere"},"name":"atmosphereOnLeft"}},{"type":"EntityTriggerReverseConstant","x":224,"y":32,"settings":{"size":{"x":8,"y":64},"target":{"1":"atmosphere"},"name":"atmosphereOffRight"}},{"type":"EntityTriggerConstant","x":196,"y":32,"settings":{"size":{"x":8,"y":64},"target":{"1":"atmosphere"},"name":"atmosphereOnRight"}},{"type":"EntityConversation","x":224,"y":44,"settings":{"steps":{"1":{"name":"villain","text":"computer! lights!"}},"size":{"x":8,"y":52}}},{"type":"EntityConversation","x":124,"y":44,"settings":{"steps":{"1":{"name":"villain","text":"computer! lights!"}},"size":{"x":8,"y":52}}}],"layer":[{"name":"collision","width":20,"height":8,"linkWithCollision":false,"visible":1,"tilesetName":"","repeat":false,"preRender":false,"distance":1,"tilesize":16,"foreground":false,"data":[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0],[0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0],[0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0],[0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0],[0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0],[0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]]},{"name":"walls","width":20,"height":8,"linkWithCollision":false,"visible":1,"tilesetName":"media/tileset_walls.png","repeat":false,"preRender":false,"distance":"1","tilesize":16,"foreground":false,"data":[[1,29,30,31,32,31,29,33,31,32,33,29,30,31,29,30,31,32,29,14],[9,86,89,90,91,89,90,89,92,93,94,89,89,91,90,89,89,90,73,17],[7,66,176,176,176,174,176,176,176,176,176,176,176,176,174,176,176,176,54,20],[5,65,188,188,188,186,188,188,188,188,188,188,188,188,186,188,188,188,54,19],[5,66,177,177,177,175,177,177,177,177,177,177,177,177,175,177,177,177,53,17],[9,65,189,189,189,187,189,189,189,189,189,189,189,189,187,189,189,189,53,18],[5,52,77,77,77,81,78,77,77,77,79,78,77,78,77,82,77,78,63,19],[26,41,41,42,45,44,43,44,43,44,45,41,42,43,44,43,44,45,45,37]]},{"name":"details","width":20,"height":8,"linkWithCollision":false,"visible":1,"tilesetName":"media/tileset_details.png","repeat":false,"preRender":false,"distance":"1","tilesize":16,"foreground":false,"data":[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,62,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,61,0],[0,79,130,0,0,0,0,0,0,0,0,0,0,0,0,0,0,130,78,0],[0,96,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,95,0],[0,113,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,112,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]]}]};LevelCameraResources=[new ig.Image('media/tileset_walls.png'),new ig.Image('media/tileset_details.png')];});

// lib/game/levels/lighting.js
ig.baked=true;ig.module('game.levels.lighting').requires('impact.image','plusplus.entities.light','plusplus.entities.checkpoint','plusplus.entities.levelchange','plusplus.entities.camera-atmosphere','plusplus.entities.conversation','game.entities.villain-working').defines(function(){LevelLighting={"entities":[{"type":"EntityLight","x":116,"y":80,"settings":{"size":{"x":104,"y":104},"r":1,"g":1,"alpha":0.5,"b":0.35}},{"type":"EntityLight","x":308,"y":80,"settings":{"size":{"x":104,"y":104},"castsShadows":"true","castsShadowsMovable":"true","performance":"movable"}},{"type":"EntityCheckpoint","x":464,"y":144,"settings":{"size":{"x":16,"y":32},"name":"right"}},{"type":"EntityLevelchange","x":32,"y":144,"settings":{"size":{"x":16,"y":32},"levelName":"camera","playerSpawnerName":"right"}},{"type":"EntityCheckpoint","x":64,"y":144,"settings":{"size":{"x":16,"y":32},"name":"left"}},{"type":"EntityLevelchange","x":496,"y":144,"settings":{"size":{"x":16,"y":32},"levelName":"core","playerSpawnerName":"left"}},{"type":"EntityCameraAtmosphere","x":56,"y":160,"settings":{"atmosphereFadeDuration":0,"size":{"x":16,"y":16}}},{"type":"EntityLight","x":8,"y":80,"settings":{"size":{"x":104,"y":104}}},{"type":"EntityLight","x":196,"y":64,"settings":{"size":{"x":136,"y":136},"castsShadows":"true"}},{"type":"EntityLight","x":416,"y":76,"settings":{"size":{"x":104,"y":104},"pixelPerfect":"true","gradient":"false"}},{"type":"EntityConversation","x":316,"y":72,"settings":{"size":{"x":76,"y":56},"steps":{"1":{"name":"villain","text":"AND animation specific shadows!"}}}},{"type":"EntityVillainWorking","x":444,"y":144},{"type":"EntityConversation","x":72,"y":160,"settings":{"size":{"x":16,"y":16},"pausing":"true","steps":{"1":{"name":"villain","text":"this is the lighting room!"},"2":{"name":"villain","text":"lighting may be too expensive for some devices, so don't be a jerk"}},"delay":1,"autoAdvance":"false"}},{"type":"EntityCameraAtmosphere","x":472,"y":160,"settings":{"atmosphereFadeDuration":0,"size":{"x":16,"y":16}}},{"type":"EntityConversation","x":128,"y":72,"settings":{"size":{"x":16,"y":104},"steps":{"1":{"name":"player","text":"colored lights?"}}}},{"type":"EntityConversation","x":216,"y":72,"settings":{"size":{"x":16,"y":104},"steps":{"1":{"name":"player","text":"static map shadows?"}}}},{"type":"EntityConversation","x":316,"y":72,"settings":{"size":{"x":16,"y":104},"steps":{"1":{"name":"player","text":"dynamic shadows?"}}}},{"type":"EntityConversation","x":432,"y":72,"settings":{"size":{"x":16,"y":104},"steps":{"1":{"name":"villain","text":"and don't forget about pixel perfect lights"}}}}],"layer":[{"name":"collision","width":34,"height":13,"linkWithCollision":false,"visible":1,"tilesetName":"","repeat":false,"preRender":false,"distance":1,"tilesize":16,"foreground":false,"data":[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0],[0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0],[0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0],[0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0],[0,1,0,0,0,0,0,0,0,0,0,0,0,6,25,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0],[0,1,0,0,0,0,0,0,0,0,0,0,0,9,13,42,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0],[0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0],[0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,6,25,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0],[0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,9,13,42,0,0,0,0,0,0,0,0,0,0,0,0,1,0],[0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0],[0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]]},{"name":"walls","width":34,"height":13,"linkWithCollision":false,"visible":1,"tilesetName":"media/tileset_walls.png","repeat":false,"preRender":false,"distance":"1","tilesize":16,"foreground":false,"data":[[2,29,29,29,30,31,32,33,33,29,30,31,32,33,29,30,31,32,33,29,29,30,31,32,29,30,31,32,33,30,31,32,33,13],[9,85,89,89,89,90,89,89,90,89,89,89,89,90,90,89,89,90,89,89,90,89,89,89,89,89,89,90,89,89,89,90,74,17],[5,65,154,154,154,154,154,154,154,154,154,154,154,154,154,154,154,154,154,154,154,154,154,154,154,154,154,154,154,154,154,154,53,18],[7,65,154,154,154,154,154,154,154,154,154,154,154,154,154,154,154,154,154,154,154,154,154,154,154,154,154,154,154,154,154,154,54,18],[5,66,154,154,154,154,154,154,154,154,154,154,154,154,154,154,154,154,154,154,154,154,154,154,154,154,154,154,154,154,154,154,54,19],[5,66,154,154,154,154,154,154,154,154,154,154,154,154,154,154,154,154,154,154,154,154,154,154,154,155,154,154,154,154,154,154,54,21],[9,66,154,154,154,154,154,154,154,154,154,154,154,154,154,155,154,154,154,154,154,154,154,154,154,154,154,154,154,154,154,154,53,18],[7,66,154,154,154,155,154,154,154,154,154,154,154,154,154,154,154,155,154,154,154,154,154,154,154,154,154,154,154,154,154,155,54,19],[5,65,152,151,152,152,152,152,152,152,151,152,152,152,152,152,151,152,152,152,152,152,151,152,152,152,152,152,152,151,152,152,53,19],[5,66,164,165,166,163,163,163,164,165,166,163,163,163,163,164,165,166,163,163,164,165,166,163,163,163,163,163,163,163,163,163,54,18],[7,65,154,155,154,154,154,154,154,154,154,154,154,154,154,155,154,154,154,154,154,154,154,154,154,154,154,154,154,154,154,154,53,17],[7,114,101,101,101,101,101,102,103,101,101,101,101,101,105,106,101,107,108,101,101,101,101,101,101,101,101,104,105,101,102,103,115,21],[26,41,41,41,43,42,43,44,45,43,41,41,41,42,43,44,45,45,41,42,43,44,43,41,41,42,43,44,45,42,43,44,45,37]]},{"name":"details","width":34,"height":13,"linkWithCollision":false,"visible":1,"tilesetName":"media/tileset_details.png","repeat":false,"preRender":false,"distance":"1","tilesize":16,"foreground":false,"data":[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,87,87,87,87,87,90,87,87,86,87,87,90,87,87,87,87,87,90,87,87,86,87,87,90,87,87,87,87,87,87,0,0],[0,0,87,87,86,87,87,106,0,0,0,0,0,105,87,87,86,87,87,106,0,0,0,0,0,105,87,87,86,87,87,87,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,164,0,0,0,147,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,180,181,182,0,0,147,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,196,197,198,199,0,0,147,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,214,215,0,0,0,164,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,62,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,180,181,182,0,0,0,0,0,0,0,0,0,0,0,0,61,0],[0,79,0,0,0,0,0,0,0,0,0,0,0,0,0,0,196,197,198,199,0,0,0,0,0,12,13,14,15,16,17,0,78,0],[0,96,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,214,215,0,0,0,0,0,0,29,30,31,32,33,34,0,95,0],[0,113,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,112,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]]}]};LevelLightingResources=[new ig.Image('media/tileset_walls.png'),new ig.Image('media/tileset_details.png')];});

// lib/game/entities/title-banner.js
ig.baked=true;ig.module('game.entities.title-banner').requires('plusplus.core.config','plusplus.core.entity').defines(function(){"use strict";var _c=ig.CONFIG;ig.EntityTitleBanner=ig.global.EntityTitleBanner=ig.EntityExtended.extend({size:{x:256,y:96},animSheet:new ig.AnimationSheet(_c.PATH_TO_MEDIA+'title_banner.png',256,96),animInit:"idleX",animSettings:{idleX:{sequence:[0],frameTime:1,stop:true}}});});

// lib/game/levels/core.js
ig.baked=true;ig.module('game.levels.core').requires('impact.image','plusplus.entities.levelchange','plusplus.entities.checkpoint','game.entities.villain-working','game.entities.title-banner','plusplus.entities.conversation').defines(function(){LevelCore={"entities":[{"type":"EntityLevelchange","x":32,"y":272,"settings":{"size":{"x":16,"y":32},"levelName":"lighting","playerSpawnerName":"right"}},{"type":"EntityCheckpoint","x":64,"y":272,"settings":{"size":{"x":16,"y":32},"name":"left"}},{"type":"EntityLevelchange","x":304,"y":272,"settings":{"size":{"x":16,"y":32},"levelName":"abilities","playerSpawnerName":"left"}},{"type":"EntityCheckpoint","x":272,"y":272,"settings":{"size":{"x":16,"y":32},"name":"right"}},{"type":"EntityVillainWorking","x":132,"y":174},{"type":"EntityTitleBanner","x":48,"y":56,"settings":{"name":"banner"}},{"type":"EntityConversation","x":96,"y":224,"settings":{"size":{"x":16,"y":80},"steps":{"1":{"name":"villain","text":"up here at the core!"},"2":{"name":"villain","text":"come on up if you want to hear about all the stuff under the hood"}},"autoAdvance":"false","lockingPlayer":"true"}},{"type":"EntityConversation","x":80,"y":184,"settings":{"size":{"x":192,"y":15},"pausing":"true","steps":{"1":{"name":"villain","text":"first, this is not a new html5 game engine"},"2":{"name":"villain","text":"more like a boilerplate that expands impactJS by ten to twenty times in size"},"3":{"name":"villain","text":"config driven, so you don't have to modify the source"},"4":{"name":"villain","text":"focused on performance and flexibility, while waiting for changes to remain efficient"},"5":{"name":"villain","text":"you don't need to worry about device resizing and resolution"},"6":{"name":"villain","text":"we've pumped the base entity up, and you can opt-in to whichever enhancements you want"},"7":{"name":"villain","text":"game, layer, and entity pausing is so easy I want to cry"},"8":{"name":"villain","text":"background maps are much faster and we've added new collision tiles"},"9":{"name":"villain","text":"mouse? touch? we don't care and you don't need to either"},"10":{"name":"villain","text":"going for a top down game? one config value flips the switch"},"11":{"text":"and last, but not least, utilities for intersections, drawing, events, tweens, and more","name":"villain"}},"delay":0.5,"autoAdvance":"false","participate":{"1":"player"}}}],"layer":[{"name":"collision","width":22,"height":21,"linkWithCollision":false,"visible":1,"tilesetName":"","repeat":false,"preRender":false,"distance":1,"tilesize":16,"foreground":false,"data":[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0],[0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0],[0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0],[0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0],[0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0],[0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0],[0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0],[0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0],[0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0],[0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0],[0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0],[0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0],[0,1,1,1,1,12,12,48,48,48,48,48,48,48,48,12,12,1,1,1,1,0],[0,1,0,0,0,0,0,49,49,49,49,49,49,49,49,0,0,0,0,0,1,0],[0,1,0,0,0,0,0,49,49,49,49,49,49,49,49,0,0,0,0,0,1,0],[0,1,0,0,0,0,0,49,49,49,49,49,49,49,49,0,0,0,0,0,1,0],[0,1,0,0,0,0,0,49,49,49,49,49,49,49,49,0,0,0,0,0,1,0],[0,1,0,0,0,0,0,49,49,49,49,49,49,49,49,0,0,0,0,0,1,0],[0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]]},{"name":"walls","width":22,"height":21,"linkWithCollision":false,"visible":1,"tilesetName":"media/tileset_walls.png","repeat":false,"preRender":false,"distance":"1","tilesize":16,"foreground":false,"data":[[2,29,33,31,32,29,31,30,31,32,33,29,31,30,32,33,29,33,31,30,33,14],[8,86,89,89,89,89,89,89,89,89,89,89,89,89,89,89,89,89,89,89,76,17],[7,65,173,148,149,150,172,173,172,173,172,173,172,173,172,173,148,149,150,172,53,19],[7,65,185,160,161,162,184,185,184,185,184,185,184,185,184,185,160,161,162,184,53,19],[9,65,173,148,149,150,172,173,172,173,172,173,172,173,172,173,148,149,150,172,53,19],[5,65,185,160,161,162,184,185,184,185,184,185,184,185,184,185,160,161,162,184,53,18],[8,65,173,148,149,150,172,173,172,173,172,173,172,173,172,173,148,149,150,172,53,17],[5,65,185,160,161,162,184,185,184,185,184,185,184,185,184,185,160,161,162,184,53,20],[7,65,173,148,149,150,172,173,172,173,172,173,172,173,172,173,148,149,150,172,53,21],[5,65,185,160,161,162,184,185,184,185,184,185,184,185,184,185,160,161,162,184,53,19],[5,65,173,148,149,150,172,173,172,173,172,173,172,173,172,173,148,149,150,172,53,18],[9,65,185,160,161,162,184,185,184,185,184,185,184,185,184,185,160,161,162,184,53,17],[8,65,173,148,149,150,172,173,172,173,172,173,172,173,172,173,148,149,150,172,53,17],[5,65,77,77,77,77,77,156,156,156,156,156,156,156,156,77,77,77,77,77,53,19],[7,65,173,148,149,150,172,168,168,168,168,168,168,168,168,173,148,149,150,172,53,18],[7,65,185,160,161,162,184,168,168,168,168,168,168,168,168,185,160,161,162,184,53,17],[7,65,173,148,149,150,172,168,168,168,168,168,168,168,168,173,148,149,150,172,53,17],[7,65,185,160,161,162,184,168,168,168,168,168,168,168,168,185,160,161,162,184,53,21],[5,65,173,148,149,150,172,168,168,168,168,168,168,168,168,173,148,149,150,172,53,20],[5,49,77,77,77,77,77,77,77,77,77,77,77,77,77,77,77,77,77,77,62,17],[25,43,43,43,44,45,41,42,43,42,45,41,42,43,44,43,43,42,43,44,45,37]]},{"name":"details","width":22,"height":21,"linkWithCollision":false,"visible":1,"tilesetName":"media/tileset_details.png","repeat":false,"preRender":false,"distance":"1","tilesize":16,"foreground":false,"data":[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,109,137,0,137,109,0,0,109,0,0,109,0,0,109,137,0,137,109,0,0],[0,0,91,137,154,154,154,154,154,154,154,154,154,154,154,154,154,154,137,91,0,0],[0,0,109,137,154,154,154,154,154,154,154,154,154,154,154,154,154,154,137,109,0,0],[0,0,109,137,154,154,154,154,154,154,154,154,154,154,154,154,154,154,137,109,0,0],[0,0,91,137,154,154,154,154,154,154,154,154,154,154,154,154,154,154,137,91,0,0],[0,0,109,137,154,154,154,154,154,154,154,154,154,154,154,154,154,154,137,109,0,0],[0,0,109,137,154,154,154,154,154,154,154,154,154,154,154,154,154,154,137,109,0,0],[0,0,91,137,154,154,154,154,154,154,154,154,154,154,154,154,154,154,137,91,0,0],[0,0,109,137,0,137,109,0,0,109,0,0,109,0,0,109,137,0,137,109,0,0],[0,0,109,137,0,137,109,0,0,109,0,0,109,0,0,109,137,0,137,109,0,0],[0,0,91,137,0,137,91,92,92,91,92,92,91,92,92,91,137,0,137,91,0,0],[0,226,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,227,0],[0,0,109,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,109,0,0],[0,0,91,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,91,0,0],[0,62,109,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,109,61,0],[0,79,109,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,109,78,0],[0,96,91,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,91,95,0],[0,113,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,112,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]]},{"name":"shadows","width":22,"height":21,"linkWithCollision":false,"visible":1,"tilesetName":"media/tileset_details.png","repeat":false,"preRender":false,"distance":"1","tilesize":16,"foreground":false,"data":[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,35,41,41,41,41,41,41,41,41,41,41,41,41,41,41,36,0,0,0],[0,0,0,39,43,43,43,43,43,43,43,43,43,43,43,43,43,43,40,0,0,0],[0,0,0,39,43,43,43,43,43,43,43,43,43,43,43,43,43,43,40,0,0,0],[0,0,0,39,43,43,43,43,43,43,43,43,43,43,43,43,43,43,40,0,0,0],[0,0,0,39,43,43,43,43,43,43,43,43,43,43,43,43,43,43,40,0,0,0],[0,0,0,39,43,43,43,43,43,43,43,43,43,43,43,43,43,43,40,0,0,0],[0,0,0,37,42,42,42,42,42,42,42,42,42,42,42,42,42,42,38,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,1,2,3,4,5,6,6,7,8,9,10,11,0,0,0,0,0],[0,0,0,0,0,18,19,20,21,22,23,23,24,25,26,27,28,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,137,137,137,137,137,0,0,0,0,0,0,0,0,137,137,137,137,137,0,0],[0,0,137,137,137,137,137,0,0,0,0,0,0,0,0,137,137,137,137,137,0,0],[0,0,137,137,140,137,137,0,0,0,0,0,0,0,0,137,137,142,137,137,0,0],[0,0,137,137,0,137,137,0,0,0,0,0,0,0,0,137,137,0,137,137,0,0],[0,0,137,137,0,137,137,0,0,0,0,0,0,0,0,137,137,0,137,137,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]]}]};LevelCoreResources=[new ig.Image('media/tileset_walls.png'),new ig.Image('media/tileset_details.png'),new ig.Image('media/tileset_details.png')];});

// lib/plusplus/entities/ability-execute.js
ig.baked=true;ig.module('plusplus.entities.ability-execute').requires('plusplus.entities.trigger','plusplus.helpers.utils').defines(function(){"use strict";var _ut=ig.utils;ig.EntityAbilityExecute=ig.global.EntityAbilityExecute=ig.EntityTrigger.extend({_wmBoxColor:'rgba( 255, 0, 255, 0.7 )',abilityName:'',abilityType:0,useCheckingAsTarget:true,_checkedEntity:null,resetExtras:function(){if(typeof this.abilityType==='string'&&this.abilityType){var abilityType=this.abilityType;this.abilityType=0;_ut.addType(ig.Ability,this,'abilityType',abilityType);}
this.parent();},handleTargets:function(entity,needsActivation){if(needsActivation!==false){this.activate(entity);}
for(var i=0,il=this.targetSequence.length;i<il;i++){var target=this.targetSequence[i];if(target&&target.abilities){if(this.abilityName){var ab=target.abilities.getDescendantByName(this.abilityName);if(ab){ab.execute();}}
else if(this.abilityType){var abs=target.abilities.getDescendantsByType(this.abilityType);if(abs.length){for(var j=0,jl=abs.length;j<jl;j++){abs[j].execute();}}}}}}});});

// lib/plusplus/entities/ability-enable.js
ig.baked=true;ig.module('plusplus.entities.ability-enable').requires('plusplus.entities.ability-execute').defines(function(){"use strict";ig.EntityAbilityEnable=ig.global.EntityAbilityEnable=ig.EntityAbilityExecute.extend({abilityEnabling:true,handleTargets:function(entity,needsActivation){if(needsActivation!==false){this.activate(entity);}
for(var i=0,il=this.targetSequence.length;i<il;i++){var target=this.targetSequence[i];if(target&&target.abilities){if(this.abilityName){var ab=target.abilities.getDescendantByName(this.abilityName);if(ab){ab.setEnabled(this.abilityEnabling);}}
else if(this.abilityType){var abs=target.abilities.getDescendantsByType(this.abilityType);if(abs.length){for(var j=0,jl=abs.length;j<jl;j++){abs[j].setEnabled(this.abilityEnabling);}}}}}}});});

// lib/plusplus/entities/dummy.js
ig.baked=true;ig.module('plusplus.entities.dummy').requires('plusplus.core.config','plusplus.abstractities.character','plusplus.entities.particle-color','plusplus.helpers.utils').defines(function(){"use strict";var _c=ig.CONFIG;var _ut=ig.utils;ig.EntityDummy=ig.global.EntityDummy=ig.Character.extend({collides:ig.EntityExtended.COLLIDES.FIXED,animSheet:new ig.AnimationSheet(_c.PATH_TO_MEDIA+'dummy.png',32,32),animSettings:{idleX:{sequence:[0],frameTime:1}},animInit:"idle",opaqueOffset:{left:6,right:-6,top:-1,bottom:4},damageSettings:{spawnCountMax:_c.CHARACTER.EXPLODING_DAMAGE_PARTICLE_COUNT,spawnSettings:{animTileOffset:ig.EntityParticleColor.colorOffsets.GRAY}},deathSettings:{spawnCountMax:_c.CHARACTER.EXPLODING_DEATH_PARTICLE_COUNT,spawnSettings:{animTileOffset:ig.EntityParticleColor.colorOffsets.GRAY}},initTypes:function(){this.parent();_ut.addType(ig.EntityExtended,this,'type',"DAMAGEABLE");}});});

// lib/game/entities/bubbles.js
ig.baked=true;ig.module('game.entities.bubbles').requires('plusplus.core.config','plusplus.core.entity').defines(function(){var _c=ig.CONFIG;ig.global.EntityBubbles=ig.EntityBubbles=ig.EntityExtended.extend({size:{x:12,y:12},animSheet:new ig.AnimationSheet(_c.PATH_TO_MEDIA+'bubbles.png',12,12),animSettings:{idle:{sequence:[0,1,2,3,4],frameTime:0.2}}});});

// lib/plusplus/abilities/glow.js
ig.baked=true;ig.module('plusplus.abilities.glow').requires('plusplus.abilities.ability','plusplus.helpers.utils').defines(function(){"use strict";var _ut=ig.utils;ig.AbilityGlow=ig.Ability.extend({r:1,g:1,b:1,alpha:0.25,fadeInDuration:125,fadeOutDuration:125,sizeMod:5,initTypes:function(){this.parent();_ut.addType(ig.Ability,this,'type',"PASSIVE");},initUpgrades:function(){this.parent();this.addUpgrades([{sizeMod:this.sizeMod},{sizeMod:this.sizeMod*2}]);},activate:function(){var entityOptions=this.entityOptions||this.entity;var gs=entityOptions.glowSettings||{};this.light=ig.game.spawnEntity(ig.EntityLight,this.entity.pos.x+this.entity.size.x*0.5,this.entity.pos.y+this.entity.size.y*0.5,ig.merge({radius:Math.max(this.entity.getSizeDrawX(),this.entity.getSizeDrawY())*0.5*(gs.sizeMod||this.sizeMod),r:_ut.isNumber(gs.r)?gs.r:this.r,g:_ut.isNumber(gs.g)?gs.g:this.g,b:_ut.isNumber(gs.b)?gs.b:this.b,alpha:_ut.isNumber(gs.alpha)?gs.alpha:this.alpha},gs.light));if(!this.light.added){this.light.onAdded.addOnce(this.showLight,this);}
else{this.showLight();}
this.parent();return this.light;},showLight:function(){var entityOptions=this.entityOptions||this.entity;var gs=entityOptions.glowSettings||{};if(this.light){this.light.moveTo(this.entity,{matchPerformance:true});this.light.alpha=0;this.light.fadeTo(this.light.resetState.alpha,{duration:_ut.isNumber(gs.fadeInDuration)?gs.fadeInDuration:this.fadeInDuration});}},deactivate:function(){var light=this.light;var entityOptions=this.entityOptions||this.entity;var gs=entityOptions.glowSettings||{};this.light=undefined;if(light){light.onAdded.remove(this.showLight,this);light.fadeToDeath({duration:_ut.isNumber(gs.fadeOutDuration)?gs.fadeOutDuration:this.fadeOutDuration});}
this.parent();},clone:function(c){if(c instanceof ig.AbilityGlow!==true){c=new ig.AbilityGlow();}
c.r=this.r;c.g=this.g;c.b=this.b;c.alpha=this.alpha;c.fadeDuration=this.fadeDuration;c.sizeMod=this.sizeMod;return this.parent(c);}});});

// lib/game/entities/bubble.js
ig.baked=true;ig.module('game.entities.bubble').requires('plusplus.core.config','plusplus.abstractities.projectile','plusplus.abilities.glow','plusplus.helpers.utilsvector2').defines(function(){var _c=ig.CONFIG;var _utv2=ig.utilsvector2;ig.global.EntityBubble=ig.EntityBubble=ig.Projectile.extend({size:{x:8,y:8},offset:{x:2,y:2},animSheet:new ig.AnimationSheet(_c.PATH_TO_MEDIA+'bubble.png',12,12),animInit:"moveX",animSettings:{moveX:{sequence:[9],frameTime:1},spawnX:{sequence:[0,1,2,3,4,5,6,7,8,9],frameTime:0.3},deathX:{sequence:[10,11,12],frameTime:0.05}},collides:ig.EntityExtended.COLLIDES.LITE,accel:_utv2.vector(0,-5),gravityFactor:0,lifeDuration:3,bounciness:0.5,glowSettings:{sizeMod:10,fadeInDuration:750},initProperties:function(){this.parent();this.glow=new ig.AbilityGlow(this);},resetExtras:function(){this.glowSettings.fadeInDuration=Math.min(this.glowSettings.fadeInDuration,this.lifeDuration*1000*0.25);this.parent();}});});

// lib/game/abilities/glow-bubble.js
ig.baked=true;ig.module('game.abilities.glow-bubble').requires('plusplus.core.input','game.entities.bubble','plusplus.abilities.ability-shoot','plusplus.helpers.utils').defines(function(){"use strict";var _ut=ig.utils;ig.AbilityGlowBubble=ig.AbilityShoot.extend({costActivate:4,spawningEntity:ig.EntityBubble,offsetVelX:60,offsetVelY:20,relativeVelPctX:0.75,relativeVelPctY:0.25,activatePassCastSettings:{animName:'throwPass'},activateCastSettings:{animName:'throwActivate'},initTypes:function(){this.parent();_ut.addType(ig.Ability,this,'type',"SPAMMABLE");},activate:function(settings){settings=settings||{};var entityOptions=this.entityOptions||this.entity;settings.projectileSettings={glowSettings:entityOptions.glowBubbleSettings||entityOptions.glowSettings};var bubble=this.parent(settings);return bubble;},clone:function(c){if(c instanceof ig.AbilityGlowBubble!==true){c=new ig.AbilityGlowBubble();}
return this.parent(c);}});});

// lib/game/entities/bubble-plant.js
ig.baked=true;ig.module('game.entities.bubble-plant').requires('plusplus.core.config','plusplus.core.timer','plusplus.abstractities.character','game.entities.bubbles','plusplus.abilities.glow','game.abilities.glow-bubble','plusplus.helpers.utils').defines(function(){"use strict";var _c=ig.CONFIG;var _ut=ig.utils;ig.global.EntityBubblePlant=ig.EntityBubblePlant=ig.Character.extend({performance:_c.STATIC,size:{x:16,y:16},offset:{x:4,y:4},animSheet:new ig.AnimationSheet(_c.PATH_TO_MEDIA+'bubble_plant.png',24,24),animInit:"idleX",animSettings:{idleX:{sequence:[0,1,2,3,4,5],frameTime:0.1},throwPassX:{sequence:[6,7,8,9,10,11],frameTime:0.1},throwActivateX:{sequence:[11,10,9,8,7,6],frameTime:0.1}},mimicLevel:_c.RANKS_MAP.EASY,mimicEffect:{entityClass:ig.EntityBubbles,followSettings:{matchPerformance:true}},rMax:0.25,rMin:0.25,gMax:0.5,gMin:0,bMax:1,bMin:0.75,brightnessMin:0.7,abilityDelay:1,randomDelay:10,invulnerable:true,glowSettings:{sizeMod:3,alpha:0.1},glowBubbleSettings:{},initTypes:function(){this.parent();_ut.addType(ig.EntityExtended,this,'type',"MIMICABLE");_ut.addType(ig.EntityExtended,this,'group',"FRIEND","GROUP");},initProperties:function(){this.parent();this.abilityTimer=new ig.TimerExtended(0,this);this.glow=new ig.AbilityGlow(this);this.glowBubble=new ig.AbilityGlowBubble(this);this.abilities.addDescendants([this.glow,this.glowBubble]);},resetExtras:function(){this.abilityTimer=new ig.TimerExtended(0,this);var gsl=this.glowSettings.light=this.glowSettings.light||{};var gbsl=this.glowBubbleSettings.light=this.glowBubbleSettings.light||{};gsl.r=this.rMin+Math.random()*(this.rMax-this.rMin);gsl.g=this.gMin+Math.random()*(this.gMax-this.gMin);gsl.b=this.bMin+Math.random()*(this.bMax-this.bMin);if(gsl.r<this.rMax*this.brightnessMin){gsl.g=Math.min(this.gMax,gsl.g/gsl.r);gsl.b=Math.min(this.bMax,gsl.b/gsl.r);}
if(gsl.g<this.gMax*this.brightnessMin){gsl.r=Math.min(this.rMax,gsl.r/gsl.g);gsl.b=Math.min(this.bMax,gsl.b/gsl.g);}
if(this.b<this.bMax*this.brightnessMin){gsl.r=Math.min(this.rMax,gsl.r/gsl.b);gsl.g=Math.min(this.gMax,gsl.g/gsl.b);}
gbsl.r=gsl.r;gbsl.g=gsl.g;gbsl.b=gsl.b;this.parent();},updateVisible:function(){if(this.abilityDelay&&this.abilityTimer.delta()>=0){this.abilityTimer.set(this.abilityDelay+Math.random()*this.randomDelay);this.glowBubble.execute({offsetY:-this.size.y*0.5});}
this.parent();}});});

// lib/plusplus/entities/ability-upgrade.js
ig.baked=true;ig.module('plusplus.entities.ability-upgrade').requires('plusplus.entities.ability-execute').defines(function(){"use strict";ig.EntityAbilityUpgrade=ig.global.EntityAbilityUpgrade=ig.EntityAbilityExecute.extend({abilityRank:0,handleTargets:function(entity,needsActivation){if(needsActivation!==false){this.activate(entity);}
for(var i=0,il=this.targetSequence.length;i<il;i++){var target=this.targetSequence[i];if(target&&target.abilities){if(this.abilityName){var ab=target.abilities.getDescendantByName(this.abilityName);if(ab){ab.changegrade(this.abilityRank);}}
else if(this.abilityType){var abs=target.abilities.getDescendantsByType(this.abilityType);if(abs.length){for(var j=0,jl=abs.length;j<jl;j++){abs[j].changegrade(this.abilityRank);}}}}}}});});

// lib/plusplus/entities/demo-tap.js
ig.baked=true;ig.module('plusplus.entities.demo-tap').requires('plusplus.core.config','plusplus.abstractities.demo','plusplus.helpers.utilsvector2').defines(function(){var _c=ig.CONFIG;var _utv2=ig.utilsvector2;ig.EntityDemoTap=ig.global.EntityDemoTap=ig.Demo.extend({size:_utv2.vector(64,64),animSheet:new ig.AnimationSheet(_c.PATH_TO_MEDIA+'demos_gestures_tap.png',64,64),animSettings:{moveX:{sequence:[0,1,2,3,4],frameTime:0.1}}});});

// lib/plusplus/entities/tutorial-tap.js
ig.baked=true;ig.module('plusplus.entities.tutorial-tap').requires('plusplus.abstractities.tutorial','plusplus.entities.demo-tap','plusplus.helpers.utilsvector2').defines(function(){var _utv2=ig.utilsvector2;ig.EntityTutorialTap=ig.global.EntityTutorialTap=ig.Tutorial.extend({loopDelay:0.5,delay:0.25,spawningEntity:ig.EntityDemoTap,actions:['tap'],textSettings:{text:'tap!'},spawnAndMoveToSettings:{offsetPct:_utv2.vector(0.35,0.5)}});});

// lib/game/entities/tutorial-spam.js
ig.baked=true;ig.module('game.entities.tutorial-spam').requires('plusplus.entities.tutorial-tap','plusplus.ui.ui-overlay').defines(function(){ig.global.EntityTutorialSpam=ig.EntityTutorialSpam=ig.EntityTutorialTap.extend({overlayEntity:ig.UIOverlay,textSettings:{text:'tap to do a quick action!'}});});

// lib/game/levels/abilities.js
ig.baked=true;ig.module('game.levels.abilities').requires('impact.image','plusplus.entities.ability-enable','plusplus.entities.dummy','plusplus.entities.levelchange','plusplus.entities.checkpoint','game.entities.bubble-plant','plusplus.entities.trigger-controller','game.entities.villain-friendly','plusplus.entities.ability-upgrade','plusplus.entities.trigger-constant','plusplus.entities.conversation','game.entities.tutorial-spam').defines(function(){LevelAbilities={"entities":[{"type":"EntityAbilityEnable","x":380,"y":216,"settings":{"abilityName":"laserGun","name":"enableLaserGun","suicidal":"false","size":{"x":16,"y":16},"target":{"1":"player"},"once":"false"}},{"type":"EntityDummy","x":352,"y":136},{"type":"EntityLevelchange","x":896,"y":128,"settings":{"size":{"x":16,"y":32},"levelName":"creatures","playerSpawnerName":"left"}},{"type":"EntityCheckpoint","x":864,"y":128,"settings":{"size":{"x":16,"y":32},"name":"right","target":{"1":"disableAll"}}},{"type":"EntityBubblePlant","x":752,"y":144},{"type":"EntityTriggerController","x":312,"y":240,"settings":{"name":"grenadeController","target":{"1":"enableGrenadeLauncher","2":"disableMelee","3":"disableLaserGun","4":"disableMimic"},"size":{"x":16,"y":16}}},{"type":"EntityDummy","x":568,"y":32,"settings":{"angle":3.14}},{"type":"EntityTriggerController","x":312,"y":216,"settings":{"name":"laserController","target":{"1":"enableLaserGun","2":"disableMelee","3":"disableGrenadeLauncher","4":"disableMimic"}}},{"type":"EntityAbilityEnable","x":428,"y":216,"settings":{"abilityName":"laserGun","name":"disableLaserGun","abilityEnabling":"false","suicidal":"false","target":{"1":"player"},"once":"false"}},{"type":"EntityVillainFriendly","x":96,"y":56},{"type":"EntityAbilityEnable","x":380,"y":240,"settings":{"abilityName":"grenadeLauncher","name":"enableGrenadeLauncher","size":{"x":16,"y":16},"suicidal":"false","target":{"1":"player"},"once":"false"}},{"type":"EntityCheckpoint","x":64,"y":48,"settings":{"size":{"x":16,"y":32},"name":"left","target":{"1":"disableAll"}}},{"type":"EntityAbilityUpgrade","x":816,"y":112,"settings":{"abilityRank":1,"abilityType":"MIMIC","size":{"x":16,"y":48}}},{"type":"EntityDummy","x":544,"y":56},{"type":"EntityDummy","x":176,"y":56,"settings":{"name":"punchDummy"}},{"type":"EntityDummy","x":592,"y":56},{"type":"EntityAbilityEnable","x":380,"y":192,"settings":{"abilityName":"melee","name":"enableMelee","size":{"x":16,"y":16},"suicidal":"false","target":{"1":"player"},"once":"false"}},{"type":"EntityDummy","x":376,"y":136},{"type":"EntityAbilityEnable","x":428,"y":192,"settings":{"abilityName":"melee","name":"disableMelee","abilityEnabling":"false","size":{"x":16,"y":16},"suicidal":"false","target":{"1":"player"},"once":"false"}},{"type":"EntityDummy","x":328,"y":136},{"type":"EntityAbilityEnable","x":428,"y":240,"settings":{"abilityName":"grenadeLauncher","name":"disableGrenadeLauncher","abilityEnabling":"false","size":{"x":16,"y":16},"suicidal":"false","target":{"1":"player"},"once":"false"}},{"type":"EntityLevelchange","x":32,"y":48,"settings":{"size":{"x":16,"y":32},"levelName":"core","playerSpawnerName":"right"}},{"type":"EntityTriggerController","x":312,"y":192,"settings":{"name":"meleeController","target":{"1":"enableMelee","2":"disableLaserGun","3":"disableGrenadeLauncher","4":"disableMimic"}}},{"type":"EntityTriggerConstant","x":128,"y":32,"settings":{"size":{"x":16,"y":48},"target":{"1":"meleeController"},"autoToggle":"true"}},{"type":"EntityTriggerConstant","x":208,"y":32,"settings":{"size":{"x":16,"y":48},"target":{"1":"meleeController"},"autoToggle":"true"}},{"type":"EntityTriggerConstant","x":288,"y":112,"settings":{"size":{"x":16,"y":48},"target":{"1":"laserController"},"autoToggle":"true"}},{"type":"EntityTriggerConstant","x":432,"y":112,"settings":{"size":{"x":16,"y":48},"target":{"1":"laserController"},"autoToggle":"true"}},{"type":"EntityTriggerConstant","x":512,"y":32,"settings":{"size":{"x":16,"y":48},"target":{"1":"grenadeController"},"autoToggle":"true"}},{"type":"EntityTriggerConstant","x":624,"y":32,"settings":{"size":{"x":16,"y":48},"target":{"1":"grenadeController"},"autoToggle":"true"}},{"type":"EntityTriggerConstant","x":312,"y":288,"settings":{"size":{"x":16,"y":16},"name":"disableAll","target":{"1":"disableMelee","2":"disableLaserGun","3":"disableGrenadeLauncher","4":"disableMimic"},"autoToggle":"true"}},{"type":"EntityDummy","x":400,"y":136},{"type":"EntityConversation","x":72,"y":64,"settings":{"steps":{"1":{"name":"villain","text":"MOVE IT SOLDIER!"}},"target":{"1":"villain"}}},{"type":"EntityConversation","x":144,"y":32,"settings":{"steps":{"1":{"name":"villain","text":"PUNCH PUNCH PUNCH!"}},"size":{"x":64,"y":48},"autoAdvance":"false"}},{"type":"EntityConversation","x":240,"y":32,"settings":{"steps":{"1":{"name":"villain","text":"CLIMB!"}},"size":{"x":32,"y":128},"autoAdvance":"false"}},{"type":"EntityConversation","x":464,"y":32,"settings":{"steps":{"1":{"name":"villain","text":"CLIMB!"}},"size":{"x":32,"y":128},"autoAdvance":"false"}},{"type":"EntityConversation","x":656,"y":32,"settings":{"steps":{"1":{"name":"villain","text":"CLIMB!"}},"size":{"x":32,"y":128},"autoAdvance":"false"}},{"type":"EntityConversation","x":324,"y":112,"settings":{"steps":{"1":{"name":"villain","text":"SHOOT EM UP!"}},"size":{"x":92,"y":48},"autoAdvance":"false"}},{"type":"EntityConversation","x":548,"y":32,"settings":{"steps":{"1":{"name":"villain","text":"KABLOOIE!"}},"size":{"x":60,"y":48},"autoAdvance":"false"}},{"type":"EntityConversation","x":736,"y":112,"settings":{"steps":{"1":{"name":"villain","text":"that was fun!"},"2":{"name":"villain","text":"we've made abilities modular"},"3":{"name":"villain","text":"and built in things like casting, effects, failure reasons, and easy cloning"},"4":{"name":"villain","text":"in fact, you can mimic this plant's abilities"},"5":{"name":"villain","text":"but your ability rank is too low right now"},"6":{"name":"villain","text":"run over to the green up arrow to upgrade, then try mimicking the plant"}},"size":{"x":120,"y":48},"autoAdvance":"false","lockingPlayer":"true","participate":{"1":"player"}}},{"type":"EntityAbilityEnable","x":380,"y":264,"settings":{"abilityName":"mimic","name":"enableMimic","size":{"x":16,"y":16},"suicidal":"false","target":{"1":"player"},"once":"false"}},{"type":"EntityAbilityEnable","x":428,"y":264,"settings":{"abilityName":"mimic","name":"disableMimic","abilityEnabling":"false","size":{"x":16,"y":16},"suicidal":"false","target":{"1":"player"},"once":"false"}},{"type":"EntityTriggerController","x":312,"y":264,"settings":{"name":"mimicController","target":{"1":"enableMimic","2":"disableMelee","3":"disableLaserGun","4":"disableGrenadeLauncher"}}},{"type":"EntityTriggerConstant","x":736,"y":112,"settings":{"size":{"x":12,"y":48},"target":{"1":"mimicController"},"autoToggle":"true"}},{"type":"EntityTriggerConstant","x":840,"y":112,"settings":{"size":{"x":16,"y":48},"target":{"1":"mimicController"},"autoToggle":"true"}},{"type":"EntityTutorialSpam","x":144,"y":48,"settings":{"size":{"x":64,"y":32},"spawnTarget":{"1":"punchDummy"},"isolate":{"1":"villain","2":"punchDummy"}}}],"layer":[{"name":"collision","width":59,"height":12,"linkWithCollision":false,"visible":1,"tilesetName":"","repeat":false,"preRender":false,"distance":1,"tilesize":16,"foreground":false,"data":[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,46,46,1,0,0,0,0,0,0,0,0,0,0,1,46,46,1,1,1,1,1,1,1,1,1,1,46,46,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,47,47,1,1,1,1,1,1,1,1,1,1,1,1,47,47,1,0,0,0,0,0,0,0,0,1,47,47,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,47,0,0,0,0,0,0,0,0,0,0,0,0,0,0,47,1,0,0,0,0,0,0,0,0,1,47,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,47,0,0,0,0,0,0,0,0,0,0,0,0,0,0,47,1,0,0,0,0,0,0,0,0,1,47,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,47,0,0,0,0,0,0,0,0,0,0,0,0,0,0,47,1,0,0,0,0,0,0,0,0,1,47,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]]},{"name":"walls","width":59,"height":12,"linkWithCollision":false,"visible":1,"tilesetName":"media/tileset_walls.png","repeat":false,"preRender":false,"distance":"1","tilesize":16,"foreground":false,"data":[[2,29,33,32,29,30,31,32,30,32,31,32,33,29,29,31,32,30,14,0,0,0,0,0,0,0,0,2,29,33,32,29,30,29,33,32,29,30,31,32,30,32,31,32,14,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[5,85,89,89,90,89,89,89,90,89,89,89,90,89,89,89,90,73,21,0,0,0,0,0,0,0,0,5,86,89,89,90,90,89,90,89,89,89,90,89,89,89,90,75,21,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[7,65,152,152,152,152,151,152,152,152,152,151,152,152,152,127,129,53,18,0,0,0,0,0,0,0,0,7,65,127,129,152,152,151,152,152,152,152,151,152,152,127,129,53,18,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[6,65,163,167,163,164,165,166,163,163,164,165,166,167,163,127,129,53,19,0,0,0,0,0,0,0,0,7,66,127,129,163,164,165,166,163,163,164,165,166,167,127,129,53,19,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[7,66,153,153,153,153,153,153,153,153,153,153,153,153,153,127,129,53,17,0,0,0,0,0,0,0,0,7,66,127,129,153,153,153,153,153,153,153,153,153,153,127,129,53,17,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[8,49,77,77,78,78,77,78,78,77,77,78,77,78,110,127,129,54,15,32,29,32,29,30,29,33,32,3,66,127,129,100,77,77,78,78,77,77,78,78,111,127,129,54,15,29,33,32,29,30,31,32,30,32,31,32,31,32,14],[26,41,43,45,44,41,43,42,43,44,45,41,42,27,65,127,129,122,89,89,90,91,89,90,89,89,90,91,133,127,129,53,39,41,44,41,42,41,43,27,65,127,129,121,89,89,89,90,89,89,89,89,90,90,90,89,90,73,21],[0,0,0,0,0,0,0,0,0,0,0,0,0,7,65,127,129,152,152,152,151,152,152,152,152,151,152,152,152,127,129,53,21,0,0,0,0,0,0,5,65,127,129,152,152,152,151,152,152,152,152,151,152,152,152,152,152,53,18],[0,0,0,0,0,0,0,0,0,0,0,0,0,5,66,127,129,163,163,164,165,166,163,163,164,165,166,167,163,127,129,54,18,0,0,0,0,0,0,7,66,127,129,167,163,164,165,166,163,163,164,165,166,167,163,163,163,54,19],[0,0,0,0,0,0,0,0,0,0,0,0,0,6,66,127,129,153,153,153,153,153,153,153,153,153,153,153,153,127,129,54,19,0,0,0,0,0,0,6,66,127,129,153,153,153,153,153,153,153,153,153,153,153,153,153,153,54,17],[0,0,0,0,0,0,0,0,0,0,0,0,0,7,49,77,77,78,77,77,77,77,77,78,78,77,77,78,78,77,78,62,17,0,0,0,0,0,0,7,50,77,77,78,77,78,77,77,77,77,78,77,77,77,78,77,78,62,17],[0,0,0,0,0,0,0,0,0,0,0,0,0,26,41,43,41,43,44,43,41,43,45,44,41,43,42,43,44,45,41,42,37,0,0,0,0,0,0,26,41,43,45,44,41,43,42,43,44,45,41,42,42,43,44,45,41,42,37]]},{"name":"details","width":59,"height":12,"linkWithCollision":false,"visible":1,"tilesetName":"media/tileset_details.png","repeat":false,"preRender":false,"distance":"1","tilesize":16,"foreground":false,"data":[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,62,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,79,130,0,0,108,0,0,80,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,97,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,96,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,113,0,0,0,0,0,0,0,0,0,0,0,0,0,137,137,0,0,0,0,0,0,0,0,0,0,0,0,137,137,0,0,0,0,0,0,0,0,0,0,137,137,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,137,137,0,0,0,0,0,0,0,0,0,0,0,0,137,137,0,0,0,0,0,0,0,0,0,0,137,137,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,137,142,0,0,0,0,0,0,0,0,0,0,0,0,140,137,0,0,0,0,0,0,0,0,0,0,137,142,0,171,172,173,0,171,172,173,0,0,0,0,0,0,61,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,142,0,0,81,0,0,0,0,0,0,0,0,0,0,0,140,0,0,0,0,0,0,0,0,0,0,142,0,0,188,189,190,0,188,189,190,98,0,0,0,0,130,78,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,205,206,207,0,205,206,207,0,0,0,0,0,0,95,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,112,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]]},{"name":"shadows","width":59,"height":12,"linkWithCollision":false,"visible":1,"tilesetName":"media/tileset_details.png","repeat":false,"preRender":false,"distance":"1","tilesize":16,"foreground":false,"data":[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,140,137,0,0,0,0,0,0,0,0,0,0,0,0,137,142,0,0,0,0,0,0,0,0,0,0,140,137,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,140,0,0,0,0,0,0,0,0,0,0,0,0,142,0,0,0,0,0,0,0,0,0,0,0,0,140,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,202,203,0,0,0,0,0,0,0,0,0,0,0,0,202,203,0,0,0,0,0,0,0,0,0,0,202,203,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,186,219,220,185,0,0,0,0,0,0,0,0,0,0,184,219,220,187,0,0,0,0,0,0,0,0,186,219,220,185,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,200,201,0,0,0,0,0,0,0,0,0,0,0,0,200,201,0,0,0,0,0,0,0,0,0,0,200,201,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,200,201,0,0,0,0,0,0,0,0,0,0,0,0,200,201,0,0,0,0,0,0,0,0,0,0,200,201,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,200,201,0,0,0,0,0,0,0,0,0,0,0,0,200,201,0,0,0,0,0,0,0,0,0,0,200,201,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,200,201,0,0,0,0,0,0,0,0,0,0,0,0,200,201,0,0,0,0,0,0,0,0,0,0,200,201,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]]}]};LevelAbilitiesResources=[new ig.Image('media/tileset_walls.png'),new ig.Image('media/tileset_details.png'),new ig.Image('media/tileset_details.png')];});

// lib/plusplus/abstractities/spawner-character.js
ig.baked=true;ig.module('plusplus.abstractities.spawner-character').requires('plusplus.abstractities.spawner').defines(function(){"use strict";ig.SpawnerCharacter=ig.Spawner.extend({spawnAtRandomPosition:false,spawnAtSide:{x:0,y:1},suicidal:false});});

// lib/game/entities/villain-clone.js
ig.baked=true;ig.module('game.entities.villain-clone').requires('game.entities.villain','plusplus.helpers.utils').defines(function(){"use strict";var _ut=ig.utils;ig.EntityVillainClone=ig.global.EntityVillainClone=ig.EntityVillain.extend({name:'clone',collides:ig.EntityExtended.COLLIDES.NEVER,health:1,preyName:"player",initTypes:function(){this.parent();_ut.addType(ig.EntityExtended,this,'type',"DAMAGEABLE");},attack:function(entity){var closeEnough=this.parent(entity);if(closeEnough){this.abilityMelee.execute();}
return closeEnough;}});});

// lib/game/entities/leech-crab.js
ig.baked=true;ig.module('game.entities.leech-crab').requires('plusplus.core.config','plusplus.abstractities.creature','plusplus.helpers.utils').defines(function(){"use strict";var _c=ig.CONFIG;var _ut=ig.utils;ig.EntityLeechCrab=ig.global.EntityLeechCrab=ig.Creature.extend({zIndex:_c.Z_INDEX_PLAYER-1,size:{x:24,y:8},offset:{x:4,y:4},collides:ig.EntityExtended.COLLIDES.NEVER,animSheet:new ig.AnimationSheet(_c.PATH_TO_MEDIA+'leech_crab.png',32,16),animInit:"idleX",animSettings:{idleX:{sequence:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,2,2,2,2,2,2,3,2,3,2,1,1],frameTime:0.1},moveX:{sequence:[4,5,6,7],frameTime:0.15},stairsX:{sequence:[4,5,6,7],frameTime:0.15},spawnX:{sequence:[19,18,17,16,0],frameTime:0.1},deathX:{sequence:[8,9,10,11,12,13,14,15],frameTime:0.1},eatX:{sequence:[20,21,22,23,20,0],frameTime:0.15}},maxVelGrounded:{x:25,y:25},frictionGrounded:{x:800,y:800},speed:{x:100,y:100},health:2,explodingDamage:false,explodingDeath:false,canJump:false,canClimb:false,canWanderX:false,canWanderY:false,initTypes:function(){this.parent();_ut.addType(ig.EntityExtended,this,'type',"HERBIVORE DAMAGEABLE");}});});

// lib/game/entities/leech-crab-wander.js
ig.baked=true;ig.module('game.entities.leech-crab-wander').requires('game.entities.leech-crab').defines(function(){"use strict";ig.EntityLeechCrabWander=ig.global.EntityLeechCrabWander=ig.EntityLeechCrab.extend({canWanderX:true,moveToWanderSettings:{simple:true,avoidUngrounded:true}});});

// lib/game/abilities/eat.js
ig.baked=true;ig.module('game.abilities.eat').requires('plusplus.core.config','plusplus.abilities.melee','plusplus.helpers.utils').defines(function(){"use strict";var _c=ig.CONFIG;var _ut=ig.utils;ig.AbilityEat=ig.global.AbilityEat=ig.AbilityMelee.extend({cooldownDelay:1,rangeX:_c.CHARACTER.SIZE_EFFECTIVE_X*0.5,activateCastSettings:{animName:'eat',moving:false},initTypes:function(){this.parent();_ut.addType(ig.EntityExtended,this,'typeTargetable',"EDIBLE");},clone:function(c){if(c instanceof ig.AbilityEat!==true){c=new ig.AbilityEat();}
return this.parent(c);}});});

// lib/game/entities/leech-crab-hungry.js
ig.baked=true;ig.module('game.entities.leech-crab-hungry').requires('game.entities.leech-crab-wander','plusplus.helpers.utils','game.abilities.eat').defines(function(){"use strict";var _ut=ig.utils;ig.EntityLeechCrabHungry=ig.global.EntityLeechCrabHungry=ig.EntityLeechCrabWander.extend({preyType:_ut.getType(ig.EntityExtended,"PLANT"),moveToPreySettings:{simple:true,avoidUngrounded:true},initProperties:function(){this.parent();this.abilityEat=new ig.AbilityEat(this,{canFindTarget:false,typeTargetable:"PLANT"});},attack:function(entity){var closeEnough;if(this.grounded){this.abilityEat.setEntityTarget(entity);closeEnough=this.abilityEat.closeEnough();this.abilityEat.execute();}
return closeEnough;}});});

// lib/game/entities/leech-crab-flying.js
ig.baked=true;ig.module('game.entities.leech-crab-flying').requires('plusplus.core.config','game.entities.leech-crab').defines(function(){"use strict";var _c=ig.CONFIG;ig.EntityLeechCrabFlying=ig.global.EntityLeechCrabFlying=ig.EntityLeechCrab.extend({size:{x:24,y:24},offset:{x:4,y:4},animSheet:new ig.AnimationSheet(_c.PATH_TO_MEDIA+'leech_crab_flying.png',32,32),animSettings:{idleX:{sequence:[0,1,2,3,4,5],frameTime:0.05},moveX:{sequence:[0,1,2,3,4,5],frameTime:0.05}},maxVelGrounded:{x:15,y:15},maxVelUngrounded:{x:15,y:15},frictionGrounded:{x:600,y:600},frictionUngrounded:{x:600,y:600},speed:{x:100,y:100},gravityFactor:0,invulnerable:true,preyType:0,canWanderX:true,canWanderY:true,wanderSwitchChance:0.005,wanderSwitchChanceStopped:0.015});});

// lib/game/entities/leech-plant.js
ig.baked=true;ig.module('game.entities.leech-plant').requires('plusplus.core.config','plusplus.abstractities.character','plusplus.helpers.utils').defines(function(){"use strict";var _c=ig.CONFIG;var _ut=ig.utils;ig.EntityLeechPlant=ig.global.EntityLeechPlant=ig.Character.extend({performance:_c.STATIC,size:{x:16,y:16},offset:{x:4,y:4},animSheet:new ig.AnimationSheet(_c.PATH_TO_MEDIA+'leech_plant.png',24,24),animInit:"idleX",animSettings:{idleX:{sequence:[0,5,6,7,8,9],frameTime:1,stop:true},spawnX:{sequence:[1,2,3,4],frameTime:0.1}},animAutomatic:false,health:6,damageSettings:{spawnCountMax:3,spawnSettings:{animTileOffset:ig.EntityParticleColor.colorOffsets.GREEN}},deathSettings:{spawnCountMax:5,spawnSettings:{animTileOffset:ig.EntityParticleColor.colorOffsets.GREEN}},initTypes:function(){this.parent();_ut.addType(ig.EntityExtended,this,'type',"EDIBLE PLANT");},receiveDamage:function(amount,from,unblockable){var damaged=this.parent(amount,from,unblockable);if(damaged){var anim=this.anims[this.getDirectionalAnimName("idle")];if(this.currentAnim!==anim){this.currentAnim=anim;}
this.currentAnim.gotoFrame(Math.round((this.currentAnim.sequence.length-1)*(1-this.health/this.healthMax)));}
return damaged;},receiveHealing:function(amount,from){this.parent(amount,from);var anim=this.anims[this.getDirectionalAnimName("idle")];if(this.currentAnim!==anim){this.currentAnim=anim;}
this.currentAnim.gotoFrame(Math.round((this.currentAnim.sequence.length-1)*(1-this.health/this.healthMax)));}});});

// lib/game/entities/spawner-character-libraried.js
ig.baked=true;ig.module('game.entities.spawner-character-libraried').requires('plusplus.abstractities.spawner-character','plusplus.entities.dummy','game.entities.villain','game.entities.villain-working','game.entities.villain-friendly','game.entities.villain-clone','game.entities.leech-crab','game.entities.leech-crab-wander','game.entities.leech-crab-hungry','game.entities.leech-crab-flying','game.entities.leech-plant').defines(function(){"use strict";ig.EntitySpawnerCharacterLibraried=ig.global.EntitySpawnerCharacterLibraried=ig.SpawnerCharacter.extend({});});

// lib/game/entities/leech-crab-flying-predator.js
ig.baked=true;ig.module('game.entities.leech-crab-flying-predator').requires('plusplus.core.config','game.entities.leech-crab-flying').defines(function(){"use strict";var _c=ig.CONFIG;ig.EntityLeechCrabFlyingPredator=ig.global.EntityLeechCrabFlyingPredator=ig.EntityLeechCrabFlying.extend({preyClass:"EntityLeechCrabPrey",moveToPredatorSettings:{searchDistance:_c.CREATURE.REACTION_DISTANCE}});});

// lib/game/entities/leech-crab-prey.js
ig.baked=true;ig.module('game.entities.leech-crab-prey').requires('game.entities.leech-crab-wander','plusplus.core.config').defines(function(){"use strict";var _c=ig.CONFIG;ig.EntityLeechCrabPrey=ig.global.EntityLeechCrabPrey=ig.EntityLeechCrabWander.extend({pathfindingDelay:0.75,pathfindingUpdateDelay:0.75,canClimb:true,maxVelClimbing:{x:25,y:25},predatorClass:"EntityLeechCrabFlyingPredator",moveToPredatorSettings:{avoidUngrounded:true,searchDistance:_c.CREATURE.REACTION_DISTANCE}});});

// lib/game/levels/creatures.js
ig.baked=true;ig.module('game.levels.creatures').requires('impact.image','game.entities.spawner-character-libraried','plusplus.entities.levelchange','plusplus.entities.conversation','game.entities.villain-friendly','plusplus.entities.checkpoint','game.entities.leech-crab-hungry','game.entities.leech-crab','game.entities.leech-crab-wander','game.entities.leech-crab-flying','game.entities.leech-crab-flying-predator','game.entities.leech-crab-prey').defines(function(){LevelCreatures={"entities":[{"type":"EntitySpawnerCharacterLibraried","x":232,"y":160,"settings":{"spawningEntity":"EntityLeechPlant","duration":-1,"respawnDelay":8,"activated":"true"}},{"type":"EntityLevelchange","x":32,"y":192,"settings":{"size":{"x":16,"y":32},"levelName":"abilities","playerSpawnerName":"right"}},{"type":"EntitySpawnerCharacterLibraried","x":208,"y":160,"settings":{"spawningEntity":"EntityLeechPlant","duration":-1,"respawnDelay":8,"activated":"true"}},{"type":"EntityLevelchange","x":496,"y":192,"settings":{"size":{"x":16,"y":32},"levelName":"ui","playerSpawnerName":"left"}},{"type":"EntitySpawnerCharacterLibraried","x":256,"y":160,"settings":{"spawningEntity":"EntityLeechPlant","duration":-1,"respawnDelay":8,"activated":"true","size":{"x":16,"y":16}}},{"type":"EntityConversation","x":72,"y":208,"settings":{"steps":{"1":{"name":"villain","text":"this is the colony, only my favorite room!"},"2":{"text":"beep","name":"stu"},"3":{"text":"thats stu, he just sits up there all day","name":"villain"}},"delay":1}},{"type":"EntityVillainFriendly","x":132,"y":200},{"type":"EntityConversation","x":160,"y":32,"settings":{"size":{"x":16,"y":192},"steps":{"1":{"name":"villain","text":"hey chubs! still hungry?"},"2":{"name":"chubs","text":"om nom nom"}},"target":{"1":"villain"}}},{"type":"EntityCheckpoint","x":464,"y":192,"settings":{"size":{"x":16,"y":32},"name":"right"}},{"type":"EntityCheckpoint","x":64,"y":192,"settings":{"size":{"x":16,"y":32},"name":"left"}},{"type":"EntityConversation","x":288,"y":32,"settings":{"size":{"x":16,"y":192},"steps":{"1":{"name":"villain","text":"have you seen bizz?"},"2":{"name":"bizz","text":"bizzznizzzz"}},"lockingPlayer":"true"}},{"type":"EntityConversation","x":384,"y":32,"settings":{"size":{"x":16,"y":192},"steps":{"1":{"name":"jobo","text":"meeeeep"},"2":{"name":"villain","text":"bobo, the flying one, chases jobo in circles all day"},"3":{"text":"we've learned that flee pathfinding is more expensive than normal pathfinding","name":"villain"},"4":{"text":"but wandering is cheap!","name":"villain"},"5":{"name":"villain","text":"and when you need to fine tune the paths, we've got pathfinding maps"}},"lockingPlayer":"true","autoAdvance":"false"}},{"type":"EntityLeechCrabHungry","x":168,"y":168,"settings":{"name":"chubs"}},{"type":"EntityLeechCrab","x":100,"y":168,"settings":{"flip":{"x":"true"},"name":"stu"}},{"type":"EntityLeechCrabWander","x":236,"y":216},{"type":"EntityLeechCrabFlying","x":208,"y":68,"settings":{"name":"bizz"}},{"type":"EntityLeechCrabFlyingPredator","x":424,"y":52},{"type":"EntityLeechCrabPrey","x":380,"y":120,"settings":{"name":"jobo"}}],"layer":[{"name":"collision","width":34,"height":16,"linkWithCollision":false,"visible":1,"tilesetName":"","repeat":false,"preRender":false,"distance":1,"tilesize":16,"foreground":false,"data":[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0],[0,0,0,0,1,36,37,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,14,15,1,0,0,0,0],[0,0,0,1,35,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,13,1,0,0,0],[0,0,1,35,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,13,1,0,0],[0,1,9,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,48,48,12,12,12,48,48,0,0,0,8,1,0],[0,1,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,49,49,0,0,0,49,49,0,0,0,19,1,0],[0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,49,49,0,0,0,49,49,0,0,0,0,1,0],[0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,12,12,12,12,12,12,12,0,0,0,0,1,0],[0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0],[0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0],[0,1,12,12,0,0,12,12,0,0,48,48,12,12,12,12,12,12,48,48,0,0,12,12,12,12,12,12,0,0,12,12,1,0],[0,1,0,0,0,0,0,0,0,0,49,49,0,0,0,0,0,0,49,49,0,0,0,0,0,0,0,0,0,0,0,0,1,0],[0,1,0,0,0,0,0,0,0,0,49,49,0,0,0,0,0,0,49,49,0,0,0,0,0,0,0,0,0,0,0,0,1,0],[0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]]},{"name":"walls","width":34,"height":16,"linkWithCollision":false,"visible":1,"tilesetName":"media/tileset_walls.png","repeat":false,"preRender":false,"distance":"1","tilesize":16,"foreground":false,"data":[[0,0,0,0,0,0,0,33,31,30,31,32,33,29,30,31,32,33,29,29,30,31,32,33,31,32,31,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,89,90,91,92,89,90,89,90,89,89,89,90,93,89,90,89,94,90,89,90,0,0,0,0,0,0,0],[0,0,0,0,0,145,146,147,145,146,147,145,146,147,145,146,147,145,146,147,145,146,147,145,146,147,145,146,147,0,0,0,0,0],[0,0,0,0,147,145,146,147,145,146,147,145,146,147,145,146,147,145,146,147,145,146,147,145,146,147,145,146,147,145,0,0,0,0],[0,0,0,158,159,157,158,159,157,158,159,157,158,159,157,158,159,157,158,159,157,158,159,157,158,159,157,158,159,157,158,0,0,0],[0,0,169,170,171,157,146,147,169,170,171,157,146,147,169,170,171,145,146,147,169,125,126,84,78,80,125,126,171,145,146,147,0,0],[0,0,145,146,147,145,146,159,157,146,147,145,146,171,157,146,147,145,146,171,145,137,138,157,158,159,137,138,147,145,146,159,0,0],[5,65,157,158,159,157,158,171,145,146,159,157,146,147,145,146,159,157,158,171,157,137,138,169,170,171,137,138,159,157,158,171,53,21],[8,65,169,170,171,157,158,159,157,158,171,145,146,171,157,158,171,157,158,159,169,78,81,78,78,78,78,78,171,157,146,159,53,19],[8,65,157,158,159,157,170,171,157,158,159,157,158,171,169,170,171,157,170,171,157,158,159,157,158,171,145,146,159,145,146,171,53,19],[6,65,169,170,171,145,146,147,169,170,171,145,146,147,145,146,171,157,146,147,145,146,171,157,158,147,157,158,171,157,158,147,53,17],[5,65,145,146,147,145,146,147,145,146,125,126,78,81,78,83,84,78,125,126,157,158,147,145,146,147,145,146,147,145,146,147,53,17],[7,65,157,158,159,157,158,159,157,158,137,138,158,159,157,158,159,157,137,138,157,158,159,157,146,171,157,158,159,157,158,159,53,19],[5,65,169,170,171,169,170,171,169,170,137,138,170,171,169,170,171,169,137,138,157,170,171,169,170,171,169,170,171,169,170,171,53,21],[7,52,77,79,80,81,77,77,77,77,78,78,78,82,77,77,77,78,77,77,80,77,77,77,78,78,79,82,77,83,82,77,61,17],[25,41,43,43,44,41,42,43,44,45,41,42,43,44,45,42,43,44,45,43,44,45,43,43,43,44,41,42,41,42,43,44,45,38]]},{"name":"slopes","width":34,"height":16,"linkWithCollision":false,"visible":1,"tilesetName":"media/tileset_slopes.png","repeat":false,"preRender":false,"distance":"1","tilesize":16,"foreground":false,"data":[[0,0,0,0,0,128,129,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,126,127,0,0,0,0,0],[0,0,0,0,12,141,142,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,139,140,11,0,0,0,0],[0,0,0,12,25,154,155,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,152,153,24,50,0,0,0],[0,0,51,25,38,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,37,63,11,0,0],[0,51,64,38,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,76,24,11,0],[192,193,194,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,189,190,191],[205,206,207,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,202,203,204],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]]},{"name":"details","width":34,"height":16,"linkWithCollision":false,"visible":1,"tilesetName":"media/tileset_details.png","repeat":false,"preRender":false,"distance":"1","tilesize":16,"foreground":false,"data":[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,58,0,0,0,0,0,0,58,0,0,0,0,0,0,58,0,0,0,0,0,0,58,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,171,172,173,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,171,172,173,0,0,0,188,189,190,0,0,0,171,172,173,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,188,189,190,0,0,0,205,206,207,0,0,0,188,189,190,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,205,206,207,0,0,0,0,0,0,0,0,0,205,206,207,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,174,175,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,176,177,0,0],[0,0,191,192,0,114,115,133,134,0,0,0,0,0,0,0,0,0,0,0,0,114,131,133,132,133,132,133,134,0,193,194,0,0],[0,62,208,209,0,99,101,102,100,0,0,0,178,145,145,145,145,179,0,0,0,99,101,102,101,102,101,102,100,0,210,211,61,0],[0,79,130,0,0,99,118,119,82,0,0,0,0,0,0,0,0,0,0,0,0,99,118,119,118,119,118,119,82,0,0,130,78,0],[0,96,0,0,107,99,135,136,0,0,0,0,0,0,0,0,0,0,0,0,0,99,135,136,135,136,135,136,107,0,0,0,95,0],[0,113,0,0,0,178,145,145,179,0,0,0,0,0,0,0,0,0,0,0,0,178,145,145,145,145,145,145,179,0,0,0,112,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]]},{"name":"shadows","width":34,"height":16,"linkWithCollision":false,"visible":1,"tilesetName":"media/tileset_details.png","repeat":false,"preRender":false,"distance":"1","tilesize":16,"foreground":false,"data":[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,160,0,0,0,0,0,0,160,0,0,0,0,0,0,160,0,0,0,0,0,0,160,0,0,0,0,0,0,0],[0,0,0,0,156,154,155,0,0,0,0,156,154,155,0,0,0,0,156,154,155,0,0,0,0,156,154,155,0,0,0,0,0,0],[0,0,0,156,154,154,154,155,0,0,156,154,154,154,155,0,0,156,154,154,154,0,0,0,0,154,154,154,138,0,0,0,0,0],[0,0,156,154,154,154,154,154,155,156,154,154,154,154,154,155,156,154,154,154,154,0,0,137,137,137,0,0,137,138,0,0,0,0],[0,0,154,154,154,154,154,154,154,154,154,154,154,154,154,154,154,154,154,154,154,0,0,137,137,137,0,0,137,137,138,0,0,0],[0,0,154,154,154,154,154,154,154,154,154,154,154,154,154,154,154,154,154,154,154,0,0,0,0,0,0,0,137,137,137,138,0,0],[0,0,154,154,154,154,154,154,154,154,154,154,154,154,154,154,154,154,154,154,154,155,140,137,137,137,137,137,137,137,137,137,0,0],[0,0,154,154,154,154,154,154,154,154,154,154,154,154,154,154,154,154,154,154,154,154,155,140,137,137,137,137,137,137,137,137,0,0],[0,0,154,154,154,154,0,0,154,159,0,0,0,0,0,0,0,0,0,0,157,154,0,0,140,137,137,137,137,137,137,137,0,0],[0,0,154,154,154,154,0,0,159,139,0,0,137,137,137,137,137,137,0,0,138,157,0,0,0,140,137,137,137,137,137,137,0,0],[0,0,154,154,154,154,0,0,139,137,0,0,137,137,137,137,137,137,0,0,137,138,0,0,0,0,140,137,137,137,137,137,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]]},{"name":"pathfinding","width":34,"height":16,"linkWithCollision":false,"visible":1,"tilesetName":"media/pathfindingtiles_plusplus_16.png","repeat":false,"preRender":false,"distance":"1","tilesize":16,"foreground":false,"data":[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]]}]};LevelCreaturesResources=[new ig.Image('media/tileset_walls.png'),new ig.Image('media/tileset_slopes.png'),new ig.Image('media/tileset_details.png'),new ig.Image('media/tileset_details.png'),new ig.Image('media/pathfindingtiles_plusplus_16.png')];});

// lib/plusplus/entities/trigger-kill.js
ig.baked=true;ig.module('plusplus.entities.trigger-kill').requires('plusplus.entities.trigger').defines(function(){"use strict";ig.EntityTriggerKill=ig.global.EntityTriggerKill=ig.EntityTrigger.extend({_wmBoxColor:'rgba( 200, 0, 150, 0.7 )',silently:false,handleTargets:function(entity,needsActivation){if(needsActivation!==false){this.activate(entity);}
for(var i=0,il=this.targetSequence.length;i<il;i++){this.targetSequence[i].kill(this.silently);}}});});

// lib/plusplus/entities/particle-debris.js
ig.baked=true;ig.module('plusplus.entities.particle-debris').requires('plusplus.core.config','plusplus.abstractities.particle','plusplus.helpers.utilsvector2').defines(function(){"use strict";var _c=ig.CONFIG;var _utv2=ig.utilsvector2;ig.EntityParticleDebris=ig.global.EntityParticleDebris=ig.Particle.extend({size:_utv2.vector(4,4),animSheet:new ig.AnimationSheet(_c.PATH_TO_MEDIA+'debris.png',4,4),animInit:'moveX',animSettings:{moveX:{sequence:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14],frameTime:3}},animAutomatic:false,vel:_utv2.vector(60,10),friction:_utv2.vector(100,100),lifeDuration:3,ready:function(){this.parent();if(this.currentAnim){this.currentAnim.gotoRandomFrame();}}});});

// lib/game/entities/spawner-libraried.js
ig.baked=true;ig.module('game.entities.spawner-libraried').requires('plusplus.abstractities.spawner','plusplus.entities.particle-color','plusplus.entities.particle-debris','plusplus.entities.effect-electricity').defines(function(){"use strict";ig.EntitySpawnerLibraried=ig.global.EntitySpawnerLibraried=ig.Spawner.extend({});});

// lib/game/levels/ui.js
ig.baked=true;ig.module('game.levels.ui').requires('impact.image','plusplus.entities.trigger-kill','plusplus.entities.conversation','plusplus.entities.levelchange','plusplus.entities.checkpoint','plusplus.entities.trigger','game.entities.spawner-libraried','game.entities.villain-working','plusplus.entities.pain','plusplus.entities.ability-enable','game.entities.villain-friendly').defines(function(){LevelUi={"entities":[{"type":"EntityTriggerKill","x":320,"y":144,"settings":{"size":{"x":16,"y":80},"target":{"1":"electricSpawner","2":"electricPain"}}},{"type":"EntityConversation","x":192,"y":144,"settings":{"size":{"x":16,"y":80},"autoAdvance":"false","steps":{"1":{"name":"villainA","text":"I've managed to hook into your health status"},"2":{"name":"villainA","text":"and you should see a red bar in the top left"},"3":{"name":"villainA","text":"lets make sure it works... run through the exposed electricity please"}},"target":{"1":"player"},"pausing":"true"}},{"type":"EntityLevelchange","x":720,"y":192,"settings":{"size":{"x":16,"y":32},"levelName":"particles","playerSpawnerName":"left"}},{"type":"EntityCheckpoint","x":688,"y":192,"settings":{"size":{"x":16,"y":32},"name":"right"}},{"type":"EntityTrigger","x":192,"y":156,"settings":{"size":{"x":16,"y":68},"target":{"1":"electricSpawner"},"delay":0.1}},{"type":"EntitySpawnerLibraried","x":256,"y":100,"settings":{"size":{"x":16,"y":16},"spawningEntity":"EntityEffectElectricity","spawnTarget":{"1":"electricPain"},"spawnCountMax":4,"spawnDelay":0.25,"duration":-1,"name":"electricSpawner"}},{"type":"EntityVillainWorking","x":100,"y":194,"settings":{"name":"villainA"}},{"type":"EntityConversation","x":124,"y":144,"settings":{"size":{"x":16,"y":80},"autoAdvance":"false","steps":{"1":{"name":"villainA","text":"lets boot up your heads up display, or hud, with some ui elements..."},"2":{"name":"villainA","text":"keep in mind that ui elements are intended to be simple!"}},"pausing":"true","participate":{"1":"player"}}},{"type":"EntityConversation","x":124,"y":160,"settings":{"size":{"x":16,"y":64},"autoAdvance":"false","steps":{"1":{"name":"villainA","text":"alright, you should have a pause toggle button in the top right"},"2":{"name":"villainA","text":"tap it to stop and start time!"}},"delay":0.25,"pausing":"true","target":{"1":"player"}}},{"type":"EntityPain","x":224,"y":144,"settings":{"size":{"x":80,"y":80},"damage":2,"name":"electricPain"}},{"type":"EntityAbilityEnable","x":416,"y":32,"settings":{"size":{"x":16,"y":192},"abilityName":"grenadeLauncher","suicidal":"false"}},{"type":"EntityLevelchange","x":32,"y":192,"settings":{"size":{"x":16,"y":32},"levelName":"creatures","playerSpawnerName":"right"}},{"type":"EntityCheckpoint","x":64,"y":192,"settings":{"size":{"x":16,"y":32},"name":"left"}},{"type":"EntityAbilityEnable","x":336,"y":144,"settings":{"size":{"x":16,"y":80},"abilityName":"grenadeLauncher","abilityEnabling":"false","suicidal":"false"}},{"type":"EntityAbilityEnable","x":496,"y":144,"settings":{"size":{"x":16,"y":80},"abilityName":"grenadeLauncher","abilityEnabling":"false","suicidal":"false"}},{"type":"EntityConversation","x":416,"y":124,"settings":{"size":{"x":16,"y":100},"autoAdvance":"false","steps":{"1":{"name":"villainB","text":"you've probably noticed you can regenerate"},"2":{"name":"villainB","text":"you can easily toggle regen for health or energy and set the delay and amount per tick"},"3":{"text":"I'm monitoring your energy levels, so you should see a blue bar in the top left of your screen","name":"villainB"},"4":{"text":"throw some grenades around this room to test your energy!","name":"villainB"}},"target":{"1":"player"},"lockingPlayer":"true"}},{"type":"EntityVillainFriendly","x":452,"y":200,"settings":{"name":"villainB","flip":{"x":"true"}}},{"type":"EntityVillainWorking","x":616,"y":80,"settings":{"flip":{"x":"true"},"name":"villainTracked"}},{"type":"EntityConversation","x":608,"y":120,"settings":{"size":{"x":32,"y":104},"autoAdvance":"false","steps":{"1":{"name":"villainTracked","text":"just in case you lose track of where I went"},"2":{"name":"villainTracked","text":"I've added a tracker to the top right of your screen"},"3":{"name":"villainTracked","text":"tap it and it'll show you how to get to me!"}},"target":{"1":"player"},"lockingPlayer":"true"}}],"layer":[{"name":"collision","width":48,"height":16,"linkWithCollision":false,"visible":1,"tilesetName":"","repeat":false,"preRender":false,"distance":1,"tilesize":16,"foreground":false,"data":[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,0,1,0,0,0,0,0,0,0,0,1,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,0,1,0,0,0,0,0,0,0,0,1,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,0,1,0,0,0,0,0,0,0,0,1,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,0,1,0,0,0,0,0,0,0,0,1,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,0,1,0,0,0,0,0,0,0,0,1,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,0,1,12,12,12,48,48,12,12,12,1,0,0,0,0],[0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,1,1,1,1,0,0,0,49,49,0,0,0,1,1,1,1,0],[0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,49,49,0,0,0,0,0,0,1,0],[0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,49,49,0,0,0,0,0,0,1,0],[0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,49,49,0,0,0,0,0,0,1,0],[0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,49,49,0,0,0,0,0,0,1,0],[0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,49,49,0,0,0,0,0,0,1,0],[0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]]},{"name":"walls","width":48,"height":16,"linkWithCollision":false,"visible":1,"tilesetName":"media/tileset_walls.png","repeat":false,"preRender":false,"distance":"1","tilesize":16,"foreground":false,"data":[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,29,30,32,29,31,30,30,32,31,33,31,13,1,29,30,32,29,29,30,32,29,31,32,13,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,7,86,89,90,91,89,89,93,94,89,89,73,18,7,85,89,90,92,89,89,90,89,91,73,20,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8,66,145,146,147,145,146,147,145,146,147,53,20,5,66,184,185,184,185,184,185,184,185,53,20,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,5,67,157,158,159,157,158,159,145,146,147,54,19,6,66,172,173,172,173,172,173,172,173,57,19,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,7,66,169,170,171,169,170,171,157,158,159,53,18,5,66,184,185,184,185,184,185,184,185,53,18,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,9,66,145,146,147,145,146,147,157,146,147,57,17,8,66,172,173,172,173,172,173,172,173,53,17,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,6,65,157,158,159,157,158,159,157,158,159,58,21,7,65,184,185,184,185,184,185,184,185,54,21,0,0,0],[1,29,29,31,32,33,29,30,32,29,31,29,29,33,30,30,32,31,33,31,3,68,157,170,171,169,170,171,169,170,171,53,15,3,65,77,77,80,125,126,77,77,79,53,15,32,32,13],[9,85,89,89,90,89,92,89,89,90,90,89,89,89,90,95,90,96,89,90,90,134,145,146,147,157,146,147,145,146,147,121,90,89,133,184,185,184,137,138,185,184,185,122,90,89,73,19],[5,66,173,172,173,172,173,172,173,172,173,148,149,150,173,172,173,172,173,148,149,150,145,146,147,157,158,147,157,158,159,148,149,150,173,172,173,172,137,138,173,172,173,172,173,172,54,18],[7,67,185,184,185,184,185,184,185,184,185,160,161,162,185,184,185,184,185,160,161,162,157,158,159,157,146,159,169,170,171,160,161,162,185,184,185,184,137,138,185,184,185,184,185,184,53,20],[8,66,173,172,173,172,173,172,173,172,173,148,149,150,173,172,173,172,173,148,149,150,145,146,147,145,146,147,145,146,147,148,149,150,173,172,173,172,137,138,173,172,173,172,173,172,53,19],[6,66,185,184,185,184,185,184,185,184,185,160,161,162,185,184,185,184,185,160,161,162,157,158,171,157,158,159,145,146,147,160,161,162,185,184,185,184,137,138,185,184,185,184,185,184,54,18],[5,65,173,172,173,172,173,172,173,172,173,148,149,150,173,172,173,172,173,148,149,150,169,170,147,169,170,171,157,158,159,148,149,150,173,172,173,172,137,138,173,172,173,172,173,172,53,17],[7,49,77,78,79,80,81,77,77,77,77,77,77,78,78,79,82,83,84,77,77,77,78,78,77,77,77,77,77,77,78,77,77,79,77,77,77,81,82,77,77,78,77,77,78,78,64,21],[25,41,45,43,44,41,41,42,43,44,43,41,45,43,44,41,41,43,43,44,41,45,43,44,41,41,42,43,44,42,41,45,43,44,41,41,42,41,45,43,44,41,41,43,43,44,43,37]]},{"name":"details","width":48,"height":16,"linkWithCollision":false,"visible":1,"tilesetName":"media/tileset_details.png","repeat":false,"preRender":false,"distance":"1","tilesize":16,"foreground":false,"data":[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,55,56,57,52,53,54,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,120,121,0,0,0,0,0,0,0,0,0,0,0,72,73,74,69,70,71,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,58,0,0,0,0,0,0,0,0,0,12,13,14,15,16,17,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,29,30,31,32,33,34,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,120,121,0,0,0,0,226,0,0,0,0,0,0,0,0,227,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,91,91,91,91,91,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,91,91,91,91,91,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,62,0,0,0,0,0,0,0,0,0,0,0,0,91,91,91,91,91,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,61,0],[0,79,0,0,46,47,48,49,50,51,0,0,0,0,91,91,91,91,91,0,0,0,0,0,0,0,97,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,78,0],[0,96,0,0,63,64,65,66,67,68,0,0,0,0,91,91,91,91,91,0,0,0,0,0,0,0,109,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,95,0],[0,113,0,0,0,0,0,83,84,85,0,0,0,0,0,0,0,0,0,0,0,0,144,145,145,145,145,145,145,145,161,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,112,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]]},{"name":"shadows","width":48,"height":16,"linkWithCollision":false,"visible":1,"tilesetName":"media/tileset_details.png","repeat":false,"preRender":false,"distance":"1","tilesize":16,"foreground":false,"data":[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,137,142,0,0,0,0,0,140,137,0,0,0,0,142,0,0,0,0,0,0,140,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,142,0,0,0,0,0,0,0,140,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,160,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,156,154,155,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,156,154,154,154,155,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,156,154,154,154,154,154,155,0,0,0,0,0,137,137,137,0,0,137,137,137,0,0,0,0,0],[0,0,0,0,0,0,0,0,140,137,137,137,0,0,0,0,0,0,0,0,0,0,156,154,154,154,154,154,154,154,155,0,0,137,137,0,140,137,0,0,137,142,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,140,137,137,0,0,0,0,0,0,0,0,0,0,154,154,154,154,154,154,154,154,154,0,0,137,137,0,0,137,0,0,137,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,137,137,0,0,0,0,0,0,0,0,0,156,154,154,154,154,154,154,154,154,154,155,0,137,137,0,0,137,0,0,137,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,137,137,0,0,0,0,0,0,0,0,0,154,154,154,154,154,154,154,154,154,154,154,0,137,137,0,0,137,0,0,137,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,137,137,0,0,0,0,0,0,0,0,0,154,154,154,154,154,154,154,154,154,154,154,0,137,137,0,0,137,0,0,137,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]]}]};LevelUiResources=[new ig.Image('media/tileset_walls.png'),new ig.Image('media/tileset_details.png'),new ig.Image('media/tileset_details.png')];});

// lib/game/entities/particle-color-random.js
ig.baked=true;ig.module('game.entities.particle-color-random').requires('plusplus.entities.particle-color').defines(function(){"use strict";ig.EntityParticleColorRandom=ig.global.EntityParticleColorRandom=ig.EntityParticleColor.extend({reset:function(x,y,settings){this.animTileOffset=ig.EntityParticleColor.colorOffsets.GREEN+Math.round(Math.random()*((ig.EntityParticleColor.colorOffsets.BROWN-1)-ig.EntityParticleColor.colorOffsets.GREEN));this.parent(x,y,settings);}});});

// lib/game/entities/explosion-horizontal.js
ig.baked=true;ig.module('game.entities.explosion-horizontal').requires('plusplus.entities.explosion','game.entities.particle-color-random').defines(function(){"use strict";ig.EntityExplosionHorizontal=ig.global.EntityExplosionHorizontal=ig.EntityExplosion.extend({spawningEntity:ig.EntityParticleColorRandom,spawnCountMax:50,spawnDelay:0.1,duration:-1,spawnSettings:{vel:{x:200,y:0},lifeDuration:3,fadeAfterSpawnDuration:0.5,fadeBeforeDeathDuration:0.5}});});

// lib/game/levels/particles.js
ig.baked=true;ig.module('game.levels.particles').requires('impact.image','game.entities.explosion-horizontal','plusplus.entities.levelchange','plusplus.entities.checkpoint','game.entities.villain-friendly','plusplus.entities.conversation').defines(function(){LevelParticles={"entities":[{"type":"EntityExplosionHorizontal","x":92,"y":8,"settings":{"size":{"x":16,"y":200}}},{"type":"EntityExplosionHorizontal","x":272,"y":8,"settings":{"size":{"x":16,"y":200}}},{"type":"EntityLevelchange","x":304,"y":32,"settings":{"size":{"x":16,"y":96},"levelName":"obstacles","playerSpawnerName":"left"}},{"type":"EntityCheckpoint","x":208,"y":96,"settings":{"size":{"x":16,"y":32},"name":"right"}},{"type":"EntityLevelchange","x":64,"y":32,"settings":{"size":{"x":16,"y":96},"levelName":"ui","playerSpawnerName":"right"}},{"type":"EntityCheckpoint","x":152,"y":96,"settings":{"size":{"x":16,"y":32},"name":"left"}},{"type":"EntityExplosionHorizontal","x":152,"y":8,"settings":{"size":{"x":16,"y":200}}},{"type":"EntityExplosionHorizontal","x":208,"y":8,"settings":{"size":{"x":16,"y":200}}},{"type":"EntityVillainFriendly","x":32,"y":104},{"type":"EntityConversation","x":160,"y":112,"settings":{"steps":{"1":{"name":"villain","text":"we've got all kinds of particles, including fully dynamic and super fast!"},"2":{"name":"villain","text":"with drawing, we can push about ten thousand fast particles on screen at sixty fps with some browsers"},"3":{"name":"villain","text":"on the other hand, we'd recommend no more than five hundred fully dynamic particles at a time"}},"participate":{"1":"player"},"size":{"x":56,"y":16},"autoAdvance":"false","target":{"1":"villain"},"cameraFollows":"false"}},{"type":"EntityExplosionHorizontal","x":240,"y":8,"settings":{"size":{"x":16,"y":200}}},{"type":"EntityExplosionHorizontal","x":124,"y":8,"settings":{"size":{"x":16,"y":200}}},{"type":"EntityExplosionHorizontal","x":180,"y":8,"settings":{"size":{"x":16,"y":200}}}],"layer":[{"name":"collision","width":23,"height":10,"linkWithCollision":false,"visible":1,"tilesetName":"","repeat":false,"preRender":false,"distance":1,"tilesize":16,"foreground":false,"data":[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0],[0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0],[0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0],[0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0],[0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0],[0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0],[0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0],[0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]]},{"name":"details","width":23,"height":10,"linkWithCollision":false,"visible":1,"tilesetName":"media/tileset_details.png","repeat":false,"preRender":false,"distance":"1","tilesize":16,"foreground":false,"data":[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,217,216,216,216,216,216,216,216,216,216,216,216,216,216,216,217,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]]}]};LevelParticlesResources=[new ig.Image('media/tileset_details.png')];});

// lib/plusplus/entities/destructable.js
ig.baked=true;ig.module('plusplus.entities.destructable').requires('plusplus.entities.explosion','plusplus.entities.particle-debris','plusplus.helpers.utilsvector2').defines(function(){"use strict";var _utv2=ig.utilsvector2;ig.EntityDestructable=ig.global.EntityDestructable=ig.EntityExplosion.extend({_wmBoxColor:'rgba( 255, 0, 175, 0.7 )',collides:ig.EntityExtended.COLLIDES.FIXED,spawningEntity:ig.EntityParticleDebris,spawnCountMax:10,spawnSettings:{collisionSticky:false,vel:_utv2.vector(60,60)},activated:false,triggerable:false,activate:function(entity){this.parent(entity);this.kill();},kill:function(silent){if(!this.activated){this.trigger(this);}
else{this.parent(silent);}}});});

// lib/plusplus/entities/destructable-damage.js
ig.baked=true;ig.module('plusplus.entities.destructable-damage').requires('plusplus.entities.destructable','plusplus.helpers.utils').defines(function(){"use strict";var _ut=ig.utils;ig.EntityDestructableDamage=ig.global.EntityDestructableDamage=ig.EntityDestructable.extend({targetable:true,initTypes:function(){this.parent();_ut.addType(ig.EntityExtended,this,'type',"DAMAGEABLE");}});});

// lib/game/entities/particle-debris-door.js
ig.baked=true;ig.module('game.entities.particle-debris-door').requires('plusplus.core.config','plusplus.entities.particle-debris').defines(function(){"use strict";var _c=ig.CONFIG;ig.EntityParticleDebrisDoor=ig.global.EntityParticleDebrisDoor=ig.EntityParticleDebris.extend({size:{x:2,y:2},offset:{x:2,y:2},animSheet:new ig.AnimationSheet(_c.PATH_TO_MEDIA+"door_debris.png",6,6),animSettings:{moveX:{sequence:[0,1,2,3,4,5,6,7,8],frameTime:3}}});});

// lib/game/entities/destructable-door-left.js
ig.baked=true;ig.module('game.entities.destructable-door-left').requires('plusplus.core.config','plusplus.entities.destructable-damage','game.entities.particle-debris-door').defines(function(){"use strict";var _c=ig.CONFIG;ig.EntityDestructableDoorLeft=ig.global.EntityDestructableDoorLeft=ig.EntityDestructableDamage.extend({_wmDrawBox:false,_wmScalable:false,frozen:false,size:{x:16,y:56},animSheet:new ig.AnimationSheet(_c.PATH_TO_MEDIA+"door_left.png",16,56),animInit:'brokenX',animSettings:{brokenX:{frameTime:1,sequence:[5]}},spawningEntity:ig.EntityParticleDebrisDoor,spawnSettings:{vel:{x:120,y:120}}});});

// lib/plusplus/entities/destructable-collide.js
ig.baked=true;ig.module('plusplus.entities.destructable-collide').requires('plusplus.entities.destructable-damage').defines(function(){"use strict";ig.EntityDestructableCollide=ig.global.EntityDestructableCollide=ig.EntityDestructableDamage.extend({triggerable:true});});

// lib/game/entities/particle-debris-grate.js
ig.baked=true;ig.module('game.entities.particle-debris-grate').requires('plusplus.core.config','plusplus.entities.particle-debris').defines(function(){"use strict";var _c=ig.CONFIG;ig.EntityParticleDebrisGrate=ig.global.EntityParticleDebrisGrate=ig.EntityParticleDebris.extend({size:{x:2,y:2},offset:{x:2,y:2},animSheet:new ig.AnimationSheet(_c.PATH_TO_MEDIA+"grate_debris.png",4,4),animSettings:{moveX:{sequence:[0,1,2,3,4,5,6,7,8],frameTime:3}}});});

// lib/game/entities/destructable-grate.js
ig.baked=true;ig.module('game.entities.destructable-grate').requires('plusplus.core.config','plusplus.helpers.utilsvector2','plusplus.entities.destructable-collide','game.entities.particle-debris-grate').defines(function(){"use strict";var _c=ig.CONFIG;var _utv2=ig.utilsvector2;ig.EntityDestructableGrate=ig.global.EntityDestructableGrate=ig.EntityDestructableCollide.extend({_wmDrawBox:false,_wmScalable:false,frozen:false,size:_utv2.vector(48,16),offset:_utv2.vector(8,0),animSheet:new ig.AnimationSheet(_c.PATH_TO_MEDIA+"grate.png",64,16),animInit:'idleX',animSettings:{idleX:{frameTime:1,sequence:[0]}},spawningEntity:ig.EntityParticleDebrisGrate,spawnSettings:{vel:_utv2.vector(60,200)},delay:0.25});});

// lib/plusplus/entities/switch.js
ig.baked=true;ig.module('plusplus.entities.switch').requires('plusplus.entities.trigger-controller','plusplus.helpers.utils').defines(function(){var _ut=ig.utils;ig.EntitySwitch=ig.global.EntitySwitch=ig.EntityTriggerController.extend({_wmBoxColor:'rgba( 150, 0, 255, 0.7 )',triggerable:true,broken:false,autoBreak:false,autoToggle:true,initTypes:function(){this.parent();_ut.addType(ig.EntityExtended,this,'type',"SWITCH");_ut.addType(ig.EntityExtended,this,'checkAgainst',"CHARACTER");},spawn:function(){this.parent();if(this.broken){this.malfunction();}},activate:function(entity){if(this.canOpen(entity)){this.open();this.parent(entity);}},deactivate:function(entity){if(this.canClose(entity)){this.close();this.parent(entity);}},canOpen:function(entity){return!this.activated&&!this.broken;},canClose:function(entity){return this.activated&&!this.checking&&!this.broken;},open:function(){this.animOverride(this.getDirectionalAnimName("open"),{lock:true});if(this.autoBreak){this.malfunction();}},close:function(){this.animOverride(this.getDirectionalAnimName("close"));if(this.autoBreak){this.malfunction();}},malfunction:function(){this.broken=true;this.animOverride(this.getDirectionalAnimName("broken"),{lock:true});},fix:function(){this.broken=false;var animName=this.getDirectionalAnimName("broken");if(this.anims[animName]&&this.currentAnim===this.anims[animName]){this.animRelease();}}});});

// lib/plusplus/abstractities/door.js
ig.baked=true;ig.module('plusplus.abstractities.door').requires('plusplus.entities.switch','plusplus.helpers.utils').defines(function(){var _ut=ig.utils;ig.Door=ig.EntitySwitch.extend({_wmDrawBox:false,_wmScalable:false,collides:ig.EntityExtended.COLLIDES.FIXED,collidesChanges:true,frozen:false,locked:false,autoLock:false,initTypes:function(){this.parent();_ut.addType(ig.EntityExtended,this,'type',"DOOR");_ut.addType(ig.EntityExtended,this,'checkAgainst',"CHARACTER");},spawn:function(){this.parent();if(this.locked){this.lock();}},canOpen:function(entity){return this.parent(entity)&&!this.locked&&(!this.oneWay||(entity&&!entity.getIsCollidingWithOneWay(this)));},open:function(){this.parent();this.collides=ig.EntityExtended.COLLIDES.NEVER;},close:function(){this.parent();this.collides=ig.EntityExtended.COLLIDES.FIXED;if(this.autoLock){this.lock();}},lock:function(){this.locked=true;this.collides=ig.EntityExtended.COLLIDES.FIXED;this.animOverride(this.getDirectionalAnimName("lock"),{lock:true});},unlock:function(){this.locked=false;var animName=this.getDirectionalAnimName("lock");if(this.anims[animName]&&this.currentAnim===this.anims[animName]){this.animRelease();}}});});

// lib/plusplus/abstractities/door-usable.js
ig.baked=true;ig.module('plusplus.abstractities.door-usable').requires('plusplus.core.config','plusplus.abstractities.door','plusplus.helpers.utils').defines(function(){var _c=ig.CONFIG;var _ut=ig.utils;ig.DoorUsable=ig.Door.extend({triggerable:false,targetable:true,rangeInteractableX:_c.CHARACTER.SIZE_EFFECTIVE_X,rangeInteractableY:_c.CHARACTER.SIZE_EFFECTIVE_Y,autoToggle:false,initTypes:function(){this.parent();_ut.addType(ig.EntityExtended,this,'type',"INTERACTIVE");}});});

// lib/game/entities/door-usable-right.js
ig.baked=true;ig.module('game.entities.door-usable-right').requires('plusplus.core.config','plusplus.abstractities.door-usable').defines(function(){"use strict";var _c=ig.CONFIG;ig.EntityDoorUsableRight=ig.global.EntityDoorUsableRight=ig.DoorUsable.extend({size:{x:16,y:56},animSheet:new ig.AnimationSheet(_c.PATH_TO_MEDIA+"door_right.png",16,56),animInit:'idleX',animSettings:{idleX:{frameTime:1,sequence:[0]},lockX:{frameTime:1,sequence:[1]},openX:{frameTime:0.05,sequence:[2,3,4]},closeX:{frameTime:0.15,sequence:[4,3,2]},brokenX:{frameTime:1,sequence:[5]}}});});

// lib/game/entities/door-right.js
ig.baked=true;ig.module('game.entities.door-right').requires('plusplus.core.config','plusplus.abstractities.door').defines(function(){"use strict";var _c=ig.CONFIG;ig.EntityDoorRight=ig.global.EntityDoorRight=ig.Door.extend({size:{x:16,y:56},animSheet:new ig.AnimationSheet(_c.PATH_TO_MEDIA+"door_right.png",16,56),animInit:'idleX',animSettings:{idleX:{frameTime:1,sequence:[0]},lockX:{frameTime:1,sequence:[1]},openX:{frameTime:0.05,sequence:[2,3,4]},closeX:{frameTime:0.15,sequence:[4,3,2]},brokenX:{frameTime:1,sequence:[5]}}});});

// lib/plusplus/entities/lava.js
ig.baked=true;ig.module('plusplus.entities.lava').requires('plusplus.core.config','plusplus.entities.pain-instagib').defines(function(){"use strict";var _c=ig.CONFIG;ig.EntityLava=ig.global.EntityLava=ig.EntityPainInstagib.extend({_wmDrawBox:false,frozen:false,textured:true,animSheet:new ig.AnimationSheet(_c.PATH_TO_MEDIA+'texture_lava.png',16,16),animSettings:true,animFrameTime:0.25,animSequenceCount:2,animationTypes:['SOLID','SURFACE','TOPRIGHT','TOPRIGHTROUND','TOPLEFT','TOPLEFTROUND','BOTTOMRIGHT','BOTTOMRIGHTROUND','BOTTOMLEFT','BOTTOMLEFTROUND']});});

// lib/plusplus/entities/slime.js
ig.baked=true;ig.module('plusplus.entities.slime').requires('plusplus.core.config','plusplus.entities.lava').defines(function(){var _c=ig.CONFIG;ig.EntitySlime=ig.global.EntitySlime=ig.EntityLava.extend({animSheet:new ig.AnimationSheet(_c.PATH_TO_MEDIA+'texture_slime.png',16,16)});});

// lib/plusplus/abstractities/door-triggered.js
ig.baked=true;ig.module('plusplus.abstractities.door-triggered').requires('plusplus.abstractities.door').defines(function(){ig.DoorTriggered=ig.Door.extend({triggerable:false,targetable:false,autoToggle:false});});

// lib/game/entities/door-triggered-left.js
ig.baked=true;ig.module('game.entities.door-triggered-left').requires('plusplus.core.config','plusplus.abstractities.door-triggered').defines(function(){"use strict";var _c=ig.CONFIG;ig.EntityDoorTriggeredLeft=ig.global.EntityDoorTriggeredLeft=ig.DoorTriggered.extend({size:{x:16,y:56},animSheet:new ig.AnimationSheet(_c.PATH_TO_MEDIA+"door_left.png",16,56),animInit:'idleX',animSettings:{idleX:{frameTime:1,sequence:[0]},lockX:{frameTime:1,sequence:[1]},openX:{frameTime:0.05,sequence:[2,3,4]},closeX:{frameTime:0.15,sequence:[4,3,2]},brokenX:{frameTime:1,sequence:[5]}}});});

// lib/game/levels/obstacles.js
ig.baked=true;ig.module('game.levels.obstacles').requires('impact.image','game.entities.destructable-door-left','game.entities.destructable-grate','plusplus.entities.checkpoint','plusplus.entities.levelchange','game.entities.door-usable-right','plusplus.entities.switch','plusplus.entities.ability-enable','game.entities.door-right','plusplus.entities.slime','game.entities.door-triggered-left','game.entities.villain-friendly','plusplus.entities.conversation','plusplus.entities.trigger-kill').defines(function(){LevelObstacles={"entities":[{"type":"EntityDestructableDoorLeft","x":384,"y":64},{"type":"EntityDestructableGrate","x":288,"y":112},{"type":"EntityCheckpoint","x":64,"y":80,"settings":{"size":{"x":16,"y":32},"name":"left"}},{"type":"EntityLevelchange","x":32,"y":80,"settings":{"size":{"x":16,"y":32},"levelName":"particles","playerSpawnerName":"right"}},{"type":"EntityLevelchange","x":592,"y":80,"settings":{"size":{"x":16,"y":32},"levelName":"conversations","playerSpawnerName":"left"}},{"type":"EntityDoorUsableRight","x":240,"y":64,"settings":{"name":"interactiveDoor"}},{"type":"EntityDestructableGrate","x":448,"y":112},{"type":"EntitySwitch","x":480,"y":132,"settings":{"size":{"x":16,"y":16},"target":{"1":"doorSwitched","2":"conversationSwitchKiller"},"autoBreak":"true"}},{"type":"EntityCheckpoint","x":560,"y":80,"settings":{"size":{"x":16,"y":32},"name":"right"}},{"type":"EntityAbilityEnable","x":264,"y":32,"settings":{"size":{"x":16,"y":80},"abilityName":"melee","abilityEnabling":"false"}},{"type":"EntityDoorRight","x":176,"y":64},{"type":"EntityAbilityEnable","x":496,"y":32,"settings":{"size":{"x":16,"y":80},"abilityName":"melee","abilityEnabling":"false"}},{"type":"EntitySlime","x":444,"y":176,"settings":{"size":{"x":56,"y":52}}},{"type":"EntitySlime","x":444,"y":160,"settings":{"size":{"x":56,"y":16},"triggerable":"false","animationType":"SURFACE"}},{"type":"EntityDestructableGrate","x":288,"y":156},{"type":"EntityAbilityEnable","x":352,"y":64,"settings":{"size":{"x":80,"y":48},"abilityName":"melee"}},{"type":"EntityDoorTriggeredLeft","x":528,"y":64,"settings":{"name":"doorSwitched"}},{"type":"EntitySlime","x":284,"y":160,"settings":{"size":{"x":56,"y":16},"triggerable":"false","animationType":"SURFACE"}},{"type":"EntityDestructableGrate","x":448,"y":156,"settings":{"triggerable":"false"}},{"type":"EntitySlime","x":284,"y":176,"settings":{"size":{"x":56,"y":52}}},{"type":"EntityVillainFriendly","x":204,"y":88},{"type":"EntityConversation","x":72,"y":96,"settings":{"steps":{"1":{"name":"villain","text":"so..."},"2":{"name":"villain","text":"how do you feel about deadly slime?"}},"delay":1,"target":{"1":"villain"}}},{"type":"EntityConversation","x":304,"y":32,"settings":{"steps":{"1":{"name":"villain","text":"did I mention that these grates can't support us?"}},"size":{"x":16,"y":80},"name":"conversationGrate"}},{"type":"EntityConversation","x":352,"y":72,"settings":{"steps":{"1":{"name":"player","text":"this door looks weak..."}},"size":{"x":80,"y":40},"target":{"1":"conversationGrateKiller"}}},{"type":"EntityConversation","x":512,"y":64,"settings":{"steps":{"1":{"name":"player","text":"there must be a switch around here..."}},"size":{"x":16,"y":48},"name":"conversationSwitch"}},{"type":"EntitySwitch","x":560,"y":84,"settings":{"size":{"x":16,"y":16},"target":{"1":"doorSwitched","2":"conversationSwitchKiller"},"autoBreak":"true"}},{"type":"EntityTriggerKill","x":528,"y":140,"settings":{"name":"conversationSwitchKiller","target":{"1":"conversationSwitch"}}},{"type":"EntityConversation","x":220,"y":64,"settings":{"autoAdvance":"false","steps":{"1":{"name":"villain","text":"the last was automatic, but this one needs a tap to open and close"}},"size":{"x":56,"y":48}}},{"type":"EntityTriggerKill","x":384,"y":144,"settings":{"name":"conversationGrateKiller","size":{"x":16,"y":16},"target":{"1":"conversationGrate"}}}],"layer":[{"name":"collision","width":40,"height":16,"linkWithCollision":false,"visible":1,"tilesetName":"","repeat":false,"preRender":false,"distance":1,"tilesize":16,"foreground":false,"data":[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,1,1,1,1,1,1,1,1,0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0],[0,0,0,1,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,1,0,0,0,1,0,0,0,0,0,0,1,0,0,0,0,0,0],[0,1,1,1,0,0,0,0,0,0,1,1,1,1,1,1,0,0,0,0,0,0,1,1,1,1,1,0,0,0,0,0,0,1,1,1,1,1,1,0],[0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0],[0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0],[0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0],[0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,0,0,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,0,0,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,0,0,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,0,0,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,0,0,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,0,0,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,0,0,0,0,0,1,1,1,1,1,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]]},{"name":"walls","width":40,"height":16,"linkWithCollision":false,"visible":1,"tilesetName":"media/tileset_walls.png","repeat":false,"preRender":false,"distance":"1","tilesize":16,"foreground":false,"data":[[0,0,1,29,29,32,33,30,32,33,30,13,0,0,2,29,32,33,30,29,32,33,30,14,0,2,29,32,33,29,32,33,30,30,13,0,0,0,0,0],[0,0,6,85,89,89,89,89,89,89,74,19,0,0,8,86,89,89,89,89,89,89,73,17,0,6,85,89,89,89,89,89,89,73,17,0,0,0,0,0],[1,31,3,65,152,151,152,152,151,152,53,15,31,29,3,65,181,182,181,181,182,183,53,15,31,3,65,181,181,181,181,182,183,53,15,29,32,33,30,14],[8,86,89,134,154,154,154,154,154,154,121,89,89,89,89,135,181,181,182,181,182,183,121,89,89,89,134,181,181,182,183,181,183,122,89,89,89,89,73,18],[5,65,154,154,155,154,154,154,154,154,154,154,127,128,128,129,183,182,181,181,181,182,183,181,181,181,181,181,182,183,181,182,183,127,128,128,128,129,53,20],[6,65,163,163,163,164,165,165,166,163,163,163,127,128,128,129,181,182,183,181,181,182,181,182,181,183,181,181,181,182,181,182,181,127,128,128,128,129,53,18],[9,65,154,154,154,154,154,154,154,154,154,154,139,140,140,141,181,181,181,182,181,182,181,182,183,181,181,181,181,181,181,182,183,139,142,143,144,141,53,18],[5,49,77,77,77,77,77,77,77,77,77,77,77,77,77,77,77,110,181,182,182,97,77,77,77,77,77,110,181,182,182,99,77,77,77,77,77,77,62,20],[25,41,43,45,42,41,44,41,43,45,41,43,45,42,41,44,27,65,181,181,182,53,39,43,45,42,27,65,181,181,182,53,39,41,43,45,42,41,44,37],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,5,65,181,181,182,53,17,0,0,0,5,65,181,181,182,53,17,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8,65,181,182,181,53,19,0,0,0,8,65,181,182,181,53,19,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8,65,181,182,181,53,18,0,0,0,8,65,181,182,181,53,18,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,5,65,181,181,181,53,20,0,0,0,5,65,181,181,181,53,20,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,6,65,181,181,182,53,18,0,0,0,6,65,181,181,182,53,18,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,9,113,102,102,102,116,18,0,0,0,9,114,102,102,102,115,18,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,26,43,43,45,42,41,38,0,0,0,25,42,41,43,45,41,37,0,0,0,0,0,0,0]]},{"name":"details","width":40,"height":16,"linkWithCollision":false,"visible":1,"tilesetName":"media/tileset_details.png","repeat":false,"preRender":false,"distance":"1","tilesize":16,"foreground":false,"data":[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,105,87,87,86,87,90,0,0,0,0,0,0,105,87,86,87,87,0,0,0,0,0,0,0],[0,0,0,0,0,52,53,56,57,0,0,0,0,0,0,0,0,0,0,0,0,88,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,62,0,0,0,69,70,73,74,0,0,0,0,0,0,0,0,0,0,0,0,105,87,106,0,0,0,0,0,0,0,0,0,0,0,0,0,0,61,0],[0,79,0,0,12,13,14,15,16,17,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,122,130,0,0,78,0],[0,96,0,0,29,30,31,32,33,34,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,122,92,92,123,109,0,0,0,95,0],[0,113,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,109,0,0,0,0,0,0,0,112,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,104,0,0,0,0,0,0,0,0,0,104,0,130,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,89,0,0,0,0,0,0,0,0,0,89,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,88,0,0,0,0,0,0,0,0,0,88,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,88,0,0,0,0,0,0,0,0,0,88,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,88,0,0,0,0,0,0,0,0,0,88,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,88,0,0,0,0,0,0,0,0,0,88,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]]},{"name":"shadows","width":40,"height":16,"linkWithCollision":false,"visible":1,"tilesetName":"media/tileset_details.png","repeat":false,"preRender":false,"distance":"1","tilesize":16,"foreground":false,"data":[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,137,137,137,137,137,137,0,0,0,0,0,154,154,154,154,154,154,154,0,0,0,0,0,154,154,154,154,154,154,0,0,0,0,0,0,0],[0,0,0,0,137,137,137,137,137,137,0,0,0,0,0,154,154,154,154,154,154,154,0,0,0,0,0,154,154,154,154,154,154,0,0,0,0,0,0,0],[0,0,137,137,137,137,137,137,137,137,138,0,0,0,0,157,154,154,154,154,154,154,154,159,0,157,154,154,154,154,154,154,154,159,0,0,139,137,0,0],[0,0,137,137,137,137,137,137,137,137,137,138,0,0,0,0,157,154,154,154,154,154,159,0,0,0,157,154,154,154,154,154,159,0,0,139,137,137,0,0],[0,0,137,137,137,137,137,137,137,137,137,137,138,0,0,0,0,157,154,154,154,159,0,0,0,0,0,157,154,154,154,159,0,0,139,137,137,137,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,154,154,154,0,0,0,0,0,0,0,154,154,154,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,154,154,154,0,0,0,0,0,0,0,154,154,154,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,154,154,154,0,0,0,0,0,0,0,154,154,154,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,154,154,154,0,0,0,0,0,0,0,154,154,154,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,154,154,154,0,0,0,0,0,0,0,154,154,154,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,154,154,154,0,0,0,0,0,0,0,154,154,154,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,154,154,154,0,0,0,0,0,0,0,154,154,154,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]]}]};LevelObstaclesResources=[new ig.Image('media/tileset_walls.png'),new ig.Image('media/tileset_details.png'),new ig.Image('media/tileset_details.png')];});

// lib/plusplus/entities/trigger-function.js
ig.baked=true;ig.module('plusplus.entities.trigger-function').requires('plusplus.entities.trigger').defines(function(){"use strict";ig.EntityTriggerFunction=ig.global.EntityTriggerFunction=ig.EntityTrigger.extend({functionName:'',handleTargets:function(entity,needsActivation){if(needsActivation!==false){this.activate(entity);}
if(this.functionName){for(var i=0,il=this.targetSequence.length;i<il;i++){var target=this.targetSequence[i];if(typeof target[this.functionName]==='function'){target[this.functionName]();}}}}});});

// lib/plusplus/ui/ui-text-box.js
ig.baked=true;ig.module('plusplus.ui.ui-text-box').requires('plusplus.ui.ui-text-bubble').defines(function(){"use strict";ig.UITextBox=ig.global.UITextBox=ig.UITextBubble.extend({cornerRadius:0,triangleLength:0});});

// lib/plusplus/entities/narrative.js
ig.baked=true;ig.module('plusplus.entities.narrative').requires('plusplus.entities.conversation','plusplus.ui.ui-text-box','plusplus.helpers.utilsvector2').defines(function(){var _utv2=ig.utilsvector2;ig.EntityNarrative=ig.global.EntityNarrative=ig.EntityConversation.extend({messageContainerEntity:ig.UITextBox,messageSettings:{posPct:_utv2.vector(0.5,0.1),align:_utv2.vector(0.5,0),linkAlign:_utv2.vector(0.5,0)},messageFollowsSpeaker:false,messageMoveToSettings:{matchPerformance:true,offsetPct:_utv2.vector(0,2)}});});

// lib/game/entities/villain-friendly-unsafe.js
ig.baked=true;ig.module('game.entities.villain-friendly-unsafe').requires('game.entities.villain-friendly').defines(function(){"use strict";ig.EntityVillainFriendlyUnsafe=ig.global.EntityVillainFriendlyUnsafe=ig.EntityVillainFriendly.extend({moveToPreySettings:{simple:true,unsafe:true}});});

// lib/game/levels/conversations.js
ig.baked=true;ig.module('game.levels.conversations').requires('impact.image','plusplus.entities.conversation','plusplus.entities.trigger-property','plusplus.entities.levelchange','plusplus.entities.checkpoint','plusplus.entities.void','plusplus.entities.trigger-function','plusplus.entities.trigger','plusplus.entities.narrative','game.entities.villain-friendly-unsafe').defines(function(){LevelConversations={"entities":[{"type":"EntityConversation","x":72,"y":272,"settings":{"steps":{"1":{"name":"villain","text":"come on!"}},"delay":0.85}},{"type":"EntityTriggerProperty","x":208,"y":268,"settings":{"propertyName":"preyName","activateValue":"landing2","size":{"x":16,"y":80},"target":{"1":"villain"},"name":"setPreyNameLanding2","triggerable":"true"}},{"type":"EntityLevelchange","x":496,"y":80,"settings":{"size":{"x":16,"y":32},"levelName":"spawners","playerSpawnerName":"left"}},{"type":"EntityCheckpoint","x":464,"y":80,"settings":{"size":{"x":16,"y":32},"name":"right"}},{"type":"EntityLevelchange","x":32,"y":272,"settings":{"size":{"x":16,"y":32},"levelName":"obstacles","playerSpawnerName":"right"}},{"type":"EntityConversation","x":72,"y":288,"settings":{"autoAdvance":"false","steps":{"1":{"name":"villain","text":"its a bit of a climb, but I have some awesome experiments in my lab"}},"pausing":"true","delay":0.75,"locking":"true"}},{"type":"EntityVoid","x":352,"y":152,"settings":{"name":"landing2","size":{"x":16,"y":24}}},{"type":"EntityCheckpoint","x":64,"y":272,"settings":{"size":{"x":16,"y":32},"name":"left"}},{"type":"EntityVoid","x":224,"y":216,"settings":{"name":"landing1","size":{"x":16,"y":24}}},{"type":"EntityTriggerFunction","x":296,"y":288,"settings":{"size":{"x":16,"y":16},"target":{"1":"villain"},"functionName":"removePrey","name":"triggerRemovePrey","suicidal":"false","once":"false"}},{"type":"EntityTriggerProperty","x":336,"y":204,"settings":{"propertyName":"preyName","activateValue":"right","size":{"x":16,"y":16},"name":"setPreyNameExit","target":{"1":"villain"}}},{"type":"EntityTrigger","x":304,"y":96,"settings":{"size":{"x":16,"y":80},"target":{"1":"setPreyNameExit","2":"triggerRemovePrey"}}},{"type":"EntityTrigger","x":176,"y":160,"settings":{"size":{"x":16,"y":80},"target":{"1":"setPreyNameLanding2","2":"triggerRemovePrey"}}},{"type":"EntityNarrative","x":252,"y":116,"settings":{"size":{"x":16,"y":96},"steps":{"1":{"text":"as our hero ran down the hallway"},"2":{"text":"she noticed how unsafe the pathfinding of her friend was"},"3":{"text":"and yet, it was so cheap!"}},"pausing":"true","locking":"true"}},{"type":"EntityConversation","x":432,"y":32,"settings":{"steps":{"1":{"name":"villain","text":"boy am I glad we didn't trip!"}},"size":{"x":16,"y":80}}},{"type":"EntityVillainFriendlyUnsafe","x":96,"y":280,"settings":{"preyName":"landing1","canJump":"false"}}],"layer":[{"name":"collision","width":34,"height":21,"linkWithCollision":false,"visible":1,"tilesetName":"","repeat":false,"preRender":false,"distance":1,"tilesize":16,"foreground":false,"data":[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,35,0,0,0,0,0,0,0,1,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,35,0,0,0,0,0,0,0,0,1,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,35,0,0,0,0,0,0,0,0,0,1,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,35,0,0,0,0,0,0,0,0,0,0,1,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,35,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,35,0,0,0,0,0,0,0,0,0,0,2,1,1,1,1,1,1,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,1,35,0,0,0,0,0,0,0,0,0,0,2,1,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,1,1,1,1,1,35,0,0,0,0,0,0,0,0,0,0,2,1,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,1,35,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,1,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,1,35,0,0,0,0,0,0,0,0,0,0,2,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,1,35,0,0,0,0,0,0,0,0,0,0,2,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,1,1,1,1,35,0,0,0,0,0,0,0,0,0,0,2,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,2,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,1,0,0,0,0,0,0,0,0,2,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,1,0,0,0,0,0,0,0,2,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,1,0,0,0,0,0,0,2,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,1,0,0,0,0,0,2,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]]},{"name":"walls","width":34,"height":21,"linkWithCollision":false,"visible":1,"tilesetName":"media/tileset_walls.png","repeat":false,"preRender":false,"distance":"1","tilesize":16,"foreground":false,"data":[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,29,31,29,29,31,33,30,31,13],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,89,92,89,90,89,90,90,76,17],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,128,128,128,128,128,128,128,132,54,20],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,128,128,128,128,128,128,128,128,129,55,19],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,29,31,33,30,0,128,128,128,128,128,128,128,128,131,129,54,18],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,90,90,89,94,128,128,128,128,128,131,128,128,128,128,129,53,18],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,128,128,128,128,128,128,128,128,128,128,128,142,143,144,140,141,54,21],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,128,128,128,128,128,131,128,128,128,128,128,128,78,79,78,82,78,62,18],[0,0,0,0,0,0,0,0,0,31,30,31,32,0,128,128,128,128,128,128,128,128,128,128,128,128,0,44,43,42,41,45,41,37],[0,0,0,0,0,0,0,0,0,89,91,90,89,128,128,128,128,131,128,128,128,128,128,131,128,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,128,128,128,128,128,128,128,128,128,128,128,128,142,144,128,128,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,128,128,128,128,128,128,128,128,128,128,128,128,81,80,78,78,0,0,0,0,0,0,0,0,0,0,0],[1,29,31,33,30,0,128,128,128,131,128,128,128,128,128,128,128,128,0,42,41,45,41,0,0,0,0,0,0,0,0,0,0,0],[5,86,89,90,89,128,128,128,128,128,128,128,131,128,128,128,128,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[7,65,127,128,128,128,128,128,128,128,128,128,142,144,128,128,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[5,65,127,128,128,128,128,131,128,128,128,78,78,82,78,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[6,65,127,131,128,128,128,128,128,128,0,44,43,42,41,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[7,65,130,128,128,128,128,128,128,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[7,65,139,142,143,144,128,128,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[9,49,78,78,78,83,84,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[25,44,43,42,41,45,41,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]]},{"name":"slopes","width":34,"height":21,"linkWithCollision":false,"visible":1,"tilesetName":"media/tileset_slopes.png","repeat":false,"preRender":false,"distance":"1","tilesize":16,"foreground":false,"data":[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,12,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,12,25,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,12,25,38,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,51,25,38,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,12,0,0,0,0,64,38,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,12,25,0,0,0,0,77,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,12,25,38,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,12,25,38,0,0,0,0,0,0,0,0,0,0,13,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,12,0,0,0,0,25,38,0,0,0,0,0,0,0,0,0,0,52,26,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,51,25,0,0,0,0,38,0,0,0,0,0,0,0,0,0,0,52,65,39,0,0,0,0,0,0,0],[0,0,0,0,0,0,12,64,38,0,0,0,0,0,0,0,0,0,0,0,0,0,0,91,65,78,0,0,0,0,0,0,0,0],[0,0,0,0,0,12,25,77,0,0,0,0,0,0,0,0,0,0,13,0,0,0,0,104,78,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,25,38,0,0,0,0,0,0,0,0,0,0,52,26,0,0,0,0,117,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,38,0,0,0,0,0,0,0,0,0,0,52,65,39,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,91,65,78,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,13,0,0,0,0,104,78,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,52,26,0,0,0,0,117,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,52,65,39,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,91,65,78,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,104,78,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,117,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]]},{"name":"details","width":34,"height":21,"linkWithCollision":false,"visible":1,"tilesetName":"media/tileset_details.png","repeat":false,"preRender":false,"distance":"1","tilesize":16,"foreground":false,"data":[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,125,127,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,105,87,86,106,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,171,172,173,120,121,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,188,189,190,0,0,0,61,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,125,127,0,0,0,0,0,0,205,206,207,108,130,0,78,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,88,0,0,0,0,0,0,0,0,0,0,0,0,0,0,95,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,105,86,104,0,0,0,0,0,0,0,0,144,145,145,145,112,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,120,121,88,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,125,127,0,0,0,0,0,0,0,88,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,105,87,86,106,0,0,0,0,0,0,88,107,107,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,108,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,120,121,171,172,173,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,62,0,0,0,188,189,190,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,79,0,130,0,205,206,207,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,96,0,0,0,0,107,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,113,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]]},{"name":"shadows","width":34,"height":21,"linkWithCollision":false,"visible":1,"tilesetName":"media/tileset_details.png","repeat":false,"preRender":false,"distance":"1","tilesize":16,"foreground":false,"data":[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,139,142,0,0,140,137,137,137,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,139,142,0,0,0,0,140,137,137,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,139,142,0,0,0,0,0,0,140,137,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,139,142,0,0,0,0,0,0,0,0,140,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,139,142,0,0,140,142,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,139,142,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,179,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,139,142,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,139,142,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,139,142,0,0,140,142,0,0,0,0,0,107,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,139,142,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,139,142,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,139,142,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,137,137,137,142,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,137,137,142,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,137,142,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,142,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]]}]};LevelConversationsResources=[new ig.Image('media/tileset_walls.png'),new ig.Image('media/tileset_slopes.png'),new ig.Image('media/tileset_details.png'),new ig.Image('media/tileset_details.png')];});

// lib/game/entities/door-left.js
ig.baked=true;ig.module('game.entities.door-left').requires('plusplus.core.config','plusplus.abstractities.door').defines(function(){"use strict";var _c=ig.CONFIG;ig.EntityDoorLeft=ig.global.EntityDoorLeft=ig.Door.extend({size:{x:16,y:56},animSheet:new ig.AnimationSheet(_c.PATH_TO_MEDIA+"door_left.png",16,56),animInit:'idleX',animSettings:{idleX:{frameTime:1,sequence:[0]},lockX:{frameTime:1,sequence:[1]},openX:{frameTime:0.05,sequence:[2,3,4]},closeX:{frameTime:0.15,sequence:[4,3,2]},brokenX:{frameTime:1,sequence:[5]}}});});

// lib/plusplus/entities/event-defense.js
ig.baked=true;ig.module('plusplus.entities.event-defense').requires('plusplus.entities.trigger','plusplus.abstractities.spawner','plusplus.helpers.utils').defines(function(){"use strict";var _ut=ig.utils;ig.EntityEventDefense=ig.global.EntityEventDefense=ig.EntityTrigger.extend({_wmBoxColor:'rgba( 0, 255, 0, 0.7)',defend:{},defendSpawners:[],defendEntities:[],destroy:{},destroySpawners:[],destroyEntities:[],winTarget:{},loseTarget:{},won:false,winUnspawnsDefend:false,loseUnspawnsDefend:true,loseUnspawnsDestroy:true,setup:function(){this.won=false;var name;var entity;this.defendEntities.length=this.defendSpawners.length=0;for(name in this.defend){entity=ig.game.namedEntities[this.defend[name]];if(entity){this.linkDefendEntity(entity);if(entity instanceof ig.EntityTrigger){entity.trigger();}
else{entity.activate();}}}
this.destroyEntities.length=this.destroySpawners.length=0;for(name in this.destroy){entity=ig.game.namedEntities[this.destroy[name]];if(entity){this.linkDestroyEntity(entity);if(entity instanceof ig.EntityTrigger){entity.trigger();}
else{entity.activate();}}}
this.parent();},teardown:function(){var i;var entity;if(this.destroyEntities.length>0){for(i=this.destroyEntities.length-1;i>=0;i--){this.unlinkDestroyEntity(this.destroyEntities[i]);}
this.destroyEntities.length=0;}
if(this.defendEntities.length>0){for(i=this.defendEntities.length-1;i>=0;i--){this.unlinkDefendEntity(this.defendEntities[i]);}
this.defendEntities.length=0;}
if(this.destroySpawners.length>0){for(i=this.destroySpawners.length-1;i>=0;i--){entity=this.destroySpawners[i];this.unlinkDestroyEntity(entity);if(this.won||this.loseUnspawnsDestroy){entity.deactivate();}}
this.destroySpawners.length=0;}
if(this.defendSpawners.length>0){for(i=this.defendSpawners.length-1;i>=0;i--){entity=this.defendSpawners[i];this.unlinkDefendEntity(entity);if((this.winUnspawnsDefend&&this.won)||(this.loseUnspawnsDefend&&!this.won)){entity.deactivate();}}
this.defendSpawners.length=0;}
this.parent();},linkDefendEntity:function(entity){if(entity instanceof ig.Spawner){this._linkEntity(entity,this.defendSpawners,"onSpawned",this.linkDefendEntity);}
else{this._linkEntity(entity,this.defendEntities,"onRemoved",this.updateDefendStatus);}},unlinkDefendEntity:function(entity){if(entity instanceof ig.Spawner){this._unlinkEntity(entity,this.defendSpawners,"onSpawned",this.linkDefendEntity);}
else{this._unlinkEntity(entity,this.defendEntities,"onRemoved",this.updateDefendStatus);}},linkDestroyEntity:function(entity){if(entity instanceof ig.Spawner){this._linkEntity(entity,this.destroySpawners,"onSpawned",this.linkDestroyEntity);}
else{this._linkEntity(entity,this.destroyEntities,"onRemoved",this.updateDestroyStatus);}},unlinkDestroyEntity:function(entity){if(entity instanceof ig.Spawner){this._unlinkEntity(entity,this.destroySpawners,"onSpawned",this.linkDestroyEntity);}
else{this._unlinkEntity(entity,this.destroyEntities,"onRemoved",this.updateDestroyStatus);}},_linkEntity:function(entity,arr,signalName,callback){this._unlinkEntity(entity,arr,signalName,callback);arr.push(entity);entity[signalName].add(callback,this);},_unlinkEntity:function(entity,arr,signalName,callback){_ut.arrayCautiousRemove(arr,entity);entity[signalName].remove(callback,this);},updateDefendStatus:function(entity){this.unlinkDefendEntity(entity);if(this.defendEntities.length===0){for(var i=0,il=this.defendEntities.length;i<il;i++){if(this.defendEntities[i].spawning){return;}}
this.lose();}},updateDestroyStatus:function(entity){this.unlinkDestroyEntity(entity);if(this.destroyEntities.length===0){for(var i=0,il=this.destroySpawners.length;i<il;i++){if(this.destroySpawners[i].spawning){return;}}
this.win();}},lose:function(){this.won=false;for(var name in this.loseTarget){var entity=ig.game.namedEntities[this.loseTarget[name]];if(entity&&!entity._killed){if(!entity.added){entity.activated=true;}
else{if(entity instanceof ig.EntityTrigger){entity.trigger();}
else{entity.activate();}}}}
this.deactivate();},win:function(){this.won=true;for(var name in this.winTarget){var entity=ig.game.namedEntities[this.winTarget[name]];if(entity&&!entity._killed){if(!entity.added){entity.activated=true;}
else{if(entity instanceof ig.EntityTrigger){entity.trigger();}
else{entity.activate();}}}}
this.complete();},complete:function(){if(this.won){this.parent();}}});});

// lib/game/levels/spawners.js
ig.baked=true;ig.module('game.levels.spawners').requires('impact.image','plusplus.entities.conversation','plusplus.entities.levelchange','plusplus.entities.checkpoint','game.entities.door-right','plusplus.entities.trigger-function','game.entities.door-left','plusplus.entities.void','plusplus.entities.event-defense','game.entities.spawner-character-libraried','game.entities.villain-working','plusplus.entities.ability-enable').defines(function(){LevelSpawners={"entities":[{"type":"EntityConversation","x":208,"y":436,"settings":{"name":"explanation","pausing":"true","locking":"true","steps":{"1":{"name":"villain","text":"welcome to the spawning pool!"},"2":{"name":"villain","text":"I've been working on cloning myself..."},"3":{"name":"player","text":"are you sure that's a good idea?"},"4":{"name":"villain","text":"are you kidding? BEHOLD!"}},"autoAdvance":"false","suicidal":"false","autoToggle":"true"}},{"type":"EntityLevelchange","x":32,"y":352,"settings":{"size":{"x":16,"y":32},"levelName":"conversations","playerSpawnerName":"right"}},{"type":"EntityLevelchange","x":496,"y":352,"settings":{"size":{"x":16,"y":32},"levelName":"title","playerSpawnerName":"left"}},{"type":"EntityCheckpoint","x":464,"y":352,"settings":{"size":{"x":16,"y":32},"name":"right"}},{"type":"EntityDoorRight","x":384,"y":336,"settings":{"name":"doorRight"}},{"type":"EntityTriggerFunction","x":308,"y":464,"settings":{"name":"releaselocks","target":{"1":"doorLeft","2":"doorRight"},"suicidal":"false","functionName":"unlock"}},{"type":"EntityDoorLeft","x":144,"y":336,"settings":{"name":"doorLeft"}},{"type":"EntityVoid","x":168,"y":180,"settings":{"size":{"x":16,"y":28},"name":"cloneA"}},{"type":"EntityTriggerFunction","x":208,"y":464,"settings":{"name":"lockdown","target":{"1":"doorLeft","2":"doorRight"},"suicidal":"false","functionName":"lock"}},{"type":"EntityEventDefense","x":188,"y":260,"settings":{"size":{"x":168,"y":20},"target":{"1":"lockdown","2":"explanation","3":"mistake","4":"enableLaserGun"},"defend":{"1":"player"},"destroy":{"1":"clones"},"winTarget":{"1":"releaselocks","2":"victory","3":"disableLaserGun","4":"restart"},"loseTarget":{"1":"releaselocks","2":"disableLaserGun"}}},{"type":"EntityCheckpoint","x":64,"y":352,"settings":{"size":{"x":16,"y":32},"name":"left"}},{"type":"EntitySpawnerCharacterLibraried","x":264,"y":416,"settings":{"size":{"x":16,"y":16},"name":"clones","spawningEntity":"EntityVillainClone","spawnTarget":{"1":"cloneA","2":"cloneB","3":"cloneC","4":"cloneD"},"spawnCountMax":10,"duration":20,"spawnAtRandomTarget":"true","delay":0.5}},{"type":"EntityVoid","x":360,"y":276,"settings":{"size":{"x":16,"y":28},"name":"cloneD"}},{"type":"EntityVoid","x":360,"y":180,"settings":{"size":{"x":16,"y":28},"name":"cloneB"}},{"type":"EntityVoid","x":168,"y":276,"settings":{"size":{"x":16,"y":28},"name":"cloneC"}},{"type":"EntityConversation","x":308,"y":436,"settings":{"name":"mistake","delay":1.25,"pausing":"true","locking":"true","steps":{"1":{"name":"clone","text":"KILL"},"2":{"name":"player","text":"I hate you so much right now"},"3":{"name":"villain","text":"look, you blast them and I'll stop the cloning process!"}},"autoAdvance":"false","suicidal":"false","autoToggle":"true"}},{"type":"EntityVillainWorking","x":264,"y":128},{"type":"EntityAbilityEnable","x":208,"y":492,"settings":{"target":{"1":"player"},"abilityName":"laserGun","name":"enableLaserGun","suicidal":"false","autoToggle":"true"}},{"type":"EntityAbilityEnable","x":308,"y":492,"settings":{"target":{"1":"player"},"abilityName":"laserGun","name":"disableLaserGun","abilityEnabling":"false","suicidal":"false","autoToggle":"true"}},{"type":"EntityConversation","x":376,"y":436,"settings":{"name":"victory","locking":"true","steps":{"1":{"name":"villain","text":"we did it!"},"2":{"name":"villain","text":"...let me just fix that kill bug..."}},"delay":0.5,"autoAdvance":"false","pausing":"true"}},{"type":"EntityLevelchange","x":376,"y":464,"settings":{"size":{"x":16,"y":16},"levelName":"title","delay":0.6,"name":"restart","triggerAfterDelay":"true","clearPersistentPlayer":"true"}}],"layer":[{"name":"collision","width":34,"height":26,"linkWithCollision":false,"visible":1,"tilesetName":"","repeat":false,"preRender":false,"distance":1,"tilesize":16,"foreground":false,"data":[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,1,0,0,0,0,12,48,48,48,48,12,0,0,0,0,1,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,49,49,49,49,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,49,49,49,49,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,1,12,12,12,12,12,48,48,48,48,12,12,12,12,12,1,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,49,49,49,49,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,49,49,49,49,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,49,49,49,49,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,49,49,49,49,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,49,49,49,49,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,1,12,12,12,12,12,48,48,48,48,12,12,12,12,12,1,0,0,0,0,0,0,0,0,0],[0,1,1,1,1,1,1,1,1,1,0,0,0,0,0,49,49,49,49,0,0,0,0,0,1,1,1,1,1,1,1,1,1,0],[0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,49,49,49,49,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0],[0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,49,49,49,49,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0],[0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,49,49,49,49,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0],[0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]]},{"name":"walls","width":34,"height":26,"linkWithCollision":false,"visible":1,"tilesetName":"media/tileset_walls.png","repeat":false,"preRender":false,"distance":"1","tilesize":16,"foreground":false,"data":[[0,0,0,0,0,0,0,0,1,29,31,30,29,31,30,29,31,32,33,31,30,29,31,32,33,13,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,5,86,90,90,94,90,90,89,90,90,90,92,93,90,90,90,73,17,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,7,66,172,173,148,149,150,172,173,172,173,148,149,150,172,173,53,17,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,5,68,184,185,160,161,162,184,185,184,185,160,161,162,184,185,54,18,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,6,65,172,173,148,149,150,172,173,172,173,148,149,150,172,173,53,18,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,7,66,184,185,160,161,162,184,185,184,185,160,161,162,184,185,53,21,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,5,65,172,173,148,149,150,172,173,172,173,148,149,150,172,173,54,19,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,7,66,184,185,160,161,162,184,185,184,185,160,161,162,184,185,53,20,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,5,65,172,173,148,149,150,172,173,172,173,148,149,150,172,173,54,17,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,6,66,184,185,160,161,162,184,185,184,185,160,161,162,184,185,53,17,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,5,65,172,173,148,149,150,156,156,156,156,148,149,150,172,173,58,18,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,7,69,184,185,160,161,162,168,168,168,168,160,161,162,184,185,55,21,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,5,71,172,173,148,149,150,168,168,168,168,148,149,150,172,173,53,18,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,6,65,77,77,77,77,77,156,156,156,156,77,80,77,77,77,53,19,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,7,66,172,173,148,149,150,168,168,168,168,148,149,150,172,173,54,17,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,9,65,184,185,160,161,162,168,168,168,168,160,161,162,184,185,54,18,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,6,68,172,173,148,149,150,168,168,168,168,148,149,150,172,173,53,19,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,7,66,184,185,160,161,162,168,168,168,168,160,161,162,184,185,60,20,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,9,67,172,173,148,149,150,168,168,168,168,148,149,150,172,173,53,18,0,0,0,0,0,0,0,0],[1,29,31,30,29,31,32,33,3,65,77,77,77,83,79,156,156,156,156,77,77,77,77,77,53,15,29,31,30,29,31,32,33,13],[5,86,90,90,90,91,90,90,90,134,176,176,174,176,176,168,168,168,168,176,176,174,176,176,121,90,90,90,90,90,92,90,73,18],[7,65,127,128,128,128,128,128,128,129,188,188,186,188,188,168,168,168,168,188,188,186,188,188,127,128,128,128,128,128,128,129,53,18],[5,65,127,128,128,128,128,128,128,129,177,177,175,177,177,168,168,168,168,177,177,175,177,177,127,128,128,128,128,128,128,129,53,21],[6,65,139,144,128,128,128,128,142,141,189,189,187,189,189,168,168,168,168,189,189,187,189,189,139,144,128,128,128,128,142,141,53,19],[7,50,77,77,77,77,77,82,77,77,77,77,77,77,77,77,82,77,77,79,80,77,77,77,77,77,77,77,81,77,77,77,63,20],[25,41,44,43,43,42,43,44,45,45,41,42,43,44,45,44,41,41,42,43,44,43,41,41,42,43,44,45,41,42,43,44,45,37]]},{"name":"details","width":34,"height":26,"linkWithCollision":false,"visible":1,"tilesetName":"media/tileset_details.png","repeat":false,"preRender":false,"distance":"1","tilesize":16,"foreground":false,"data":[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,55,56,57,52,53,54,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,72,73,74,69,70,71,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,52,53,54,55,56,57,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,69,70,71,72,73,74,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,104,0,0,0,12,13,14,15,16,17,0,0,0,103,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,59,60,0,0,29,30,31,32,33,34,0,0,59,60,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,76,77,0,0,225,0,0,0,0,224,0,0,76,77,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,93,94,0,0,0,0,0,0,0,0,0,0,93,94,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,110,111,107,0,0,0,0,0,0,0,0,0,110,111,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,226,145,145,161,0,0,0,0,0,0,0,0,144,145,145,227,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,104,0,0,0,0,0,0,0,0,0,0,0,0,103,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,59,60,0,0,0,0,0,0,0,0,0,0,59,60,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,76,77,0,0,0,0,0,0,0,0,0,0,76,77,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,93,94,0,0,0,0,0,0,0,0,0,0,93,94,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,110,111,0,0,0,0,0,0,0,0,0,107,110,111,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,226,145,145,161,0,0,0,0,0,0,0,0,144,145,145,227,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,62,0,0,0,0,0,0,0,0,0,0,0,176,177,0,0,0,0,174,175,0,0,0,0,0,0,0,0,0,0,0,61,0],[0,79,0,0,0,0,108,0,130,0,0,0,0,193,194,0,0,0,0,191,192,0,0,0,0,130,0,108,0,0,0,0,78,0],[0,96,0,0,0,0,0,0,0,0,0,0,0,210,211,0,0,0,0,208,209,0,0,0,0,0,0,0,0,0,0,0,95,0],[0,113,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,112,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]]},{"name":"shadows","width":34,"height":26,"linkWithCollision":false,"visible":1,"tilesetName":"media/tileset_details.png","repeat":false,"preRender":false,"distance":"1","tilesize":16,"foreground":false,"data":[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,137,137,137,0,0,0,0,0,0,0,0,137,137,137,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,137,137,137,0,0,0,0,0,0,0,0,137,137,137,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,137,137,137,0,0,0,0,0,0,0,0,137,137,137,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,137,137,137,0,0,0,0,0,0,0,0,137,137,137,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,137,137,137,0,0,0,0,0,0,0,0,137,137,137,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,137,137,137,0,0,0,0,0,0,0,0,137,137,137,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,137,137,137,0,0,0,0,0,0,0,0,137,137,137,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,137,0,0,0,0,0,0,0,0,137,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,137,0,0,0,0,0,0,0,0,137,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,137,0,0,0,0,0,0,0,0,137,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,137,0,0,0,0,0,0,0,0,137,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,178,0,0,0,0,0,0,0,0,0,0,0,0,0,0,179,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,137,137,137,137,137,0,0,0,0,137,137,137,137,137,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,137,140,137,0,0,0,0,137,142,137,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,137,0,137,0,0,0,0,137,0,137,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,137,0,137,0,0,0,0,137,0,137,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,137,0,137,0,0,0,0,137,0,137,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,178,0,0,0,0,0,0,0,0,0,0,0,0,0,0,179,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,137,137,137,137,137,0,0,0,0,137,137,137,137,137,0,0,0,0,0,0,0,0,0,0],[0,0,137,137,137,137,137,137,137,142,0,0,0,140,137,0,0,0,0,137,142,0,0,0,140,137,137,137,137,137,137,137,0,0],[0,0,137,137,137,137,137,137,137,0,0,0,0,0,137,0,0,0,0,137,0,0,0,0,0,137,137,137,137,137,137,137,0,0],[0,0,137,137,137,137,137,137,137,138,0,0,0,0,137,0,0,0,0,137,0,0,0,0,139,137,137,137,137,137,137,137,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]]}]};LevelSpawnersResources=[new ig.Image('media/tileset_walls.png'),new ig.Image('media/tileset_details.png'),new ig.Image('media/tileset_details.png')];});

// lib/plusplus/debug/menu.js
ig.baked=true;ig.module('plusplus.debug.menu').requires('dom.ready','impact.system','plusplus.core.plusplus').defines(function(){"use strict";ig.System.inject({run:function(){ig.debug.beforeRun();this.parent();ig.debug.afterRun();},setGameNow:function(gameClass){this.parent(gameClass);ig.debug.ready();}});ig.Debug=ig.Class.extend({options:{},panels:{},numbers:{},container:null,panelMenu:null,activePanel:null,debugTime:0,debugTickAvg:0.016,debugRealTime:Date.now(),init:function(){var style=ig.$new('link');style.rel='stylesheet';style.type='text/css';style.href=ig.prefix+'lib/impact/debug/debug.css';ig.$('body')[0].appendChild(style);this.container=ig.$new('div');this.container.className='ig_debug';ig.$('body')[0].appendChild(this.container);this.panelMenu=ig.$new('div');this.panelMenu.innerHTML='<div class="ig_debug_head">Impact.Debug:</div>';this.panelMenu.className='ig_debug_panel_menu';this.container.appendChild(this.panelMenu);this.numberContainer=ig.$new('div');this.numberContainer.className='ig_debug_stats';this.panelMenu.appendChild(this.numberContainer);if(window.console&&window.console.log&&window.console.assert){ig.log=console.log.bind?console.log.bind(console):console.log;ig.assert=console.assert.bind?console.assert.bind(console):console.assert;}
ig.show=this.showNumber.bind(this);},addNumber:function(name,width){var number=ig.$new('span');this.numberContainer.appendChild(number);this.numberContainer.appendChild(document.createTextNode(name));this.numbers[name]=number;},showNumber:function(name,number,width){if(!this.numbers[name]){this.addNumber(name,width);}
this.numbers[name].textContent=number;},addPanel:function(panelDef){var panel=new(panelDef.type)(panelDef.name,panelDef.label);if(panelDef.options){for(var i=0;i<panelDef.options.length;i++){var opt=panelDef.options[i];panel.addOption(new ig.DebugOption(opt.name,opt.object,opt.property));}}
this.panels[panel.name]=panel;panel.container.style.display='none';this.container.appendChild(panel.container);var menuItem=ig.$new('div');menuItem.className='ig_debug_menu_item';menuItem.textContent=panel.label;menuItem.addEventListener('click',(function(ev){this.togglePanel(panel);}).bind(this),false);panel.menuItem=menuItem;var inserted=false;for(var i=1;i<this.panelMenu.childNodes.length;i++){var cn=this.panelMenu.childNodes[i];if(cn.textContent>panel.label){this.panelMenu.insertBefore(menuItem,cn);inserted=true;break;}}
if(!inserted){this.panelMenu.appendChild(menuItem);}},showPanel:function(name){this.togglePanel(this.panels[name]);},togglePanel:function(panel){if(panel!=this.activePanel&&this.activePanel){this.activePanel.toggle(false);this.activePanel.menuItem.className='ig_debug_menu_item';this.activePanel=null;}
var dsp=panel.container.style.display;var active=(dsp!='block');panel.toggle(active);panel.menuItem.className='ig_debug_menu_item'+(active?' active':'');if(active){this.activePanel=panel;}},ready:function(){for(var p in this.panels){this.panels[p].ready();}},beforeRun:function(){var timeBeforeRun=Date.now();this.debugTickAvg=this.debugTickAvg*0.8+(timeBeforeRun-this.debugRealTime)*0.2;this.debugRealTime=timeBeforeRun;if(this.activePanel){this.activePanel.beforeRun();}},afterRun:function(){var frameTime=Date.now()-this.debugRealTime;var nextFrameDue=(1000/ig.system.fps)-frameTime;this.debugTime=this.debugTime*0.8+frameTime*0.2;if(this.activePanel){this.activePanel.afterRun();}
this.showNumber('ms',this.debugTime.toFixed(2));this.showNumber('fps',Math.round(1000/this.debugTickAvg));this.showNumber('draws',ig.Image.drawCount);if(ig.game&&ig.game.entities){this.showNumber('entities',ig.game.entities.length);}
ig.Image.drawCount=0;}});ig.DebugPanel=ig.Class.extend({active:false,container:null,options:[],panels:[],label:'',name:'',init:function(name,label){this.name=name;this.label=label;this.container=ig.$new('div');this.container.className='ig_debug_panel '+this.name;},toggle:function(active){this.active=active;this.container.style.display=active?'block':'none';},addPanel:function(panel){this.panels.push(panel);this.container.appendChild(panel.container);},addOption:function(option){this.options.push(option);this.container.appendChild(option.container);},ready:function(){},beforeRun:function(){},afterRun:function(){}});ig.DebugOption=ig.Class.extend({name:'',labelName:'',className:'ig_debug_option',label:null,mark:null,container:null,active:false,colors:{enabled:'#fff',disabled:'#444'},init:function(name,object,property){this.name=name;this.object=object;this.property=property;this.active=this.object[this.property];this.container=ig.$new('div');this.container.className='ig_debug_option';this.label=ig.$new('span');this.label.className='ig_debug_label';this.label.textContent=this.name;this.mark=ig.$new('span');this.mark.className='ig_debug_label_mark';this.container.appendChild(this.mark);this.container.appendChild(this.label);this.container.addEventListener('click',this.click.bind(this),false);this.setLabel();},setLabel:function(){this.mark.style.backgroundColor=this.active?this.colors.enabled:this.colors.disabled;},click:function(ev){this.active=!this.active;this.object[this.property]=this.active;this.setLabel();ev.stopPropagation();ev.preventDefault();return false;}});ig.debug=new ig.Debug();});

// lib/plusplus/debug/pathfinding-panel.js
ig.baked=true;ig.module('plusplus.debug.pathfinding-panel').requires('plusplus.debug.menu','plusplus.abstractities.character','plusplus.helpers.utilsmath').defines(function(){"use strict";var _um=ig.utilsmath;ig.Character.inject({draw:function(){this.parent();if(ig.Character._debugShowPaths&&this.path){var i;var sys=ig.system;var screen=ig.game.screen;var context=sys.context;var mapTilesize=ig.game.collisionMap.tilesize;var color='rgba( 255, 0, 0, 0.5 )';var radius=2*ig.system.scale;context.strokeStyle=color;context.lineWidth=1*sys.scale;context.beginPath();context.moveTo(sys.getDrawPos(this.pos.x+this.size.x*0.5-screen.x),sys.getDrawPos(this.pos.y+this.size.y*0.5-screen.y));for(i=this.path.length-1;i>=0;i--){context.lineTo(sys.getDrawPos(this.path[i].x-screen.x),sys.getDrawPos(this.path[i].y-screen.y));}
context.stroke();context.closePath();if(ig.Character._debugShowWaypoints){for(i=this.path.length-1;i>=0;i--){context.fillStyle=color;context.beginPath();context.arc(ig.system.getDrawPos(this.path[i].x-screen.x),ig.system.getDrawPos(this.path[i].y-screen.y),radius,0,_um.TWOPI);context.fill();}}}}});ig.Character._debugShowPaths=false;ig.Character._debugShowWaypoints=false;ig.debug.addPanel({type:ig.DebugPanel,name:'pathfinding-debug',label:'A*',options:[{name:'Show paths',object:ig.Character,property:'_debugShowPaths'},{name:'Show waypoints',object:ig.Character,property:'_debugShowWaypoints'}]});});

// lib/plusplus/debug/entities-panel.js
ig.baked=true;ig.module('plusplus.debug.entities-panel').requires('plusplus.core.config','plusplus.core.game','plusplus.core.entity','plusplus.debug.menu').defines(function(){"use strict";var _c=ig.CONFIG;ig.GameExtended.inject({draw:function(){this.parent();this._debugDraw();},_debugDraw:function(){for(var i=0,il=this.layers.length;i<il;i++){var layer=this.layers[i];var items=layer.items;for(var j=0,jl=items.length;j<jl;j++){var item=items[j];var context=ig.system.context;var screenX;var screenY;if(item.fixed){screenX=0;screenY=0;}
else{screenX=this.screen.x;screenY=this.screen.y;}
if(ig.EntityExtended._debugShowVertices&&item.vertices){var vertices=item.vertices;for(var i=0,il=vertices.length;i<il;i++){this._debugDrawLine(item,this._debugColors.vertices,item.getCenterX()+vertices[i].x,item.getCenterY()+vertices[i].y,item.getCenterX()+vertices[i===il-1?0:i+1].x,item.getCenterY()+vertices[i===il-1?0:i+1].y);}}
if(ig.EntityExtended._debugShowBounds&&item.pos){context.strokeStyle=this._debugColors.boxes;context.lineWidth=1.0;context.strokeRect(ig.system.getDrawPos(item.pos.x-screenX)-0.5,ig.system.getDrawPos(item.pos.y-screenY)-0.5,item.size.x*(item.scale||ig.system.scale),item.size.y*(item.scale||ig.system.scale));}
if(ig.EntityExtended._debugShowBoundsDraw&&item.posDraw){context.strokeStyle=this._debugColors.boxesDraw;context.lineWidth=1.0;context.strokeRect(ig.system.getDrawPos(item.posDraw.x-screenX)-0.5,ig.system.getDrawPos(item.posDraw.y-screenY)-0.5,item.sizeDraw.x*(item.scale||ig.system.scale),item.sizeDraw.y*(item.scale||ig.system.scale));}
if(ig.EntityExtended._debugShowVelocities&&item.pos&&item.size){var x=item.pos.x+item.size.x/2;var y=item.pos.y+item.size.y/2;this._debugDrawLine(item,this._debugColors.velocities,x,y,x+item.vel.x,y+item.vel.y);}
if(ig.EntityExtended._debugShowNames&&item.pos&&item.size){context.fillStyle=this._debugColors.names;context.fillText("[ "+item.layerName+' | '+item.id+" ]"+(item.name?" "+item.name:''),ig.system.getDrawPos(item.pos.x-screenX),ig.system.getDrawPos(item.pos.y-screenY));if(typeof(item.target)=='object'){for(var t in item.target){var ent=ig.game.namedEntities[item.target[t]];if(ent){this._debugDrawLine(item,this._debugColors.names,item.pos.x+item.size.x*0.5,item.pos.y+item.size.y*0.5,ent.pos.x+ent.size.x*0.5,ent.pos.y+ent.size.y*0.5);}}}}}
if(layer.debugPhysics){layer.debugPhysics.draw();}}},_debugColors:{names:'#fff',velocities:'#0f0',boxes:'#0066FF',boxesDraw:'#00FF77',vertices:'#f00'},_debugDrawLine:function(item,color,sx,sy,dx,dy){var screenX;var screenY;if(item.fixed){screenX=0;screenY=0;}
else{screenX=this.screen.x;screenY=this.screen.y;}
ig.system.context.strokeStyle=color;ig.system.context.lineWidth=1.0;ig.system.context.beginPath();ig.system.context.moveTo(ig.system.getDrawPos(sx-screenX),ig.system.getDrawPos(sy-screenY));ig.system.context.lineTo(ig.system.getDrawPos(dx-screenX),ig.system.getDrawPos(dy-screenY));ig.system.context.stroke();ig.system.context.closePath();}});ig.EntityExtended._debugEnableChecks=true;ig.EntityExtended._debugShowVelocities=false;ig.EntityExtended._debugShowNames=false;ig.EntityExtended._debugShowVertices=false;ig.EntityExtended._debugShowBounds=false;ig.EntityExtended._debugShowBoundsDraw=false;ig.EntityExtended.oldCheckPair=ig.EntityExtended.checkPair;ig.EntityExtended.checkPair=function(a,b){if(!ig.EntityExtended._debugEnableChecks){return;}
ig.EntityExtended.oldCheckPair(a,b);};ig.debug.addPanel({type:ig.DebugPanel,name:'entities',label:'Entities',options:[{name:'Show Names & Targets',object:ig.EntityExtended,property:'_debugShowNames'},{name:'Checks & Collisions',object:ig.EntityExtended,property:'_debugEnableChecks'},{name:'Show Velocities',object:ig.EntityExtended,property:'_debugShowVelocities'},{name:'Show Collision Boxes',object:ig.EntityExtended,property:'_debugShowBounds'},{name:'Show Drawing Boxes',object:ig.EntityExtended,property:'_debugShowBoundsDraw'},{name:'Show Vertex Boxes',object:ig.EntityExtended,property:'_debugShowVertices'}]});});

// lib/plusplus/debug/maps-panel.js
ig.baked=true;ig.module('plusplus.debug.maps-panel').requires('plusplus.debug.menu','plusplus.core.game','plusplus.core.background-map').defines(function(){"use strict";ig.GameExtended.inject({buildLevel:function(){this.parent.apply(this,arguments);ig.debug.panels.maps.load(this);},unloadLevel:function(){this.parent.apply(this,arguments);ig.debug.panels.maps.maps=[];}});ig.DebugMapsPanel=ig.DebugPanel.extend({maps:[],mapScreens:[],init:function(name,label){this.parent(name,label);this.load();},load:function(game){this.options=[];this.panels=[];if(!game){this.container.innerHTML='<em>No Maps Loaded</em>';return;}
this.maps=[];for(var i=0,il=game.layers.length;i<il;i++){var layer=game.layers[i];if(layer.numBackgroundMaps>0){for(var j=0,jl=layer.items.length;j<jl;j++){var item=layer.items[j];if(item instanceof ig.BackgroundMap){this.maps.push(item);}}}}
if(this.maps.length===0){this.container.innerHTML='<em>No Maps Loaded</em>';return;}
this.mapScreens=[];this.container.innerHTML='';for(var m=0;m<this.maps.length;m++){var map=this.maps[m];var subPanel=new ig.DebugPanel(m,'Layer '+m);var head=new ig.$new('strong');head.textContent=m+': '+map.tiles.path;subPanel.container.appendChild(head);subPanel.addOption(new ig.DebugOption('Enabled',map,'enabled'));subPanel.addOption(new ig.DebugOption('Pre Rendered',map,'preRender'));subPanel.addOption(new ig.DebugOption('Show Chunks',map,'debugChunks'));this.generateMiniMap(subPanel,map,m);this.addPanel(subPanel);}},generateMiniMap:function(panel,mapBase,id){var s=ig.system.scale;var maps=[mapBase];if(mapBase.mergedMaps){maps=maps.concat(mapBase.mergedMaps);}
var totalMergedWidth=0;var totalMergedHeight=0;for(var i=0,il=maps.length;i<il;i++){var map=maps[i];totalMergedWidth=Math.max(totalMergedWidth,map.width);totalMergedHeight=Math.max(totalMergedHeight,map.height);}
var mapCanvas=ig.$new('canvas');mapCanvas.width=totalMergedWidth*s;mapCanvas.height=totalMergedHeight*s;var ctx=mapCanvas.getContext('2d');if(ig.game.clearColor){ctx.fillStyle=ig.game.clearColor;ctx.fillRect(0,0,mapCanvas.width,mapCanvas.height);}
for(var i=0,il=maps.length;i<il;i++){var map=maps[i];if(!map.tiles.ignoreSystemScale&&map.tiles._scale!==s){map.tiles.resize(s);}
var ts=ig.$new('canvas');var tsctx=ts.getContext('2d');var w=map.tiles.width*s;var h=map.tiles.height*s;var ws=w/map.tilesize;var hs=h/map.tilesize;ts.width=ws;ts.height=hs;tsctx.drawImage(map.tiles.data,0,0,w,h,0,0,ws,hs);var tile=0;for(var x=0;x<map.width;x++){for(var y=0;y<map.height;y++){if((tile=map.data[y][x])){ctx.drawImage(ts,Math.floor(((tile-1)*s)%ws),Math.floor((tile-1)*s/ws)*s,s,s,x*s,y*s,s,s);}}}}
var mapContainer=ig.$new('div');mapContainer.className='ig_debug_map_container';mapContainer.style.width=map.width*s+'px';mapContainer.style.height=map.height*s+'px';var mapScreen=ig.$new('div');mapScreen.className='ig_debug_map_screen';mapScreen.style.width=((ig.system.width/map.tilesize)*s-2)+'px';mapScreen.style.height=((ig.system.height/map.tilesize)*s-2)+'px';this.mapScreens[id]=mapScreen;mapContainer.appendChild(mapCanvas);mapContainer.appendChild(mapScreen);panel.container.appendChild(mapContainer);},afterRun:function(){var s=ig.system.scale;for(var m=0;m<this.maps.length;m++){var map=this.maps[m];var screen=this.mapScreens[m];if(!map||!screen){continue;}
var x=map.scroll.x/map.tilesize;var y=map.scroll.y/map.tilesize;if(map.repeat){x%=map.width;y%=map.height;}
screen.style.left=(x*s)+'px';screen.style.top=(y*s)+'px';}}});ig.debug.addPanel({type:ig.DebugMapsPanel,name:'maps',label:'Background Maps'});});

// lib/plusplus/debug/graph-panel.js
ig.baked=true;ig.module('plusplus.debug.graph-panel').requires('plusplus.debug.menu','impact.system','plusplus.core.game','impact.image').defines(function(){"use strict";ig.GameExtended.inject({draw:function(){ig.graph.beginClock('draw');this.parent();ig.graph.endClock('draw');},update:function(){ig.graph.beginClock('update');this.parent();ig.graph.endClock('update');},checkEntities:function(){ig.graph.beginClock('checks');this.parent();ig.graph.endClock('checks');}});ig.DebugGraphPanel=ig.DebugPanel.extend({clocks:{},marks:[],textY:0,height:128,ms:64,timeBeforeRun:0,init:function(name,label){this.parent(name,label);this.mark16ms=(this.height-(this.height/this.ms)*16).round();this.mark33ms=(this.height-(this.height/this.ms)*33).round();this.msHeight=this.height/this.ms;this.graph=ig.$new('canvas');this.graph.width=window.innerWidth;this.graph.height=this.height;this.container.appendChild(this.graph);this.ctx=this.graph.getContext('2d');this.ctx.fillStyle='#444';this.ctx.fillRect(0,this.mark16ms,this.graph.width,1);this.ctx.fillRect(0,this.mark33ms,this.graph.width,1);this.addGraphMark('16ms',this.mark16ms);this.addGraphMark('33ms',this.mark33ms);this.addClock('draw','Draw','#13baff');this.addClock('update','Entity Update','#bb0fff');this.addClock('checks','Entity Checks & Collisions','#a2e908');this.addClock('lag','System Lag','#f26900');ig.mark=this.mark.bind(this);ig.graph=this;},addGraphMark:function(name,height){var span=ig.$new('span');span.className='ig_debug_graph_mark';span.textContent=name;span.style.top=height.round()+'px';this.container.appendChild(span);},addClock:function(name,description,color){var mark=ig.$new('span');mark.className='ig_debug_legend_color';mark.style.backgroundColor=color;var number=ig.$new('span');number.className='ig_debug_legend_number';number.appendChild(document.createTextNode('0'));var legend=ig.$new('span');legend.className='ig_debug_legend';legend.appendChild(mark);legend.appendChild(document.createTextNode(description+' ('));legend.appendChild(number);legend.appendChild(document.createTextNode('ms)'));this.container.appendChild(legend);this.clocks[name]={description:description,color:color,current:0,start:Date.now(),avg:0,html:number};},beginClock:function(name,offset){this.clocks[name].start=Date.now()+(offset||0);},endClock:function(name){var c=this.clocks[name];c.current=Math.round(Date.now()-c.start);c.avg=c.avg*0.8+c.current*0.2;},mark:function(msg,color){if(this.active){this.marks.push({msg:msg,color:(color||'#fff')});}},beforeRun:function(){this.endClock('lag');this.timeBeforeRun=Date.now();},afterRun:function(){var frameTime=Date.now()-this.timeBeforeRun;var nextFrameDue=(1000/ig.system.fps)-frameTime;this.beginClock('lag',Math.max(nextFrameDue,0));var x=this.graph.width-1;var y=this.height;this.ctx.drawImage(this.graph,-1,0);this.ctx.fillStyle='#000';this.ctx.fillRect(x,0,1,this.height);this.ctx.fillStyle='#444';this.ctx.fillRect(x,this.mark16ms,1,1);this.ctx.fillStyle='#444';this.ctx.fillRect(x,this.mark33ms,1,1);for(var ci in this.clocks){var c=this.clocks[ci];c.html.textContent=c.avg.toFixed(2);if(c.color&&c.current>0){this.ctx.fillStyle=c.color;var h=c.current*this.msHeight;y-=h;this.ctx.fillRect(x,y,1,h);c.current=0;}}
this.ctx.textAlign='right';this.ctx.textBaseline='top';this.ctx.globalAlpha=0.5;for(var i=0;i<this.marks.length;i++){var m=this.marks[i];this.ctx.fillStyle=m.color;this.ctx.fillRect(x,0,1,this.height);if(m.msg){this.ctx.fillText(m.msg,x-1,this.textY);this.textY=(this.textY+8)%32;}}
this.ctx.globalAlpha=1;this.marks=[];}});ig.debug.addPanel({type:ig.DebugGraphPanel,name:'graph',label:'Performance'});});

// lib/plusplus/debug/debug.js
ig.baked=true;ig.module('plusplus.debug.debug').requires('plusplus.debug.pathfinding-panel','plusplus.debug.entities-panel','plusplus.debug.maps-panel','plusplus.debug.graph-panel').defines(function(){"use strict";});

// lib/game/main.js
ig.baked=true;ig.module('game.main').requires('plusplus.core.plusplus','game.levels.title','game.levels.player','game.levels.camera','game.levels.lighting','game.levels.core','game.levels.abilities','game.levels.creatures','game.levels.ui','game.levels.particles','game.levels.obstacles','game.levels.conversations','game.levels.spawners','plusplus.debug.debug').defines(function(){"use strict";var _c=ig.CONFIG;var game=ig.GameExtended.extend({clearColor:"#111111",shapesPasses:[{ignoreSolids:true,ignoreOneWays:true},{ignoreClimbable:true,discardBoundaryInner:true,retainBoundaryOuter:false}],init:function(){this.parent();this.loadLevel(ig.global.LevelTitle);},buildLevel:function(){this.parent();var player=this.getPlayer();if(!player){var title=this.namedEntities["title"];if(title&&this.camera){this.camera.follow(title,true,true);}}},inputStart:function(){this.parent();ig.input.bind(ig.KEY.X,'jump');ig.input.bind(ig.KEY.C,'tap');},inputEnd:function(){this.parent();ig.input.unbind(ig.KEY.X,'jump');ig.input.unbind(ig.KEY.C,'tap');}});ig.main('#canvas',game,60,_c.GAME_WIDTH,_c.GAME_HEIGHT,_c.SCALE,ig.LoaderExtended);});